<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æµè§ˆå™¨çš„å¤šçº¿ç¨‹</title>
      <link href="/2021/04/12/2021/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
      <url>/2021/04/12/2021/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h4 id="è¿›ç¨‹ï¼Œçº¿ç¨‹"><a href="#è¿›ç¨‹ï¼Œçº¿ç¨‹" class="headerlink" title="è¿›ç¨‹ï¼Œçº¿ç¨‹"></a>è¿›ç¨‹ï¼Œçº¿ç¨‹</h4><p>é¦–å…ˆæˆ‘ä»¬æ€è€ƒä¸€ä¸‹è¿›ç¨‹ä¸çº¿ç¨‹çš„å…³ç³»ä¸åŒºåˆ«ï¼š</p><ol><li>ä¸€ä¸ªè¿›ç¨‹ç”±ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç»„æˆï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥ååŒå·¥ä½œã€‚</li><li>è¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼ŒåŒä¸€è¿›ç¨‹ä¸‹å„ä¸ªçº¿ç¨‹å…±äº«ç¨‹åºçš„å†…å­˜åŠä¸€äº›è¿›ç¨‹çº§çš„èµ„æºã€‚</li><li>çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢æ¯”è¿›ç¨‹é—´çš„åˆ‡æ¢æ›´å¿«ã€‚</li></ol><h4 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h4><a id="more"></a><p>æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ã€‚</p><p><img src="/2021/04/12/2021/æµè§ˆå™¨çš„å¤šçº¿ç¨‹/NO1.png" alt="NO1" title="NO1"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹çš„ä»–ä»¬åˆ†åˆ«æ‹¥æœ‰ä¸åŒçš„è¿›ç¨‹IDã€‚</p><ol><li>æµè§ˆå™¨è¿›ç¨‹(Browser è¿›ç¨‹):æµè§ˆå™¨è¿›ç¨‹åªæœ‰ä¸€ä¸ªï¼Œç”¨äºç®¡ç†æ ‡ç­¾é¡µã€çª—å£å’Œæµè§ˆå™¨æœ¬èº«ã€‚è¿™ä¸ªè¿›ç¨‹åŒæ—¶è´Ÿè´£å¤„ç†æ‰€æœ‰è·Ÿç£ç›˜ã€ç½‘ç»œã€ç”¨æˆ·è¾“å…¥å’Œæ˜¾ç¤ºçš„äº¤äº’ï¼Œç„¶è€Œå®ƒä¸åˆ†æå’Œæ¸²æŸ“ä»»ä½•ç½‘é¡µå†…å®¹ã€‚</li><li>ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹:è§ˆå™¨è¿›ç¨‹åŒæ ·ä¸ºå¤„äºä½¿ç”¨çŠ¶æ€çš„æ¯ç§ç±»å‹çš„æ’ä»¶åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚:Flashã€Quicktime æˆ– Adobe readerã€‚è¿™äº›è¿›ç¨‹ä»…ä»…åŒ…å«æ’ä»¶æœ¬èº«ä»¥åŠå’Œæµè§ˆå™¨è¿›ç¨‹ã€æ¸²æŸ“å™¨è¿›ç¨‹äº¤äº’çš„èƒ¶æ°´ä»£ç ã€‚</li><li>GPU è¿›ç¨‹:æœ€å¤šä¸€ä¸ªï¼Œç”¨äº 3D ç»˜åˆ¶ç­‰</li><li>æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹(æµè§ˆå™¨å†…æ ¸)(Renderer è¿›ç¨‹ï¼Œå†…éƒ¨æ˜¯å¤šçº¿ç¨‹çš„):æ¸²æŸ“å™¨è¿›ç¨‹ä¼šå­˜åœ¨å¤šä¸ªï¼Œæ¯ä¸ªéƒ½è´Ÿè´£æ¸²æŸ“ç½‘é¡µã€‚æ¸²æŸ“å™¨è¿›ç¨‹ä¸­åŒ…å«ç”¨äºæ“ä½œ HTMLï¼ŒJavaScriptï¼ŒCSSï¼Œå›¾ç‰‡å’Œå…¶ä»–å†…å®¹çš„å¤æ‚çš„é€»è¾‘ã€‚æˆ‘ä»¬ä½¿ç”¨äº†ä¹ŸåŒæ ·è¢« Apple Safari æµè§ˆå™¨ä½¿ç”¨çš„å¼€æºçš„ WebKit æ¸²æŸ“å¼•æ“å®ç°ä»¥ä¸ŠåŠŸèƒ½ã€‚æ¯ä¸ªæ¸²æŸ“è¿›ç¨‹éƒ½è¿è¡Œåœ¨æ²™ç®±å†…ï¼Œè¿™æ„å‘³ç€å®ƒå¯¹ç£ç›˜ã€ç½‘ç»œå’Œæ˜¾ç¤ºå™¨æ²¡æœ‰ç›´æ¥çš„è®¿é—®æƒé™ã€‚æ‰€æœ‰è·Ÿç½‘ç»œåº”ç”¨çš„äº¤äº’ï¼ŒåŒ…æ‹¬ç”¨æˆ·è¾“å…¥äº‹ä»¶å’Œå±å¹•ç»˜åˆ¶éƒ½å¿…é¡»é€šè¿‡æµè§ˆå™¨è¿›ç¨‹ã€‚è¿™å¯ä»¥è®©æµè§ˆå™¨è¿›ç¨‹ç›‘è§†æ¸²æŸ“å™¨çš„å¯ç–‘è¡Œä¸ºï¼Œä¸€æ—¦å‘ç°å…¶ä»äº‹ç ´åæ´»åŠ¨å°±å°†å…¶ç»ˆæ­¢ã€‚</li></ol><p>å½“ç„¶ä½œä¸ºå¼€å‘ï¼Œæˆ‘ä»¬æœ€å…³å¿ƒçš„æ›´æ˜¯æ¸²æŸ“è¿›ç¨‹ï¼Œé¡µé¢æ¸²æŸ“ï¼ŒJSæ‰§è¡Œï¼Œäº‹ä»¶éƒ½åœ¨æ­¤ä¹‹ä¸Šå®Œæˆã€‚</p><h4 id="æ¸²æŸ“è¿›ç¨‹"><a href="#æ¸²æŸ“è¿›ç¨‹" class="headerlink" title="æ¸²æŸ“è¿›ç¨‹"></a>æ¸²æŸ“è¿›ç¨‹</h4><p>åŒ…å«äº†ä»¥ä¸‹<em>çº¿ç¨‹</em>ï¼š</p><ol><li><p>GUIæ¸²æŸ“çº¿ç¨‹è´Ÿè´£æ¸²æŸ“æµè§ˆå™¨ç•Œé¢ï¼Œè§£æHTMLï¼ŒCSSï¼Œrenderæ ‘ï¼Œå¸ƒå±€ç»˜åˆ¶ç­‰ï¼Œå½“ç•Œé¢é‡ç»˜æˆ–è€…å›æµæ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šæ‰§è¡Œã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒGUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œå½“JSå¼•æ“æ‰§è¡Œæ—¶GUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ŒGUIæ›´æ–°ä¼šä¿å­˜ç­‰å¾…JSå¼•æ“ç©ºé—²æ—¶æ‰§è¡Œã€‚<br>æ³¨ï¼šğŸ‘‰ <a href="/2020/02/03/2020/é‡ç»˜å›æµ">é‡ç»˜å›æµçŸ¥è¯†ç‚¹å¤ä¹ </a></p></li><li><p>JSå¼•æ“çº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºJSå†…æ ¸ï¼Œè´Ÿè´£JSè„šæœ¬ï¼ŒJSå¼•æ“ä¸€ç›´ç­‰å¾…ä»»åŠ¡é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œç„¶åè¿›è¡Œå¤„ç†ï¼Œä¸€ä¸ªTabé¡µä¸­ï¼Œæ— è®ºå¦‚ä½•åªæœ‰ä¸€ä¸ªJSçº¿ç¨‹åœ¨è¿è¡Œï¼Œå¦‚æœJSçº¿ç¨‹è¿è¡Œæ—¶é—´è¿‡é•¿ï¼Œä¼šé€ æˆé¡µé¢æ¸²æŸ“å¡é¡¿é˜»å¡ï¼Œè¿™ä¸ªåœ¨debuggeræ–­ç‚¹æ—¶ï¼Œå°±å¯ä»¥å¾ˆæ˜æ˜¾å¯Ÿè§‰ã€‚</p></li><li>äº‹ä»¶è§¦å‘çº¿ç¨‹å±äºæµè§ˆå™¨è€Œä¸æ˜¯JSå¼•æ“ï¼Œç”¨äºæ§åˆ¶äº‹ä»¶å¾ªç¯ï¼Œä¾‹å¦‚ï¼Œå®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚<br>æ³¨ï¼šğŸ‘‰ <a href="/2020/06/12/2020/EventLoop">ä»»åŠ¡é˜Ÿåˆ—EventLoopå¤ä¹ </a></li><li>å®šæ—¶è§¦å‘å™¨çº¿ç¨‹ï¼ŒsetIntervalä¸setTimeoutæ‰€åœ¨çš„çº¿ç¨‹å®šæ—¶è®¡æ•°å™¨ä¸æ˜¯ç”±JSå¼•æ“å†è®¡æ•°çš„ï¼Œå› æ­¤æ˜¯æœ‰å•ç‹¬çº¿ç¨‹æ¥è®¡æ—¶ï¼Œå¹¶ä¸”è§¦å‘ï¼ˆè®¡æ—¶å®Œæ¯•åï¼Œæ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…JSå¼•æ“æ‰§è¡Œï¼‰ï¼Œæ³¨ï¼šsetTimeoutä½äº4msäº‹ä»¶é—´éš”éƒ½ç®—ä¸º4msã€‚</li><li>å¼‚æ­¥HTTPçº¿ç¨‹ï¼ŒXMLHTTPè¿æ¥åï¼Œä¼šé€šè¿‡æµè§ˆå™¨å¼€ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚ï¼Œæ£€æŸ¥åˆ°çŠ¶æ€å˜æ›´åï¼Œä¼šè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå°†å›è°ƒåŠ å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç”±JSå¼•æ“æ‰§è¡Œã€‚</li></ol><h4 id="çº¿ç¨‹ä¸­çš„å…³ç³»"><a href="#çº¿ç¨‹ä¸­çš„å…³ç³»" class="headerlink" title="çº¿ç¨‹ä¸­çš„å…³ç³»"></a>çº¿ç¨‹ä¸­çš„å…³ç³»</h4><h5 id="GUIçº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹çš„äº’æ–¥"><a href="#GUIçº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹çš„äº’æ–¥" class="headerlink" title="GUIçº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹çš„äº’æ–¥"></a>GUIçº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹çš„äº’æ–¥</h5><p>å¦‚æœä¸¤è€…ä¸äº’èµ¤ï¼Œç”±äºJSå¯æ“ä½œDOMï¼Œå¦‚æœä¸¤è€…åŒæ—¶è¿è¡Œï¼Œä¼šé€ æˆçº¿ç¨‹å‰åè·å¾—çš„å…ƒç´ æ•°æ®å¯èƒ½ä¸ä¸€è‡´ã€‚</p><h5 id="webWorker"><a href="#webWorker" class="headerlink" title="webWorker"></a>webWorker</h5><ol><li>åˆ›å»ºWorkeræ—¶ï¼ŒJSå¼•æ“å‘æµè§ˆå™¨ç”³è¯·å¼€ä¸€ä¸ªå­çº¿ç¨‹ï¼ˆæµè§ˆå™¨å¼€çš„ï¼‰ï¼ŒJSçº¿ç¨‹ä¸workerçº¿ç¨‹é—´é€šè¿‡ç‰¹å®šæ–¹å¼é€šä¿¡ï¼ŒpostMessageï¼ŒonMessageï¼Œéœ€è¦é€šè¿‡åºåˆ—åŒ–å¯¹è±¡ä¸çº¿ç¨‹äº¤äº’ã€‚</li></ol><h5 id="sharedWorker"><a href="#sharedWorker" class="headerlink" title="sharedWorker"></a>sharedWorker</h5><ol><li>WebWorker åªå±äºæŸä¸ªé¡µé¢ï¼Œä¸ä¼šå’Œå…¶ä»–é¡µé¢çš„ Render è¿›ç¨‹(æµè§ˆå™¨å†…æ ¸è¿›ç¨‹)å…±äº«</li><li>æœ¬è´¨ä¸Šå°±æ˜¯è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ã€‚SharedWorker ç”±ç‹¬ç«‹çš„è¿›ç¨‹ç®¡ç†ï¼ŒWebWorker åªæ˜¯å±äº render è¿›ç¨‹ä¸‹çš„ä¸€ä¸ªçº¿ç¨‹ã€‚</li></ol><h4 id="æµè§ˆå™¨æ¸²æŸ“æµç¨‹"><a href="#æµè§ˆå™¨æ¸²æŸ“æµç¨‹" class="headerlink" title="æµè§ˆå™¨æ¸²æŸ“æµç¨‹"></a>æµè§ˆå™¨æ¸²æŸ“æµç¨‹</h4><p><em>ä»ä½ è¾“å…¥URLåˆ°é¡µé¢ç”Ÿæˆï¼Œç»å†äº†ä»€ä¹ˆ ï¼Ÿ</em><br>å¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>è¾“å…¥url</li><li>æµè§ˆå™¨ä¸»çº¿ç¨‹æ¥ç®¡</li><li>dnsæŸ¥è¯¢IPï¼Œä¼šé€šè¿‡ç¼“å­˜æŸ¥ï¼ŒæŸ¥æµè§ˆå™¨ç¼“å­˜ï¼Œç³»ç»Ÿç¼“å­˜ï¼Œè·¯ç”±å™¨ç¼“å­˜ç›´è‡³è¯·æ±‚åˆ°</li><li>å‘é€httpè¯·æ±‚</li><li>ä¸‰æ¬¡ç¡®ç«‹æ¡æ‰‹</li><li>å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥</li><li>å°†è¿”å›å†…å®¹äº¤ç»™Renderè¿›ç¨‹</li><li>å¼€å§‹æ¸²æŸ“</li><li>è§£æhtmlæ„å»ºdomæ ‘ï¼Œæ„å»ºCSSæ ‘ï¼Œä¸¤è€…åˆä¸ºrenderæ ‘</li><li>ç»˜åˆ¶renderæ ‘</li></ol><p>æ³¨ï¼šğŸ‘‰ <a href="/2020/07/09/2020/ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹">ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹å¤ä¹ </a></p><p>å‡ ä¸ªæ¦‚å¿µï¼š</p><ul><li>DOM Tree: æµè§ˆå™¨å°† HTML è§£ææˆæ ‘å½¢çš„æ•°æ®ç»“æ„</li><li>CSS Rule Tree: æµè§ˆå™¨å°† CSS è§£ææˆæ ‘å½¢çš„æ•°æ®ç»“æ„</li><li>Render Tree: DOM å’Œ CSSOM åˆå¹¶åç”Ÿæˆ Render Tree</li></ul><h4 id="CSSåŠ è½½"><a href="#CSSåŠ è½½" class="headerlink" title="CSSåŠ è½½"></a>CSSåŠ è½½</h4><p>CSSæ˜¯ç”±å•ç‹¬çš„ä¸‹è½½çº¿ç¨‹å¼‚æ­¥ä¸‹è½½çš„ã€‚<br>æ‰€æœ‰CSSä¸ä¼šé˜»å¡DOMæ ‘è§£æï¼Œä½†ä¼šé˜»å¡Renderæ ‘æ¸²æŸ“ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€é•¿å›æ–‡å­ä¸²</title>
      <link href="/2021/04/12/2021/%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2/"/>
      <url>/2021/04/12/2021/%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<p><em>åŸé¢˜é“¾æ¥ï¼šğŸ‘‰ï¼š<a href="https://leetcode-cn.com/problems/longest-palindromic-substring/" target="_blank" rel="noopener">æœ€é•¿å›æ–‡å­ä¸²</a></em></p><p>é¢˜ç›®æè¿°ï¼šç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²<code>s</code>ï¼Œæ‰¾åˆ°<code>s</code>çš„æœ€é•¿å›æ–‡å­ä¸²ã€‚</p><p>ç¤ºä¾‹ï¼š<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="attr">s</span> = <span class="string">"babad"</span></span><br><span class="line">è¾“å‡ºï¼š<span class="string">"bab"</span></span><br><span class="line">è§£é‡Šï¼š<span class="string">"aba"</span> åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚</span><br></pre></td></tr></table></figure></p><p>æœ¬ç¯‡æä¾›äº†ä¸‰ç§è§£æ³•ï¼š</p><ol><li>æš´åŠ›è§£æ³•</li><li>ä¸­å¿ƒæ‰©å±•</li><li>åŠ¨æ€è§„åˆ’</li></ol><a id="more"></a><h4 id="æš´åŠ›è§£æ³•"><a href="#æš´åŠ›è§£æ³•" class="headerlink" title="æš´åŠ›è§£æ³•"></a>æš´åŠ›è§£æ³•</h4><p>é¦–å…ˆï¼Œé¢˜ç›®æ˜¯å¯ä»¥å°è¯•ä½¿ç”¨æš´åŠ›è§£çš„ã€‚</p><blockquote><p>æ€è·¯ï¼šæš´åŠ›è§£çš„æ€è·¯æ˜¯å®¹æ˜“æƒ³åˆ°çš„ï¼Œæˆ‘ä»¬é‡‡ç”¨éå†ä¸æ–­å–å‡ºå­—ç¬¦ä¸²<code>s</code>çš„å­ä¸²ï¼Œå¯¹å–å‡ºçš„å­ä¸²è¿›è¡Œå›æ–‡åˆ¤æ–­ï¼Œæ€ä¹ˆåˆ¤æ–­å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è®²å–å‡ºçš„å­ä¸²å¯¹åŠåˆ‡ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸æœ€åä¸€ä¸ªå¯¹æ¯”ï¼Œç¬¬äºŒä¸ªä¸å€’æ•°ç¬¬äºŒä¸ªå¯¹æ¯”â€¦</p></blockquote><ol><li>å¾ªç¯å–å‡ºå­ä¸²</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> longestPalindrome = <span class="function">(<span class="params">s</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> max = <span class="number">0</span>; <span class="comment">// è®°å½•æœ€é•¿çš„å›æ–‡å­ä¸²é•¿åº¦</span></span><br><span class="line">    <span class="keyword">let</span> maxStr = <span class="string">''</span>; <span class="comment">// è®°å½•æœ€é•¿çš„å›æ–‡å­ä¸²</span></span><br><span class="line">    <span class="keyword">let</span> sLen = s.length; <span class="comment">// å­—ç¬¦ä¸²çš„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; sLen; i++ ) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j = i+<span class="number">1</span>; j &lt;= sLen; j++) &#123;</span><br><span class="line">            <span class="keyword">let</span> sonStr = s.slice(i, j);</span><br><span class="line">            <span class="keyword">if</span>(sonStr.length &gt; max &amp;&amp; isPalindrome(sonStr)) &#123; </span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                * isPalindromeæ–¹æ³•ç”¨äºåˆ¤æ–­æ˜¯å¦å›æ–‡å­ä¸²ï¼Œå¹¶ä¸”é•¿åº¦å¤§äºmaxçš„æƒ…å†µä¸‹æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">                * æœ‰å¿…è¦å…ˆå¯¹æ¯”é•¿åº¦ï¼Œå¦‚æœå­ä¸²é•¿åº¦éƒ½ä¸å¦‚æœ€é•¿å›æ–‡ï¼Œåˆ™å‹æ ¹æ²¡å¿…è¦è¿›å…¥å›æ–‡çš„åˆ¤æ–­æ–¹æ³•ğŸŒŸ</span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line">                 max = sonStr.length;</span><br><span class="line">                 maxStr = sonStr;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxStr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ¤æ–­æ˜¯å¦å›æ–‡</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> isPalindrome = <span class="function">(<span class="params">sonStr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> enmuLen = sonStr.length; <span class="comment">// å¯¹åŠåˆ‡ </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; enmuLen / <span class="number">2</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(sonStr.charAt(i) !== sonStr.charAt(enmuLen<span class="number">-1</span>-i)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸­å¿ƒæ‰©å±•æ³•"><a href="#ä¸­å¿ƒæ‰©å±•æ³•" class="headerlink" title="ä¸­å¿ƒæ‰©å±•æ³•"></a>ä¸­å¿ƒæ‰©å±•æ³•</h4><blockquote><p>æ€è·¯ï¼šæˆ‘ä»¬åªè¦éå†ï¼Œæ¯æ¬¡å–å‡ºä¸€ä¸ªä¸­å¿ƒï¼Œä»ä¸­å¿ƒèµ·å§‹å‰åå¯»æ‰¾ï¼Œå¯¹æ¯”å­—ç¬¦æƒ…å†µã€‚</p></blockquote><p><img src="/2021/04/12/2021/æœ€é•¿å›æ–‡å­ä¸²/NO1.png" alt="NO1" title="NO1"></p><ol><li>ä¸­å¿ƒå–å€¼</li></ol><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> longestPalindrome = (<span class="built_in">str</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">str</span> === '') &#123;</span><br><span class="line">        <span class="keyword">return</span> '';</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">str</span>.length === <span class="number">2</span> &amp;&amp; <span class="built_in">str</span>.charAt(<span class="number">0</span>) === <span class="built_in">str</span>.charAt(<span class="number">1</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> start = <span class="number">0</span>, end = <span class="number">0</span>; <span class="comment">// è®°å½•æœ€é•¿å›æ–‡çš„å¼€å¤´ä½ç½®ï¼Œç»“æŸä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">str</span>.length; i++ ) &#123;</span><br><span class="line">        <span class="keyword">let</span> len = centerExpand(<span class="built_in">str</span>, i, i);</span><br><span class="line">        <span class="keyword">if</span>(len &gt; end - start) &#123;</span><br><span class="line">            start = i - (len - <span class="number">1</span>) / <span class="number">2</span>; </span><br><span class="line">            end = i + len / <span class="number">2</span>; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">str</span>.slice(start, end + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¸­å¿ƒæ‰©å±•æ³•å¯¹æ¯”</li></ol><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> centerExpand = (str, <span class="built_in">left</span>, <span class="built_in">right</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> L = <span class="built_in">left</span>, R = <span class="built_in">right</span>;</span><br><span class="line">    while( L &gt;= <span class="number">0</span> &amp;&amp; R &lt; str.length &amp;&amp; str.charAt(L) === str.charAt(R) ) &#123;</span><br><span class="line">        L--;</span><br><span class="line">        R++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> R - L - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h4><ol><li>å®šä¹‰çŠ¶æ€<ul><li>dp[i,j]ï¼šå­—ç¬¦ä¸²sä»ç´¢å¼•iåˆ°jçš„å­ä¸²æ˜¯å¦æ˜¯å›æ–‡ä¸²<ul><li>trueï¼š s[i,j] æ˜¯å›æ–‡ä¸²</li><li>falseï¼šs[i,j] ä¸æ˜¯å›æ–‡ä¸²</li></ul></li></ul></li><li>è½¬ç§»æ–¹ç¨‹<ul><li>dp[i][j] = dp[i+1][j-1] &amp;&amp; s[i] === s[j]<ul><li>s[i] === s[j]ï¼šè¡¨æ˜å½“å‰ä¸­å¿ƒå¯ä»¥ç»§ç»­æ‰©å¼ </li><li>d[i+1][j-1]ï¼š true<ul><li>è¯´æ˜å­ä¸²<code>s[i+1][j-1]</code>ä¹Ÿæ˜¯å›æ–‡ä¸²</li></ul></li></ul></li></ul></li><li>è¯´æ˜ï¼šiä»æœ€å¤§å€¼å¼€å§‹éå†ï¼Œjä»æœ€å°å€¼å¼€å§‹éå†ã€‚</li><li>æ€»ç»“ï¼š<ul><li>dp[i][j] = s[i] == s[j] &amp;&amp; ( dp[i+1][j-1] || j - i &lt; 2)</li></ul></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ‰è¶£-githubçš„3Dæ‰“å°</title>
      <link href="/2021/04/05/2021/github%E7%9A%843D%E6%89%93%E5%8D%B0/"/>
      <url>/2021/04/05/2021/github%E7%9A%843D%E6%89%93%E5%8D%B0/</url>
      
        <content type="html"><![CDATA[<p>githubå¼€æ”¾äº†ä¸€ä¸ªå¹³å°ï¼Œæ”¯æŒå¯¼å‡ºè‡ªå·±githubè´¦æˆ·çš„å¹´åº¦æäº¤é‡ï¼Œç”Ÿæˆä¸€ä¸ª3Dæ¨¡å‹æ–‡ä»¶</p><p>å°è¯•äº†ä¸€ä¸‹ï¼Œå¯¼å‡ºè‡ªå·±2020å¹´çš„æ•°æ®ï¼ŒğŸ˜‚è¿˜å¥½ä¸æ˜¯åªæ˜¯ä¸€ä¸ªå¹³åº•åº§â€¦<br>æ·˜å®ä¸‹å•æ‰“å°äº†ï¼Œæ”¾åœ¨æ¡Œå­ä¸Šï¼Œæé†’è‡ªå·±å§ã€‚</p><p><img src="/2021/04/05/2021/githubçš„3Dæ‰“å°/NO1.png" alt="NO1" title="NO1"></p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥å¸¸ç¢ç¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSæ‰‹å†™Promise</title>
      <link href="/2021/04/01/2021/JS%E6%89%8B%E5%86%99Promise/"/>
      <url>/2021/04/01/2021/JS%E6%89%8B%E5%86%99Promise/</url>
      
        <content type="html"><![CDATA[<p><em>è½¬è½½è‡³æ˜é‡‘æ–‡ç« ï¼Œæ¨èæŸ¥çœ‹åŸæ–‡</em></p><ol><li>ğŸ‘‰ï¼š<a href="https://juejin.cn/post/6844903625769091079" target="_blank" rel="noopener">BATå‰ç«¯ç»å…¸é¢è¯•é—®é¢˜ï¼šå²ä¸Šæœ€æœ€æœ€è¯¦ç»†çš„æ‰‹å†™Promiseæ•™ç¨‹</a></li><li>ğŸ‘‰ï¼š<a href="https://juejin.cn/post/6945319439772434469" target="_blank" rel="noopener">ä»ä¸€é“è®©æˆ‘å¤±çœ çš„ Promise é¢è¯•é¢˜å¼€å§‹ï¼Œæ·±å…¥åˆ†æ Promise å®ç°ç»†èŠ‚</a></li></ol><h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><h4 id="å®šä¹‰Promise"><a href="#å®šä¹‰Promise" class="headerlink" title="å®šä¹‰Promise"></a>å®šä¹‰Promise</h4><p>ä¸€èˆ¬ä½¿ç”¨<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Promise(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">    xxx</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><em>so</em></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="built_in">Promise</span> &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">executor</span>) &#123;</span><br><span class="line">        executor(<span class="keyword">this</span>.resolve, <span class="keyword">this</span>.reject)</span><br><span class="line">    &#125;</span><br><span class="line">    resolve = <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;;</span><br><span class="line">    reject = <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="è§£å†³åŸºæœ¬çŠ¶æ€"><a href="#è§£å†³åŸºæœ¬çŠ¶æ€" class="headerlink" title="è§£å†³åŸºæœ¬çŠ¶æ€"></a>è§£å†³åŸºæœ¬çŠ¶æ€</h4><ol><li>pendingï¼Œ fulfilledï¼Œ rejected</li><li>pending -&gt; fulfilled / rejected</li><li>å…¶ä»–ä¸å¯äº’è½¬</li><li>new Promise((resolve, reject) =&gt; {resolve(value)})ï¼ŒresolveæˆåŠŸæ—¶ï¼Œæ¥å—å‚æ•°valueï¼ŒçŠ¶æ€æ”¹ä¸ºfulfilledï¼Œä¸”ä¸å¯å˜ã€‚</li><li>new Promise((resolve, reject) =&gt; {reject(reason)})ï¼Œrejectå¤±è´¥æ—¶ï¼Œæ¥æ”¶reasonï¼ŒçŠ¶æ€ä¸ºrejectedï¼Œä¸”ä¸å¯å†å˜ã€‚</li><li>è‹¥executoræŠ¥é”™ï¼Œåˆ™ç›´æ¥rejectedã€‚</li></ol><p><em>so</em></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PENDING = <span class="string">'pending'</span>;</span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">'fulfilled'</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">'rejected'</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(executor) &#123;</span><br><span class="line">        executor(<span class="keyword">this</span>.resolve, <span class="keyword">this</span>.reject);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    state = PENDING</span><br><span class="line"></span><br><span class="line">    value = undefined; <span class="comment">// å­˜å‚¨æˆåŠŸå€¼</span></span><br><span class="line">    reason = <span class="literal">null</span>; <span class="comment">// å­˜å‚¨å¤±è´¥å€¼</span></span><br><span class="line"></span><br><span class="line">    resolve = (value) =&gt; &#123;</span><br><span class="line">        <span class="comment">// åªæœ‰çŠ¶æ€æ˜¯ç­‰å¾…ï¼Œæ‰æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.status === PENDING) &#123;</span><br><span class="line">        <span class="comment">// çŠ¶æ€ä¿®æ”¹ä¸ºæˆåŠŸ</span></span><br><span class="line">        <span class="keyword">this</span>.status = FULFILLED;</span><br><span class="line">        <span class="comment">// ä¿å­˜æˆåŠŸä¹‹åçš„å€¼</span></span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     reject = (reason) =&gt; &#123;</span><br><span class="line">        <span class="comment">// åªæœ‰çŠ¶æ€æ˜¯ç­‰å¾…ï¼Œæ‰æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.status === PENDING) &#123;</span><br><span class="line">        <span class="comment">// çŠ¶æ€æˆåŠŸä¸ºå¤±è´¥</span></span><br><span class="line">        <span class="keyword">this</span>.status = REJECTED;</span><br><span class="line">        <span class="comment">// ä¿å­˜å¤±è´¥åçš„åŸå› </span></span><br><span class="line">        <span class="keyword">this</span>.reason = reason;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="then"><a href="#then" class="headerlink" title="then"></a>then</h4><ol><li>Promiseæœ‰ä¸€ä¸ªthenï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªå‚æ•°ï¼ŒonFulfilledï¼ŒonRejectedï¼›</li><li>å½“stateä¸ºfulfilledï¼Œåˆ™æ‰§è¡ŒonFulfilledï¼Œå¹¶ä¼ å…¥this.valueï¼›</li><li>å½“stateä¸ºrejectedï¼Œåˆ™æ‰§è¡ŒonRejectedï¼Œå¹¶ä¼ å…¥this.reasonã€‚</li></ol><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span></span>&#123; </span><br><span class="line">    <span class="keyword">constructor</span>(executor) &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    then(onFulfilled, onRejected) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.state === <span class="string">'fulfilled'</span>) &#123;</span><br><span class="line">            onFulfilled(<span class="keyword">this</span>.value); <span class="comment">// ä¼ å…¥ï¼Œå¹¶æ‰§è¡ŒonFulfilled</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.state === <span class="string">'rejected'</span>) &#123;</span><br><span class="line">            onRejected(<span class="keyword">this</span>.reason); <span class="comment">// ä¼ å…¥ï¼Œå¹¶æ‰§è¡ŒonRejected</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æš´éœ²Promise"><a href="#æš´éœ²Promise" class="headerlink" title="æš´éœ²Promise"></a>æš´éœ²Promise</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.<span class="keyword">export</span> = <span class="built_in">Promise</span>;</span><br></pre></td></tr></table></figure><h2 id="åŠ å…¥å¼‚æ­¥"><a href="#åŠ å…¥å¼‚æ­¥" class="headerlink" title="åŠ å…¥å¼‚æ­¥"></a>åŠ å…¥å¼‚æ­¥</h2><h4 id="ç¼“å­˜æˆåŠŸå¤±è´¥å›è°ƒ"><a href="#ç¼“å­˜æˆåŠŸå¤±è´¥å›è°ƒ" class="headerlink" title="ç¼“å­˜æˆåŠŸå¤±è´¥å›è°ƒ"></a>ç¼“å­˜æˆåŠŸå¤±è´¥å›è°ƒ</h4><p>onFulfilledCallback = null;<br>onRejectedCallback = null;</p><h4 id="thenä¸­å¢åŠ PENDINGçš„å¤„ç†"><a href="#thenä¸­å¢åŠ PENDINGçš„å¤„ç†" class="headerlink" title="thenä¸­å¢åŠ PENDINGçš„å¤„ç†"></a>thenä¸­å¢åŠ PENDINGçš„å¤„ç†</h4><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">then(<span class="keyword">on</span>Fulfilled, <span class="keyword">on</span>Rejected) &#123;</span><br><span class="line">    if(this.<span class="keyword">state</span> === FULFILLED) &#123;</span><br><span class="line">        <span class="keyword">on</span>Fulfilled(this.value); // ä¼ å…¥ï¼Œå¹¶æ‰§è¡Œ<span class="keyword">on</span>Fulfilled</span><br><span class="line">    &#125;</span><br><span class="line">    if(this.<span class="keyword">state</span> === REJECTED) &#123;</span><br><span class="line">        <span class="keyword">on</span>Rejected(this.reason); // ä¼ å…¥ï¼Œå¹¶æ‰§è¡Œ<span class="keyword">on</span>Rejected</span><br><span class="line">    &#125;</span><br><span class="line">    if(this.<span class="keyword">state</span> === PENDING) &#123;</span><br><span class="line">        // å…ˆç¼“å­˜ï¼Œç­‰ç­‰åç»­çŠ¶æ€å˜åŒ–åæ‰§è¡Œ</span><br><span class="line">        this.<span class="keyword">on</span>FulfilledCallback = <span class="keyword">on</span>Fulfilled;</span><br><span class="line">        this.<span class="keyword">on</span>RejectedCallback  = <span class="keyword">on</span>Rejected;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="resolve-rejectè°ƒç”¨å›è°ƒ"><a href="#resolve-rejectè°ƒç”¨å›è°ƒ" class="headerlink" title="resolve\rejectè°ƒç”¨å›è°ƒ"></a>resolve\rejectè°ƒç”¨å›è°ƒ</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">resolve = value =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.state === PENDING) &#123;</span><br><span class="line">        <span class="keyword">this</span>.state = FULFILLED;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.onFulfilledCallback &amp;&amp; <span class="keyword">this</span>.onFulfilledCallback(<span class="keyword">this</span>.value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">reject = reason =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.state === PENDING) &#123;</span><br><span class="line">        <span class="keyword">this</span>.reason =reason;</span><br><span class="line">        <span class="keyword">this</span>.state = REJECTED;</span><br><span class="line">        <span class="keyword">this</span>.onRejectedCallback &amp;&amp; <span class="keyword">this</span>.onFulfilledCallback(<span class="keyword">this</span>.reason)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="thenå›è°ƒ"><a href="#thenå›è°ƒ" class="headerlink" title="thenå›è°ƒ"></a>thenå›è°ƒ</h2><p>å¤šä¸ªthenå›è°ƒçš„è¯ï¼Œéœ€è¦ä¿å­˜ä¸åŒçš„å€¼ï¼Œå› ä¸ºäº’ä¸ç›¸åŒã€‚</p><ol><li><p>Promiseä¸­å›è°ƒå¤„ç†ä¸ºæ•°ç»„ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">onFulfilledCallbacks</span> = []<span class="comment">;</span></span><br><span class="line"><span class="attribute">onnRejectedCallbacks</span> = []<span class="comment">;</span></span><br></pre></td></tr></table></figure></li><li><p>å›è°ƒå‡½æ•°å­˜å…¥æ•°ç»„</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">then(onFulfilled, onRejected) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.status === FULFILLED)&#123;</span><br><span class="line">        onFulfilled(<span class="keyword">this</span>.value);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === REJECTED) &#123;</span><br><span class="line">        onRejected(<span class="keyword">this</span>.reason);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === PENDING) &#123;</span><br><span class="line">        <span class="keyword">this</span>.onFulfilledCallbacks.push(onFulfilled);</span><br><span class="line">        <span class="keyword">this</span>.onRejectedCallbacks.push(onRejected);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">resolve = (value) =&gt; &#123;     </span><br><span class="line">     <span class="keyword">if</span> (<span class="keyword">this</span>.status === PENDING) &#123;         </span><br><span class="line">         <span class="keyword">this</span>.status = FULFILLED;          </span><br><span class="line">         <span class="keyword">this</span>.value = value;        </span><br><span class="line">         <span class="comment">// resolveé‡Œé¢å°†æ‰€æœ‰æˆåŠŸçš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ     </span></span><br><span class="line">         <span class="keyword">while</span> (<span class="keyword">this</span>.onFulfilledCallbacks.length) &#123;       </span><br><span class="line">             <span class="comment">// Array.shift() å–å‡ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åï¼ˆï¼‰è°ƒç”¨ï¼Œshiftä¸æ˜¯çº¯å‡½æ•°ï¼Œå–å‡ºåï¼Œæ•°ç»„å°†å¤±å»è¯¥å…ƒç´ ï¼Œç›´åˆ°æ•°ç»„ä¸ºç©º       </span></span><br><span class="line">             <span class="keyword">this</span>.onFulfilledCallbacks.shift()(value)    </span><br><span class="line">        &#125;   </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">reject = reason =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.status === PENDING) &#123;</span><br><span class="line">        <span class="keyword">this</span>.status = REJECTED;</span><br><span class="line">        <span class="keyword">this</span>.reason = reason;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">this</span>.onRejectedCallbacks.length) &#123;</span><br><span class="line">            <span class="keyword">this</span>.onRejectedCallbacks.shift()(reason);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>soï¼Œæˆªè‡³ç›®å‰æˆ‘ä»¬çš„Promiseæ˜¯è¿™æ ·çš„</em></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PENDING = <span class="string">'pending'</span>;</span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">'fulfilled'</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">'rejected'</span>;</span><br><span class="line">onFulfilledCallbacks = [];</span><br><span class="line">onnRejectedCallbacks = [];</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(executor) &#123;</span><br><span class="line">        executor(<span class="keyword">this</span>.resolve, <span class="keyword">this</span>.reject);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    state = PENDING</span><br><span class="line"></span><br><span class="line">    value = undefined; <span class="comment">// å­˜å‚¨æˆåŠŸå€¼</span></span><br><span class="line">    reason = <span class="literal">null</span>; <span class="comment">// å­˜å‚¨å¤±è´¥å€¼</span></span><br><span class="line"></span><br><span class="line">    resolve = (value) =&gt; &#123;     </span><br><span class="line">         <span class="keyword">if</span> (<span class="keyword">this</span>.status === PENDING) &#123;         </span><br><span class="line">             <span class="keyword">this</span>.status = FULFILLED;          </span><br><span class="line">             <span class="keyword">this</span>.value = value;        </span><br><span class="line">             <span class="comment">// resolveé‡Œé¢å°†æ‰€æœ‰æˆåŠŸçš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ     </span></span><br><span class="line">             <span class="keyword">while</span> (<span class="keyword">this</span>.onFulfilledCallbacks.length) &#123;       </span><br><span class="line">                 <span class="comment">// Array.shift() å–å‡ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åï¼ˆï¼‰è°ƒç”¨ï¼Œshiftä¸æ˜¯çº¯å‡½æ•°ï¼Œå–å‡ºåï¼Œæ•°ç»„å°†å¤±å»è¯¥å…ƒç´ ï¼Œç›´åˆ°æ•°ç»„ä¸ºç©º       </span></span><br><span class="line">                 <span class="keyword">this</span>.onFulfilledCallbacks.shift()(value)    </span><br><span class="line">            &#125;   </span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    reject = reason =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.status === PENDING) &#123;</span><br><span class="line">            <span class="keyword">this</span>.status = REJECTED;</span><br><span class="line">            <span class="keyword">this</span>.reason = reason;</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">this</span>.onRejectedCallbacks.length) &#123;</span><br><span class="line">                <span class="keyword">this</span>.onRejectedCallbacks.shift()(reason);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    then(onFulfilled, onRejected) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.status === FULFILLED)&#123;</span><br><span class="line">            onFulfilled(<span class="keyword">this</span>.value);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === REJECTED) &#123;</span><br><span class="line">            onRejected(<span class="keyword">this</span>.reason);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === PENDING) &#123;</span><br><span class="line">            <span class="keyword">this</span>.onFulfilledCallbacks.push(onFulfilled);</span><br><span class="line">            <span class="keyword">this</span>.onRejectedCallbacks.push(onRejected);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">module.export = Promise;</span><br></pre></td></tr></table></figure><h4 id="thençš„é“¾å¼è°ƒç”¨"><a href="#thençš„é“¾å¼è°ƒç”¨" class="headerlink" title="thençš„é“¾å¼è°ƒç”¨"></a>thençš„é“¾å¼è°ƒç”¨</h4><p>å¦‚ä½•å®ç°thençš„é“¾å¼è°ƒç”¨å‘¢ï¼Ÿ<br>åœ¨thené‡Œé¢è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡å—</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span>() </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    then(onFulfilled, onRejected) &#123;</span><br><span class="line">        <span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.status === PENDING ) &#123;</span><br><span class="line">                <span class="keyword">this</span>.onFulfilledCallbacks.push(onFulfilled);</span><br><span class="line">                <span class="keyword">this</span>.onRejectedCallbacks.push(onRejected);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === REJECTED) &#123;</span><br><span class="line">                onRejected(<span class="keyword">this</span>.reason);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === FULFILLED) &#123;</span><br><span class="line">                <span class="keyword">const</span> x = onFulfilled(<span class="keyword">this</span>.value);</span><br><span class="line">                resolvePromise(x, resolve, reject);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> promise2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolvePromise</span>(<span class="params">x, resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯ä¸æ˜¯Promiseçš„å®ä¾‹</span></span><br><span class="line">    <span class="keyword">if</span>(x <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">        <span class="comment">// æ˜¯çš„è¯ï¼Œæ‰§è¡Œthen</span></span><br><span class="line">        x.then(resolve, reject)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¦åˆ™resolve</span></span><br><span class="line">        resolve(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœxæ˜¯è‡ªå·±çš„è¯ï¼Œåˆ™åº”è¯¥æœ‰é”™è¯¯å¤„ç†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span> </span>&#123;</span><br><span class="line">  ......</span><br><span class="line">  then(onFulfilled, onRejected) &#123;</span><br><span class="line">    <span class="keyword">const</span> promise2 = <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.status === FULFILLED) &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ–</span></span><br><span class="line">        queueMicrotask(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> x = onFulfilled(<span class="keyword">this</span>.value);</span><br><span class="line">            resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === REJECTED) &#123;</span><br><span class="line">      ......</span><br><span class="line">    &#125;) </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> promise2;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolvePromise</span>(<span class="params">promise2, x, resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(promise2 === x) &#123;</span><br><span class="line">        <span class="keyword">return</span> reject(<span class="string">'...'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é”™è¯¯æ•è·"><a href="#é”™è¯¯æ•è·" class="headerlink" title="é”™è¯¯æ•è·"></a>é”™è¯¯æ•è·</h2><p>tryï¼Œcatchå°±å¯ä»¥äº†</p><h4 id="æ•è·æ‰§è¡Œå™¨é”™è¯¯"><a href="#æ•è·æ‰§è¡Œå™¨é”™è¯¯" class="headerlink" title="æ•è·æ‰§è¡Œå™¨é”™è¯¯"></a>æ•è·æ‰§è¡Œå™¨é”™è¯¯</h4><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constructor</span><span class="params">(executor)</span> <span class="comment">&#123;</span></span></span><br><span class="line"><span class="function"><span class="comment">    try&#123;</span></span></span><br><span class="line"><span class="function"><span class="comment">        executor(this.resolve, this.reject);</span></span></span><br><span class="line"><span class="function"><span class="comment">    &#125;</span> <span class="title">catch</span><span class="params">(e)</span> <span class="comment">&#123;</span></span></span><br><span class="line"><span class="function"><span class="comment">        this.reject(e)</span></span></span><br><span class="line"><span class="function"><span class="comment">    &#125;</span> </span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="thenæ‰§è¡Œé”™è¯¯"><a href="#thenæ‰§è¡Œé”™è¯¯" class="headerlink" title="thenæ‰§è¡Œé”™è¯¯"></a>thenæ‰§è¡Œé”™è¯¯</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">then(onFulfilled, onRejected) &#123;</span><br><span class="line">    <span class="keyword">const</span> proimise2 = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.status === PENDING) &#123;</span><br><span class="line">            <span class="keyword">this</span>.onFulfilledCallbacks.push(onFulfilled)</span><br><span class="line">            <span class="keyword">this</span>.onRejectedCallbacks.push(onRejected)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === REJECTED) &#123;</span><br><span class="line">            onRejected(<span class="keyword">this</span>.reason);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === FULFILLED) &#123;</span><br><span class="line">            queueMicrotask(() =&gt; &#123;</span><br><span class="line">                <span class="comment">// å¢åŠ  try å¤„ç†</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> x = onFulfilled(<span class="keyword">this</span>.value);</span><br><span class="line">                    resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">                &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">                    reject(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> promise2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•´ç†ä¸€ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">then(onFulfilled, onRejected) &#123;</span><br><span class="line">  <span class="comment">// ä¸ºäº†é“¾å¼è°ƒç”¨è¿™é‡Œç›´æ¥åˆ›å»ºä¸€ä¸ª MyPromiseï¼Œå¹¶åœ¨åé¢ return å‡ºå»</span></span><br><span class="line">  <span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.status === FULFILLED) &#123;</span><br><span class="line">      <span class="comment">// åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ–</span></span><br><span class="line">      queueMicrotask(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="comment">// è·å–æˆåŠŸå›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœ</span></span><br><span class="line">          <span class="keyword">const</span> x = onFulfilled(<span class="keyword">this</span>.value);</span><br><span class="line">          <span class="comment">// ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†</span></span><br><span class="line">          resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          reject(error)</span><br><span class="line">        &#125; </span><br><span class="line">      &#125;)  </span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === REJECTED) &#123; </span><br><span class="line">      <span class="comment">// ==== æ–°å¢ ====</span></span><br><span class="line">      <span class="comment">// åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ–</span></span><br><span class="line">      queueMicrotask(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="comment">// è°ƒç”¨å¤±è´¥å›è°ƒï¼Œå¹¶ä¸”æŠŠåŸå› è¿”å›</span></span><br><span class="line">          <span class="keyword">const</span> x = onRejected(<span class="keyword">this</span>.reason);</span><br><span class="line">          <span class="comment">// ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†</span></span><br><span class="line">          resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          reject(error)</span><br><span class="line">        &#125; </span><br><span class="line">      &#125;) </span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === PENDING) &#123;</span><br><span class="line">      <span class="comment">// ç­‰å¾…</span></span><br><span class="line">      <span class="comment">// å› ä¸ºä¸çŸ¥é“åé¢çŠ¶æ€çš„å˜åŒ–æƒ…å†µï¼Œæ‰€ä»¥å°†æˆåŠŸå›è°ƒå’Œå¤±è´¥å›è°ƒå­˜å‚¨èµ·æ¥</span></span><br><span class="line">      <span class="comment">// ç­‰åˆ°æ‰§è¡ŒæˆåŠŸå¤±è´¥å‡½æ•°çš„æ—¶å€™å†ä¼ é€’</span></span><br><span class="line">      <span class="keyword">this</span>.onFulfilledCallbacks.push(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ==== æ–°å¢ ====</span></span><br><span class="line">        queueMicrotask(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è·å–æˆåŠŸå›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœ</span></span><br><span class="line">            <span class="keyword">const</span> x = onFulfilled(<span class="keyword">this</span>.value);</span><br><span class="line">            <span class="comment">// ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†</span></span><br><span class="line">            resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            reject(error)</span><br><span class="line">          &#125; </span><br><span class="line">        &#125;) </span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">this</span>.onRejectedCallbacks.push(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ==== æ–°å¢ ====</span></span><br><span class="line">        queueMicrotask(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨å¤±è´¥å›è°ƒï¼Œå¹¶ä¸”æŠŠåŸå› è¿”å›</span></span><br><span class="line">            <span class="keyword">const</span> x = onRejected(<span class="keyword">this</span>.reason);</span><br><span class="line">            <span class="comment">// ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†</span></span><br><span class="line">            resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            reject(error)</span><br><span class="line">          &#125; </span><br><span class="line">        &#125;) </span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;) </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> promise2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…¶ä½™ä¼˜åŒ–"><a href="#å…¶ä½™ä¼˜åŒ–" class="headerlink" title="å…¶ä½™ä¼˜åŒ–"></a>å…¶ä½™ä¼˜åŒ–</h2><h4 id="å®ç°resolveï¼Œrejectçš„é™æ€è°ƒç”¨"><a href="#å®ç°resolveï¼Œrejectçš„é™æ€è°ƒç”¨" class="headerlink" title="å®ç°resolveï¼Œrejectçš„é™æ€è°ƒç”¨"></a>å®ç°resolveï¼Œrejectçš„é™æ€è°ƒç”¨</h4><p>Promiseæ”¯æŒå¦‚ä¸‹æ‰§è¡Œï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    xxx</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>å› æ­¤è¿˜éœ€è¦ä¿®æ”¹ä¸€ä¸‹ï¼Œå¢åŠ é™æ€æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> resolve(param) &#123;</span><br><span class="line">    <span class="keyword">if</span>(param <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> param;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(param)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">static</span> reject (reason) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      reject(reason);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€ç»ˆ"><a href="#æœ€ç»ˆ" class="headerlink" title="æœ€ç»ˆ"></a>æœ€ç»ˆ</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…ˆå®šä¹‰ä¸‰ä¸ªå¸¸é‡è¡¨ç¤ºçŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> PENDING = <span class="string">'pending'</span>;</span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">'fulfilled'</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">'rejected'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å»º Promise ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(executor)&#123;</span><br><span class="line">    <span class="comment">// executor æ˜¯ä¸€ä¸ªæ‰§è¡Œå™¨ï¼Œè¿›å…¥ä¼šç«‹å³æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">// å¹¶ä¼ å…¥resolveå’Œrejectæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      executor(<span class="keyword">this</span>.resolve, <span class="keyword">this</span>.reject)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">this</span>.reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‚¨å­˜çŠ¶æ€çš„å˜é‡ï¼Œåˆå§‹å€¼æ˜¯ pending</span></span><br><span class="line">  status = PENDING;</span><br><span class="line">  <span class="comment">// æˆåŠŸä¹‹åçš„å€¼</span></span><br><span class="line">  value = <span class="literal">null</span>;</span><br><span class="line">  <span class="comment">// å¤±è´¥ä¹‹åçš„åŸå› </span></span><br><span class="line">  reason = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å­˜å‚¨æˆåŠŸå›è°ƒå‡½æ•°</span></span><br><span class="line">  onFulfilledCallbacks = [];</span><br><span class="line">  <span class="comment">// å­˜å‚¨å¤±è´¥å›è°ƒå‡½æ•°</span></span><br><span class="line">  onRejectedCallbacks = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ”¹æˆåŠŸåçš„çŠ¶æ€</span></span><br><span class="line">  resolve = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// åªæœ‰çŠ¶æ€æ˜¯ç­‰å¾…ï¼Œæ‰æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.status === PENDING) &#123;</span><br><span class="line">      <span class="comment">// çŠ¶æ€ä¿®æ”¹ä¸ºæˆåŠŸ</span></span><br><span class="line">      <span class="keyword">this</span>.status = FULFILLED;</span><br><span class="line">      <span class="comment">// ä¿å­˜æˆåŠŸä¹‹åçš„å€¼</span></span><br><span class="line">      <span class="keyword">this</span>.value = value;</span><br><span class="line">      <span class="comment">// resolveé‡Œé¢å°†æ‰€æœ‰æˆåŠŸçš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ</span></span><br><span class="line">      <span class="keyword">while</span> (<span class="keyword">this</span>.onFulfilledCallbacks.length) &#123;</span><br><span class="line">        <span class="comment">// Array.shift() å–å‡ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åï¼ˆï¼‰è°ƒç”¨ï¼Œshiftä¸æ˜¯çº¯å‡½æ•°ï¼Œå–å‡ºåï¼Œæ•°ç»„å°†å¤±å»è¯¥å…ƒç´ ï¼Œç›´åˆ°æ•°ç»„ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">this</span>.onFulfilledCallbacks.shift()(value)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ”¹å¤±è´¥åçš„çŠ¶æ€</span></span><br><span class="line">  reject = <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// åªæœ‰çŠ¶æ€æ˜¯ç­‰å¾…ï¼Œæ‰æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.status === PENDING) &#123;</span><br><span class="line">      <span class="comment">// çŠ¶æ€æˆåŠŸä¸ºå¤±è´¥</span></span><br><span class="line">      <span class="keyword">this</span>.status = REJECTED;</span><br><span class="line">      <span class="comment">// ä¿å­˜å¤±è´¥åçš„åŸå› </span></span><br><span class="line">      <span class="keyword">this</span>.reason = reason;</span><br><span class="line">      <span class="comment">// resolveé‡Œé¢å°†æ‰€æœ‰å¤±è´¥çš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ</span></span><br><span class="line">      <span class="keyword">while</span> (<span class="keyword">this</span>.onRejectedCallbacks.length) &#123;</span><br><span class="line">        <span class="keyword">this</span>.onRejectedCallbacks.shift()(reason)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  then(onFulfilled, onRejected) &#123;</span><br><span class="line">    <span class="keyword">const</span> realOnFulfilled = <span class="keyword">typeof</span> onFulfilled === <span class="string">'function'</span> ? onFulfilled : <span class="function"><span class="params">value</span> =&gt;</span> value;</span><br><span class="line">    <span class="keyword">const</span> realOnRejected = <span class="keyword">typeof</span> onRejected === <span class="string">'function'</span> ? onRejected : <span class="function"><span class="params">reason</span> =&gt;</span> &#123;<span class="keyword">throw</span> reason&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸ºäº†é“¾å¼è°ƒç”¨è¿™é‡Œç›´æ¥åˆ›å»ºä¸€ä¸ª MyPromiseï¼Œå¹¶åœ¨åé¢ return å‡ºå»</span></span><br><span class="line">    <span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> fulfilledMicrotask = <span class="function"><span class="params">()</span> =&gt;</span>  &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ–</span></span><br><span class="line">        queueMicrotask(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è·å–æˆåŠŸå›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœ</span></span><br><span class="line">            <span class="keyword">const</span> x = realOnFulfilled(<span class="keyword">this</span>.value);</span><br><span class="line">            <span class="comment">// ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†</span></span><br><span class="line">            resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            reject(error)</span><br><span class="line">          &#125; </span><br><span class="line">        &#125;)  </span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> rejectedMicrotask = <span class="function"><span class="params">()</span> =&gt;</span> &#123; </span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ–</span></span><br><span class="line">        queueMicrotask(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨å¤±è´¥å›è°ƒï¼Œå¹¶ä¸”æŠŠåŸå› è¿”å›</span></span><br><span class="line">            <span class="keyword">const</span> x = realOnRejected(<span class="keyword">this</span>.reason);</span><br><span class="line">            <span class="comment">// ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†</span></span><br><span class="line">            resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            reject(error)</span><br><span class="line">          &#125; </span><br><span class="line">        &#125;) </span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// åˆ¤æ–­çŠ¶æ€</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.status === FULFILLED) &#123;</span><br><span class="line">        fulfilledMicrotask() </span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === REJECTED) &#123; </span><br><span class="line">        rejectedMicrotask()</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === PENDING) &#123;</span><br><span class="line">        <span class="comment">// ç­‰å¾…</span></span><br><span class="line">        <span class="comment">// å› ä¸ºä¸çŸ¥é“åé¢çŠ¶æ€çš„å˜åŒ–æƒ…å†µï¼Œæ‰€ä»¥å°†æˆåŠŸå›è°ƒå’Œå¤±è´¥å›è°ƒå­˜å‚¨èµ·æ¥</span></span><br><span class="line">        <span class="comment">// ç­‰åˆ°æ‰§è¡ŒæˆåŠŸå¤±è´¥å‡½æ•°çš„æ—¶å€™å†ä¼ é€’</span></span><br><span class="line">        <span class="keyword">this</span>.onFulfilledCallbacks.push(fulfilledMicrotask);</span><br><span class="line">        <span class="keyword">this</span>.onRejectedCallbacks.push(rejectedMicrotask);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;) </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> promise2;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// resolve é™æ€æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">static</span> resolve (parameter) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¼ å…¥ Promise å°±ç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (parameter <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> parameter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è½¬æˆå¸¸è§„æ–¹å¼</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span>  &#123;</span><br><span class="line">      resolve(parameter);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// reject é™æ€æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">static</span> reject (reason) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      reject(reason);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolvePromise</span>(<span class="params">promise2, x, resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¦‚æœç›¸ç­‰äº†ï¼Œè¯´æ˜returnçš„æ˜¯è‡ªå·±ï¼ŒæŠ›å‡ºç±»å‹é”™è¯¯å¹¶è¿”å›</span></span><br><span class="line">  <span class="keyword">if</span> (promise2 === x) &#123;</span><br><span class="line">    <span class="keyword">return</span> reject(<span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Chaining cycle detected for promise #&lt;Promise&gt;'</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­xæ˜¯ä¸æ˜¯ Promise å®ä¾‹å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">if</span>(x <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œ xï¼Œè°ƒç”¨ then æ–¹æ³•ï¼Œç›®çš„æ˜¯å°†å…¶çŠ¶æ€å˜ä¸º fulfilled æˆ–è€… rejected</span></span><br><span class="line">    <span class="comment">// x.then(value =&gt; resolve(value), reason =&gt; reject(reason))</span></span><br><span class="line">    <span class="comment">// ç®€åŒ–ä¹‹å</span></span><br><span class="line">    x.then(resolve, reject)</span><br><span class="line">  &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">// æ™®é€šå€¼</span></span><br><span class="line">    resolve(x)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="built_in">Promise</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> è½¬è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>column-countæè¿°å…ƒç´ çš„åˆ—æ•°</title>
      <link href="/2021/03/01/2021/column-count%E6%8F%8F%E8%BF%B0%E5%85%83%E7%B4%A0%E7%9A%84%E5%88%97%E6%95%B0/"/>
      <url>/2021/03/01/2021/column-count%E6%8F%8F%E8%BF%B0%E5%85%83%E7%B4%A0%E7%9A%84%E5%88%97%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/column-count" target="_blank" rel="noopener">column-count</a><br>å°†å…ƒç´ åˆ’åˆ†å‡ åˆ—</p>]]></content>
      
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPç¼“å­˜</title>
      <link href="/2021/02/26/2021/HTTP%E7%BC%93%E5%AD%98/"/>
      <url>/2021/02/26/2021/HTTP%E7%BC%93%E5%AD%98/</url>
      
        <content type="html"><![CDATA[<h3 id="HTTPç¼“å­˜"><a href="#HTTPç¼“å­˜" class="headerlink" title="HTTPç¼“å­˜"></a>HTTPç¼“å­˜</h3><p>Httpç¼“å­˜çš„ä¸»è¦ä¸‰ä¸ªè§’è‰²ï¼šæµè§ˆå™¨ã€æµè§ˆå™¨ç¼“å­˜æ•°æ®åº“ã€æœåŠ¡å™¨ï¼›</p><p>ç¼“å­˜ç±»å‹ï¼š<code>å¼ºç¼“å­˜</code>ã€<code>åå•†ç¼“å­˜</code>ã€‚</p><a id="more"></a><h3 id="å¼ºåˆ¶ç¼“å­˜"><a href="#å¼ºåˆ¶ç¼“å­˜" class="headerlink" title="å¼ºåˆ¶ç¼“å­˜"></a>å¼ºåˆ¶ç¼“å­˜</h3><p>ä¸¤ä¸ªè§„åˆ™å­—æ®µï¼ŒåŸºæœ¬åŸç†ï¼šæ‰€è¯·æ±‚çš„æ•°æ®åœ¨ç¼“å­˜æ•°æ®åº“ä¸­å°šæœªè¿‡æœŸæ—¶ï¼Œä¸ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</p><p>å½“ç¼“å­˜æœªè¿‡æœŸæ—¶åŸºæœ¬æµç¨‹å¦‚ä¸‹</p><ol><li>Expire(http1.0å­—æ®µ)</li><li>Cache-Control(é€šç”¨æ¶ˆæ¯å¤´ï¼Œé€šè¿‡æŒ‡å®šæŒ‡ä»¤å®ç°ç¼“å­˜æœºåˆ¶)<ul><li>privateï¼šå®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ï¼›</li><li>publicï¼šå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ä»¥ç¼“å­˜ï¼›</li><li>max-age=xxxï¼šç¼“å­˜å†…å®¹å°†åœ¨XXXç§’åå¤±æ•ˆï¼›</li><li>s-max-age=xxxï¼šä»…é€‚ç”¨å…±äº«ç¼“å­˜ï¼Œå¹¶ä¸”ç§æœ‰ç¼“å­˜ä¸­å¿½ç•¥ï¼›</li><li>no-cacheï¼šéœ€è¦ä½¿ç”¨åå•†ç¼“å­˜æ¥éªŒè¯ç¼“å­˜æ•°æ®ï¼›</li><li>no-storeï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ç¼“å­˜ï¼Œå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜éƒ½ä¸ç”Ÿæ•ˆï¼›</li><li>must-revalidateï¼šç¼“å­˜å¿…é¡»åœ¨ä½¿ç”¨ä¹‹å‰éªŒè¯æ—§èµ„æºçš„çŠ¶æ€ï¼Œå¹¶ä¸”ä¸å¯ä½¿ç”¨è¿‡æœŸèµ„æºã€‚</li></ul></li></ol><h3 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h3><p>åŸºæœ¬åŸç†ï¼š</p><ol><li>æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå°†ç¼“å­˜æ ‡è¯†ä¸æ•°æ®ä¸€èµ·è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°†ä¸¤è€…å¤‡ä»½è‡³ç¼“å­˜æ•°æ®åº“ä¸­ï¼›</li><li>å†æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯å°†å¤‡ä»½çš„ç¼“å­˜æ ‡è¯†å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†è¿›è¡Œåˆ¤æ–­ï¼Œåˆ¤æ–­æˆåŠŸè¿”å›304çŠ¶æ€ç ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚</li></ol><p><em>è§„åˆ™å­—æ®µï¼š</em></p><ol><li>Last-Modified</li></ol><ul><li>æœåŠ¡å™¨åœ¨å“åº”è¯·æ±‚æ—¶ï¼Œå‘Šè¯‰æµè§ˆå™¨çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚</li></ul><ol start="2"><li>If-Modified-Sinceè§„åˆ™ï¼š</li></ol><ul><li>å†æ¬¡è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œé€šè¿‡æ­¤å­—æ®µé€šçŸ¥æœåŠ¡å™¨ä¸Šæ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›çš„èµ„æºæœ€åä¿®æ”¹æ—¶é—´ã€‚</li><li>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åå‘ç°æœ‰å¤´If-Modified-Since åˆ™ä¸è¢«è¯·æ±‚èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´è¿›è¡Œæ¯”å¯¹ã€‚</li><li>è‹¥èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´å¤§äºIf-Modified-Sinceï¼Œè¯´æ˜èµ„æºåˆè¢«æ”¹åŠ¨è¿‡ï¼Œåˆ™å“åº”æ•´ç‰‡èµ„æºå†…å®¹ï¼Œè¿”å›çŠ¶æ€ç 200ï¼›</li><li>è‹¥èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´å°äºæˆ–ç­‰äºIf-Modified-Sinceï¼Œè¯´æ˜èµ„æºæ— æ–°ä¿®æ”¹ï¼Œåˆ™å“åº”HTTP 304ï¼Œå‘ŠçŸ¥æµè§ˆå™¨ç»§ç»­ä½¿ç”¨æ‰€ä¿å­˜çš„cacheã€‚</li></ul><p><em>ä»¥ä¸‹ä¼˜å…ˆçº§é«˜äºä¸Šé¢ä¸¤è€…ï¼</em></p><ol><li>Etagï¼š</li></ol><ul><li>æœåŠ¡å™¨èµ„æºçš„å”¯ä¸€æ ‡è¯†ç¬¦, æµè§ˆå™¨å¯ä»¥æ ¹æ®ETagå€¼ç¼“å­˜æ•°æ®, èŠ‚çœå¸¦å®½. å¦‚æœèµ„æºå·²ç»æ”¹å˜, etagå¯ä»¥å¸®åŠ©é˜²æ­¢åŒæ­¥æ›´æ–°èµ„æºçš„ç›¸äº’è¦†ç›–. ETag ä¼˜å…ˆçº§æ¯” Last-Modified é«˜.</li></ul><ol start="2"><li>If-None-Match</li></ol><ul><li>å†æ¬¡è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œé€šè¿‡æ­¤å­—æ®µé€šçŸ¥æœåŠ¡å™¨å®¢æˆ·æ®µç¼“å­˜æ•°æ®çš„å”¯ä¸€æ ‡è¯†ã€‚</li><li>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åå‘ç°æœ‰å¤´If-None-Match åˆ™ä¸è¢«è¯·æ±‚èµ„æºçš„å”¯ä¸€æ ‡è¯†è¿›è¡Œæ¯”å¯¹ï¼Œ</li><li>ä¸åŒï¼Œè¯´æ˜èµ„æºåˆè¢«æ”¹åŠ¨è¿‡ï¼Œåˆ™å“åº”æ•´ç‰‡èµ„æºå†…å®¹ï¼Œè¿”å›çŠ¶æ€ç 200ï¼›</li><li>ç›¸åŒï¼Œè¯´æ˜èµ„æºæ— æ–°ä¿®æ”¹ï¼Œåˆ™å“åº”HTTP 304ï¼Œå‘ŠçŸ¥æµè§ˆå™¨ç»§ç»­ä½¿ç”¨æ‰€ä¿å­˜çš„cacheã€‚</li></ul><p><img src="/2021/02/26/2021/HTTPç¼“å­˜/NO1.png" alt="NO1" title="NO1"></p><h3 id="Qï¼Ÿ"><a href="#Qï¼Ÿ" class="headerlink" title="Qï¼Ÿ"></a>Qï¼Ÿ</h3><ul><li>å“ªäº›ä¸èƒ½ç¼“å­˜ï¼Ÿ<ol><li>ä¸èƒ½è¢«ç¼“å­˜çš„è¯·æ±‚HTTP ä¿¡æ¯å¤´ä¸­åŒ…å«Cache-Control:no-cacheï¼Œpragma:no-cacheï¼Œæˆ–Cache-Control:max-age=0 ç­‰å‘Šè¯‰æµè§ˆå™¨ä¸ç”¨ç¼“å­˜çš„è¯·æ±‚</li><li>éœ€è¦æ ¹æ®Cookieï¼Œè®¤è¯ä¿¡æ¯ç­‰å†³å®šè¾“å…¥å†…å®¹çš„åŠ¨æ€è¯·æ±‚æ˜¯ä¸èƒ½è¢«ç¼“å­˜çš„</li><li>ç»è¿‡HTTPSå®‰å…¨åŠ å¯†çš„è¯·æ±‚ï¼ˆæœ‰äººä¹Ÿç»è¿‡æµ‹è¯•å‘ç°ï¼Œie å…¶å®åœ¨å¤´éƒ¨åŠ å…¥ Cache-Controlï¼šmax-age ä¿¡æ¯ï¼Œfirefox åœ¨å¤´éƒ¨åŠ å…¥ Cache-Control:Public ä¹‹åï¼Œèƒ½å¤Ÿå¯¹HTTPSçš„èµ„æºè¿›è¡Œç¼“å­˜ï¼‰</li><li>HTTP å“åº”å¤´ä¸­ä¸åŒ…å« Last-Modified/Etagï¼Œä¹Ÿä¸åŒ…å« Cache-Control/Expires çš„è¯·æ±‚æ— æ³•è¢«ç¼“å­˜</li><li>ç›®å‰æµè§ˆå™¨çš„å®ç°æ˜¯ä¸ä¼šå¯¹POSTè¯·æ±‚çš„å“åº”åšç¼“å­˜çš„ï¼ˆä»è¯­ä¹‰ä¸Šæ¥è¯´ä¹Ÿä¸åº”è¯¥ï¼‰ï¼Œå¹¶ä¸”è§„èŒƒä¸­ä¹Ÿè§„å®šäº†è¿”å›çŠ¶æ€ç ä¸å…è®¸æ˜¯304ã€‚ä¸è¿‡è¿™å¹¶ä¸è¡¨ç¤ºPOSTçš„å“åº”ä¸èƒ½è¢«ç¼“å­˜ï¼Œæ ¹æ®RFC 7231 - Hypertext Transfer Protocol (HTTP/1.1): Semantics and Contentä¸­æè¿°çš„ï¼Œå¦‚æœåœ¨POSTè¯·æ±‚å¯¹åº”çš„å“åº”ä¸­åŒ…å«Freshnessç›¸å…³ä¿¡æ¯çš„è¯ï¼Œè¿™æ¬¡å“åº”ä¹Ÿæ˜¯å¯ä»¥è¢«ç¼“å­˜ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä¸Šé¢çš„é‚£ä¸ªé“¾æ¥</li></ol></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSä¸stylusä¸CSSVarçš„ç›¸äº’ä½œç”¨</title>
      <link href="/2021/01/08/2021/JS%E4%B8%8Estylus%E4%B8%8ECSSVar%E7%9A%84%E7%9B%B8%E4%BA%92%E4%BD%9C%E7%94%A8/"/>
      <url>/2021/01/08/2021/JS%E4%B8%8Estylus%E4%B8%8ECSSVar%E7%9A%84%E7%9B%B8%E4%BA%92%E4%BD%9C%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>åœºæ™¯æ˜¯è¿™æ ·çš„ï¼š<br>ä½¿ç”¨stylusç»™æ‰€æœ‰çš„stylusæ–‡ä»¶æ··å…¥ä¸€ä¸ªâ€æ˜¯å¦é€‚é…â€çš„å˜é‡ï¼Œ<br>ä»è€Œè¾¾åˆ°æ”¹å˜è¿™ä¸ªCSSå˜é‡ï¼ŒåŒæ—¶å¯ä»¥å½±å“JSä¸­çš„remè®¾å®šï¼Œä»¥åŠSylusçš„å“åº”ã€‚</p><p><em>stylusVariableMixin.styl</em><br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$mediaVersion = <span class="literal">false</span><span class="comment">;</span></span><br></pre></td></tr></table></figure></p><a id="more"></a><p>è€Œæœ¬èº«åœ¨JSä¸­éœ€è¦è®¾ç½®font-size<br><em>mixin.ts</em><br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** èœå•å®šä¹‰ç­‰åº”ç”¨ä¼šè®¾ç½®font-size,æ•…éœ€è¦é‡ç½®ä¸€ä¸‹,ä¸èƒ½åœ¨ç›®å½•ç›´æ¥ä¸€æ¬¡è®¾ç½® */</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="type">Vue</span>, <span class="type">Component</span>, <span class="type">Watch</span> &#125; from <span class="symbol">'vue</span>-property-decorator';</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">export <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">fontSizeMixin</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è®¡ç®—rem</span></span><br><span class="line">    <span class="keyword">private</span> setFontSize() &#123;</span><br><span class="line">        let htmlDOM = document.documentElement,</span><br><span class="line">        clientWidth = htmlDOM.offsetWidth;</span><br><span class="line">        <span class="keyword">if</span> (!clientWidth) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">         htmlDOM.style.fontSize = <span class="number">10</span> * (clientWidth / <span class="number">1366</span>) + <span class="symbol">'p</span>x';</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> created() &#123;</span><br><span class="line">        <span class="keyword">this</span>.setFontSize();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> activated() &#123;</span><br><span class="line">        <span class="keyword">this</span>.setFontSize();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ‰€ä»¥æ€è€ƒç€èƒ½ä¸èƒ½å°†stylusä¸­çš„â€é€‚é…æ ‡è¯†â€œè®©JSèƒ½æ“ä½œåˆ°</p><p>åæ¥æŸ¥é˜…å¤šé‡èµ„æ–™å‘ç°ï¼ŒJSå¹¶ä¸èƒ½å¯¹stylusé¢„å¤„ç†å™¨åšä»€ä¹ˆæ“ä½œ</p><p>å†åæ¥ï¼Œå¸Œæœ›å€Ÿç”±  CSS,è¾¾åˆ°è¿™ä¸ªç›®çš„</p><p>stylus â€” css â€” JS</p><p>å€ŸåŠ©CSSä¹‹æ‰‹ï¼Œè®©JSå®ç°è¯»å–è¿™ä¸€å˜é‡</p><p>å®ç°å¦‚ä¸‹ï¼š<br>â‘ å®šä¹‰å…¨å±€å˜é‡<br><em>stylusVariableMixin.styl</em><br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$mediaVersion = <span class="literal">false</span><span class="comment">;</span></span><br></pre></td></tr></table></figure></p><p>â‘¡åœ¨æ‰“åŒ…æ—¶æ··å…¥ï¼Œï¼ˆè¿™ä¸€æ­¥è¿˜æœ‰ç»™å…¶ä»–stylusæ–‡ä»¶ä½¿ç”¨çš„åŸå› ï¼‰</p><p><em>webpack_dev_xxx.config.js</em><br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      <span class="attribute">test</span>: /\.<span class="built_in">styl</span>(us)?$/,</span><br><span class="line">      use: [<span class="string">"style-loader"</span>, <span class="string">"vue-style-loader"</span>, <span class="string">"css-loader"</span>, <span class="string">"stylus-loader"</span>,</span><br><span class="line">          &#123;</span><br><span class="line">              loader: <span class="string">'style-resources-loader'</span>,</span><br><span class="line">              options: &#123;</span><br><span class="line">                  patterns: [</span><br><span class="line">                      path.<span class="built_in">resolve</span>(__dirname, <span class="string">'./css/stylusVariableMixin.styl'</span>)</span><br><span class="line">                  ]</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><p>â‘¢è‡ªå®šä¹‰CSSå˜é‡æ¥æ”¶å…¨å±€å˜é‡<br><em>common.stylus</em><br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attribute">--global-bool</span>: $mediaVersion;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>â‘£JSè¯»å–<br><em>mixin.ts</em><br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> setFontSize() &#123;</span><br><span class="line">        <span class="keyword">let</span> htmlDOM = <span class="built_in">document</span>.documentElement,</span><br><span class="line">        clientWidth = htmlDOM.offsetWidth;</span><br><span class="line">        <span class="keyword">if</span> (!clientWidth) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ ¹æ®  stylusVariableMixin.styl åŠ common.stylus æ··å…¥çš„å˜é‡è¿›è¡Œçš„é€‚é…åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">let</span> rootStyle = getComputedStyle(<span class="built_in">document</span>.documentElement); </span><br><span class="line">        <span class="keyword">let</span> judgeBool = rootStyle.getPropertyValue(<span class="string">'--global-bool'</span>).trim();</span><br><span class="line">        <span class="keyword">if</span>(judgeBool === <span class="string">'true'</span>) &#123;</span><br><span class="line">            htmlDOM.style.fontSize = <span class="number">10</span> * (clientWidth / <span class="number">1366</span>) + <span class="string">'px'</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            htmlDOM.style.fontSize = <span class="number">10</span>  + <span class="string">'px'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>â€”-ç»“æŸâ€”<br>å†™çš„åŒ†å¿™ï¼Œå¯èƒ½æè¿°ä¸å¤Ÿç»†è‡´ï¼Œè§è°…ã€‚</p><p>è¯»å–CSSä¸­è‡ªå®šä¹‰å˜é‡çš„æ–¹æ³•<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">let rootStyle</span> = getComputedStyle(document.documentElement); </span><br><span class="line"><span class="attribute">        let judgeBool</span> = rootStyle.getPropertyValue(<span class="string">'--global-bool'</span>).trim();</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> CSS </tag>
            
            <tag> Stylus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS&amp;HTML</title>
      <link href="/2021/01/01/web/CSS/"/>
      <url>/2021/01/01/web/CSS/</url>
      
        <content type="html"><![CDATA[<h4 id="é‡ç»˜å›æµ"><a href="#é‡ç»˜å›æµ" class="headerlink" title="é‡ç»˜å›æµ"></a>é‡ç»˜å›æµ</h4><p>ğŸ‘‰ï¼š <a href="/2020/02/03/2020/é‡ç»˜å›æµ">æµè§ˆå™¨é‡ç»˜å›æµå¤ä¹ </a> </p>]]></content>
      
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> Web </tag>
            
            <tag> Interview </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP</title>
      <link href="/2021/01/01/web/HTTP/"/>
      <url>/2021/01/01/web/HTTP/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¸‰æ¬¡æ¡æ‰‹-amp-å››æ¬¡æŒ¥æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹-amp-å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹&amp;å››æ¬¡æŒ¥æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹&amp;å››æ¬¡æŒ¥æ‰‹</h4><p>ğŸ‘‰ï¼š <a href="/2020/07/09/2020/ä¸‰æ¬¡æŒ¥æ‰‹å››æ¬¡æ¡æ‰‹">ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹å¤ä¹ </a> </p><h4 id="å¸¸è§çŠ¶æ€ç "><a href="#å¸¸è§çŠ¶æ€ç " class="headerlink" title="å¸¸è§çŠ¶æ€ç "></a>å¸¸è§çŠ¶æ€ç </h4><p>ğŸ‘‰ï¼š <a href="/2020/10/28/2020/HTTPå¸¸è§çŠ¶æ€ç ">HTTPå¸¸è§çŠ¶æ€ç </a> </p><h4 id="è¾“å…¥URLåˆ°é¡µé¢æ„å»º"><a href="#è¾“å…¥URLåˆ°é¡µé¢æ„å»º" class="headerlink" title="è¾“å…¥URLåˆ°é¡µé¢æ„å»º"></a>è¾“å…¥URLåˆ°é¡µé¢æ„å»º</h4><p>ğŸ‘‰ï¼š <a href="/2021/04/12/2021/æµè§ˆå™¨çš„å¤šçº¿ç¨‹">è¾“å…¥URLåˆ°é¡µé¢æ„å»ºï¼Œå‘åç¿»ä¸€ç‚¹</a> </p><h4 id="HTTPSè¿æ¥è¿‡ç¨‹"><a href="#HTTPSè¿æ¥è¿‡ç¨‹" class="headerlink" title="HTTPSè¿æ¥è¿‡ç¨‹"></a>HTTPSè¿æ¥è¿‡ç¨‹</h4><p>ğŸ‘‰ï¼š <a href="/2020/07/09/2020/HTTPSè¿æ¥è¿‡ç¨‹">HTTPSè¿æ¥è¿‡ç¨‹</a> </p>]]></content>
      
      
      
        <tags>
            
            <tag> HTTP </tag>
            
            <tag> Web </tag>
            
            <tag> Interview </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¯æ—¥ä¸€é¢˜</title>
      <link href="/2021/01/01/web/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
      <url>/2021/01/01/web/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>æ‰“ç®—å¼€å¤šä¸€ä¸ªç›®å½•ï¼Œæ”¶å½•é‡åˆ°çš„é¢˜ç›®ï¼ŒåŒ…å«ç®—æ³•æˆ–è€…Webçš„å„æ–¹é¢</p><p>åŠ æ²¹å§ï¼Œå°‘å¹´ï¼</p><p><img src="/2021/01/01/web/æ¯æ—¥ä¸€é¢˜/learning.jpg" alt="NO2" title="NO2"></p><a id="more"></a><h4 id="æœ€é•¿å›æ–‡å­ä¸²"><a href="#æœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="æœ€é•¿å›æ–‡å­ä¸²"></a>æœ€é•¿å›æ–‡å­ä¸²</h4><p>ğŸ‘‰ï¼š <a href="/2021/04/12/2021/æœ€é•¿å›æ–‡å­ä¸²">æœ€é•¿å›æ–‡å­ä¸²</a> </p>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS</title>
      <link href="/2021/01/01/web/JS/"/>
      <url>/2021/01/01/web/JS/</url>
      
        <content type="html"><![CDATA[<h4 id="callå‡½æ•°æ¨¡æ‹Ÿ"><a href="#callå‡½æ•°æ¨¡æ‹Ÿ" class="headerlink" title="callå‡½æ•°æ¨¡æ‹Ÿ"></a>callå‡½æ•°æ¨¡æ‹Ÿ</h4><p>ğŸ‘‰ï¼š <a href="/2019/01/23/2019/JScallæ¨¡æ‹Ÿ">JS-Callå®ç°</a></p><h4 id="applyå‡½æ•°æ¨¡æ‹Ÿ"><a href="#applyå‡½æ•°æ¨¡æ‹Ÿ" class="headerlink" title="applyå‡½æ•°æ¨¡æ‹Ÿ"></a>applyå‡½æ•°æ¨¡æ‹Ÿ</h4><p>ğŸ‘‰ï¼š <a href="/2019/01/23/2019/JSapplyæ¨¡æ‹Ÿ">JS-Applyå®ç°</a></p><h4 id="bindå‡½æ•°æ¨¡æ‹Ÿ"><a href="#bindå‡½æ•°æ¨¡æ‹Ÿ" class="headerlink" title="bindå‡½æ•°æ¨¡æ‹Ÿ"></a>bindå‡½æ•°æ¨¡æ‹Ÿ</h4><p>ğŸ‘‰ï¼š <a href="/2019/01/24/2019/JSbindæ¨¡æ‹Ÿ">JS-bindå®ç°</a></p><a id="more"></a><h4 id="æŸ¯é‡ŒåŒ–å‡½æ•°"><a href="#æŸ¯é‡ŒåŒ–å‡½æ•°" class="headerlink" title="æŸ¯é‡ŒåŒ–å‡½æ•°"></a>æŸ¯é‡ŒåŒ–å‡½æ•°</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">fn, args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> length = fn.length; <span class="comment">// function.lengthå³å‚æ•°ä¸ªæ•°, æ­¤å¤„ä¸º3</span></span><br><span class="line">    <span class="keyword">var</span> args_ = args || [];</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> _args = args_.slice(<span class="number">0</span>), args, i;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">            args = <span class="built_in">arguments</span>[i];</span><br><span class="line">            _args.push(args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(_args.length &lt; length) &#123; <span class="comment">// ä¸é¢„è®¾å‚æ•°ä¸ªæ•°çš„æ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">return</span> curry.call(<span class="keyword">this</span>, fn, _args);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, _args);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fn = curry(<span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log([a, b, c]);</span><br><span class="line">&#125;)</span><br><span class="line">fn(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">fn(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>);</span><br></pre></td></tr></table></figure><h4 id="JS-EventLoop"><a href="#JS-EventLoop" class="headerlink" title="JS EventLoop"></a>JS EventLoop</h4><p>ğŸ‘‰ï¼š<a href="/2020/06/12/2020/EventLoop">EventLoop</a></p><h4 id="èŠ‚æµ-é˜²æŠ–"><a href="#èŠ‚æµ-é˜²æŠ–" class="headerlink" title="èŠ‚æµ? é˜²æŠ–?"></a>èŠ‚æµ? é˜²æŠ–?</h4><p>é˜²æŠ–: åœ¨äº‹ä»¶è¢«è§¦å‘nç§’å†…å†æ‰§è¡Œå›è°ƒï¼Œè‹¥nç§’å†…å†æ¬¡è§¦å‘ï¼Œåˆ™é‡æ–°å¼€å§‹è®¡æ—¶ã€‚<br>èŠ‚æµ: æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œåªæ‰§è¡Œä¸€æ¬¡å‡½æ•°ã€‚<br>åŒºåˆ«ï¼š</p><ul><li>åœ¨timerå­˜åœ¨æ—¶ï¼Œå¤„ç†æ–¹å¼ä¸åŒ</li><li>æ‰§è¡Œç»“æŸåï¼ŒèŠ‚æµä¼šä½¿timer = null;</li></ul><p>é˜²æŠ–ï¼š<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function debounce(fn, <span class="built_in">delay</span>) &#123;</span><br><span class="line">    <span class="built_in">var</span> <span class="built_in">timer</span>;</span><br><span class="line">    <span class="built_in">return</span> funtion() &#123;</span><br><span class="line">        <span class="built_in">var</span> _this = this;</span><br><span class="line">        <span class="built_in">var</span> <span class="built_in">args</span> = arguments;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">timer</span>) &#123;</span><br><span class="line">            clearTimeout(<span class="built_in">timer</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">timer</span> = setTimeout(function() &#123;</span><br><span class="line">            fn.<span class="built_in">apply</span>(_this, <span class="built_in">args</span>);</span><br><span class="line">        &#125;, <span class="built_in">delay</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>èŠ‚æµï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> timer;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">var</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">        <span class="keyword">if</span>(timer) &#123;</span><br><span class="line">            <span class="keyword">return</span>; <span class="comment">// return </span></span><br><span class="line">        &#125;</span><br><span class="line">        timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            fn.apply(_this, args);</span><br><span class="line">            timer = <span class="literal">null</span>;</span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="asyncå‡½æ•°åŸç†"><a href="#asyncå‡½æ•°åŸç†" class="headerlink" title="asyncå‡½æ•°åŸç†"></a>asyncå‡½æ•°åŸç†</h4><p>ğŸ‘‰ï¼š<a href="/2020/06/30/2020/async-awaitåŸç†">Async/awaitåŸç†</a></p><h4 id="è·¨åŸŸè¯·æ±‚"><a href="#è·¨åŸŸè¯·æ±‚" class="headerlink" title="è·¨åŸŸè¯·æ±‚"></a>è·¨åŸŸè¯·æ±‚</h4><p>ğŸ‘‰ï¼š<a href="/2020/05/11/2020/corsè·¨åŸŸ">è·¨åŸŸè¯·æ±‚</a></p><h4 id="XSSã€CSRF"><a href="#XSSã€CSRF" class="headerlink" title="XSSã€CSRF"></a>XSSã€CSRF</h4><p>ğŸ‘‰ï¼š<a href="/2020/08/11/2020/XSS-CSRF">XSSã€CSRFç›¸å…³</a></p><h4 id="JSç±»å‹åˆ¤æ–­"><a href="#JSç±»å‹åˆ¤æ–­" class="headerlink" title="JSç±»å‹åˆ¤æ–­"></a>JSç±»å‹åˆ¤æ–­</h4><ol><li><p>typeof</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tyepof <span class="string">''</span>; <span class="comment">// string</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">1</span>; <span class="comment">// number</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>(); <span class="comment">// Symbol</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>; <span class="comment">// boolean</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>; <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>; <span class="comment">// object(æ— æ•ˆ)</span></span><br><span class="line"><span class="keyword">typeof</span> []; <span class="comment">// object(æ— æ•ˆ)</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Function</span>(); <span class="comment">// object(æ— æ•ˆ)</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">// object(æ— æ•ˆ)</span></span><br></pre></td></tr></table></figure></li><li><p>instanceof<br>instanceofçš„æœºåˆ¶æ˜¯æ£€æµ‹æ„é€ å‡½æ•°çš„prototypeå±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œæ˜¯åˆ™è¿”å›trueï¼Œå¦åˆ™falseã€‚</p></li><li><p>constructor<br>å‡½æ•°çš„constructoræ˜¯ä¸ç¨³å®šçš„ï¼Œè¿™ä¸ªä¸»è¦æ˜¯å¦‚æœæ˜¯è‡ªå®šä¹‰å¯¹è±¡ï¼Œé‡å†™prototypeä¹‹åï¼ŒåŸæœ‰çš„constructorä¼šä¸¢å¤±ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">''</span>.constructor == <span class="built_in">String</span> <span class="comment">// true</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">1</span>).constructor == <span class="built_in">Number</span> <span class="comment">// true</span></span><br><span class="line"><span class="literal">true</span>.constructor == <span class="built_in">Boolean</span> <span class="comment">// true</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Function</span>().constructor == <span class="built_in">Function</span> <span class="comment">// true</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().constructor == <span class="built_in">Date</span> <span class="comment">// true</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Error</span>().constructor == <span class="built_in">Error</span> <span class="comment">// true</span></span><br><span class="line">[].constructor == <span class="built_in">Array</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p>toString<br>toString()æ˜¯è°ƒç”¨Objectçš„åŸå‹æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œä½†ä¼šå½“å‰å¯¹è±¡Class</p></li></ol><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span>.proto<span class="keyword">type</span>,toString.call(''); // [object <span class="type">String</span>]</span><br><span class="line"><span class="type">Object</span>.proto<span class="keyword">type</span>,toString.call(1); // [object <span class="type">Number</span>]</span><br><span class="line"><span class="type">Object</span>.proto<span class="keyword">type</span>,toString.call(true); // [object <span class="type">Boolean</span>]</span><br><span class="line"><span class="type">Object</span>.proto<span class="keyword">type</span>,toString.call(<span class="type">Symbol</span>()); // [object <span class="type">Symbol</span>]</span><br><span class="line"><span class="type">Object</span>.proto<span class="keyword">type</span>,toString.call(undefined); // [object <span class="type">Undefined</span>]</span><br><span class="line"><span class="type">Object</span>.proto<span class="keyword">type</span>,toString.call(null); // [object <span class="type">Null</span>]</span><br><span class="line"><span class="type">Object</span>.proto<span class="keyword">type</span>,toString.call(new <span class="type">Function</span>()); // [object <span class="type">Function</span>]</span><br><span class="line"><span class="type">Object</span>.proto<span class="keyword">type</span>,toString.call(new <span class="type">Date</span>()); // [object <span class="type">Date</span>]</span><br><span class="line"><span class="type">Object</span>.proto<span class="keyword">type</span>,toString.call([]); // [object <span class="type">Array</span>]</span><br><span class="line"><span class="type">Object</span>.proto<span class="keyword">type</span>,toString.call(new <span class="type">Error</span>()); // [object <span class="type">Error</span>]</span><br><span class="line"><span class="type">Object</span>.proto<span class="keyword">type</span>,toString.call(document); // [object <span class="type">HTMLDocument</span>]</span><br></pre></td></tr></table></figure><h4 id="thisæŒ‡å‘"><a href="#thisæŒ‡å‘" class="headerlink" title="thisæŒ‡å‘"></a>thisæŒ‡å‘</h4><p>ğŸ‘‰ï¼š<a href="/2019/10/17/2019/thisæŒ‡å‘">thisæŒ‡å‘</a></p><h4 id="JSåƒåœ¾å›æ”¶æœºåˆ¶"><a href="#JSåƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="JSåƒåœ¾å›æ”¶æœºåˆ¶"></a>JSåƒåœ¾å›æ”¶æœºåˆ¶</h4><p>ğŸ‘‰ï¼š<a href="/2020/09/23/2020/åƒåœ¾å›æ”¶æœºåˆ¶">åƒåœ¾å›æ”¶æœºåˆ¶</a></p><h4 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h4><p>ä¸€ä¸ªå‡½æ•°å’Œå¯¹å…¶å‘¨å›´çŠ¶æ€ï¼ˆlexical environmentï¼Œè¯æ³•ç¯å¢ƒï¼‰çš„å¼•ç”¨æ†ç»‘åœ¨ä¸€èµ·ï¼ˆæˆ–è€…è¯´å‡½æ•°è¢«å¼•ç”¨åŒ…å›´ï¼‰ï¼Œè¿™æ ·çš„ç»„åˆå°±æ˜¯é—­åŒ…ï¼ˆclosureï¼‰ã€‚<br>å…¶å®ç®€å•äº†è®²å°±æ˜¯ï¼šåœ¨å‡½æ•°å¤–æ‹¿åˆ°äº†å‡½æ•°å†…çš„å˜é‡(ä¸ªäººç†è§£)ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">'haveFun'</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">displayName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> displayName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> test = makeFun();</span><br><span class="line">test();</span><br></pre></td></tr></table></figure><h4 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h4><p>ğŸ‘‰ï¼š<a href="/2019/12/15/2019/JSåŸå‹é“¾">åŸå‹é“¾</a></p><h4 id="JSæ¨¡å—åŒ–æ¼”è¿›"><a href="#JSæ¨¡å—åŒ–æ¼”è¿›" class="headerlink" title="JSæ¨¡å—åŒ–æ¼”è¿›"></a>JSæ¨¡å—åŒ–æ¼”è¿›</h4><p>ğŸ‘‰ï¼š<a href="/2020/09/28/2020/JSæ¨¡å—åŒ–æ¼”è¿›">æ¨¡å—åŒ–</a></p><h4 id="JSç»§æ‰¿"><a href="#JSç»§æ‰¿" class="headerlink" title="JSç»§æ‰¿"></a>JSç»§æ‰¿</h4><p>ğŸ‘‰ï¼š<a href="/2019/01/23/2019/JavaScriptç»§æ‰¿">JSç»§æ‰¿</a></p><h4 id="JSæ‰‹å†™Promise"><a href="#JSæ‰‹å†™Promise" class="headerlink" title="JSæ‰‹å†™Promise"></a>JSæ‰‹å†™Promise</h4><p>ğŸ‘‰ï¼š<a href="/2021/04/01/2021/JSæ‰‹å†™Promise">JSæ‰‹å†™Promise</a></p><h4 id="æµè§ˆå™¨è¿›ç¨‹ç›¸å…³"><a href="#æµè§ˆå™¨è¿›ç¨‹ç›¸å…³" class="headerlink" title="æµè§ˆå™¨è¿›ç¨‹ç›¸å…³"></a>æµè§ˆå™¨è¿›ç¨‹ç›¸å…³</h4><p>ğŸ‘‰ï¼š<a href="/2021/04/12/2021/æµè§ˆå™¨çš„å¤šçº¿ç¨‹">æµè§ˆå™¨çš„å¤šçº¿ç¨‹</a></p><h4 id="JSè®¾è®¡æ¨¡å¼ç›¸å…³"><a href="#JSè®¾è®¡æ¨¡å¼ç›¸å…³" class="headerlink" title="JSè®¾è®¡æ¨¡å¼ç›¸å…³"></a>JSè®¾è®¡æ¨¡å¼ç›¸å…³</h4><p>ğŸ‘‰ï¼š<a href="/2020/09/29/2020/JSè®¾è®¡æ¨¡å¼">JSè®¾è®¡æ¨¡å¼</a></p><p><em>æœªå®Œå¾…ç»­â€¦</em>s</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Web </tag>
            
            <tag> Interview </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>interview</title>
      <link href="/2021/01/01/web/interview/"/>
      <url>/2021/01/01/web/interview/</url>
      
        <content type="html"><![CDATA[<p>æ”¶é›†æ•´ç†çš„å‰ç«¯é¢è¯•ç›¸å…³â€¦</p><p><img src="/2021/01/01/web/interview/MO1.png" alt="NO1" title="NO1"></p><a id="more"></a><h2 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h2><p>ğŸ‘‰ï¼š <a href="/2021/01/01/web/JS">JSé¢è¯•ç›¸å…³</a></p><h2 id="CSS-amp-HTML"><a href="#CSS-amp-HTML" class="headerlink" title="CSS&amp;HTML"></a>CSS&amp;HTML</h2><p>ğŸ‘‰ï¼š <a href="/2021/01/01/web/CSS">CSSã€HTMLé¢è¯•ç›¸å…³</a></p><h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><p>ğŸ‘‰ï¼š <a href="/2021/01/01/web/HTTP">HTTPé¢è¯•ç›¸å…³</a></p><h2 id="æ¯æ—¥ä¸€é¢˜"><a href="#æ¯æ—¥ä¸€é¢˜" class="headerlink" title="æ¯æ—¥ä¸€é¢˜"></a>æ¯æ—¥ä¸€é¢˜</h2><p>ğŸ‘‰ï¼š <a href="/2021/01/01/web/æ¯æ—¥ä¸€é¢˜">æ¯æ—¥ä¸€é¢˜ï¼ŒåŒ…å«ç®—æ³•åŠWebçš„å„æ–¹é¢</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> Interview </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>stylus_media</title>
      <link href="/2020/12/26/2020/stylus-media/"/>
      <url>/2020/12/26/2020/stylus-media/</url>
      
        <content type="html"><![CDATA[<p>æ¸²æŸ“å­—ä½“å“åº”</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">media_queries = &#123;</span><br><span class="line">  small: <span class="string">"only screen and (width: 1366px)"</span>,</span><br><span class="line">  big: <span class="string">"only screen and (width: 1920px)"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">fontSizeIter</span><span class="params">(smallSize, bigSize)</span></span></span><br><span class="line">    +for_fontSize(small)</span><br><span class="line">        fontSize(smallSize)</span><br><span class="line">    +for_fontSize(big)</span><br><span class="line">        fontSize(bigSize)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">for_fontSize</span><span class="params">(breakpoints)</span></span></span><br><span class="line">  conditions = ()</span><br><span class="line">  <span class="keyword">for</span> breakpoint <span class="keyword">in</span> breakpoints</span><br><span class="line">    push(conditions, media_queries[breakpoint])</span><br><span class="line">  conditions = join(<span class="string">""</span>, conditions)</span><br><span class="line">  @media conditions</span><br><span class="line">    &#123;block&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">fontSize</span><span class="params">(<span class="variable">$size</span>)</span></span></span><br><span class="line">  <span class="attribute">font-size</span> <span class="variable">$size</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#unicomView</span><br><span class="line">    .<span class="attribute">font</span>-<span class="number">12</span>-<span class="number">17</span></span><br><span class="line">        fontSizeIter(<span class="number">12px</span>, <span class="number">17px</span>)</span><br><span class="line">    .<span class="attribute">font</span>-<span class="number">14</span>-<span class="number">20</span></span><br><span class="line">        fontSizeIter(<span class="number">14px</span>, <span class="number">20px</span>)</span><br><span class="line">    .<span class="attribute">font</span>-<span class="number">16</span>-<span class="number">22</span></span><br><span class="line">        fontSizeIter(<span class="number">16px</span>, <span class="number">22px</span>)</span><br><span class="line">    .<span class="attribute">font</span>-<span class="number">24</span>-<span class="number">34</span></span><br><span class="line">        fontSizeIter(<span class="number">24px</span>, <span class="number">34px</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> Stylus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>My</title>
      <link href="/2020/12/01/2020/My/"/>
      <url>/2020/12/01/2020/My/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¹´ï¼Œæœ€å¤§çš„æ”¶è·ï¼Œå°±æ˜¯ï¼Œç–«æƒ…æœŸé—´ï¼Œå¼€å§‹ç»™è‡ªå·±åšå¤§å¨äº†â€¦</p><p><img src="/2020/12/01/2020/My/NO12.jpg" alt="NO12" title="NO12"></p><p><strong>ä¸¢äººç°èœğŸ˜</strong></p><a id="more"></a><p><img src="/2020/12/01/2020/My/NO1.jpg" alt="NO1" title="NO1"></p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥å¸¸ç¢ç¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPå¸¸è§çŠ¶æ€ç </title>
      <link href="/2020/10/28/2020/HTTP%E5%B8%B8%E8%A7%81%E7%8A%B6%E6%80%81%E7%A0%81/"/>
      <url>/2020/10/28/2020/HTTP%E5%B8%B8%E8%A7%81%E7%8A%B6%E6%80%81%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h3 id="HTTPçŠ¶æ€ç "><a href="#HTTPçŠ¶æ€ç " class="headerlink" title="HTTPçŠ¶æ€ç "></a>HTTPçŠ¶æ€ç </h3><p>åœ¨XMLHttpRequestè¯·æ±‚ä¸­ï¼Œä¹Ÿæœ‰äº”ä¸ªçŠ¶æ€ç :</p><p>XMLHttpRequestçš„çŠ¶æ€ç ï¼š<br>0â€” æœªåˆå§‹åŒ–ï¼Œå°šæœªè°ƒç”¨open()æ–¹æ³•<br>1â€”å¯åŠ¨ï¼Œå·²ç»è°ƒç”¨open()æ–¹æ³•ï¼Œå¹¶æœªsend()<br>2â€”å‘é€ï¼Œå·²ç»send,ä½†æœªæ”¶åˆ°å“åº”<br>3â€”æ¥æ”¶<br>4â€”å®Œæˆ</p><p>HTTPçš„çŠ¶æ€ç ï¼š</p><a id="more"></a><h4 id="1xx"><a href="#1xx" class="headerlink" title="1xx"></a>1xx</h4><p>è¡¨ç¤ºè¯·æ±‚å·²ç»æ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç†ï¼ŒHTTP/1.0åè®®ä¸­æ²¡æœ‰å®šä¹‰1xxçŠ¶æ€ç ï¼Œé™¤éåœ¨æŸäº›å®éªŒä¸‹ï¼Œå¦åˆ™æœåŠ¡å™¨ç¦æ­¢å‘é€1xxå“åº”</p><h5 id="100-Continue"><a href="#100-Continue" class="headerlink" title="100 Continue"></a>100 Continue</h5><p>æœåŠ¡ç«¯å·²ç»æ¥æ”¶ï¼Œä¸”ä»æœªæ‹’ç»ï¼Œå®¢æˆ·ç«¯åº”è¯¥ç»§ç»­è¯·æ±‚</p><h4 id="2xx"><a href="#2xx" class="headerlink" title="2xx"></a>2xx</h4><h5 id="200-OK"><a href="#200-OK" class="headerlink" title="200 OK"></a>200 OK</h5><p>è¯·æ±‚å·²ç»æˆåŠŸï¼Œå“åº”ä¸æ•°æ®éƒ½éšæ­¤è¿”å›ã€‚</p><h5 id="202-Accepted"><a href="#202-Accepted" class="headerlink" title="202 Accepted"></a>202 Accepted</h5><p>æœåŠ¡å™¨å·²ç»æ¥æ”¶è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†ï¼›<br>è¿”å›ç›®çš„æ˜¯å…è®¸æœåŠ¡å™¨æ‰§è¡Œå…¶ä»–è¿‡ç¨‹è¯·æ±‚ï¼Œä¾‹å¦‚æ¯å¤©æ‰§è¡Œä¸€æ¬¡çš„æ‰¹è¯·æ±‚ï¼Œä¸å¿…è®©å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¸€ç›´è¿æ¥ç­‰å¾…å®Œæˆï¼Œæ‰€æœ‰å¯ä»¥å…ˆè¿”å›202ã€‚</p><h5 id="204-Not-Content"><a href="#204-Not-Content" class="headerlink" title="204 Not Content"></a>204 Not Content</h5><p>æœåŠ¡å™¨å·²ç»å¤„ç†è¯·æ±‚ï¼Œä½†æ²¡æœ‰è¿”å›ä»»ä½•å®ä½“å†…å®¹ï¼Œæµè§ˆå™¨æ˜¾ç¤ºçš„é¡µé¢ä¸ä¼šå‘ç”Ÿæ›´æ–°</p><h5 id="205-Reset-Content"><a href="#205-Reset-Content" class="headerlink" title="205 Reset Content"></a>205 Reset Content</h5><p>æœåŠ¡å™¨æˆåŠŸå¤„ç†è¯·æ±‚ï¼Œä¸”æ²¡æœ‰è¿”å›ä»»ä½•å®ä½“å†…å®¹ï¼Œä½†å¸Œæœ›è¯·æ±‚è€…é‡ç½®æ–‡æ¡£è§†å›¾ï¼Œæ›´æ–°æµè§ˆå™¨é¡µé¢ï¼Œè¿™ä¸€ç‚¹ä¸204ä¸åŒï¼Œä¾‹å¦‚é‡ç½®è¡¨å•</p><h5 id="Partial-Content"><a href="#Partial-Content" class="headerlink" title="Partial Content"></a>Partial Content</h5><p>æœåŠ¡å™¨æˆåŠŸå¤„ç†éƒ¨åˆ†GETè¯·æ±‚ï¼Œç±»ä¼¼FlashGetæˆ–è€…è¿…é›·è¿™é‡ŒHTTPä¸‹è½½å·¥å…·ï¼Œä½¿ç”¨è¿™ç§å“åº”æ–­ç‚¹ç»­ä¼ æˆ–è€…ä¸‹è½½ï¼Œè¿”å›ä¹‹åè®©ç”¨æˆ·è‡ªè¡Œé€‰æ‹©ä¸‹è½½ä¹‹ç±»çš„è¡Œä¸º</p><h4 id="3xx"><a href="#3xx" class="headerlink" title="3xx"></a>3xx</h4><p>3xxè¿™ç±»çŠ¶æ€ç éœ€è¦å®¢æˆ·ç«¯é‡‡å–è¿›ä¸€æ­¥æ“ä½œï¼Œæ‰èƒ½å®Œæˆè¯·æ±‚ï¼Œä¸€èˆ¬æ˜¯é‡å®šå‘é—®é¢˜ï¼Œå½“ä¸”è¯·æ±‚çš„æ–¹æ³•æ˜¯GETæˆ–è€…HEADæ—¶ï¼Œæµè§ˆå™¨æ‰ä¼šè‡ªåŠ¨æäº¤æ‰§è¡Œåç»­æ“ä½œï¼Œä¸€èˆ¬å°è¯•æ¬¡æ•°ä¸è¶…è¿‡äº”æ¬¡</p><h5 id="301-Moved-Permanently-æ°¸ä¹…é‡å®šå‘"><a href="#301-Moved-Permanently-æ°¸ä¹…é‡å®šå‘" class="headerlink" title="301 Moved Permanently    æ°¸ä¹…é‡å®šå‘"></a>301 Moved Permanently    æ°¸ä¹…é‡å®šå‘</h5><p>è¯·æ±‚èµ„æºå·²ç»æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ï¼Œè¿”å›çš„æ˜¯æ–°URIåœ¨å“åº”çš„locationåŸŸï¼Œå¦‚æœä¸æ˜¯<code>GET</code>æˆ–<code>HEAD</code>ï¼Œæµè§ˆå™¨å°†ç¦æ­¢é‡å®šå‘</p><h5 id="302-Found-ä¸´æ—¶é‡å®šå‘"><a href="#302-Found-ä¸´æ—¶é‡å®šå‘" class="headerlink" title="302 Found    ä¸´æ—¶é‡å®šå‘"></a>302 Found    ä¸´æ—¶é‡å®šå‘</h5><p>è¯·æ±‚çš„èµ„æºä¸´æ—¶ä»ä¸åŒçš„URLä¸­è¯·æ±‚ï¼Œè¿™æ ·çš„é‡å®šå‘æ˜¯ä¸´æ—¶çš„</p><h5 id="303-See-Other"><a href="#303-See-Other" class="headerlink" title="303 See Other"></a>303 See Other</h5><p>è¯·æ±‚çš„èµ„æºä¸­å­˜åœ¨å¦ä¸€ä¸ªURLï¼Œå°†é‡å®šå‘ä½¿ç”¨GETæ–¹æ³•è·å–ï¼Œä¸302çš„åŒºåˆ«æ˜¯302ä¸ä¼šæ”¹å˜è¯·æ±‚çš„æ–¹æ³•ï¼Œå¯¹äº303ä½¿ç”¨POSTè¯·æ±‚åï¼Œé‡å®šå‘ä¼šè½¬ä¸ºGETæ–¹æ³•</p><h5 id="304-Not-Modified"><a href="#304-Not-Modified" class="headerlink" title="304 Not Modified"></a>304 Not Modified</h5><p>å®¢æˆ·ç«¯å‘é€é™„å¸¦æ¡ä»¶çš„GETè¯·æ±‚åï¼ŒæœåŠ¡å™¨å¤„ç†è€Œè¿”å›çš„æ–‡æ¡£å†…å®¹è‡ªä»ä¸Šæ¬¡è®¿é—®ä¾èµ–æ²¡æœ‰æ”¹å˜ï¼Œåˆ™æœåŠ¡å™¨è¿”å›è¿™ä¸ªçŠ¶æ€ç ï¼Œä¾‹å¦‚åœ¨åå•†ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œè·å–èµ„æº</p><p><em>æµè§ˆå™¨ç¼“å­˜å¤ä¹ </em></p><p>ğŸ‘‰ï¼š<a href="/2021/02/26/2021/HTTPç¼“å­˜">HTTPç¼“å­˜æœºåˆ¶</a></p><h5 id="307-Temporart-Redirect"><a href="#307-Temporart-Redirect" class="headerlink" title="307 Temporart Redirect"></a>307 Temporart Redirect</h5><p>è¯·æ±‚çš„èµ„æºä¸´æ—¶ä»ä¸åŒURLä¸­å“åº”ï¼Œè¿™æ ·çš„é‡å®šå‘æ˜¯ä¸´æ—¶çš„<br>307ä¸æŒ‡å®šå®¢æˆ·ç«¯ç”¨ä»€ä¹ˆæ ·çš„è¯·æ±‚æ–¹æ³•ï¼Œä¸302ã€303ä¸åŒï¼Œä¸æ”¹å˜æ–¹æ³•</p><h4 id="4xx"><a href="#4xx" class="headerlink" title="4xx"></a>4xx</h4><p>å®¢æˆ·ç«¯å‘ç”Ÿé”™è¯¯</p><h5 id="400-Bad-Request"><a href="#400-Bad-Request" class="headerlink" title="400 Bad Request"></a>400 Bad Request</h5><p>åŒ…å«è¯­æ³•é”™è¯¯ï¼Œå½“å‰è¯·æ±‚æ— æ³•è¢«ç†è§£ï¼Œå®¢æˆ·ç«¯ä¿®æ”¹åå†è¯•</p><h5 id="401-Unauthorized"><a href="#401-Unauthorized" class="headerlink" title="401 Unauthorized"></a>401 Unauthorized</h5><p>éœ€è¦è®¤è¯ï¼Ÿ</p><h5 id="403-Forbidden"><a href="#403-Forbidden" class="headerlink" title="403 Forbidden"></a>403 Forbidden</h5><p>æœåŠ¡å™¨ç†è§£å®¢æˆ·è¯·æ±‚ï¼Œä½†æ‹’ç»å¤„ç†å®ƒï¼Œèµ„æºä¸å¯ç”¨ï¼Œé€šå¸¸æœåŠ¡å™¨ä¸Šæ–‡ä»¶æˆ–è€…ç›®å½•è®¾ç½®å¯¼è‡´ï¼Œä¾‹å¦‚åœ¨nginxè½¬å‘ï¼Œä¸Šæ¬¡æ–‡ä»¶è¶…è¿‡nginxå¤§å°é™åˆ¶æ—¶ã€‚</p><h5 id="404-Not-Found"><a href="#404-Not-Found" class="headerlink" title="404 Not Found"></a>404 Not Found</h5><p>æœåŠ¡å™¨æ‰¾ä¸åˆ°æŒ‡å®šèµ„æºï¼Œé€šå¸¸è¢«ç”¨äºä¸æƒ³é€éœ²æ‹’ç»è¯·æ±‚çš„åŸå› ï¼Œå¯å‚çœ‹403</p><h5 id="405-Method-Not-Allowed"><a href="#405-Method-Not-Allowed" class="headerlink" title="405 Method Not Allowed"></a>405 Method Not Allowed</h5><p>è¯·æ±‚çš„æ–¹æ³•æ— æ³•åŒäºè¯·æ±‚å“åº”çš„èµ„æºï¼Œè¿”å›çš„å“åº”ä¼šæŒ‡æ˜Allowæ¥å—çš„è¯·æ±‚æ–¹æ³•</p><h4 id="5xx"><a href="#5xx" class="headerlink" title="5xx"></a>5xx</h4><p>æœåŠ¡å™¨æœ¬èº«å‡ºé”™ï¼Œæˆ–è€…æ²¡æœ‰è¶³å¤Ÿçš„èƒ½åŠ›æ¥å¤„ç†è¯·æ±‚ï¼Œæœ‰å¼‚å¸¸çŠ¶æ€</p><h5 id="500-Internal-Server-Error"><a href="#500-Internal-Server-Error" class="headerlink" title="500 Internal Server Error"></a>500 Internal Server Error</h5><p>æœåŠ¡å™¨é‡åˆ°æœªæ›¾é¢„æ–™çš„çŠ¶æ€ï¼Œå¯¼è‡´æ— æ³•å®Œæˆè¯·æ±‚å¤„ç†</p><h5 id="501-Not-Implemented"><a href="#501-Not-Implemented" class="headerlink" title="501 Not Implemented"></a>501 Not Implemented</h5><p>æœåŠ¡å™¨ä¸æ”¯æŒå½“å‰è¯·æ±‚æ‰€éœ€è¦çš„åŠŸèƒ½ï¼ŒæœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚çš„æ–¹æ³•</p><h5 id="502-Bad-Gateway"><a href="#502-Bad-Gateway" class="headerlink" title="502 Bad Gateway"></a>502 Bad Gateway</h5><p>ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”ï¼Œä¹Ÿå°±æ˜¯ä¸­è½¬çš„é‚£ä¸ªæœåŠ¡å™¨æ”¶åˆ°æ›´ä¸Šå±‚æœåŠ¡å™¨çš„æ— æ•ˆå“åº”ï¼Œä¾‹å¦‚åœ¨nginxä»£ç†çš„æ—¶å€™ï¼Œæ–­ç½‘çš„æ—¶å€™ã€‚</p><h5 id="503-Service-Unavailable"><a href="#503-Service-Unavailable" class="headerlink" title="503 Service Unavailable"></a>503 Service Unavailable</h5><p>æœåŠ¡å™¨ä¸´æ—¶ç»´æŠ¤ï¼ŒæœåŠ¡å™¨å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ï¼Œåœ¨ä¸€æ®µæ—¶é—´åæ¢å¤ï¼›</p><h5 id="504-Gateway-Timeout"><a href="#504-Gateway-Timeout" class="headerlink" title="504 Gateway Timeout"></a>504 Gateway Timeout</h5><ol><li>ä½œä¸ºç½‘å…³æˆ–ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œ<strong>æœªèƒ½åŠæ—¶</strong>ä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°å“åº”ï¼›</li><li><strong>ä¸502çš„åŒºåˆ«</strong>ï¼Œ502å·²ç»å»ºç«‹äº†è¿æ¥ï¼Œä½†è¶…æ—¶ï¼Œ504ä¸åç«¯è¿æ¥æœªå»ºç«‹ï¼Œè¶…æ—¶ã€‚</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSè®¾è®¡æ¨¡å¼</title>
      <link href="/2020/09/29/2020/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/09/29/2020/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰æ–‡"><a href="#å‰æ–‡" class="headerlink" title="å‰æ–‡"></a>å‰æ–‡</h3><p>æœ¬ç¯‡å°†ä»‹ç»ä»¥ä¸‹å‡ ç§è®¾è®¡æ¨¡å¼ï¼š</p><ol><li>æ„é€ å™¨æ¨¡å¼</li><li>æ¨¡å—åŒ–æ¨¡å¼</li><li>æš´éœ²æ¨¡å—æ¨¡å¼</li><li>å•ä¾‹æ¨¡å¼</li><li>è§‚å¯Ÿè€…æ¨¡å¼</li><li>å‘å¸ƒè®¢é˜…æ¨¡å¼</li><li>ä¸­ä»‹è€…æ¨¡å¼</li><li>åŸå‹æ¨¡å¼</li><li>å‘½ä»¤æ¨¡å¼</li><li>å¤–è§‚æ¨¡å¼</li><li>å·¥å‚æ¨¡å¼</li><li>Mixinæ¨¡å¼</li><li>è£…é¥°æ¨¡å¼</li><li>MVCæ¨¡å¼</li><li>åˆ›å»ºè€…æ¨¡å¼</li></ol><a id="more"></a><p>å¯¹äºJSeræ¥è¯´ï¼Œå¯èƒ½å®é™…å¼€å‘ä¸Šç”¨åˆ°çš„å¯èƒ½ä¼šæ²¡æœ‰é‚£ä¹ˆå¤šï¼Œä½†æ˜¯å­¦å­¦ä¹Ÿä¸é”™ğŸ˜­ï¼Œï¼ˆæœ¬èœå¯èƒ½æ¥è§¦çš„ä¹Ÿä¸è¿‡å‡ ç§ï¼‰ã€‚</p><h4 id="æ„é€ å™¨æ¨¡å¼"><a href="#æ„é€ å™¨æ¨¡å¼" class="headerlink" title="æ„é€ å™¨æ¨¡å¼"></a>æ„é€ å™¨æ¨¡å¼</h4><ol><li>æ„é€ å‡½æ•°ï¼š<br>åœ¨è¿™ä¸ªæ„é€ å™¨å†…éƒ¨ï¼Œå…³é”®å­—thiså¼•ç”¨åˆ°åˆšè¢«åˆ›å»ºçš„å¯¹è±¡ã€‚å›åˆ°å¯¹è±¡åˆ›å»ºï¼Œä¸€ä¸ªåŸºæœ¬çš„æ„é€ å‡½æ•°çœ‹èµ·æ¥åƒè¿™æ ·:</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Car</span>(<span class="params">model, year, miles</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.model = model;</span><br><span class="line">    <span class="keyword">this</span>.year = year;</span><br><span class="line">    <span class="keyword">this</span>.miles = miles;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.model&#125;</span> + <span class="subst">$&#123;<span class="keyword">this</span>.year&#125;</span> + <span class="subst">$&#123;<span class="keyword">this</span>.miles&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> civic = <span class="keyword">new</span> Car( <span class="string">"Honda Civic"</span>, <span class="number">2009</span>, <span class="number">20000</span> );</span><br><span class="line"><span class="keyword">var</span> mondeo = <span class="keyword">new</span> Car( <span class="string">"Ford Mondeo"</span>, <span class="number">2010</span>, <span class="number">5000</span> );</span><br><span class="line"><span class="built_in">console</span>.log(civic.toString());</span><br></pre></td></tr></table></figure><p>ç¼ºé™·: æ¯ä¸ªå¯¹è±¡éƒ½ä¼šå¸¦ä¸Š <code>toString</code> ä¹‹ç±»çš„å‡½æ•°</p><ol start="2"><li>åŸå‹é“¾ç‰ˆæ„é€ å™¨<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Car_prop</span>(<span class="params"> model, year, miles </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.model = model;</span><br><span class="line">    <span class="keyword">this</span>.year = year;</span><br><span class="line">    <span class="keyword">this</span>.miles = miles;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">Car_prop.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.model + <span class="string">" has done "</span> + <span class="keyword">this</span>.miles + <span class="string">" miles"</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> civic_prop = <span class="keyword">new</span> Car_prop( <span class="string">"Honda Civic"</span>, <span class="number">2009</span>, <span class="number">20000</span> );</span><br><span class="line"><span class="keyword">var</span> mondeo_prop = <span class="keyword">new</span> Car_prop( <span class="string">"Ford Mondeo"</span>, <span class="number">2010</span>, <span class="number">5000</span> );</span><br><span class="line"><span class="built_in">console</span>.log(civic_prop.toString());</span><br></pre></td></tr></table></figure></li></ol><h4 id="æ¨¡å—åŒ–æ¨¡å¼"><a href="#æ¨¡å—åŒ–æ¨¡å¼" class="headerlink" title="æ¨¡å—åŒ–æ¨¡å¼"></a>æ¨¡å—åŒ–æ¨¡å¼</h4><ol><li>æ¨¡å—åŒ–æ¨¡å¼æœ€åˆè¢«å®šä¹‰ä¸ºä¸€ç§å¯¹ä¼ ç»Ÿè½¯ä»¶å·¥ç¨‹ä¸­çš„ç±»æä¾›ç§æœ‰å’Œå…¬å…±å°è£…çš„æ–¹æ³•ã€‚</li><li>é€šè¿‡è¿™ç§æ–¹å¼ å¯ä»¥åœ¨å•ä¸€å¯¹è±¡ä¸­åŒ…å«å…¬å…±/ç§æœ‰æ–¹æ³•å’Œå˜é‡</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> testModuleMode = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        incrementCounter: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> counter++;</span><br><span class="line">        &#125;,</span><br><span class="line">        resetCounter: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`reset counter`</span>);</span><br><span class="line">            counter = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line">testModule.incrementCounter();</span><br><span class="line">testModule.resetCounter();</span><br></pre></td></tr></table></figure><p><em>è¿›é˜¶</em></p><p>åŒ…å«äº†å‘½åæ§ä»¶ï¼Œå…¬å…±å˜é‡ï¼Œç§æœ‰å˜é‡ï¼Œæ½œè—é—­åŒ…çš„å½¢å¼<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mySpaceName = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> myPrivateVar = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> myPrivateMethod = <span class="function"><span class="keyword">function</span>(<span class="params">foo</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(foo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        myPublicVar: <span class="string">'Foo'</span>,</span><br><span class="line">        muPubliceMethod: <span class="function"><span class="keyword">function</span>(<span class="params">bar</span>) </span>&#123;</span><br><span class="line">            myPrivateVar++;</span><br><span class="line">            myPrivateMethod(bar)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ç¼ºé™·ï¼šå®šä¹‰äº†å…¬å…±/ç§ç”¨æˆå‘˜ ä½†æ˜¯è¦æ”¹çš„æ—¶å€™ å°±å¾—åœ¨æˆå‘˜çš„æ–¹æ³•ä¸Šä¿®æ”¹ä»£ç </p><h4 id="æš´éœ²æ¨¡å—æ¨¡å¼"><a href="#æš´éœ²æ¨¡å—æ¨¡å¼" class="headerlink" title="æš´éœ²æ¨¡å—æ¨¡å¼"></a>æš´éœ²æ¨¡å—æ¨¡å¼</h4><ol><li>æˆ‘ä»¬å¯ä»¥ç®€å•åœ°åœ¨ç§æœ‰åŸŸä¸­å®šä¹‰æˆ‘ä»¬æ‰€æœ‰çš„å‡½æ•°å’Œå˜é‡ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªåŒ¿åå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«æœ‰ä¸€äº›æŒ‡é’ˆï¼Œè¿™äº›æŒ‡é’ˆæŒ‡å‘æˆ‘ä»¬æƒ³è¦æš´éœ²å‡ºæ¥çš„ç§æœ‰æˆå‘˜ï¼Œä½¿è¿™äº›ç§æœ‰æˆå‘˜å…¬æœ‰åŒ–</li><li>è¿™ä¸ªæ¨¡å¼å¯ä»¥ç”¨äºå°†ç§æœ‰å‡½æ•°å’Œå±æ€§ä»¥æ›´åŠ è§„èŒƒçš„å‘½åæ–¹å¼å±•ç°å‡ºæ¥ã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myRevealingModule = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> privateVar = <span class="string">"Ben Cherry"</span>,</span><br><span class="line">        publicVar  = <span class="string">"Hey there!"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">privateFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">"Name:"</span> + privateVar );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">publicSetName</span>(<span class="params"> strName </span>) </span>&#123;</span><br><span class="line">        privateVar = strName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">publicGetName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        privateFunction();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Reveal public pointers to </span></span><br><span class="line">    <span class="comment">// private functions and properties</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        setName: publicSetName,</span><br><span class="line">        greeting: publicVar,</span><br><span class="line">        getName: publicGetName</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">&#125;();</span><br><span class="line"></span><br><span class="line">myRevealingModule.setName( <span class="string">"Paul Kinlan"</span> );</span><br></pre></td></tr></table></figure></li></ol><ul><li>ä¼˜åŠ¿: ä½¿è„šæœ¬è¯­æ³•æ›´åŠ ä¸€è‡´ å…¬å…±è®¿é—®æ›´åŠ æ¸…æ™° å¢å¼ºäº†å¯è¯»æ€§</li><li>ç¼ºé™·: <ol><li>è¿™ä¸ªæ¨¡å¼çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯å¦‚æœç§æœ‰å‡½æ•°éœ€è¦ä½¿ç”¨å…¬æœ‰å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå…¬æœ‰å‡½æ•°åœ¨éœ€è¦æ‰“è¡¥ä¸çš„æ—¶å€™å°±ä¸èƒ½è¢«é‡è½½ã€‚å› ä¸ºç§æœ‰å‡½æ•°ä»ç„¶ä½¿ç”¨çš„æ˜¯ç§æœ‰çš„å®ç°ï¼Œå¹¶ä¸”è¿™ä¸ªæ¨¡å¼ä¸èƒ½ç”¨äºå…¬æœ‰æˆå‘˜ï¼Œåªç”¨äºå‡½æ•°ã€‚</li><li>å…¬æœ‰æˆå‘˜ä½¿ç”¨ç§æœ‰æˆå‘˜ä¹Ÿéµå¾ªä¸Šé¢ä¸èƒ½æ‰“è¡¥ä¸çš„è§„åˆ™ã€‚å› ä¸ºä¸Šé¢çš„åŸå› ï¼Œä½¿ç”¨æš´éœ²å¼æ¨¡å—æ¨¡å¼åˆ›å»ºçš„æ¨¡å—ç›¸å¯¹äºåŸå§‹çš„æ¨¡å—æ¨¡å¼æ›´å®¹æ˜“å‡ºé—®é¢˜ï¼Œå› æ­¤åœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦å°å¿ƒã€‚</li></ol></li></ul><h4 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h4><ul><li>ç‰¹ç‚¹ï¼šå”¯ä¸€ã€å…¨å±€è®¿é—®</li></ul><ol><li>ç®€å•ç‰ˆå•ä¾‹</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> singleton = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.instance = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">singleton.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line">singleton.getInstance = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.instace)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.instance; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.instance = <span class="keyword">new</span> Singleton(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> sunner = Singleton.getInstance(<span class="string">"sunner"</span>);   <span class="comment">//winner</span></span><br><span class="line"><span class="built_in">console</span>.log(sunner.getName())</span><br></pre></td></tr></table></figure><p>ä¸è¶³ï¼šåˆ›å»ºå¯¹è±¡å’Œå®ä¾‹æ“ä½œè€¦åˆåœ¨ä¸€èµ· ä¸ç¬¦åˆ å•ä¸€èŒè´£</p><ol start="2"><li><p>æ”¹è‰¯ç‰ˆï¼Œä½¿ç”¨é—­åŒ…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> createSingleton = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> instance = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">if</span>(instance) &#123;</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance = <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line">createSingleton.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> winner = <span class="keyword">new</span> createSingleton(<span class="string">"winner"</span>);  <span class="comment">//winner</span></span><br><span class="line"><span class="built_in">console</span>.log(winner.getName());</span><br></pre></td></tr></table></figure></li><li><p>ä»£ç†ç‰ˆå•ä¾‹</p></li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let proxyCreateSingleton = function() &#123;</span><br><span class="line">    let<span class="built_in"> instance </span>= <span class="literal">null</span>;</span><br><span class="line">    return function(name) &#123;</span><br><span class="line">        <span class="keyword">if</span>(instance) &#123; return<span class="built_in"> instance </span>&#125;</span><br><span class="line">        return<span class="built_in"> instance </span>= new singleProxy(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">function singleProxy(name) &#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">&#125;</span><br><span class="line">singleProxy.prototype.getName = function() &#123;</span><br><span class="line">    console.log(this.name);</span><br><span class="line">&#125;</span><br><span class="line">let winner_Proxy = new proxyCreateSingleton(<span class="string">"winner"</span>);</span><br><span class="line">console.log(winner_Proxy.getName());</span><br></pre></td></tr></table></figure><h4 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h4><p>è¢«è§‚å¯Ÿè€… - è§‚å¯Ÿè€…</p><ol><li>ä¸€ä¸ªæˆ–è€…æ›´å¤šçš„è§‚å¯Ÿè€…å¯¹ä¸€ä¸ªè¢«è§‚å¯Ÿè€…çš„çŠ¶æ€æ„Ÿå…´è¶£ï¼Œå°†è‡ªèº«çš„è¿™ç§å…´è¶£é€šè¿‡é™„ç€è‡ªèº«çš„æ–¹å¼æ³¨å†Œåœ¨è¢«è§‚å¯Ÿè€…èº«ä¸Šï¼›</li><li>å½“è¢«è§‚å¯Ÿè€…å‘ç”Ÿå˜åŒ–ï¼Œè€Œè¿™ç§ä¾¿å¯ä¹Ÿæ˜¯è§‚å¯Ÿè€…æ‰€å…³å¿ƒçš„ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªé€šçŸ¥ï¼Œè¿™ä¸ªé€šçŸ¥å°†ä¼šè¢«é€å‡ºå»ï¼Œæœ€åå°†ä¼šè°ƒç”¨æ¯ä¸ªè§‚å¯Ÿè€…çš„æ›´æ–°æ–¹æ³•ï¼›</li><li>å½“è§‚å¯Ÿè€…ä¸åœ¨å¯¹è¢«è§‚å¯Ÿè€…çš„çŠ¶æ€æ„Ÿå…´è¶£çš„æ—¶å€™ï¼Œå®ƒä»¬åªéœ€è¦ç®€å•çš„å°†è‡ªèº«å‰¥ç¦»å³å¯</li></ol><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span>    <span class="comment">Subject</span>      <span class="comment">(notify)</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>&gt;      <span class="comment">Observer1</span></span><br><span class="line"><span class="comment"></span>        <span class="comment">|</span></span><br><span class="line"><span class="comment"></span>        <span class="comment">|</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">(notify)</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>&gt;       <span class="comment">Observer2</span></span><br><span class="line"><span class="comment"></span>        <span class="comment">|</span></span><br><span class="line"><span class="comment"></span>        <span class="comment">|</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">(notify)</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>&gt;       <span class="comment">Observer3</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span> <span class="comment">*/</span></span><br></pre></td></tr></table></figure><ol><li>å®ç°ObserList</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">function ObserverList()&#123;</span><br><span class="line">    this.observerList = [];</span><br><span class="line">&#125;</span><br><span class="line">ObserverList.prototype.add = function( obj )&#123;</span><br><span class="line">    return this.observerList.push( obj );</span><br><span class="line">&#125;;</span><br><span class="line">ObserverList.prototype.count = function()&#123;</span><br><span class="line">    return this.observerList.length;</span><br><span class="line">&#125;;</span><br><span class="line">ObserverList.prototype.get = function( index )&#123;</span><br><span class="line">    if( index &gt; -1 &amp;&amp; index &lt; this.observerList.length )&#123;</span><br><span class="line">        return this.observerList[ index ];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">ObserverList.prototype.indexOf = function( obj, startIndex )&#123;</span><br><span class="line">    var i = startIndex;</span><br><span class="line">    while( i &lt; this.observerList.length )&#123;</span><br><span class="line">        if( this.observerList[i] === obj )&#123;</span><br><span class="line">            return i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">i++;</span></span><br><span class="line">    &#125;</span><br><span class="line">    return -1;</span><br><span class="line">&#125;;</span><br><span class="line">ObserverList.prototype.removeAt = function( index )&#123;</span><br><span class="line">    this.observerList.splice( index, 1 );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>å®ç°Subject</li></ol><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Subject</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.observers = <span class="keyword">new</span> ObserverList();</span><br><span class="line">&#125;</span><br><span class="line">Subject.prototype.addObserver = <span class="function"><span class="keyword">function</span><span class="params">( observer )</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.observers.add( observer );</span><br><span class="line">&#125;;</span><br><span class="line">Subject.prototype.removeObserver = <span class="function"><span class="keyword">function</span><span class="params">( observer )</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.observers.removeAt( <span class="keyword">this</span>.observers.indexOf( observer, <span class="number">0</span> ) );</span><br><span class="line">&#125;;</span><br><span class="line">Subject.prototype.notify = <span class="function"><span class="keyword">function</span><span class="params">( context )</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> observerCount = <span class="keyword">this</span>.observers.count();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; observerCount; i++)&#123;</span><br><span class="line">        <span class="keyword">this</span>.observers.get(i).update( context );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>å®ç°Observer </li></ol><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Observer</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.update = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>test</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> subject = <span class="keyword">new</span> Subject();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> observer1 = <span class="keyword">new</span> Observer();</span><br><span class="line">observer1.update = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'observer1'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> observer2 = <span class="keyword">new</span> Observer();</span><br><span class="line">observer2.update = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'observer2'</span>);</span><br><span class="line">&#125;</span><br><span class="line">subject.addObserver(observer1);</span><br><span class="line">subject.addObserver(observer2);</span><br><span class="line">subject.notify();    <span class="comment">// è¾“å‡º observer1 observer2</span></span><br></pre></td></tr></table></figure><h4 id="å‘å¸ƒè®¢é˜…æ¨¡å¼"><a href="#å‘å¸ƒè®¢é˜…æ¨¡å¼" class="headerlink" title="å‘å¸ƒè®¢é˜…æ¨¡å¼"></a>å‘å¸ƒè®¢é˜…æ¨¡å¼</h4><ol><li><p>è§‚å¯Ÿè€…å¯¹è±¡æ˜¯ä¸ªæ¶ˆæ¯å®¹å™¨ æ‹¥æœ‰è®¢é˜… å‘å¸ƒè®¢é˜… å–æ¶ˆè®¢é˜…çš„æ¶ˆæ¯æ–¹æ³•</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Observe = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> topics = &#123;&#125;; <span class="comment">// å›è°ƒå‡½æ•°å­˜æ”¾çš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        subscribe: <span class="function"><span class="keyword">function</span>(<span class="params"><span class="keyword">type</span>, fn</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ­¤æ¶ˆæ¯ä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">            <span class="keyword">if</span> (!topics[<span class="keyword">type</span>]) &#123;</span><br><span class="line">                topics[<span class="keyword">type</span>] = [];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å°†åŠ¨ä½œæ¨å…¥åˆ°è¯¥æ¶ˆæ¯å¯¹åº”çš„åŠ¨ä½œæ‰§è¡Œåºåˆ—ä¸­</span></span><br><span class="line">            topics[<span class="keyword">type</span>].push(fn);</span><br><span class="line">        &#125;,</span><br><span class="line">        publish: <span class="function"><span class="keyword">function</span>(<span class="params"><span class="keyword">type</span>, args</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// å¦‚æœè¯¥æ¶ˆæ¯æ²¡æœ‰è¢«æ³¨å†Œï¼Œåˆ™è¿”å›</span></span><br><span class="line">            <span class="keyword">if</span> (!topics[<span class="keyword">type</span>]) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> subscribers = topics[<span class="keyword">type</span>], len = subscribers ? subscribers.length: <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">                    <span class="comment">// ä¾æ¬¡æ‰§è¡Œæ³¨å†Œçš„æ¶ˆæ¯å¯¹åº”çš„åŠ¨ä½œåºåˆ—</span></span><br><span class="line">                    subscribers[i].call(self, args);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="number">0</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        unsubscribe: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> subscribers = topics[<span class="keyword">type</span>];</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨    </span></span><br><span class="line">            <span class="keyword">if</span> (subscribers <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> i = subscribers.length - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">for</span> (;i &gt;= <span class="number">0</span>; i-- ) &#123;</span><br><span class="line">                    <span class="comment">// å¦‚æœå­˜åœ¨è¯¥åŠ¨ä½œåˆ™åœ¨æ¶ˆæ¯åŠ¨ä½œåºåˆ—ä¸­ç§»é™¤å“åº”åŠ¨ä½œ    </span></span><br><span class="line">                    subscribers[i] === fn &amp;&amp; subscribers.splice(i, <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li><li><p>test</p></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> listener1 = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'listener1:'</span> + data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> listener2 = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'listener2:'</span> + data);</span><br><span class="line">&#125;</span><br><span class="line">Observer.subscribe(<span class="string">'example1'</span>, listener1);</span><br><span class="line">Observer.subscribe(<span class="string">'example1'</span>, listener2);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å‘å¸ƒé€šçŸ¥</span></span><br><span class="line">Observer.publish(<span class="string">'example1'</span>, <span class="string">'hello world!'</span>);</span><br><span class="line">Observer.publish(<span class="string">'example1'</span>, [<span class="string">'test'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]);</span><br><span class="line"><span class="comment">// å–æ¶ˆè®¢é˜…</span></span><br><span class="line">Observer.unsubscribe(<span class="string">'example1'</span>, listener2);</span><br><span class="line">Observer.publish(<span class="string">'example1'</span>, <span class="string">'123'</span>);</span><br></pre></td></tr></table></figure><ul><li><p>è§‚å¯Ÿè€…ä¸å‘å¸ƒè®¢é˜…çš„ä¸åŒ</p><ol><li>Publish/Subscribe(å‘å¸ƒ/è®¢é˜…)æ¨¡å¼ä½¿ç”¨ä¸€ä¸ªä¸»é¢˜/äº‹ä»¶é€šé“ï¼Œè¿™ä¸ªé€šé“ä»‹äºè®¢é˜…è€…å’Œå‘å¸ƒè€…ä¹‹é—´ï¼›</li><li>è¯¥è®¾è®¡æ¨¡å¼å…è®¸ä»£ç å®šä¹‰åº”ç”¨ç¨‹åºçš„ç‰¹å®šäº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶å¯ä»¥ä¼ é€’è‡ªå®šä¹‰å‚æ•°ï¼Œè‡ªå®šä¹‰å‚æ•°åŒ…å«è®¢é˜…è€…éœ€è¦çš„ä¿¡æ¯ï¼Œé‡‡ç”¨äº‹ä»¶é€šé“å¯ä»¥é¿å…å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´äº§ç”Ÿä¾èµ–å…³ç³»ï¼›</li><li>Observer(è§‚å¯Ÿè€…)æ¨¡å¼å…è®¸è§‚å¯Ÿè€…å®ä¾‹å¯¹è±¡(è®¢é˜…è€…)æ‰§è¡Œé€‚å½“çš„äº‹ä»¶å¤„ç†ç¨‹åºæ¥æ³¨å†Œå’Œæ¥æ”¶ç›®æ ‡å®ä¾‹å¯¹è±¡(å‘å¸ƒè€…)å‘å‡ºçš„é€šçŸ¥ï¼ˆå³åœ¨è§‚å¯Ÿè€…å®ä¾‹å¯¹è±¡ä¸Šæ³¨å†Œupdateæ–¹æ³•ï¼‰ã€‚<br>ä½¿è®¢é˜…è€…å’Œå‘å¸ƒè€…ä¹‹é—´äº§ç”Ÿäº†ä¾èµ–å…³ç³»ï¼Œä¸”æ²¡æœ‰äº‹ä»¶é€šé“ã€‚</li></ol></li><li><p>ä¼˜ç‚¹: è§£è€¦ @$%@#%</p></li><li>ç¼ºé™·: ç¼ºé™· å…·æœ‰ä¸ç¨³å®šæ€§ å‘å¸ƒè®¢é˜…éƒ½æ˜¯æ— çŠ¶æ€çš„</li></ul><h4 id="ä¸­ä»‹è€…æ¨¡å¼"><a href="#ä¸­ä»‹è€…æ¨¡å¼" class="headerlink" title="ä¸­ä»‹è€…æ¨¡å¼"></a>ä¸­ä»‹è€…æ¨¡å¼</h4><ol><li>å¦‚æœç³»ç»Ÿç»„ä»¶ä¹‹é—´å­˜åœ¨å¤§é‡çš„ç›´æ¥å…³ç³»ï¼Œå°±å¯èƒ½æ˜¯æ—¶å€™ï¼Œä½¿ç”¨ä¸€ä¸ªä¸­å¿ƒçš„æ§åˆ¶ç‚¹ï¼Œæ¥è®©ä¸åŒçš„ç»„ä»¶é€šè¿‡å®ƒæ¥é€šä¿¡ï¼›</li><li>ä¸­ä»‹è€…é€šè¿‡å°†ç»„ä»¶ä¹‹é—´æ˜¾å¼çš„ç›´æ¥çš„å¼•ç”¨æ›¿æ¢æˆé€šè¿‡ä¸­å¿ƒç‚¹æ¥äº¤äº’çš„æ–¹å¼ï¼Œæ¥åšåˆ°æ¾è€¦åˆã€‚è¿™æ ·å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£è€¦ï¼Œå’Œæ”¹å–„ç»„ä»¶çš„é‡ç”¨æ€§ï¼›</li><li>ä¸­ä»‹è€…æ¨¡å¼ä¸»è¦ç”¨äºä¸€ä¸ªç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡çš„å¯¹è±¡ï¼Œè€Œä¸”è¿™äº›å¤§é‡çš„å¯¹è±¡éœ€è¦äº’ç›¸é€šä¿¡ï¼Œå› ä¸ºä¸¤ä¸ªå¯¹è±¡éœ€è¦é€šä¿¡ï¼Œä¸€ä¸ªå¯¹è±¡å¿…é¡»è¦æŒæœ‰å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ï¼Œç³»ç»Ÿé‡Œï¼Œæ¯ä¸ªå¯¹è±¡éƒ½äº’ç›¸å¼•ç”¨ï¼Œä¼šå¼•èµ·æ··ä¹±ï¼Œä¸­ä»‹è€…æŠŠæ‰€æœ‰çš„å¯¹è±¡éƒ½ç»Ÿä¸€ç®¡ç†èµ·æ¥ï¼Œå…¶ä»–çš„å¯¹è±¡é€šè¿‡ä¸­ä»‹è€…å»å’Œåˆ«çš„å¯¹è±¡é€šä¿¡ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">mediator</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.mediator = mediator;</span><br><span class="line">&#125;</span><br><span class="line">A.prototype = &#123;</span><br><span class="line">    send: <span class="function"><span class="keyword">function</span>(<span class="params">msg,receiver</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mediator.send(msg,<span class="string">'A'</span>,receiver);</span><br><span class="line">    &#125;,</span><br><span class="line">    receiveMsg: <span class="function"><span class="keyword">function</span>(<span class="params">msg,sender</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(sender+<span class="string">" say:"</span>+msg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params">mediator</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.mediator = mediator;</span><br><span class="line">&#125;</span><br><span class="line">B.prototype = &#123;</span><br><span class="line">    send: <span class="function"><span class="keyword">function</span>(<span class="params">msg,receiver</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mediator.send(msg,<span class="string">'B'</span>,receiver);</span><br><span class="line">    &#125;,</span><br><span class="line">    receiveMsg: <span class="function"><span class="keyword">function</span>(<span class="params">msg,sender</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(sender+<span class="string">" say:"</span>+msg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Mediator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.A = <span class="keyword">new</span> A(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.B = <span class="keyword">new</span> B(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">Mediator.prototype = &#123;</span><br><span class="line">    send: <span class="function"><span class="keyword">function</span>(<span class="params">msg,sender,receiver</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>[receiver].receiveMsg(msg,sender);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'receiver '</span>+receiver+<span class="string">' is not exsit'</span>);</span><br><span class="line">            <span class="keyword">this</span>[sender].receiveMsg(<span class="string">'receiver '</span>+ receiver +<span class="string">' is not exsit'</span>,<span class="string">'mediator'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> _mediator = <span class="keyword">new</span> Mediator();</span><br><span class="line"><span class="keyword">var</span> _a = <span class="keyword">new</span> A(_mediator);</span><br><span class="line"><span class="keyword">var</span> _b = <span class="keyword">new</span> B(_mediator);</span><br><span class="line">_a.send(<span class="string">'hello i am A'</span>,<span class="string">'B'</span>);</span><br><span class="line">_b.send(<span class="string">'hello i am B'</span>,<span class="string">'A'</span>);</span><br></pre></td></tr></table></figure><ul><li>ä¸­ä»‹è€…æ¨¡å¼</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mediator = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> _channels = [],</span><br><span class="line">        _subUid = <span class="number">-1</span></span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">channel, handler</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(!_channels[channel]) _channels[channel] = []</span><br><span class="line">      <span class="keyword">var</span> token = (++_subUid).toString()</span><br><span class="line">      _channels[channel].push(&#123;</span><br><span class="line">        token: token,</span><br><span class="line">        context: <span class="keyword">this</span>,</span><br><span class="line">        handler: handler</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span> token</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">publish</span>(<span class="params">channel, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(!_channels[channel]) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      <span class="keyword">var</span> subscribers = _channels[channel]</span><br><span class="line">      <span class="keyword">var</span> len = subscribers.length</span><br><span class="line">      <span class="keyword">while</span>(len--) &#123;</span><br><span class="line">        subscribers[len].handler.call(subscribers[len].context, data, channel, subscribers[len].token)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">unsubscribe</span>(<span class="params">token</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">var</span> channel <span class="keyword">in</span> _channels) &#123;</span><br><span class="line">        <span class="keyword">var</span> len = _channels[channel].length</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> index=<span class="number">0</span>; index&lt;len; index++) &#123;</span><br><span class="line">          <span class="keyword">if</span>(_channels[channel][index].token === token) &#123;</span><br><span class="line">            _channels[channel].splice(index, <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> token</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Moduleæ¨¡å¼å¼•å‡º</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      subscribe: subscribe,</span><br><span class="line">      publish: publish,</span><br><span class="line">      unsubscribe: unsubscribe,</span><br><span class="line">      <span class="comment">// ç»‘å®šåˆ°å…¶ä»–å¯¹è±¡ä½¿ç”¨è¯¥è®¾è®¡æ¨¡å¼</span></span><br><span class="line">      installTo: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">        obj.subscribe = subscribe</span><br><span class="line">        obj.publish = publish </span><br><span class="line">        obj.unsubscribe = unsubscribe</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line">  </span><br><span class="line">mediator.subscribe(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data, channel, token</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// true</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span> === mediator) </span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="built_in">console</span>.log(channel)</span><br><span class="line">    <span class="built_in">console</span>.log(token)</span><br><span class="line">&#125;)</span><br><span class="line">mediator.publish(<span class="string">'message'</span>, <span class="string">'hello world'</span>)</span><br></pre></td></tr></table></figure><ol><li>Mediator(ä¸­ä»‹è€…)æ¨¡å¼ï¼šå•ä¸€ç›®æ ‡é€šå¸¸æœ‰å¾ˆå¤šè§‚å¯Ÿè€…ï¼Œæœ‰æ—¶ä¸€ä¸ªç›®æ ‡çš„è§‚å¯Ÿè€…æ˜¯å¦ä¸€ä¸ªè§‚å¯Ÿè€…çš„ç›®æ ‡ã€‚é€šä¿¡å¯ä»¥å®ç°åŒå‘</li><li>Observer(è§‚å¯Ÿè€…)æ¨¡å¼ï¼šä¸å­˜åœ¨å°è£…çº¦æŸçš„å•ä¸€å¯¹è±¡ï¼Œç›®æ ‡å¯¹è±¡å’Œè§‚å¯Ÿè€…å¯¹è±¡å¿…é¡»åˆä½œæ‰èƒ½ç»´æŒçº¦æŸã€‚ è§‚å¯Ÿè€…å¯¹è±¡å‘è®¢é˜…å®ƒä»¬çš„å¯¹è±¡å‘å¸ƒå…¶æ„Ÿå…´è¶£çš„äº‹ä»¶ã€‚é€šä¿¡åªèƒ½æ˜¯å•å‘çš„</li></ol><h4 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h4><ol><li>åŸå‹æ¨¡å¼å¼•ç”¨ä¸ºé€šè¿‡å…‹éš†çš„æ–¹å¼åŸºäºä¸€ä¸ªç°æœ‰å¯¹è±¡çš„æ¨¡æ¿åˆ›å»ºå¯¹è±¡çš„æ¨¡å¼</li><li>åŸå‹æ¨¡å¼å¯ä»¥è®©å¤šä¸ªæ„é€ å‡½æ•°å¯¹åº”çš„å®ä¾‹å¯¹è±¡å…±äº«åŒä¸€ä¸ªåŸå‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myCar = &#123;</span><br><span class="line">    name: <span class="string">'a'</span>,</span><br><span class="line">    drive: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    stop: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> carInstance = <span class="built_in">Object</span>.create(myCar);</span><br><span class="line"><span class="built_in">console</span>.log(carInstance);</span><br></pre></td></tr></table></figure><p><em>è¿›é˜¶</em></p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createProto = (<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Fconstructor</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(_proto)</span> </span>&#123;</span><br><span class="line">        Fconstructor.prototype = _proto;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Fconstructor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><h4 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h4><ol><li>å‘½ä»¤æ¨¡å¼å°†å‘½ä»¤æ‰§è¡Œè€…å’Œå‘½ä»¤å‘èµ·è€…è§£è€¦ï¼Œæä¾›æ›´å¤§çš„æ•´ä½“çµæ´»æ€§ã€‚</li><li>ç”¨ç±»æ¥åšæ¯”å–»å°±æ˜¯ï¼ŒæŠ½è±¡ç±»ï¼ˆç±»ä¼¼äºå‘½ä»¤å‘èµ·è€…ï¼‰å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œä½†ä¸ä¸ºå®ƒçš„æˆå‘˜å‡½æ•°æä¾›å®ç°ï¼Œä½œä¸ºä¸€ä¸ªåŸºç±»æ´¾ç”Ÿå‡ºå…¶ä»–ç±»ï¼Œæ´¾ç”Ÿç±»ï¼ˆç±»ä¼¼äºå‘½ä»¤æ‰§è¡Œè€…ï¼‰é¦–å…ˆå…·ä½“æ¥å£ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> clientCustom = &#123;</span><br><span class="line">    name: <span class="string">'a'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cooker = &#123;</span><br><span class="line">    execute: <span class="function"><span class="keyword">function</span>(<span class="params">food</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`do! <span class="subst">$&#123;food&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commandFunc</span>(<span class="params">receiver, food</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.receiver = receiver;</span><br><span class="line">    <span class="keyword">this</span>.food = food;</span><br><span class="line">&#125;</span><br><span class="line">commandFunc.prototype.execute = <span class="function"><span class="keyword">function</span>(<span class="params">cooker</span>) </span>&#123;</span><br><span class="line">    cooker.execute(<span class="keyword">this</span>.food);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> orderCommand_1 = <span class="keyword">new</span> commandFunc(clientCustom, <span class="string">'èœ1'</span>);</span><br><span class="line">orderCommand_1.execute(cooker);</span><br></pre></td></tr></table></figure><h4 id="å¤–è§‚æ¨¡å¼"><a href="#å¤–è§‚æ¨¡å¼" class="headerlink" title="å¤–è§‚æ¨¡å¼"></a>å¤–è§‚æ¨¡å¼</h4><ol><li>è¿™ä¸€æ¨¡å¼æä¾›äº†é¢å‘ä¸€ç§æ›´å¤§å‹çš„ä»£ç ä½“æä¾›äº†ä¸€ä¸ªçš„æ›´é«˜çº§åˆ«çš„èˆ’é€‚çš„æ¥å£ï¼Œéšè—äº†å…¶çœŸæ­£çš„æ½œåœ¨å¤æ‚æ€§</li><li>æŠŠè¿™ä¸€æ¨¡å¼æƒ³è±¡æˆè¦æ˜¯å‘ˆç°ç»™å¼€å‘è€…ç®€åŒ–çš„APIï¼Œä¸€äº›æ€»æ˜¯ä¼šæå‡ä½¿ç”¨æ€§èƒ½çš„ä¸œè¥¿</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">module</span> = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _private = &#123;</span><br><span class="line">        i:<span class="number">5</span>,</span><br><span class="line">        <span class="keyword">get</span> : function() &#123;</span><br><span class="line">            <span class="built_in">console</span>.log( <span class="string">"current value:"</span> + <span class="keyword">this</span>.i);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">set</span> : function( val ) &#123;</span><br><span class="line">            <span class="keyword">this</span>.i = val;</span><br><span class="line">        &#125;,</span><br><span class="line">        run : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log( <span class="string">"running"</span> );</span><br><span class="line">        &#125;,</span><br><span class="line">        jump: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log( <span class="string">"jumping"</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        facade : <span class="function"><span class="keyword">function</span>(<span class="params"> args </span>) </span>&#123;</span><br><span class="line">            _private.set(args.val);</span><br><span class="line">            _private.get();</span><br><span class="line">            <span class="keyword">if</span> ( args.run ) &#123;</span><br><span class="line">                _private.run();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="built_in">module</span>.facade( &#123;<span class="attr">run</span>: <span class="literal">true</span>, <span class="attr">val</span>:<span class="number">10</span>&#125; );</span><br></pre></td></tr></table></figure><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// ç±»ä¼¼</span><br><span class="line"><span class="symbol">var</span> <span class="keyword">addMyEvent </span>= <span class="meta">function</span>( el,ev,<span class="meta">fn</span> )&#123;</span><br><span class="line">    <span class="meta">if</span>( el.<span class="keyword">addEventListener </span>)&#123;</span><br><span class="line">        el.<span class="keyword">addEventListener( </span>ev,<span class="meta">fn</span>, false )<span class="comment">;</span></span><br><span class="line">    &#125;<span class="meta">else</span> <span class="meta">if</span>(el.attachEvent)&#123;</span><br><span class="line">        el.attachEvent( <span class="string">"on"</span> + ev, <span class="meta">fn</span> )<span class="comment">;</span></span><br><span class="line">    &#125; <span class="meta">else</span>&#123;</span><br><span class="line">        el[<span class="string">"on"</span> + ev] = <span class="meta">fn</span><span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;<span class="comment">;</span></span><br></pre></td></tr></table></figure><p><em>æ›´å¤šæ€è·¯: ç±»ä¼¼äºæ£€æµ‹æµè§ˆå™¨ç‰ˆæœ¬ã€ç±»å‹, è°ƒç”¨ä¸€ä¸ªæ–¹æ³• æ–¹æ³•å†…éƒ¨å†æ‰§è¡Œå„ç§åˆ¤æ–­â€¦</em></p><h4 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h4><ol><li>å·¥å‚æ¨¡å¼æ˜¯å¦å¤–ä¸€ç§å…³æ³¨å¯¹è±¡åˆ›å»ºæ¦‚å¿µçš„åˆ›å»ºæ¨¡å¼ã€‚å®ƒçš„é¢†åŸŸä¸­åŒå…¶å®ƒæ¨¡å¼çš„ä¸åŒä¹‹å¤„åœ¨äºå®ƒå¹¶æ²¡æœ‰æ˜ç¡®è¦æ±‚æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ„é€ å™¨ï¼›</li><li>å–è€Œä»£ä¹‹ï¼Œä¸€ä¸ªå·¥å‚èƒ½æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„å…¬å…±æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­æŒ‡å®šæˆ‘ä»¬å¸Œæœ›è¢«åˆ›å»ºçš„å·¥å‚å¯¹è±¡çš„ç±»å‹ï¼›</li><li>è¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨æˆ‘ä»¬è¢«è¦æ±‚åˆ›å»ºä¸€ç§ç±»å‹çš„UIç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å°±æœ‰ä¸€ä¸ªUIå·¥å‚ã€‚å¹¶ä¸æ˜¯é€šè¿‡ç›´æ¥ä½¿ç”¨newæ“ä½œç¬¦æˆ–è€…é€šè¿‡å¦å¤–ä¸€ä¸ªæ„é€ å™¨æ¥åˆ›å»ºè¿™ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬å–è€Œä»£ä¹‹çš„å‘ä¸€ä¸ªå·¥å‚å¯¹è±¡ç´¢è¦ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼›</li><li>æˆ‘ä»¬å‘ŠçŸ¥å·¥å‚æˆ‘ä»¬éœ€è¦ä»€ä¹ˆç±»å‹çš„ç»„ä»¶ï¼ˆä¾‹å¦‚ï¼šâ€œæŒ‰é’®â€ï¼Œâ€œé¢æ¿â€ï¼‰ï¼Œè€Œå®ƒä¼šå°†å…¶åˆå§‹åŒ–ï¼Œç„¶åè¿”å›ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Car</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.doors = options.doors || <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">this</span>.state = options.state || <span class="string">"brand new"</span>;</span><br><span class="line">    <span class="keyword">this</span>.color = options.color || <span class="string">"silver"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Trunk</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.state = options.state || <span class="string">"used"</span>;</span><br><span class="line">    <span class="keyword">this</span>.wheelSize = options.wheelSize || <span class="string">"large"</span>;</span><br><span class="line">    <span class="keyword">this</span>.color = options.color || <span class="string">"blue"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">VehicleFactory</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.vehicleClass = Car;</span><br><span class="line">&#125;</span><br><span class="line">VehicleFactory.prototype.createVehicle = <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(options.type === <span class="string">'car'</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.vehicleClass.vehicleClass = Car;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.vehicleClass.vehicleClass = Trunk;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">this</span>.vehicleClass(options);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> carFctory = <span class="keyword">new</span> VehicleFactory();</span><br><span class="line"><span class="keyword">var</span> car = carFactory.createVehicle( &#123;</span><br><span class="line">    type: <span class="string">"car"</span>,</span><br><span class="line">    color: <span class="string">"yellow"</span>,</span><br><span class="line">    doors: <span class="number">6</span> &#125; </span><br><span class="line">);</span><br><span class="line"><span class="comment">// Outputs: true</span></span><br><span class="line"><span class="built_in">console</span>.log( car <span class="keyword">instanceof</span> Car );</span><br><span class="line"><span class="comment">// Outputs: Car object of color "yellow", doors: 6 in a "brand new" state</span></span><br><span class="line"><span class="built_in">console</span>.log( car );</span><br></pre></td></tr></table></figure><p><em>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ</em></p><ol><li>å½“æˆ‘ä»¬çš„å¯¹è±¡æˆ–è€…ç»„ä»¶è®¾ç½®æ¶‰åŠåˆ°é«˜ç¨‹åº¦çº§åˆ«çš„å¤æ‚åº¦æ—¶ï¼›</li><li>å½“æˆ‘ä»¬éœ€è¦æ ¹æ®æˆ‘ä»¬æ‰€åœ¨çš„ç¯å¢ƒæ–¹ä¾¿çš„ç”Ÿæˆä¸åŒå¯¹è±¡çš„å®ä½“æ—¶ï¼›</li><li>å½“æˆ‘ä»¬åœ¨è®¸å¤šå…±äº«åŒä¸€ä¸ªå±æ€§çš„è®¸å¤šå°å‹å¯¹è±¡æˆ–ç»„ä»¶ä¸Šå·¥ä½œæ—¶ï¼›</li><li>å½“å¸¦æœ‰å…¶å®ƒä»…ä»…éœ€è¦æ»¡è¶³ä¸€ç§APIçº¦å®š(åˆåé¸­å¼ç±»å‹)çš„å¯¹è±¡çš„ç»„åˆå¯¹è±¡å·¥ä½œæ—¶.è¿™å¯¹äºè§£è€¦æ¥è¯´æ˜¯æœ‰ç”¨çš„ã€‚</li></ol><h4 id="Mixinæ¨¡å¼"><a href="#Mixinæ¨¡å¼" class="headerlink" title="Mixinæ¨¡å¼"></a>Mixinæ¨¡å¼</h4><ol><li>å­ç±»åˆ’åˆ†æ˜¯ä¸€ä¸ªå‚è€ƒäº†ä¸ºä¸€ä¸ªæ–°å¯¹è±¡ç»§æ‰¿æ¥è‡ªä¸€ä¸ªåŸºç±»æˆ–è€…è¶…ç±»å¯¹è±¡çš„å±æ€§çš„æœ¯è¯­.åœ¨ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­,ç±»Bèƒ½å¤Ÿä»å¦å¤–ä¸€ä¸ªç±»Aå¤„æ‰©å±•ã€‚</li><li>è¿™é‡Œæˆ‘ä»¬å°†Açœ‹åšæ˜¯è¶…ç±»,è€Œå°†Bçœ‹åšæ˜¯Açš„å­ç±».å¦‚æ­¤,æ‰€æœ‰Bçš„å®ä½“éƒ½ä»Aå¤„ç»§æ‰¿äº†å…¶Açš„æ–¹æ³•.ç„¶è€ŒBä»ç„¶èƒ½å¤Ÿå®šä¹‰å®ƒè‡ªå·±çš„æ–¹æ³•,åŒ…æ‹¬é‚£äº›é‡è½½çš„åŸæœ¬åœ¨Aä¸­çš„å®šä¹‰çš„æ–¹æ³•ã€‚</li><li>Bæ˜¯å¦åº”è¯¥è°ƒç”¨å·²ç»è¢«é‡è½½çš„Aä¸­çš„æ–¹æ³•,æˆ‘ä»¬å°†è¿™ä¸ªå¼•è¿°ä¸ºæ–¹æ³•é“¾.Bæ˜¯å¦åº”è¯¥è°ƒç”¨A(è¶…ç±»)çš„æ„é€ å™¨,æˆ‘ä»¬å°†è¿™ç§°ä¸ºæ„é€ å™¨é“¾ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Person =  <span class="function"><span class="keyword">function</span>(<span class="params"> firstName , lastName </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.firstName = firstName;</span><br><span class="line">    <span class="keyword">this</span>.lastName =  lastName;</span><br><span class="line">    <span class="keyword">this</span>.gender = <span class="string">"male"</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> clark = <span class="keyword">new</span> Person( <span class="string">"Clark"</span> , <span class="string">"Kent"</span> );</span><br><span class="line"><span class="keyword">var</span> Superhero = <span class="function"><span class="keyword">function</span>(<span class="params"> firstName, lastName , powers </span>)</span>&#123;</span><br><span class="line">    Person.call( <span class="keyword">this</span>, firstName, lastName );</span><br><span class="line">    <span class="keyword">this</span>.powers = powers;</span><br><span class="line">&#125;;</span><br><span class="line">SuperHero.prototype = <span class="built_in">Object</span>.create( Person.prototype );</span><br><span class="line"><span class="keyword">var</span> superman = <span class="keyword">new</span> Superhero( <span class="string">"Clark"</span> ,<span class="string">"Kent"</span> , [<span class="string">"flight"</span>,<span class="string">"heat-vision"</span>] );</span><br><span class="line"><span class="built_in">console</span>.log( superman );</span><br></pre></td></tr></table></figure><p><em>è¿›é˜¶</em></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Define a simple Car constructor</span></span><br><span class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span> (<span class="params"> settings </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.model = settings.model || <span class="string">"no model provided"</span>;</span><br><span class="line">    <span class="keyword">this</span>.color = settings.color || <span class="string">"no colour provided"</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> Mixin = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">Mixin.prototype = &#123;</span><br><span class="line">    driveForward: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">"drive forward"</span> );</span><br><span class="line">    &#125;,</span><br><span class="line">    driveBackward: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">"drive backward"</span> );</span><br><span class="line">    &#125;,</span><br><span class="line">    driveSideways: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">"drive sideways"</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">augment</span>(<span class="params"> receivingClass, givingClass </span>) </span>&#123;</span><br><span class="line">    <span class="comment">// only provide certain methods</span></span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">arguments</span>[<span class="number">2</span>] ) &#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">2</span>, len = <span class="built_in">arguments</span>.length; i &lt; len; i++ ) &#123;</span><br><span class="line">            receivingClass.prototype[<span class="built_in">arguments</span>[i]] = givingClass.prototype[<span class="built_in">arguments</span>[i]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// provide all methods</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">var</span> methodName <span class="keyword">in</span> givingClass.prototype ) &#123;</span><br><span class="line">            <span class="keyword">if</span> ( !<span class="built_in">Object</span>.hasOwnProperty(receivingClass.prototype, methodName) ) &#123;</span><br><span class="line">                receivingClass.prototype[methodName] = givingClass.prototype[methodName];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// extend</span></span><br><span class="line">augment( Car, Mixin, <span class="string">"driveForward"</span>, <span class="string">"driveBackward"</span> );</span><br><span class="line"><span class="keyword">var</span> myCar = <span class="keyword">new</span> Car(&#123;</span><br><span class="line">    model: <span class="string">"Ford Escort"</span>,</span><br><span class="line">    color: <span class="string">"blue"</span></span><br><span class="line">&#125;);</span><br><span class="line">myCar.driveForward();</span><br><span class="line">myCar.driveBackward();</span><br><span class="line"></span><br><span class="line"><span class="comment">// extend</span></span><br><span class="line">augment( Car, Mixin );</span><br><span class="line"><span class="keyword">var</span> mySportsCar = <span class="keyword">new</span> Car(&#123;</span><br><span class="line">    model: <span class="string">"Porsche"</span>,</span><br><span class="line">    color: <span class="string">"red"</span></span><br><span class="line">&#125;);</span><br><span class="line">mySportsCar.driveSideways();</span><br></pre></td></tr></table></figure><h4 id="è£…é¥°æ¨¡å¼"><a href="#è£…é¥°æ¨¡å¼" class="headerlink" title="è£…é¥°æ¨¡å¼"></a>è£…é¥°æ¨¡å¼</h4><ol><li>è£…é¥°å™¨æ¨¡å¼å¹¶ä¸å»æ·±å…¥ä¾èµ–äºå¯¹è±¡æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Œè€Œæ˜¯ä¸“æ³¨äºæ‰©å±•å®ƒä»¬çš„åŠŸèƒ½è¿™ä¸€é—®é¢˜ä¸Šã€‚ä¸åŒäºåªä¾èµ–äºåŸå‹ç»§æ‰¿ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªç®€å•çš„åŸºç¡€å¯¹è±¡ä¸Šé¢é€æ­¥æ·»åŠ èƒ½å¤Ÿæä¾›é™„åŠ åŠŸèƒ½çš„è£…é¥°å¯¹è±¡ã€‚</li><li>å®ƒçš„æƒ³æ³•æ˜¯ï¼Œä¸åŒäºå­ç±»åˆ’åˆ†ï¼Œæˆ‘ä»¬å‘ä¸€ä¸ªåŸºç¡€å¯¹è±¡æ·»åŠ ï¼ˆè£…é¥°ï¼‰å±æ€§æˆ–è€…æ–¹æ³•ï¼Œå› æ­¤å®ƒä¼šæ˜¯æ›´åŠ è½»å·§çš„ã€‚</li></ol><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">vehicle</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.vehicleType = vehicleType || <span class="string">"car"</span>;</span><br><span class="line">    <span class="keyword">this</span>.model = <span class="string">"default"</span>;</span><br><span class="line">    <span class="keyword">this</span>.license = <span class="string">"00000-000"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> veInstance = <span class="keyword">new</span> vehicle(<span class="string">'car'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> trunk = <span class="keyword">new</span> vehicle(<span class="string">'trunk'</span>);</span><br><span class="line"><span class="comment">// add</span></span><br><span class="line">trunk.setModel = <span class="function"><span class="keyword">function</span>(<span class="params"> modelName </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.model = modelName;</span><br><span class="line">&#125;;</span><br><span class="line">truck.setColor = <span class="function"><span class="keyword">function</span>(<span class="params"> color </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.color = <span class="built_in">color</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><em>è¿›é˜¶</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// The constructor to decorate</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MacBook</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.cost = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">997</span>; &#125;;</span><br><span class="line">    <span class="keyword">this</span>.screenSize = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">11.6</span>; &#125;;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// Decorator 1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Memory</span>(<span class="params"> macbook </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> v = macbook.cost();</span><br><span class="line">    macbook.cost = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> v + <span class="number">75</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Decorator 2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Engraving</span>(<span class="params"> macbook </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> v = macbook.cost();</span><br><span class="line">    macbook.cost = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  v + <span class="number">200</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Decorator 3</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Insurance</span>(<span class="params"> macbook </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> v = macbook.cost();</span><br><span class="line">    macbook.cost = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  v + <span class="number">250</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">var</span> mb = <span class="keyword">new</span> MacBook();</span><br><span class="line">Memory( mb );</span><br><span class="line">Engraving( mb );</span><br><span class="line">Insurance( mb );</span><br><span class="line"></span><br><span class="line"><span class="comment">// Outputs: 1522</span></span><br><span class="line"><span class="built_in">console</span>.log( mb.cost() );</span><br><span class="line"></span><br><span class="line"><span class="comment">// Outputs: 11.6</span></span><br><span class="line"><span class="built_in">console</span>.log( mb.screenSize() );</span><br></pre></td></tr></table></figure></p><ol><li>æˆ‘ä»¬çš„è£…é¥°å™¨é‡è½½äº†è¶…ç±»å¯¹è±¡MacBook()çš„ object.cost()å‡½æ•°ï¼Œä½¿å…¶è¿”å›çš„Macbookçš„å½“å‰ä»·æ ¼åŠ ä¸Šäº†è¢«å®šåˆ¶åå‡çº§çš„ä»·æ ¼ï¼›</li><li>è¿™è¢«çœ‹åšæ˜¯å¯¹åŸæ¥çš„Macbookå¯¹è±¡æ„é€ å™¨æ–¹æ³•çš„è£…é¥°ï¼Œå®ƒå¹¶æ²¡æœ‰å°†å…¶é‡å†™ï¼ˆä¾‹å¦‚ï¼ŒscreenSize())ï¼Œæˆ‘ä»¬æ‰€å®šä¹‰çš„Macbookçš„å…¶å®ƒå±æ€§ä¹Ÿä¿æŒä¸å˜ï¼Œå®Œå¥½æ— ç¼ºã€‚</li></ol><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> decorator = <span class="function"><span class="keyword">function</span><span class="params">(dom, fn)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> dom.onclick === <span class="string">'function'</span> )&#123;</span><br><span class="line">        <span class="keyword">var</span> origin = dom.onclick;</span><br><span class="line">        dom.onclick = <span class="function"><span class="keyword">function</span><span class="params">(event)</span> </span>&#123;</span><br><span class="line">            origin.call(dom, event); <span class="comment">// åŸäº‹ä»¶</span></span><br><span class="line">            fn.call(dom, event); <span class="comment">// è£…é¥°</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        dom.onclick = fn;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºè€…æ¨¡å¼"><a href="#åˆ›å»ºè€…æ¨¡å¼" class="headerlink" title="åˆ›å»ºè€…æ¨¡å¼"></a>åˆ›å»ºè€…æ¨¡å¼</h4><ol><li>å·¥å‚æ¨¡å¼å¯æœ‰æ•ˆçš„åˆ›å»ºå¯å¤ç”¨çš„å®ä¾‹å¯¹è±¡ï¼Œå…³å¿ƒçš„æ˜¯æœ€ç»ˆåˆ›å»ºçš„å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Œä¸å…³å¿ƒåˆ›å»ºçš„è¿‡ç¨‹ï¼Œå› æ­¤é€šè¿‡å·¥å‚æ¨¡å¼å¾—åˆ°çš„éƒ½æ˜¯å¯¹è±¡å®ä¾‹æˆ–è€…ç±»ç°‡ã€‚</li><li>å»ºé€ è€…æ¨¡å¼ç›¸å¯¹æ¯”å·¥å‚æ¨¡å¼å¤æ‚ä¸€äº›ï¼Œå…³å¿ƒçš„æ˜¯åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.getAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.age</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Job</span>(<span class="params">job</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(job) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'teacher'</span>:</span><br><span class="line">        <span class="keyword">this</span>.job = <span class="string">'æ•™å¸ˆ'</span></span><br><span class="line">        <span class="keyword">this</span>.jobDesc = <span class="string">'æ•°å­¦æ•™å¸ˆ'</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'doctor'</span>:</span><br><span class="line">        <span class="keyword">this</span>.job = <span class="string">'åŒ»ç”Ÿ'</span></span><br><span class="line">        <span class="keyword">this</span>.jobDesc = <span class="string">'éª¨ç§‘åŒ»ç”Ÿ'</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'coder'</span>:</span><br><span class="line">        <span class="keyword">this</span>.job = <span class="string">'ç¨‹åºå‘˜'</span></span><br><span class="line">        <span class="keyword">this</span>.jobDesc = <span class="string">'Webå‰ç«¯ç¨‹åºå‘˜'</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">this</span>.job = job</span><br><span class="line">        <span class="keyword">this</span>.jobDesc = <span class="string">'ä¸æ¸…æ¥šæ‚¨çš„èŒä½çš„ç›¸å…³æè¿°'</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Job.prototype.changeJobDesc = <span class="function"><span class="keyword">function</span>(<span class="params">desc</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.jobDesc = desc</span><br><span class="line">&#125;</span><br><span class="line">Job.prototype.changeJob = <span class="function"><span class="keyword">function</span>(<span class="params">job</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.job = job</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hobby</span>(<span class="params">hobby</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.hobby = []</span><br><span class="line">    <span class="keyword">this</span>.hobby.push(hobby)</span><br><span class="line">&#125;</span><br><span class="line">Hobby.prototype.addHobby = <span class="function"><span class="keyword">function</span>(<span class="params">hobby</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.hobby.concat(hobby)</span><br><span class="line">&#125;</span><br><span class="line">Hobby.prototype.getHobby = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.hobby.split(<span class="string">','</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Skill</span>(<span class="params">skill</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.skill = []</span><br><span class="line">    <span class="keyword">this</span>.skill.push(skill)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Resume</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.person = <span class="keyword">new</span> Person(name, age)</span><br><span class="line">    <span class="keyword">this</span>.person.job = <span class="keyword">new</span> Job()</span><br><span class="line">    <span class="keyword">this</span>.person.hobby = <span class="keyword">new</span> Hobby()</span><br><span class="line">    <span class="keyword">this</span>.person.skill = <span class="keyword">new</span> Skill()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> resume = <span class="keyword">new</span> Resume(<span class="string">'ziyi2'</span>, <span class="number">28</span>)</span><br><span class="line"><span class="built_in">console</span>.log(resume)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSæ¨¡å—åŒ–æ¼”è¿›</title>
      <link href="/2020/09/28/2020/JS%E6%A8%A1%E5%9D%97%E5%8C%96%E6%BC%94%E8%BF%9B/"/>
      <url>/2020/09/28/2020/JS%E6%A8%A1%E5%9D%97%E5%8C%96%E6%BC%94%E8%BF%9B/</url>
      
        <content type="html"><![CDATA[<h4 id="IIFE"><a href="#IIFE" class="headerlink" title="IIFE"></a>IIFE</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> api = <span class="string">'url'</span>;</span><br><span class="line">    <span class="keyword">var</span> config = &#123;</span><br><span class="line">        obj: <span class="string">'x'</span></span><br><span class="line">    &#125;;</span><br><span class="line">    root.config = config;</span><br><span class="line">    root.api = api;</span><br><span class="line">&#125;)(<span class="built_in">window</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ§åˆ¶å…¨å±€å˜é‡æ•°é‡</span></span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="commonJS"><a href="#commonJS" class="headerlink" title="commonJS"></a>commonJS</h4><ul><li>æ¨¡å—çš„æ ‡è¯†åº”éµå¾ªçš„è§„åˆ™</li><li>å®šä¹‰å…¨å±€å‡½æ•°requireï¼Œé€šè¿‡ä¼ å…¥æ¨¡å—æ ‡è¯†æ¥å¼•å…¥å…¶ä»–æ¨¡å—ï¼Œæ‰§è¡Œçš„ç»“æœå³ä¸ºåˆ«çš„æ¨¡å—æš´æ¼å‡ºæ¥çš„API</li><li>å¦‚æœè¢«requireå‡½æ•°å¼•å…¥çš„æ¨¡å—ä¸­ä¹ŸåŒ…å«ä¾èµ–ï¼Œé‚£ä¹ˆä¾æ¬¡åŠ è½½è¿™äº›ä¾èµ–</li><li>å¦‚æœå¼•å…¥æ¨¡å—å¤±è´¥ï¼Œé‚£ä¹ˆrequireå‡½æ•°åº”è¯¥æŠ¥ä¸€ä¸ªå¼‚å¸¸</li><li>æ¨¡å—é€šè¿‡å˜é‡exportsæ¥å‘å¾€æš´æ¼APIï¼Œexportsåªèƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæš´æ¼çš„APIé¡»ä½œä¸ºæ­¤å¯¹è±¡çš„å±æ€§</li></ul><p>èµ·åˆç”¨äºæœåŠ¡ç«¯, åæ¥è€ƒè™‘åˆ°æµè§ˆå™¨ä½¿ç”¨, requireéœ€è¦æ”¯æŒæµè§ˆå™¨å‘é€è¯·æ±‚è¯»å–æ¨¡å—<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// math.js</span></span><br><span class="line">exports.add = <span class="function"><span class="keyword">function</span><span class="params">(a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// increment.js</span></span><br><span class="line"><span class="keyword">var</span> add = <span class="built_in">require</span>(<span class="string">'math'</span>).add;</span><br><span class="line">exports.inc = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> add(e) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pro.js</span></span><br><span class="line"><span class="keyword">var</span> incr = <span class="built_in">require</span>(<span class="string">'increment'</span>).inc;</span><br><span class="line"><span class="keyword">var</span> q = <span class="number">1</span>;</span><br><span class="line">incr(q);</span><br></pre></td></tr></table></figure><p>åæ¥æœ‰æ‰€è¡ç”Ÿâ€¦</p><p>Async 2.xæ´¾</p><ol><li>æ—¢ç„¶æµè§ˆå™¨å¿…é¡»å¼‚æ­¥åŠ è½½ä»£ç ï¼Œé‚£ä¹ˆæ¨¡å—åœ¨å®šä¹‰çš„æ—¶å€™å°±å¿…é¡»æŒ‡æ˜æ‰€ä¾èµ–çš„æ¨¡å—ï¼Œç„¶åæŠŠæœ¬æ¨¡å—çš„ä»£ç å†™åœ¨å›è°ƒå‡½æ•°é‡Œã€‚</li><li>æ¨¡å—çš„åŠ è½½ä¹Ÿæ˜¯é€šè¿‡ä¸‹è½½-å›è°ƒè¿™æ ·çš„è¿‡ç¨‹æ¥è¿›è¡Œã€‚</li><li>è¿™å°±æˆä¸ºäº†AMD</li></ol><h4 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h4><p>AMD / RequireJSå¼‚å†›çªèµ·</p><ol><li>ç”¨å…¨å±€å‡½æ•°defineæ¥å®šä¹‰æ¨¡å—ï¼Œç”¨æ³•ä¸ºï¼šdefine(id?, dependencies?, factory)</li><li>idä¸ºæ¨¡å—æ ‡è¯†ï¼Œéµä»CommonJS Module Identifiersè§„èŒƒ</li><li>dependenciesä¸ºä¾èµ–çš„æ¨¡å—æ•°ç»„ï¼Œåœ¨factoryä¸­éœ€ä¼ å…¥å½¢å‚ä¸ä¹‹ä¸€ä¸€å¯¹åº”</li><li>å¦‚æœdependenciesçš„å€¼ä¸­æœ‰â€requireâ€ã€â€exportsâ€æˆ–â€moduleâ€ï¼Œåˆ™ä¸commonjsä¸­çš„å®ç°ä¿æŒä¸€è‡´</li><li>å¦‚æœdependenciesçœç•¥ä¸å†™ï¼Œåˆ™é»˜è®¤ä¸º[â€œrequireâ€, â€œexportsâ€, â€œmoduleâ€]ï¼Œfactoryä¸­ä¹Ÿä¼šé»˜è®¤ä¼ å…¥require,exports,module</li><li>å¦‚æœfactoryä¸ºå‡½æ•°ï¼Œæ¨¡å—å¯¹å¤–æš´æ¼APIçš„æ–¹æ³•æœ‰ä¸‰ç§ï¼šreturnä»»æ„ç±»å‹çš„æ•°æ®ã€exports.xxx=xxxã€module.exports=xxx</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a'</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        hello: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Hello a.js'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b.js</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'b'</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        hello: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Hello b.js'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'a'</span>, <span class="string">'b'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'main'</span>);</span><br><span class="line">    a.hello();</span><br><span class="line">    $(<span class="string">'#b'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        b.hello();</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><em>è¿è¡Œç»“æœæ˜¯?</em></p><p>a.jsæ‰§è¡Œ - b.jsæ‰§è¡Œ - main.jsæ‰§è¡Œ - hello, a.js - (ç‚¹å‡»æŒ‰é’®å)hello, b.js</p><p>ä½†æ˜¯å¦‚æœç»†ç»†æ¥çœ‹ï¼Œb.jsè¢«é¢„å…ˆåŠ è½½å¹¶ä¸”é¢„å…ˆæ‰§è¡Œäº†ï¼Œï¼ˆç¬¬äºŒè¡Œè¾“å‡ºï¼‰ï¼Œb.helloè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨ç‚¹å‡»äº†æŒ‰é’®ä¹‹åæ‰ä¼šæ‰§è¡Œï¼Œå¦‚æœç”¨æˆ·å‹æ ¹å°±æ²¡ç‚¹ï¼Œé‚£ä¹ˆb.jsä¸­çš„ä»£ç åº”ä¸åº”è¯¥æ‰§è¡Œå‘¢ ?</p><p>è¿™å°±é€ æˆäº†ä¸€äº›é—®é¢˜</p><ol><li>å¦‚æœä¾èµ–æ¨¡å—è¿‡å¤š, ä¼šæŠŠæ‰€ä»¥æ¨¡å—éƒ½å¼•å…¥å¹¶æ‰§è¡Œäº†ã€‚</li><li>å¦å¤–ä¸€ç‚¹: å¼•å…¥è¿‡é•¿, require([â€˜aâ€™, â€˜bâ€™, â€˜câ€™, â€¦], function(a, b, c, â€¦) {})</li></ol><ul><li>æ‡’åŠ è½½ï¼Œ ä¼šå¼•èµ·æ“ä½œæ—¶å¼•å…¥çš„å¡é¡¿</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">require</span>([<span class="string">'a'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">        a.hello();</span><br><span class="line">    &#125;)</span><br><span class="line">    $(<span class="string">'#b'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">require</span>([<span class="string">'b'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">b</span>) </span>&#123;b.hello();&#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>åæ¥AMDåšäº†å…¼å®¹<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'a'</span>);</span><br><span class="line">    <span class="keyword">var</span> test = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        a.hello()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        a: test</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><p>ç”±äºAMDæœ‰ç§ç§é—®é¢˜, è€Œåˆ«çš„è§„èŒƒä¹Ÿå› æ­¤è¡ç”Ÿ, CMD / seajs </p><h4 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡ require å¼•å…¥ä¾èµ–</span></span><br><span class="line">    <span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'jquery'</span>);</span><br><span class="line">    <span class="keyword">var</span> spining = <span class="built_in">require</span>(<span class="string">'./spining'</span>);</span><br><span class="line"></span><br><span class="line">    exports.doSomething = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;; <span class="comment">// é€šè¿‡exports å¯¹å¤–æä¾›Api</span></span><br><span class="line">    <span class="built_in">module</span>.exports = spining; <span class="comment">// é€šè¿‡module.exports æä¾›æ¥å£</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="ES6æ¨¡å—"><a href="#ES6æ¨¡å—" class="headerlink" title="ES6æ¨¡å—"></a>ES6æ¨¡å—</h4><p>2015å¹´6æœˆï¼ŒECMAScript2015ä¹Ÿå°±æ˜¯ES6å‘å¸ƒäº†ï¼ŒJavaScriptç»ˆäºåœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ä¸Šï¼Œå®ç°äº†æ¨¡å—åŠŸèƒ½ã€‚<br>ä½¿å¾—åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠå…¶è¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ï¼Œä¸åƒ CommonJSã€AMDä¹‹ç±»çš„éœ€è¦åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šï¼ˆä¾‹å¦‚FISè¿™æ ·çš„å·¥å…·åªèƒ½é¢„å¤„ç†ä¾èµ–å…³ç³»ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯è¿è¡Œæ—¶è§£æï¼‰ï¼Œæˆä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ¡ˆ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">const</span> helloInLang = &#123;</span><br><span class="line">    en: <span class="string">'Hello world!'</span>,</span><br><span class="line">    es: <span class="string">'Â¡Hola mundo!'</span>,</span><br><span class="line">    ru: <span class="string">'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€!'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getHello = <span class="function">(<span class="params">lang</span>) =&gt;</span> (</span><br><span class="line">    helloInLang[lang]</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sayHello = <span class="function">(<span class="params">lang</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(getHello(lang));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hello.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; sayHello &#125; <span class="keyword">from</span> <span class="string">'./a'</span>;</span><br><span class="line"></span><br><span class="line">sayHello(<span class="string">'ru'</span>);</span><br></pre></td></tr></table></figure><h4 id="Q"><a href="#Q" class="headerlink" title="Q?"></a>Q?</h4><p>Q1ï¼š<br>æˆ‘ä»¬åœ¨çœ‹ node ä»£ç æ—¶ï¼Œåº”è¯¥ä¼šå‘ç°ï¼Œå…³äºæ¥å£å¯¼å‡ºï¼Œæœ‰çš„åœ°æ–¹ä½¿ç”¨module.exportsï¼Œè€Œæœ‰çš„åœ°æ–¹ä½¿ç”¨exportsï¼Œè¿™ä¸¤ä¸ªæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">module</span> = &#123;</span><br><span class="line">    <span class="keyword">exports</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="keyword">exports</span> = <span class="keyword">module</span>.<span class="keyword">exports</span>;</span><br><span class="line">console.log(<span class="keyword">module</span>.<span class="keyword">exports</span> === <span class="keyword">exports</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">'i am ronffy'</span></span><br><span class="line"><span class="keyword">exports</span> = s; <span class="comment">// module.exports ä¸å—å½±å“</span></span><br><span class="line">console.log(<span class="keyword">module</span>.<span class="keyword">exports</span> === <span class="keyword">exports</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>æ¨¡å—åˆå§‹åŒ–æ—¶ï¼Œexportså’Œmodule.exportsæŒ‡å‘åŒä¸€å—å†…å­˜ï¼Œexportsè¢«é‡æ–°èµ‹å€¼åï¼Œå°±åˆ‡æ–­äº†è·ŸåŸå†…å­˜åœ°å€çš„å…³ç³»ã€‚<br>æ‰€ä»¥ï¼Œexportsè¦è¿™æ ·ä½¿ç”¨ï¼š<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">exports.s</span> = <span class="string">'i am ronffy'</span>;</span><br></pre></td></tr></table></figure></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a.js'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.s); <span class="comment">// i am ronffy</span></span><br></pre></td></tr></table></figure><p>Q2ï¼š</p><ul><li>CommonJSä¸AMD, CommonJS å’Œ AMD éƒ½æ˜¯   <strong><em> è¿è¡Œæ—¶åŠ è½½ </em></strong></li><li>CommonJS æ˜¯æœåŠ¡å™¨ç«¯æ¨¡å—è§„èŒƒï¼ŒAMD æ˜¯æµè§ˆå™¨ç«¯æ¨¡å—è§„èŒƒã€‚</li><li>CommonJS åŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œå³æ‰§è¡Œvar a = require(â€˜./a.jsâ€™);æ—¶ï¼Œåœ¨ a.js æ–‡ä»¶åŠ è½½å®Œæˆåï¼Œæ‰æ‰§è¡Œåé¢çš„ä»£ç ã€‚AMD åŠ è½½æ¨¡å—æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€æœ‰ä¾èµ–åŠ è½½å®Œæˆåä»¥å›è°ƒå‡½æ•°çš„å½¢å¼æ‰§è¡Œä»£ç ã€‚</li><li>[å¦‚ä¸‹ä»£ç ]fså’Œchalkéƒ½æ˜¯æ¨¡å—ï¼Œä¸åŒçš„æ˜¯ï¼Œfsæ˜¯ node å†…ç½®æ¨¡å—ï¼Œchalkæ˜¯ä¸€ä¸ª npm åŒ…ã€‚è¿™ä¸¤ç§æƒ…å†µåœ¨ CommonJS ä¸­æ‰æœ‰ï¼ŒAMD ä¸æ”¯æŒ</li></ul><p>Q3ï¼š<br>åœ¨ES6ä¸­ï¼Œimportå‘½ä»¤å¯ä»¥å…·ä½“æŒ‡å®šåŠ è½½æ¨¡å—ä¸­ç”¨exportå‘½ä»¤æš´éœ²çš„æ¥å£ï¼ˆä¸æŒ‡å®šå…·ä½“çš„æ¥å£ï¼Œé»˜è®¤åŠ è½½export defaultï¼‰ï¼Œæ²¡æœ‰æŒ‡å®šçš„æ˜¯ä¸ä¼šåŠ è½½çš„ã€‚<br>å› æ­¤ä¼šåœ¨ç¼–è¯‘æ—¶å°±å®Œæˆæ¨¡å—çš„åŠ è½½ï¼Œè¿™ç§åŠ è½½æ–¹å¼ç§°ä¸ºç¼–è¯‘æ—¶åŠ è½½æˆ–è€…é™æ€åŠ è½½ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åƒåœ¾å›æ”¶æœºåˆ¶</title>
      <link href="/2020/09/23/2020/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/"/>
      <url>/2020/09/23/2020/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<p>ğŸ‘‰ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management" target="_blank" rel="noopener">MDN-å†…å­˜ç®¡ç†</a></p><h4 id="å¼•ç”¨è®¡æ•°"><a href="#å¼•ç”¨è®¡æ•°" class="headerlink" title="å¼•ç”¨è®¡æ•°"></a>å¼•ç”¨è®¡æ•°</h4><p>åƒåœ¾å›æ”¶ç®—æ³•ä¸»è¦ä¾èµ–äºå¼•ç”¨çš„æ¦‚å¿µã€‚åœ¨å†…å­˜ç®¡ç†çš„ç¯å¢ƒä¸­ï¼Œä¸€ä¸ªå¯¹è±¡å¦‚æœæœ‰è®¿é—®å¦ä¸€ä¸ªå¯¹è±¡çš„æƒé™ï¼ˆéšå¼æˆ–è€…æ˜¾å¼ï¼‰ï¼Œå«åšä¸€ä¸ªå¯¹è±¡å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªJavascriptå¯¹è±¡å…·æœ‰å¯¹å®ƒåŸå‹çš„å¼•ç”¨ï¼ˆéšå¼å¼•ç”¨ï¼‰å’Œå¯¹å®ƒå±æ€§çš„å¼•ç”¨ï¼ˆæ˜¾å¼å¼•ç”¨ï¼‰ã€‚</p><a id="more"></a><p>åœ¨è¿™é‡Œï¼Œâ€œå¯¹è±¡â€çš„æ¦‚å¿µä¸ä»…ç‰¹æŒ‡ JavaScript å¯¹è±¡ï¼Œè¿˜åŒ…æ‹¬å‡½æ•°ä½œç”¨åŸŸï¼ˆæˆ–è€…å…¨å±€è¯æ³•ä½œç”¨åŸŸï¼‰</p><p>é™åˆ¶ï¼šæ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨çš„äº‹ä¾‹</p><h4 id="æ ‡è®°æ¸…é™¤"><a href="#æ ‡è®°æ¸…é™¤" class="headerlink" title="æ ‡è®°æ¸…é™¤"></a>æ ‡è®°æ¸…é™¤</h4><p>è¿™ä¸ªç®—æ³•æŠŠâ€œå¯¹è±¡æ˜¯å¦ä¸å†éœ€è¦â€ç®€åŒ–å®šä¹‰ä¸ºâ€œå¯¹è±¡æ˜¯å¦å¯ä»¥è·å¾—â€ã€‚</p><p>è¿™ä¸ªç®—æ³•å‡å®šè®¾ç½®ä¸€ä¸ªå«åšæ ¹ï¼ˆrootï¼‰çš„å¯¹è±¡ï¼ˆåœ¨Javascripté‡Œï¼Œæ ¹æ˜¯å…¨å±€å¯¹è±¡ï¼‰ã€‚åƒåœ¾å›æ”¶å™¨å°†å®šæœŸä»æ ¹å¼€å§‹ï¼Œæ‰¾æ‰€æœ‰ä»æ ¹å¼€å§‹å¼•ç”¨çš„å¯¹è±¡ï¼Œç„¶åæ‰¾è¿™äº›å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡â€¦â€¦ä»æ ¹å¼€å§‹ï¼Œåƒåœ¾å›æ”¶å™¨å°†æ‰¾åˆ°æ‰€æœ‰å¯ä»¥è·å¾—çš„å¯¹è±¡å’Œæ”¶é›†æ‰€æœ‰ä¸èƒ½è·å¾—çš„å¯¹è±¡ã€‚</p><p>è¿™ä¸ªç®—æ³•æ¯”å‰ä¸€ä¸ªè¦å¥½ï¼Œå› ä¸ºâ€œæœ‰é›¶å¼•ç”¨çš„å¯¹è±¡â€æ€»æ˜¯ä¸å¯è·å¾—çš„ï¼Œä½†æ˜¯ç›¸åå´ä¸ä¸€å®šï¼Œå‚è€ƒâ€œå¾ªç¯å¼•ç”¨â€ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XSS-CSRF</title>
      <link href="/2020/08/11/2020/XSS-CSRF/"/>
      <url>/2020/08/11/2020/XSS-CSRF/</url>
      
        <content type="html"><![CDATA[<h4 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h4><p>Cross-Site Scriptingï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰ç®€ç§° XSSï¼Œæ˜¯ä¸€ç§ä»£ç æ³¨å…¥æ”»å‡»ã€‚</p><ol><li>å­˜å‚¨å‹</li><li>åå°„å‹</li><li>DOMå‹ä¸‰ç§</li></ol><table><thead><tr><th>ç±»å‹</th><th>å­˜å‚¨åŒº</th><th>æ’å…¥ç‚¹</th></tr></thead><tbody><tr><td>å­˜å‚¨å‹</td><td>åç«¯æ•°æ®åº“</td><td>HTML</td></tr><tr><td>åå°„å‹</td><td>URL</td><td>HTML</td></tr><tr><td>DOMå‹</td><td>åç«¯æ•°æ®åº“ã€å‰ç«¯ã€URL</td><td>JS</td></tr></tbody></table><a id="more"></a><p>å¸¸ç”¨é˜²èŒƒæ–¹æ³•</p><ol><li>httpOnly</li><li>è¾“å…¥è¿‡æ»¤</li><li>è½¬ä¹‰HTMLï¼Œè¿›è¡Œè¾“å…¥è¾“å‡ºçš„ç¼–ç è½¬ä¹‰</li></ol><p>DOMå‹XSSï¼š</p><ol><li>åˆ©ç”¨innerHTMLä¿®æ”¹é¡µé¢ï¼›</li><li>åˆ©ç”¨document.onkeypresså·å–è®°å½•é”®ç›˜äº‹ä»¶ã€‚</li></ol><p><em>å¦‚ä½•æŠµå¾¡DOMXSS?</em></p><ol><li>é¿å…å®¢æˆ·ç«¯æ–‡æ¡£é‡å†™ã€é‡å®šå‘æˆ–å…¶ä»–æ•æ„Ÿæ“ä½œï¼ŒåŒæ—¶é¿å…ä½¿ç”¨å®¢æˆ·ç«¯æ•°æ®ï¼Œè¿™äº›æ“ä½œå°½é‡åœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨åŠ¨æ€é¡µé¢æ¥å®ç°ï¼›</li><li>åˆ†æå’Œå¼ºåŒ–å®¢æˆ·ç«¯JSä»£ç ï¼Œç‰¹åˆ«æ˜¯å—åˆ°ç”¨æˆ·å½±å“çš„DOMå¯¹è±¡ï¼Œæ³¨æ„èƒ½ç›´æ¥ä¿®æ”¹DOMå’Œåˆ›å»ºHTMLæ–‡ä»¶çš„ç›¸å…³å‡½æ•°æˆ–æ–¹æ³•ï¼Œå¹¶åœ¨è¾“å‡ºå˜é‡åˆ°é¡µé¢æ—¶å…ˆè¿›è¡Œç¼–ç è½¬ä¹‰ï¼Œå¦‚è¾“å‡ºåˆ°HTMLåˆ™è¿›è¡ŒHTMLç¼–ç ã€è¾“å‡ºåˆ°åˆ™è¿›è¡ŒJSç¼–ç ã€‚</li></ol><h4 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h4><p>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆè‹±è¯­ï¼šCross-site request forgeryï¼‰ï¼Œæ”»å‡»è€…è¯±å¯¼å—å®³è€…è¿›å…¥ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œåœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸­ï¼Œå‘è¢«æ”»å‡»ç½‘ç«™å‘é€è·¨ç«™è¯·æ±‚ã€‚åˆ©ç”¨å—å®³è€…åœ¨è¢«æ”»å‡»ç½‘ç«™å·²ç»è·å–çš„æ³¨å†Œå‡­è¯ï¼Œç»•è¿‡åå°çš„ç”¨æˆ·éªŒè¯ï¼Œè¾¾åˆ°å†’å……ç”¨æˆ·å¯¹è¢«æ”»å‡»çš„ç½‘ç«™æ‰§è¡ŒæŸé¡¹æ“ä½œçš„ç›®çš„</p><p>CSRFç‰¹ç‚¹ï¼š</p><ol><li>æ”»å‡»ä¸€èˆ¬å‘èµ·åœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œè€Œä¸æ˜¯è¢«æ”»å‡»çš„ç½‘ç«™ã€‚è¢«æ”»å‡»çš„ç½‘ç«™æ— æ³•é˜²æ­¢æ”»å‡»å‘ç”Ÿã€‚</li><li>æ”»å‡»åˆ©ç”¨å—å®³è€…åœ¨è¢«æ”»å‡»ç½‘ç«™çš„ç™»å½•å‡­è¯ï¼Œå†’å……å—å®³è€…æäº¤æ“ä½œï¼›è€Œä¸æ˜¯ç›´æ¥çªƒå–æ•°æ®ã€‚   </li><li>æ•´ä¸ªè¿‡ç¨‹æ”»å‡»è€…å¹¶ä¸èƒ½è·å–åˆ°å—å®³è€…çš„ç™»å½•å‡­è¯ï¼Œä»…ä»…æ˜¯â€œå†’ç”¨â€ã€‚</li><li>è·¨ç«™è¯·æ±‚å¯ä»¥ç”¨å„ç§æ–¹å¼ï¼šå›¾ç‰‡URLã€è¶…é“¾æ¥ã€CORSã€Formæäº¤ç­‰ç­‰ã€‚éƒ¨åˆ†è¯·æ±‚æ–¹å¼å¯ä»¥ç›´æ¥åµŒå…¥åœ¨ç¬¬ä¸‰æ–¹è®ºå›ã€æ–‡ç« ä¸­ï¼Œéš¾ä»¥è¿›è¡Œè¿½è¸ªã€‚</li></ol><p><em>å¦‚ä½•æŠµå¾¡CSRF?</em></p><ul><li>é˜»æ­¢ä¸æ˜å¤–åŸŸçš„è®¿é—®<ol><li>åŒæºæ£€æµ‹</li><li>Samesite Cookie</li></ol></li></ul><p><code>ç»„ç»‡ä¸æ˜å¤–åŸŸ</code></p><ol><li>æ ¹æ®originæˆ–refererå¤´è¿›è¡Œåˆ¤æ–­</li><li>å¦‚æœéƒ½ä¸å­˜åœ¨ï¼Œå»ºè®®é˜»æ­¢</li></ol><ul><li>æäº¤æ—¶è¦æ±‚é™„åŠ æœ¬åŸŸæ‰èƒ½è·å–çš„ä¿¡æ¯<ol><li>CSRF Token</li><li>åŒé‡CookieéªŒè¯</li></ol></li></ul><p><code>CSRFToken</code><br>æˆ‘ä»¬å¯ä»¥è¦æ±‚æ‰€æœ‰çš„ç”¨æˆ·è¯·æ±‚éƒ½æºå¸¦ä¸€ä¸ªCSRFæ”»å‡»è€…æ— æ³•è·å–åˆ°çš„Tokenã€‚æœåŠ¡å™¨é€šè¿‡æ ¡éªŒè¯·æ±‚æ˜¯å¦æºå¸¦æ­£ç¡®çš„Tokenï¼Œæ¥æŠŠæ­£å¸¸çš„è¯·æ±‚å’Œæ”»å‡»çš„è¯·æ±‚åŒºåˆ†å¼€ï¼Œä¹Ÿå¯ä»¥é˜²èŒƒCSRFçš„æ”»å‡»ã€‚<br>ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ol><li>å°†CSRF Tokenè¾“å‡ºåˆ°é¡µé¢ä¸­ï¼Œæœ€å¥½æœåŠ¡ç«¯è¾“å‡ºï¼Œç½®äºsessionä¸­ï¼›</li><li>é¡µé¢è¯·æ±‚æ—¶æºå¸¦ï¼›</li><li>æœåŠ¡ç«¯è¾“å‡ºã€‚</li></ol><p>Tokenæ˜¯ä¸€ä¸ªæ¯”è¾ƒæœ‰æ•ˆçš„CSRFé˜²æŠ¤æ–¹æ³•ï¼Œåªè¦é¡µé¢æ²¡æœ‰XSSæ¼æ´æ³„éœ²Tokenï¼Œé‚£ä¹ˆæ¥å£çš„CSRFæ”»å‡»å°±æ— æ³•æˆåŠŸã€‚ä½†æ˜¯æ­¤æ–¹æ³•çš„å®ç°æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦ç»™æ¯ä¸€ä¸ªé¡µé¢éƒ½å†™å…¥Tokenï¼ˆå‰ç«¯æ— æ³•ä½¿ç”¨çº¯é™æ€é¡µé¢ï¼‰ã€‚<br>æ¯ä¸€ä¸ªFormåŠAjaxè¯·æ±‚éƒ½æºå¸¦è¿™ä¸ªTokenï¼Œåç«¯å¯¹æ¯ä¸€ä¸ªæ¥å£éƒ½è¿›è¡Œæ ¡éªŒï¼Œå¹¶ä¿è¯é¡µé¢TokenåŠè¯·æ±‚Tokenä¸€è‡´ã€‚è¿™å°±ä½¿å¾—è¿™ä¸ªé˜²æŠ¤ç­–ç•¥ä¸èƒ½åœ¨é€šç”¨çš„æ‹¦æˆªä¸Šç»Ÿä¸€æ‹¦æˆªå¤„ç†ï¼Œè€Œéœ€è¦æ¯ä¸€ä¸ªé¡µé¢å’Œæ¥å£éƒ½æ·»åŠ å¯¹åº”çš„è¾“å‡ºå’Œæ ¡éªŒã€‚è¿™ç§æ–¹æ³•å·¥ä½œé‡å·¨å¤§ï¼Œä¸”æœ‰å¯èƒ½é—æ¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPSè¿æ¥è¿‡ç¨‹</title>
      <link href="/2020/07/09/2020/HTTPS%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%A8%8B/"/>
      <url>/2020/07/09/2020/HTTPS%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬å‰é¢åˆ†æäº†HTTPçš„æ¡æ‰‹ä¸æŒ¥æ‰‹ï¼Œåˆ°äº†HTTPSè¿™ä¸€æ­¥ï¼Œæ¶‰åŠä¸€äº›åŠ å¯†åŠè¯ä¹¦ï¼Œæˆ‘ä»¬å†å•ç‹¬å¤ä¹ ä¸€ä¸‹ã€‚</p><p><img src="/2020/07/09/2020/HTTPSè¿æ¥è¿‡ç¨‹/NO1.png" alt="NO1" title="NO1"></p><a id="more"></a><h4 id="å®¢æˆ·ç«¯è®¿é—®HTTPSè¿æ¥"><a href="#å®¢æˆ·ç«¯è®¿é—®HTTPSè¿æ¥" class="headerlink" title="å®¢æˆ·ç«¯è®¿é—®HTTPSè¿æ¥"></a>å®¢æˆ·ç«¯è®¿é—®HTTPSè¿æ¥</h4><ol><li>æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥urlå¹¶ä¸”å›è½¦ï¼Œè¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯ä¼šå°†å®¢æˆ·ç«¯æ”¯æŒçš„åŠ å¯†ç®—æ³•å¥—ä»¶ï¼ˆCIpherï¼‰å‘ç»™æœåŠ¡ç«¯ã€‚</li></ol><h4 id="æœåŠ¡ç«¯å‘é€è¯ä¹¦ï¼ˆå…¬é’¥ï¼‰ç»™å®¢æˆ·ç«¯"><a href="#æœåŠ¡ç«¯å‘é€è¯ä¹¦ï¼ˆå…¬é’¥ï¼‰ç»™å®¢æˆ·ç«¯" class="headerlink" title="æœåŠ¡ç«¯å‘é€è¯ä¹¦ï¼ˆå…¬é’¥ï¼‰ç»™å®¢æˆ·ç«¯"></a>æœåŠ¡ç«¯å‘é€è¯ä¹¦ï¼ˆå…¬é’¥ï¼‰ç»™å®¢æˆ·ç«¯</h4><ol><li>æœåŠ¡ç«¯æ¥æ”¶åˆ°Cipheråï¼Œå’Œè‡ªå·±æ”¯æŒçš„åŠ å¯†ç®—æ³•å¯¹æ¯”ï¼Œå¦‚æœä¸ç¬¦åˆåˆ™æ–­å¼€è¿æ¥ï¼Œå¦åˆ™ï¼ŒæœåŠ¡ç«¯æŠŠç¬¦åˆçš„ç®—æ³•å’Œè¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯ï¼ŒåŒ…æ‹¬è¯ä¹¦æ—¶é—´ã€æ—¥æœŸã€æœºæ„ã€‚</li></ol><h4 id="å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯è¯ä¹¦"><a href="#å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯è¯ä¹¦" class="headerlink" title="å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯è¯ä¹¦"></a>å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯è¯ä¹¦</h4><ol><li>å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦ï¼ŒåŒ…æ‹¬é¢å‘è¯ä¹¦çš„æœºæ„<code>æ˜¯å¦åˆæ³•</code>ä¸<code>è¿‡æœŸ</code>ï¼Œè¯ä¹¦ä¸­åŒ…å«çš„ç½‘ç«™åœ°å€æ˜¯å¦ä¸æ­£è®¿é—®çš„åœ°å€ä¸€è‡´ç­‰ï¼›</li><li>éªŒè¯é€šè¿‡åï¼Œå®¢æˆ·ç«¯ä¼šç”Ÿæˆä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼Œç„¶åç”¨æœåŠ¡ç«¯çš„å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼Œè¿™é‡Œå°±ä¿è¯åªæœ‰æœåŠ¡ç«¯å¯ä»¥çœ‹åˆ°è¿™ä¸²å­—ç¬¦ä¸²ï¼›</li><li>ç”Ÿæˆæ¡æ‰‹ä¿¡æ¯ï¼Œç”¨çº¦å®šå¥½çš„HASHï¼Œå¯¹æ¡æ‰‹ä¿¡æ¯è¿›è¡Œå–HASHï¼Œç„¶åç”¨éšæœºå­—ç¬¦ä¸²åŠ å¯†æ¡æ‰‹ä¿¡æ¯å’Œæ¡æ‰‹ä¿¡æ¯çš„ç­¾åHASHï¼ŒæŠŠç»“æœå‘ç»™æœåŠ¡ç«¯ï¼Œè¿™é‡Œè¦å¸¦ä¸Šæ¡æ‰‹HASHæ˜¯å› ä¸ºé˜²æ­¢ä¿¡æ¯ç¯¡æ”¹ï¼Œå¦‚æœä¿¡æ¯è¢«ç¯¡æ”¹ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯æ¥æ”¶åˆ°ä¿¡æ¯è¿›è¡ŒHASHåï¼Œä¼šå‘ç°HASHå’Œå®¢æˆ·ç«¯ä¼ å›æ¥çš„ä¸ä¸€æ ·ã€‚</li></ol><h4 id="æœåŠ¡ç«¯æ¥æ”¶åŠ å¯†ä¿¡æ¯ï¼Œè§£å¯†å¾—åˆ°å®¢æˆ·ç«¯æä¾›çš„éšæœºå­—ç¬¦ä¸²"><a href="#æœåŠ¡ç«¯æ¥æ”¶åŠ å¯†ä¿¡æ¯ï¼Œè§£å¯†å¾—åˆ°å®¢æˆ·ç«¯æä¾›çš„éšæœºå­—ç¬¦ä¸²" class="headerlink" title="æœåŠ¡ç«¯æ¥æ”¶åŠ å¯†ä¿¡æ¯ï¼Œè§£å¯†å¾—åˆ°å®¢æˆ·ç«¯æä¾›çš„éšæœºå­—ç¬¦ä¸²"></a>æœåŠ¡ç«¯æ¥æ”¶åŠ å¯†ä¿¡æ¯ï¼Œè§£å¯†å¾—åˆ°å®¢æˆ·ç«¯æä¾›çš„éšæœºå­—ç¬¦ä¸²</h4><ol><li>æœåŠ¡ç«¯æ¥æ”¶åˆ°åŠ å¯†ä¿¡æ¯åï¼Œé¦–å…ˆä½¿ç”¨ç§é’¥è§£å¯†å¾—åˆ°éšæœºå­—ç¬¦ä¸²ï¼Œç„¶åä½¿ç”¨éšæœºå­—ç¬¦ä¸²è§£å¯†æ¡æ‰‹ä¿¡æ¯ï¼Œè·å¾—æ¡æ‰‹ä¿¡æ¯å’Œæ¡æ‰‹ä¿¡æ¯çš„HASHå€¼ï¼ŒæœåŠ¡ç«¯å¯¹æ¡æ‰‹ä¿¡æ¯è¿›è¡ŒHASHï¼Œå¯¹æ¯”ä¼ å›æ¥çš„HASHï¼Œå¦‚æœç›¸åŒï¼Œåˆ™è¯´æ˜ä¿¡æ¯æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚</li><li>æœåŠ¡ç«¯éªŒè¯å®Œå®¢æˆ·ç«¯åï¼ŒåŒæ ·ç”¨éšæœºå­—ç¬¦ä¸²åŠ å¯†æ¡æ‰‹ä¿¡æ¯å’Œæ¡æ‰‹ä¿¡æ¯çš„HASHå€¼å‘ç»™å®¢æˆ·ç«¯ã€‚</li></ol><h4 id="å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯è¿”å›çš„æ¡æ‰‹ä¿¡æ¯ï¼Œå®Œæˆæ¡æ‰‹"><a href="#å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯è¿”å›çš„æ¡æ‰‹ä¿¡æ¯ï¼Œå®Œæˆæ¡æ‰‹" class="headerlink" title="å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯è¿”å›çš„æ¡æ‰‹ä¿¡æ¯ï¼Œå®Œæˆæ¡æ‰‹"></a>å®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯è¿”å›çš„æ¡æ‰‹ä¿¡æ¯ï¼Œå®Œæˆæ¡æ‰‹</h4><ol><li>å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡ç«¯å‘å›æ¥çš„æ¡æ‰‹ä¿¡æ¯åï¼Œç”¨ä¸€å¼€å§‹ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²å¯¹å¯†æ–‡è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°æ¡æ‰‹ä¿¡æ¯å’Œæ¡æ‰‹HASHå€¼ï¼Œæ ¡éªŒé€šè¿‡åï¼Œæ¡æ‰‹å®Œæ¯•ï¼Œä»è¿™å¼€å§‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„é€šä¿¡å°±ä½¿ç”¨é‚£ä¸²éšæœºå­—ç¬¦ä¸²è¿›è¡ŒAESå¯¹ç§°åŠ å¯†ã€‚</li></ol><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ol><li>ä½¿ç”¨RSAéå¯¹ç§°ç®—æ³•ï¼ŒæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€å…¬é’¥è¯ä¹¦ç­‰ï¼›</li><li>å®¢æˆ·ç«¯å‘ç¬¬ä¸‰æ–¹éªŒè¯å…¬é’¥åˆæ³•æ€§ï¼ŒéªŒè¯é€šè¿‡åå‘æœåŠ¡ç«¯çº¦å®šå¯¹ç§°åŠ å¯†çš„éšæœºå­—ç¬¦ä¸²ï¼Œä¿è¯éšæœºå­—ç¬¦ä¸²åªæœ‰é€šä¿¡åŒæ–¹çŸ¥é“ã€‚</li><li>æ¥ä¸‹æ¥é€šä¿¡å°±ä½¿ç”¨è¿™ä¸ªéšæœºç¬¦ä¸²ä¸²è¿›è¡ŒåŠ å¯†é€šä¿¡ï¼Œå› ä¸ºéšæœºå­—ç¬¦ä¸²åªæœ‰åŒæ–¹çŸ¥é“ï¼Œæ‰€æœ‰ä¿¡æ¯ä¸ä¼šè¢«æˆªè·ã€‚</li></ol><p><img src="/2020/07/09/2020/HTTPSè¿æ¥è¿‡ç¨‹/NO2.png" alt="NO2" title="NO2"></p>]]></content>
      
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹</title>
      <link href="/2020/07/09/2020/%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/"/>
      <url>/2020/07/09/2020/%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h4><p><img src="/2020/07/09/2020/ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹/NO1.png" alt="NO1" title="NO1"></p><a id="more"></a><ol><li>TCPæœåŠ¡å™¨è¿›ç¨‹å…ˆåˆ›å»ºä¼ è¾“æ§åˆ¶å—TCBï¼Œæ—¶åˆ»å‡†å¤‡æ¥æ”¶å®¢æˆ·è¿›ç¨‹çš„è¿æ¥è¯·æ±‚ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥LISTENï¼ˆç›‘å¬çŠ¶æ€ï¼‰ï¼›</li><li>TCPå®¢æˆ·è¿›ç¨‹åˆ›å»ºä¼ è¾“æ§åˆ¶å—TCBï¼Œç„¶åå‘æœåŠ¡å™¨å‘å‡ºè¿æ¥è¯·æ±‚æŠ¥æ–‡ï¼Œæ­¤æ—¶æŠ¥æ–‡é¦–éƒ¨åŒéƒ¨ä½SYN=1ï¼Œæ­¤æ—¶TCPå®¢æˆ·ç«¯è¿›ç¨‹è¿›å…¥SYN-SENTçŠ¶æ€ï¼ŒTCPè§„å®šï¼ŒSYN=1æŠ¥æ–‡ä¸èƒ½æºå¸¦æ•°æ®ï¼›</li><li>TCPæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚æŠ¥æ–‡åï¼Œå¦‚æœåŒæ„è¿æ¥ï¼Œåˆ™å‘å‡ºç¡®è®¤æŠ¥æ–‡ï¼Œç¡®è®¤æŠ¥æ–‡ä¸­ACK=1,SYN=1ï¼Œæ­¤æ—¶TCPæœåŠ¡å™¨è¿›ç¨‹è¿›å…¥SYNC-RCVDçŠ¶æ€ï¼Œè¿™ä¸ªæŠ¥æ–‡ä¹Ÿä¸èƒ½æºå¸¦æ•°æ®ï¼›</li><li>TCPå®¢æˆ·è¿›ç¨‹æ”¶åˆ°ç¡®è®¤åï¼Œè¦ç»™æœåŠ¡å™¨å‘å‡ºç¡®è®¤ï¼Œç¡®è®¤æŠ¥æ–‡ä¸­ACK=1ï¼Œæ­¤æ—¶TCPè¿æ¥å»ºç«‹ï¼Œå®¢æˆ·ç«¯è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼ŒTCPè§„å®šï¼ŒACKæŠ¥æ–‡å¯ä»¥æºå¸¦æ•°æ®ï¼›</li><li>TCPæœåŠ¡å™¨æ”¶åˆ°ç¡®è®¤åï¼Œä¹Ÿè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå¯ä»¥å¼€å§‹é€šä¿¡ã€‚</li></ol><p><em>ç±»ä¼¼æ˜¯è¿™æ ·çš„ï¼š</em></p><ul><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘åŒ…ï¼ŒæœåŠ¡ç«¯æ¥æ”¶<ol><li>æœåŠ¡ç«¯æ”¶åˆ°äº†ï¼ŒæœåŠ¡ç«¯å°±å¯ä»¥ç¡®è®¤å®¢æˆ·ç«¯å‘é€èƒ½åŠ›ã€æœåŠ¡ç«¯æ¥æ”¶èƒ½åŠ›æ˜¯æ­£å¸¸çš„ï¼›</li></ol></li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯å‘åŒ…ï¼Œå®¢æˆ·ç«¯æ¥æ”¶<ol><li>è¿™æ ·å®¢æˆ·ç«¯å¾—å‡ºç»“è®ºï¼ŒæœåŠ¡ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ­£å¸¸ï¼Œå®¢æˆ·ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ­£å¸¸ï¼Œä¸è¿‡æ­¤æ—¶æœåŠ¡å™¨ä¸èƒ½ç¡®è®¤å®¢æˆ·ç«¯æ¥æ”¶æ˜¯å¦æ­£å¸¸ï¼›</li></ol></li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘åŒ…ï¼ŒæœåŠ¡ç«¯æ¥æ”¶<ol><li>è¿™æ ·æœåŠ¡ç«¯å°±å¯ä»¥å¾—å‡ºç»“è®ºï¼Œå®¢æˆ·ç«¯æ¥æ”¶ï¼Œå‘é€èƒ½åŠ›æ­£å¸¸ï¼ŒæœåŠ¡ç«¯è‡ªå·±çš„å‘é€ï¼Œæ¥æ”¶èƒ½åŠ›æ­£å¸¸ã€‚</li></ol></li></ul><h5 id="ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</h5><p>æ¡æ‰‹å°‘äº†ï¼Œæ— æ³•ç¡®è®¤åŒæ–¹è¿æ¥ï¼›<br>æ¡æ‰‹å¤šäº†æ²¡å¿…è¦ï¼›<br>å¦‚æœåªæœ‰ä¸¤æ¬¡æ¡æ‰‹ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€ SYN/ACK æŠ¥æ–‡åï¼Œå°±ä¼šè®¤ä¸ºè¿æ¥å»ºç«‹ã€‚ä½†æ˜¯å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰æ”¶åˆ°æŠ¥æ–‡ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯æ˜¯æ²¡æœ‰å»ºç«‹è¿æ¥çš„ã€‚è¿™å°±å¯¼è‡´æœåŠ¡ç«¯ä¼šæµªè´¹èµ„æºã€‚</p><h4 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h4><p><img src="/2020/07/09/2020/ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹/NO2.png" alt="NO2" title="NO2"></p><ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼ŒFIN=1,ACK=1ï¼Œä¸»åŠ¨å…³é—­è¿æ¥ï¼Œç­‰å¾…æœåŠ¡ç«¯ç¡®è®¤ï¼›</li><li>æœåŠ¡ç«¯æ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡åï¼Œç«‹å³å‘å‡ºç¡®è®¤æŠ¥æ–‡ï¼ŒACK=1ï¼Œæ­¤æ—¶TCPå¤„äºåŠå…³é—­çŠ¶æ€ï¼Œå³å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„è¿æ¥å·²ç»é‡Šæ”¾äº†ï¼Œä½†æ˜¯æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯çš„è¿æ¥è¿˜æœªååˆ†ï¼Œè¿™è¡¨ç¤ºå®¢æˆ·ç«¯å·²ç»æ²¡æœ‰æ•°æ®å‘é€äº†ï¼Œä½†æ˜¯æœåŠ¡ç«¯å¯èƒ½è¿˜æœ‰æ•°æ®ç»™å®¢æˆ·ç«¯å‘é€ï¼›</li><li>æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€é‡Šæ”¾æŠ¥æ–‡ï¼ŒFIN=1,ACK=1ï¼Œä¸»åŠ¨å…³é—­è¿æ¥ï¼ŒåŒæ—¶ç­‰å¾…ç¡®è®¤ï¼›</li><li>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡è¿æ¥é‡Šæ”¾æŠ¥æ–‡åï¼Œç«‹å³å‘å‡ºç¡®è®¤æŠ¥æ–‡ï¼ŒACK=1ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¡®è®¤åï¼Œå°±ä¼šç«‹å³è¿›å…¥closeçŠ¶æ€ã€‚</li></ol><p><em>ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿå½¢è±¡æ¯”å–»ï¼š</em></p><ul><li>Aå’ŒBæ‰“ç”µè¯ï¼Œé€šè¯ç»“æŸå</li><li>Aï¼šæˆ‘æ²¡å•¥è¦è¯´çš„äº†ï¼ˆå¼€å§‹å‘å‘†ï¼‰ï¼›</li><li>Bï¼šæˆ‘çŸ¥é“äº†ï¼Œæˆ‘è¿˜æœ‰è¦è¯´çš„ï¼›</li><li>Bï¼š2#$#@$@#$@#è¯´äº†ä¸€å †ï¼Œç„¶åè¯´æˆ‘ä¹Ÿè¯´å®Œäº†ï¼›</li><li>Aï¼šå¥½çš„ï¼Œæˆ‘çŸ¥é“äº†</li></ul><h5 id="ä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</h5><p>å› ä¸º TCP æ˜¯å…¨åŒå·¥çš„ï¼Œä¸€æ–¹å…³é—­è¿æ¥åï¼Œå¦ä¸€æ–¹è¿˜å¯ä»¥ç»§ç»­å‘é€æ•°æ®ã€‚æ‰€ä»¥å››æ¬¡æŒ¥æ‰‹ï¼Œå°†æ–­å¼€è¿æ¥åˆ†æˆä¸¤ä¸ªç‹¬ç«‹çš„è¿‡ç¨‹ã€‚</p><h4 id="ç›¸å…³é—®é¢˜"><a href="#ç›¸å…³é—®é¢˜" class="headerlink" title="ç›¸å…³é—®é¢˜"></a>ç›¸å…³é—®é¢˜</h4><h5 id="æ¡æ‰‹ï¼ŒæŒ¥æ‰‹é˜¶æ®µåŒ…ä¸¢å¤±æ€ä¹ˆåŠï¼Ÿ"><a href="#æ¡æ‰‹ï¼ŒæŒ¥æ‰‹é˜¶æ®µåŒ…ä¸¢å¤±æ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="æ¡æ‰‹ï¼ŒæŒ¥æ‰‹é˜¶æ®µåŒ…ä¸¢å¤±æ€ä¹ˆåŠï¼Ÿ"></a>æ¡æ‰‹ï¼ŒæŒ¥æ‰‹é˜¶æ®µåŒ…ä¸¢å¤±æ€ä¹ˆåŠï¼Ÿ</h5><p>ç®€è€Œè¨€ä¹‹ï¼Œé€šè¿‡å®šæ—¶å™¨ + è¶…æ—¶é‡è¯•æœºåˆ¶ï¼Œå°è¯•è·å–ç¡®è®¤ï¼Œç›´åˆ°æœ€åä¼šè‡ªåŠ¨æ–­å¼€è¿æ¥ã€‚</p><p>å…·ä½“è€Œè¨€ï¼ŒTCP è®¾æœ‰ä¸€ä¸ªä¿æ´»è®¡æ—¶å™¨ã€‚æœåŠ¡å™¨æ¯æ”¶åˆ°ä¸€æ¬¡å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œéƒ½ä¼šé‡æ–°å¤ä½è¿™ä¸ªè®¡æ—¶å™¨ï¼Œæ—¶é—´é€šå¸¸æ˜¯è®¾ç½®ä¸º 2 å°æ—¶ã€‚è‹¥ 2 å°æ—¶è¿˜æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„ä»»ä½•æ•°æ®ï¼ŒæœåŠ¡å™¨å°±å¼€å§‹é‡è¯•ï¼šæ¯éš” 75 åˆ†é’Ÿå‘é€ä¸€ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µï¼Œè‹¥ä¸€è¿å‘é€ 10 ä¸ªæ¢æµ‹æŠ¥æ–‡åå®¢æˆ·ç«¯ä¾ç„¶æ²¡æœ‰å›åº”ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±è®¤ä¸ºè¿æ¥å·²ç»æ–­å¼€äº†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>async/awaitåŸç†</title>
      <link href="/2020/06/30/2020/async-await%E5%8E%9F%E7%90%86/"/>
      <url>/2020/06/30/2020/async-await%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>asyncå…¶å®å°±æ˜¯Generatorçš„è¯­æ³•ç³–ã€‚<br>asyncå‡½æ•°å¯¹Generatorçš„æ”¹è¿›:</p><ol><li>å†…ç½®æ‰§è¡Œå™¨ï¼›</li><li>æ›´å¥½çš„è¯­ä¹‰ï¼Œ async/awaitï¼›</li><li>æ›´å¹¿çš„é€‚åº”æ€§ï¼›</li><li>è¿”å›Promiseã€‚</li></ol><p>asyncæœ¬è´¨ä¸Šæ˜¯å°è£…äº†Generatorçš„è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚</p><p><em>é¢˜å¤–è¯ï¼šä¸ºä»€ä¹ˆGeneratorå¯ä»¥åœ¨nextä¹‹å‰æš‚åœ?</em><br><a id="more"></a><br>Aï¼šåç¨‹ã€‚</p><p>ä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰æ‰§è¡Œåˆ°ä¸€åŠï¼Œå¯ä»¥æš‚åœæ‰§è¡Œï¼Œå°†æ‰§è¡Œæƒäº¤ç»™å¦ä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ï¼Œç­‰åˆ°ç¨åæ”¶å›æ‰§è¡Œæƒçš„æ—¶å€™ï¼Œå†æ¢å¤æ‰§è¡Œã€‚è¿™ç§å¯ä»¥å¹¶è¡Œæ‰§è¡Œã€äº¤æ¢æ‰§è¡Œæƒçš„çº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ï¼Œå°±ç§°ä¸ºåç¨‹ã€‚<br>åç¨‹æ˜¯ä¸€ç§æ¯”çº¿ç¨‹æ›´åŠ è½»é‡çº§çš„å­˜åœ¨ã€‚æ™®é€šçº¿ç¨‹æ˜¯æŠ¢å…ˆå¼çš„ï¼Œä¼šäº‰å¤ºcpuèµ„æºï¼Œè€Œåç¨‹æ˜¯åˆä½œçš„ï¼Œå¯ä»¥æŠŠåç¨‹çœ‹æˆæ˜¯è·‘åœ¨çº¿ç¨‹ä¸Šçš„ä»»åŠ¡ï¼Œä¸€ä¸ªçº¿ç¨‹ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªåç¨‹ï¼Œä½†æ˜¯åœ¨çº¿ç¨‹ä¸ŠåŒæ—¶åªèƒ½æ‰§è¡Œä¸€ä¸ªåç¨‹ã€‚</p><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>æˆ‘ä»¬çœ‹ä¸€ç‚¹é¢˜ç›®:</p><figure class="highlight scilab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">console. <span class="built_in">log</span>(<span class="string">'script start'</span> )</span><br><span class="line">async <span class="function"><span class="keyword">function</span> <span class="title">async1</span><span class="params">()</span> &#123;</span></span><br><span class="line">    await async2() </span><br><span class="line">    console. <span class="built_in">log</span>( <span class="string">' async1 end'</span> )</span><br><span class="line">&#125;</span><br><span class="line">async <span class="function"><span class="keyword">function</span> <span class="title">async2</span><span class="params">()</span> &#123;</span></span><br><span class="line">    console.<span class="number">1</span>og( <span class="string">'async2 end '</span> )</span><br><span class="line">&#125;    </span><br><span class="line">async1()</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span> &#123;</span></span><br><span class="line">    console. <span class="built_in">log</span>( <span class="string">'setTimeout'</span> )</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">new Promise(resolve =&gt; &#123;</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="string">' Promise'</span> )</span><br><span class="line">    resolve() </span><br><span class="line">&#125;).<span class="keyword">then</span>( <span class="function"><span class="keyword">function</span><span class="params">()</span> &#123;</span></span><br><span class="line">    consoleã€‚<span class="built_in">log</span>( <span class="string">' promise1'</span> )</span><br><span class="line">&#125;).<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span> &#123;</span></span><br><span class="line">    console.<span class="number">1</span>og( <span class="string">" promise2'</span> )</span><br><span class="line">&#125;)</span><br><span class="line">console. <span class="built_in">log</span>( <span class="string">'script end'</span> )</span><br></pre></td></tr></table></figure><p><em>ä½ çŸ¥é“ç­”æ¡ˆæ˜¯ä»€ä¹ˆå—?</em><br>script start - async2 end - Promise - script end  -  promise1 - promise2 - async1 end - setTimeout</p><p><em>è§£æï¼š</em></p><ol><li>æ‰§è¡Œä»£ç ï¼Œè¾“å‡ºscript startã€‚</li><li>æ‰§è¡Œasync1(),ä¼šè°ƒç”¨async2(),ç„¶åè¾“å‡ºasync2 end,æ­¤æ—¶å°†ä¼šä¿ç•™async1å‡½æ•°çš„ä¸Šä¸‹æ–‡ï¼Œç„¶åè·³å‡ºasync1å‡½æ•°ã€‚(async è¿”å›ä¸€ä¸ªPromiseï¼Œ Promiseæ˜¯ç«‹å³æ‰§è¡Œçš„ã€‚)</li><li>é‡åˆ°setTimeoutï¼Œäº§ç”Ÿä¸€ä¸ªå®ä»»åŠ¡</li><li>æ‰§è¡ŒPromiseï¼Œè¾“å‡ºPromiseã€‚é‡åˆ°thenï¼Œäº§ç”Ÿç¬¬ä¸€ä¸ªå¾®ä»»åŠ¡</li><li>ç»§ç»­æ‰§è¡Œä»£ç ï¼Œè¾“å‡ºscript end</li><li>ä»£ç é€»è¾‘æ‰§è¡Œå®Œæ¯•(å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•)ï¼Œå¼€å§‹æ‰§è¡Œå½“å‰å®ä»»åŠ¡äº§ç”Ÿçš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¾“å‡ºpromise1ï¼Œè¯¥å¾®ä»»åŠ¡é‡åˆ°thenï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„å¾®ä»»åŠ¡</li><li>æ‰§è¡Œäº§ç”Ÿçš„å¾®ä»»åŠ¡ï¼Œè¾“å‡ºpromise2,å½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•ã€‚æ‰§è¡Œæƒå›åˆ°async1</li><li>æ‰§è¡Œawait,å®é™…ä¸Šä¼šäº§ç”Ÿä¸€ä¸ªpromiseè¿”å›</li><li>æ‰§è¡Œå®Œæˆï¼Œæ‰§è¡Œawaitåé¢çš„è¯­å¥ï¼Œè¾“å‡ºasync1 end</li><li>æœ€åï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå³æ‰§è¡ŒsetTimeoutï¼Œè¾“å‡ºsetTimeout</li></ol><h3 id="é¢˜ç›®2"><a href="#é¢˜ç›®2" class="headerlink" title="é¢˜ç›®2"></a>é¢˜ç›®2</h3><p>å®ç°ä¸€ä¸ªSleep, æ¯éš”ä¸€ç§’è¾“å‡º1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">interval</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        setTimeout(resolve, interval);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">one2FiveInAsync</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">        <span class="keyword">await</span> sleep(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">one2FiveInAsync();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EventLoop</title>
      <link href="/2020/06/12/2020/EventLoop/"/>
      <url>/2020/06/12/2020/EventLoop/</url>
      
        <content type="html"><![CDATA[<h2 id="EventLoop"><a href="#EventLoop" class="headerlink" title="EventLoop"></a>EventLoop</h2><p>å…ˆäº†è§£ä¸‹ä»»åŠ¡é˜Ÿåˆ—</p><ul><li>æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆ</li><li>ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚</li><li>ä¸€æ—¦æ‰§è¡Œæ ˆä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚</li><li><p>ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚<br>æ­¤æ—¶åŒºåˆ†ä¸ºæµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯å’ŒNodeç«¯çš„äº‹ä»¶å¾ªç¯ã€‚ä¸‹é¢å°†ä¸€ä¸€è¯¦è§£ã€‚<br>ä¸»çº¿ç¨‹ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è¯»å–äº‹ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªçš„è¿™ç§è¿è¡Œæœºåˆ¶åˆç§°ä¸ºEvent Loop(äº‹ä»¶å¾ªç¯)</p><a id="more"></a><p>åœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯å½“ä¸­ï¼Œæ‰§è¡Œçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p></li><li><p>é¦–å…ˆå°†åŒæ­¥ä»£ç æ”¾å…¥æ‰§è¡Œæ ˆè¿›è¡Œæ‰§è¡Œï¼Œè‹¥å­˜åœ¨å¼‚æ­¥äº‹ä»¶åˆ™å°†å…¶çš„è¿”å›ç»“æœä¼šè¢«æ”¾åˆ°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ä»»åŠ¡é˜Ÿåˆ—åˆåˆ†ä¸ºå®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚</p></li><li>å½“æ‰§è¡Œæ ˆä¸ºç©ºæ—¶ï¼Œä¼šä¼˜å…ˆæŸ¥çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰äº‹ä»¶å­˜åœ¨</li><li>è‹¥å­˜åœ¨ï¼Œåˆ™ä¾æ¬¡æ‰§è¡Œé˜Ÿåˆ—äº‹ä»¶ä¸­çš„å¯¹åº”å›è°ƒï¼Œç›´åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œå†è¿›å…¥ä¸‹ä¸€æ­¥</li><li>è‹¥ä¸å­˜åœ¨ï¼Œè·³å¾€ä¸‹ä¸€æ­¥</li><li>æŸ¥çœ‹å®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰äº‹ä»¶å­˜åœ¨</li><li>è‹¥å­˜åœ¨ï¼Œåˆ™å°†é˜Ÿåˆ—ä¸­çš„äº‹ä»¶çš„å¯¹åº”å›è°ƒæ”¾å…¥æ‰§è¡Œæ ˆæ‰§è¡Œ</li><li>è‹¥ä¸å­˜åœ¨ï¼Œè·³å¾€ä¸‹ä¸€æ­¥</li><li>è‹¥æ‰§è¡Œæ ˆä¸­åˆæœ‰å¼‚æ­¥ä»£ç ï¼Œåˆ™æ”¾å…¥ä¸‹ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ã€‚å¦‚æ­¤åå¤å¾ªç¯å‰ä¸‰ä¸ªæ­¥éª¤</li></ul><p>ä»ä»¥ä¸Šæˆ‘ä»¬å¾—çŸ¥é‡ç‚¹æ˜¯æ‰§è¡Œæ ˆä¸ºç©ºåä¼˜å…ˆå¤„ç†<code>å¾®ä»»åŠ¡</code>å†å¤„ç†<code>å®ä»»åŠ¡</code>ã€‚</p><p>å¾®ä»»åŠ¡ï¼š</p><ul><li>process.nextTick</li><li>promiseã€thenã€catch</li><li>Object.observe</li></ul><p>å®ä»»åŠ¡ï¼š</p><ul><li>setTimeout</li><li>setInterval</li><li>I\O</li><li>setImmediate</li></ul><p>eg.<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'start'</span>)</span><br><span class="line"></span><br><span class="line">const interval = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setInterval'</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout 1'</span>)</span><br><span class="line">  Promise.resolve()</span><br><span class="line">      .<span class="keyword">then</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'promise 3'</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="keyword">then</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'promise 4'</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="keyword">then</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'setTimeout 2'</span>)</span><br><span class="line">          Promise.resolve()</span><br><span class="line">              .<span class="keyword">then</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'promise 5'</span>)</span><br><span class="line">              &#125;)</span><br><span class="line">              .<span class="keyword">then</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'promise 6'</span>)</span><br><span class="line">              &#125;)</span><br><span class="line">              .<span class="keyword">then</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                clearInterval(interval)</span><br><span class="line">              &#125;)</span><br><span class="line">        &#125;, <span class="number">0</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">Promise.resolve()</span><br><span class="line">.<span class="keyword">then</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise 1'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="keyword">then</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise 2'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><em>ä¼šè¾“å‡ºä»€ä¹ˆå‘¢?</em></p><p>ç­”æ¡ˆ:</p><ol><li>start</li><li>promise 1</li><li>promise 2</li><li>setInterval</li><li>setTimeout 1</li><li>promise 3</li><li>promise 4</li><li>setInterval</li><li>setTimeout 2</li><li>promise 5</li><li>promise 6</li></ol><p>å…¶å®æŒ‰ç…§ä»¥ä¸Šçš„æ€è·¯ï¼Œå®ä»»åŠ¡-å¾®ä»»åŠ¡-å®ä»»åŠ¡ï¼Œæ˜¯å¾ˆå¥½ç†è§£çš„ã€‚</p><p><code>then</code></p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const p = function() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Promise(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">        const p1 = <span class="keyword">new</span> Promise(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                resolve(<span class="number">1</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">            resolve(<span class="number">2</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        p1.<span class="keyword">then</span>(<span class="function"><span class="params">(res)</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(res);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">        resolve(<span class="number">4</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">p.<span class="keyword">then</span>(<span class="function"><span class="params">(res)</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'end'</span>)</span><br></pre></td></tr></table></figure><p><em>ä½ çŸ¥é“ç­”æ¡ˆå—?</em></p><p>Aï¼š 3-end-2-4<br>ä½ ç­”å¯¹äº†å—?</p><p>è§£æ:<br>æ‰§è¡Œä»£ç ï¼ŒPromiseæœ¬èº«æ˜¯åŒæ­¥çš„ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œ.thenæ˜¯å¼‚æ­¥æ‰§è¡Œå‡½æ•°ã€‚é‡åˆ°setTimeoutï¼Œå…ˆæŠŠå…¶æ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ä¸­é‡åˆ°p1.thenä¼šå…ˆæ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œè¾“å‡º 3<br>é‡åˆ° p().then ä¼šå…ˆæ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œè¾“å‡º end<br>åŒæ­¥ä»£ç å—æ‰§è¡Œå®Œæˆåï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œé¦–å…ˆæ‰§è¡Œ p1.thenï¼Œè¾“å‡º 2, æ¥ç€æ‰§è¡Œp().then, è¾“å‡º 4<br>å¾®ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œå¼€å§‹æ‰§è¡Œå®ä»»åŠ¡ï¼ŒsetTimeout, resolve(1)ï¼Œä½†æ˜¯æ­¤æ—¶ p1.thenå·²ç»æ‰§è¡Œå®Œæˆï¼Œæ­¤æ—¶ 1ä¸ä¼šè¾“å‡ºã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·¨åŸŸè®¿é—®</title>
      <link href="/2020/05/11/2020/cors%E8%B7%A8%E5%9F%9F/"/>
      <url>/2020/05/11/2020/cors%E8%B7%A8%E5%9F%9F/</url>
      
        <content type="html"><![CDATA[<h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>Cross-Origin Resource Sharingï¼ˆCORSï¼‰è·¨æ¥æºèµ„æºå…±äº«æ˜¯ä¸€ä»½æµè§ˆå™¨æŠ€æœ¯çš„è§„èŒƒï¼Œæä¾›äº† Web æœåŠ¡ä»ä¸åŒåŸŸä¼ æ¥æ²™ç›’è„šæœ¬çš„æ–¹æ³•ï¼Œä»¥é¿å¼€æµè§ˆå™¨çš„åŒæºç­–ç•¥ã€‚</p><h3 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h3><p><em>åŒæºç­–ç•¥?</em></p><p>æº(origin)å…¶å®å°±æ˜¯æŒ‡çš„URLã€‚<br>eg. <a href="https://jayantxu.cn:80/p/abcd#123?query=cool">https://jayantxu.cn:80/p/abcd#123?query=cool</a></p><table><thead><tr><th>protocol</th><th>host</th><th>port</th><th>pathname</th><th>hash</th><th>query string</th></tr></thead><tbody><tr><td>https</td><td>jayantxu.cn</td><td>80</td><td>/p/abcd</td><td>123</td><td>query=cool</td></tr><tr><td>location.protocol</td><td>location.host</td><td>location.port</td><td>location.pathname</td><td>location.hash</td><td>location.search</td></tr></tbody></table><p>åŒæºå°±æ˜¯æŒ‡URLä¸­<code>protocolåè®®</code>ã€<code>hoståŸŸå</code>ã€<code>portç«¯å£</code>è¿™ä¸‰ä¸ªéƒ¨åˆ†ç›¸åŒï¼Œå…¶ä¸­ä¸€è€…ä¸åŒå³ä¸åŒã€‚</p><p>æºä¸åŒä¼šé™åˆ¶ä½ ï¼š</p><ul><li>AJAX è¯·æ±‚ä¸èƒ½å‘é€ã€‚</li><li>æ— æ³•è·å–DOMå…ƒç´ å¹¶è¿›è¡Œæ“ä½œã€‚</li><li>æ— æ³•è¯»å–Cookieã€LocalStorage å’Œ IndexDB ã€‚</li></ul><a id="more"></a><p>æœ‰äº›è¯·æ±‚æ˜¯ä¸å—è·¨åŸŸè¯·æ±‚é™åˆ¶çš„, eg. WebSocketã€scriptã€imgã€iframeã€videoã€audioâ€¦</p><p>è·¨åŸŸé”™è¯¯ï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Error] Origin http://127.0.0.1:8080 is not allowed by Access-Control-Allow-Origin.</span><br><span class="line">[Error] Failed to <span class="keyword">load</span> <span class="keyword">resource</span>: Origin <span class="keyword">http</span>://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8080</span> <span class="keyword">is</span> <span class="keyword">not</span> allowed <span class="keyword">by</span> <span class="keyword">Access</span>-Control-<span class="keyword">Allow</span>-Origin. (<span class="keyword">normal</span>, line <span class="number">0</span>)</span><br><span class="line">[<span class="keyword">Error</span>] XMLHttpRequest cannot <span class="keyword">load</span> <span class="keyword">http</span>://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">3000</span>/getInfo due <span class="keyword">to</span> <span class="keyword">access</span> control checks.</span><br></pre></td></tr></table></figure></p><h3 id="å¸¸è§è§£å†³æ–¹æ³•"><a href="#å¸¸è§è§£å†³æ–¹æ³•" class="headerlink" title="å¸¸è§è§£å†³æ–¹æ³•"></a>å¸¸è§è§£å†³æ–¹æ³•</h3><h4 id="1ã€jsonpè¯·æ±‚"><a href="#1ã€jsonpè¯·æ±‚" class="headerlink" title="1ã€jsonpè¯·æ±‚"></a>1ã€jsonpè¯·æ±‚</h4><p>åªæ¥å—getè¿™ä¸€ç§è¯·æ±‚ã€‚<br>eg.Ajax<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">dataType:</span> <span class="string">'jsonp'</span></span><br></pre></td></tr></table></figure></p><h4 id="2ã€postMessageè·¨åŸŸ"><a href="#2ã€postMessageè·¨åŸŸ" class="headerlink" title="2ã€postMessageè·¨åŸŸ"></a>2ã€postMessageè·¨åŸŸ</h4><p>H5çš„æ–°API</p><ol><li>é¡µé¢å’Œå…¶æ‰“å¼€çš„æ–°çª—å£çš„æ•°æ®ä¼ é€’</li><li>å¤šçª—å£ä¹‹é—´æ¶ˆæ¯ä¼ é€’</li><li>é¡µé¢ä¸åµŒå¥—çš„iframeæ¶ˆæ¯ä¼ é€’</li><li>ä¸Šé¢ä¸‰ä¸ªåœºæ™¯çš„è·¨åŸŸæ•°æ®ä¼ é€’</li></ol><p>ä¾‹å¦‚ï¼šä½¿ç”¨iframeå…¼å®¹è€ç³»ç»Ÿï¼ŒåµŒå…¥æ‰“å¼€çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨æ­¤è¿›è¡Œé€šä¿¡ã€‚</p><p><em>a.html</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"iframe"</span> <span class="attr">src</span>=<span class="string">"http://www.domain2.com/b.html"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined">       </span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">'iframe'</span>);</span></span><br><span class="line"><span class="actionscript">    iframe.onload = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> data = &#123;</span></span><br><span class="line"><span class="actionscript">            name: <span class="string">'aym'</span></span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// å‘domain2ä¼ é€è·¨åŸŸæ•°æ®</span></span></span><br><span class="line"><span class="javascript">        iframe.contentWindow.postMessage(<span class="built_in">JSON</span>.stringify(data), <span class="string">'http://www.domain2.com'</span>);</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// æ¥å—domain2è¿”å›æ•°æ®</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="string">'data from domain2 ---&gt; '</span> + e.data);</span></span><br><span class="line"><span class="actionscript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>b.html</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// æ¥æ”¶domain1çš„æ•°æ®</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="string">'data from domain1 ---&gt; '</span> + e.data);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(e.data);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (data) &#123;</span></span><br><span class="line"><span class="undefined">            data.number = 16;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// å¤„ç†åå†å‘å›domain1</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.parent.postMessage(<span class="built_in">JSON</span>.stringify(data), <span class="string">'http://www.domain1.com'</span>);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="actionscript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="3ã€corsè·¨åŸŸèµ„æºå…±äº«"><a href="#3ã€corsè·¨åŸŸèµ„æºå…±äº«" class="headerlink" title="3ã€corsè·¨åŸŸèµ„æºå…±äº«"></a>3ã€corsè·¨åŸŸèµ„æºå…±äº«</h4><p>æµè§ˆå™¨å°†corsè¯·æ±‚åˆ†ä¸ºäº†ä¸¤ç±»ï¼šç®€å•è¯·æ±‚ï¼Œéç®€å•è¯·æ±‚ã€‚</p><p>ç®€å•è¯·æ±‚: åœ¨å¤´ä¿¡æ¯ä¸­ï¼Œå¢åŠ ä¸€ä¸ªoriginå­—æ®µï¼Œç”¨äºè¯´æ˜ï¼Œæœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå€¼ï¼Œå†³å®šæ˜¯å¦åŒæ„æ­¤è¯·æ±‚ã€‚</p><ol><li>HEAD</li><li>GET</li><li>POST<br>(content-typeåªé™äºä¸‰ä¸ªå€¼ï¼š<code>application/x-www-form-urlencoded</code>ã€<code>multipart/form-data</code>ã€<code>text/plain</code>)</li></ol><p>å¦‚æœOriginæŒ‡å®šçš„æºï¼Œä¸åœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”ã€‚<br>æµè§ˆå™¨å‘ç°ï¼Œè¿™ä¸ªå›åº”çš„å¤´ä¿¡æ¯æ²¡æœ‰åŒ…å«Access-Control-Allow-Originå­—æ®µï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œå°±çŸ¥é“å‡ºé”™äº†ï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestçš„onerrorå›è°ƒå‡½æ•°æ•è·ã€‚æ³¨æ„ï¼Œè¿™ç§é”™è¯¯æ— æ³•é€šè¿‡çŠ¶æ€ç è¯†åˆ«ï¼Œå› ä¸ºHTTPå›åº”çš„çŠ¶æ€ç æœ‰å¯èƒ½æ˜¯200ã€‚<br><strong>æ‰€ä»¥ï¼šè¯·æ±‚æ˜¯å‘é€å‡ºå»äº†çš„ï¼è¿”å›ä¹‹åæµè§ˆå™¨å¤„ç†åæŠ¥é”™</strong></p><p>å¦‚æœOriginæŒ‡å®šçš„åŸŸååœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨è¿”å›çš„å“åº”ï¼Œä¼šå¤šå‡ºå‡ ä¸ªå¤´ä¿¡æ¯å­—æ®µã€‚<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-<span class="string">Origin:</span> <span class="string">http:</span><span class="comment">//api.alipay.com  // è¡¨ç¤ºæ¥å—çš„åŸŸå</span></span><br><span class="line">Access-Control-Allow-<span class="string">Credentials:</span> <span class="literal">true</span> <span class="comment">// æ˜¯å¦å…è®¸å‘é€cookie</span></span><br><span class="line">Access-Control-Expose-<span class="string">Headers:</span> FooBar</span><br><span class="line">Content-<span class="string">Type:</span> text/html; charset=utf<span class="number">-8</span></span><br></pre></td></tr></table></figure></p><p>éç®€å•è¯·æ±‚</p><p>é¢„æ£€è¯·æ±‚ï¼šåœ¨æ­£å¼é€šä¿¡å‰ï¼Œä¼šå…ˆè¯·æ±‚æŸ¥è¯¢å½“å‰åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨è®¸å¯åå•å†…ï¼Œä»¥åŠä½¿ç”¨å“ªäº›å¤´ä¿¡æ¯ç­‰ï¼Œåœ¨è‚¯å®šç­”å¤åï¼Œæ‰ä¼šæ­£å¼å‘å‡ºè¯·æ±‚ï¼Œå¦åˆ™æŠ¥é”™ã€‚<br>é¢„æ£€çš„è¯·æ±‚æ–¹æ³•æ˜¯<code>OPTION</code></p><p>eg.<br>è¿™ä¸ªè¯·æ±‚ï¼š<br><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">url</span> = <span class="string">'http://api.alipay.com/cors'</span>;</span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">xhr.open(<span class="string">'PUT'</span>, <span class="built_in">url</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.setRequestHeader(<span class="string">'X-Custom-Header'</span>, <span class="string">'value'</span>);</span><br><span class="line">xhr.send();</span><br></pre></td></tr></table></figure></p><p>æµè§ˆå™¨å‘ç°æ˜¯éç®€å•è¯·æ±‚ï¼Œæ‰€ä»¥ä¼š<code>é¢„æ£€</code><br>é¢„æ£€ï¼š<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">OPTIONS /cors HTTP/<span class="number">1.1</span></span><br><span class="line">Origin: http:<span class="comment">//api.alipay.com</span></span><br><span class="line">Access-Control-Request-<span class="function"><span class="keyword">Method</span>:</span> PUT <span class="comment">// å› ä¸ºæ˜¯PUTï¼Œæ‰€ä»¥åˆ—å‡ºPUT</span></span><br><span class="line">Access-Control-Request-Headers: X-Custom-Header <span class="comment">// æŒ‡å®šæµè§ˆå™¨CORSè¯·æ±‚ä¼šé¢å¤–å‘é€çš„å¤´ä¿¡æ¯å­—æ®µ</span></span><br><span class="line">Host: api.alice.com </span><br><span class="line">Accept-Language: en-US</span><br><span class="line">Connection: keep-alive</span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span>...</span><br></pre></td></tr></table></figure></p><p>é¢„æ£€çš„å›åº”ï¼š<br>æœåŠ¡å™¨æ”¶åˆ°â€é¢„æ£€â€è¯·æ±‚ä»¥åï¼Œæ£€æŸ¥äº†<code>Origin</code>ã€<code>Access-Control-Request-Method</code>å’Œ<code>Access-Control-Request-Headers</code>å­—æ®µä»¥åï¼Œç¡®è®¤å…è®¸è·¨æºè¯·æ±‚ï¼Œå°±å¯ä»¥åšå‡ºå›åº”ã€‚<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line"><span class="string">Date:</span> Mon, <span class="number">01</span> Dec <span class="number">2020</span> <span class="number">01</span>:<span class="number">15</span>:<span class="number">39</span> GMT</span><br><span class="line"><span class="string">Server:</span> Apache/<span class="number">2.0</span><span class="number">.61</span> (Unix)</span><br><span class="line">Access-Control-Allow-<span class="string">Origin:</span> <span class="string">http:</span><span class="comment">//api.alipay.com  // è¡¨ç¤ºæ¥å—çš„æº</span></span><br><span class="line">Access-Control-Allow-<span class="string">Methods:</span> GET, POST, PUT <span class="comment">// æ¥å—çš„æ–¹æ³•</span></span><br><span class="line">Access-Control-Allow-<span class="string">Headers:</span> X-Custom-Header</span><br><span class="line">Content-<span class="string">Type:</span> text/html; charset=utf<span class="number">-8</span></span><br><span class="line">Content-<span class="string">Encoding:</span> gzip</span><br><span class="line">Content-<span class="string">Length:</span> <span class="number">0</span></span><br><span class="line">Keep-<span class="string">Alive:</span> timeout=<span class="number">2</span>, max=<span class="number">100</span></span><br><span class="line"><span class="string">Connection:</span> Keep-Alive</span><br><span class="line">Content-<span class="string">Type:</span> text/plain</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæµè§ˆå™¨ä¸æ¥å—ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ­£å¸¸å›åº”ï¼Œæ²¡æœ‰ä»»ä½•corså¤´ä¿¡æ¯ï¼Œæµè§ˆå™¨è®¤å®šä¸åŒæ„é¢„æ£€è¯·æ±‚ï¼Œå°±æŠ¥é”™äº†ã€‚</p><p><em>withCredentials</em><br>åˆšåˆšæåˆ°è¦å‘é€cookieï¼Œé™¤äº†æµè§ˆå™¨åŒæ„ï¼ŒæŒ‡å®šäº†<code>Access-Control-Allow-Credentials</code>å­—æ®µå¤–ï¼Œå‰ç«¯çš„è¯·æ±‚ä¹Ÿéœ€è¦å¼€å¯<code>xhr.withCredentials = true</code></p><p>å›¾ç¤ºï¼š</p><p><img src="/2020/05/11/2020/corsè·¨åŸŸ/NO1.png" alt="NO1" title="NO1"></p><h4 id="4ã€ä»£ç†å‹-nginx-node"><a href="#4ã€ä»£ç†å‹-nginx-node" class="headerlink" title="4ã€ä»£ç†å‹:nginx / node"></a>4ã€ä»£ç†å‹:nginx / node</h4><ol><li><p>ä½¿ç”¨nginxåšä»£ç†ï¼ŒæŠŠè¯·æ±‚åˆ†å‘å»æœåŠ¡å™¨ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#proxyæœåŠ¡å™¨</span></span><br><span class="line">server &#123;</span><br><span class="line">    listen       8090;</span><br><span class="line">    server_name  xxx;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass   xxx:8080;  #åå‘ä»£ç†</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>nodeæ­ä¸€ä¸ªä¸­è½¬ã€‚</p></li></ol><h4 id="5ã€websocket"><a href="#5ã€websocket" class="headerlink" title="5ã€websocket"></a>5ã€websocket</h4><p>H5çš„æ–°åè®®ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è´¹èˆå°”.è€¶èŒ¨æ··æ´—</title>
      <link href="/2020/04/07/2020/%E8%B4%B9%E8%88%8D%E5%B0%94-%E8%80%B6%E8%8C%A8%E6%B7%B7%E6%B4%97/"/>
      <url>/2020/04/07/2020/%E8%B4%B9%E8%88%8D%E5%B0%94-%E8%80%B6%E8%8C%A8%E6%B7%B7%E6%B4%97/</url>
      
        <content type="html"><![CDATA[<h6 id="è´¹èˆå°”-è€¶èŒ¨æ··æ´—"><a href="#è´¹èˆå°”-è€¶èŒ¨æ··æ´—" class="headerlink" title="è´¹èˆå°”.è€¶èŒ¨æ··æ´—"></a>è´¹èˆå°”.è€¶èŒ¨æ··æ´—</h6><p>.from url <a href="https://bost.ocks.org/mike/shuffle/" target="_blank" rel="noopener">è´¹èˆå°”.è€¶èŒ¨æ··æ´—</a></p><p>æ•°å­— 1 - N ä¹‹é—´çš„ä¸€ç»„æ··æ’ï¼Œå¤§æ¦‚ä¸€ä¸‹å­å¯ä»¥æƒ³åˆ°çš„æ˜¯ï¼š</p><ul><li>ä»æ•°ç»„ä¸­å–æ•°ç»„é•¿åº¦ä¸­çš„ä¸€ä¸ªéšæœºæ•° Kã€‚</li><li>ç„¶åå°†æ•°ç»„ K ç´¢å¼•å¤„çš„ æ•°å€¼å–å‡º spliceï¼Œå †å¦‚æ–°æ•°ç»„ã€‚</li><li>é‡å¤â€¦</li></ul><p>æ··æ´—çš„ç®—æ³•ä¸­ï¼Œä½¿ç”¨ä»æ•°ç»„çš„é«˜ä½å¼€å§‹ã€‚<br>æˆ‘ä»¬ä½¿ç”¨æ•°ç»„çš„åéƒ¨å­˜å‚¨éšæœºç»„åˆçš„å…ƒç´ ï¼Œå¹¶ä½¿ç”¨æ•°ç»„çš„å‰éƒ¨å­˜å‚¨å…¶ä½™å…ƒç´ ã€‚<br>åªè¦æˆ‘ä»¬åœ¨é€‰å–æ—¶è¿›è¡Œç»Ÿä¸€é‡‡æ ·ï¼Œæˆ‘ä»¬å°±ä¸ä¼šå…³å¿ƒå…¶ä½™å…ƒç´ çš„é¡ºåºï¼ä¸ºäº†å®ç°å°±åœ°Oï¼ˆnï¼‰éšæœºæ’­æ”¾ï¼Œç„¶åï¼Œä»å‰é¢é€‰æ‹©ä¸€ä¸ªéšæœºå‰©ä½™çš„å…ƒç´ ï¼Œå¹¶å°†å…¶æ”¾ç½®åœ¨æ–°ä½ç½®ï¼ˆåœ¨åé¢ï¼‰ã€‚<br>åé¢çš„æœªæ”¹ç»„å…ƒç´ äº¤æ¢åˆ°å‰é¢ï¼Œåœ¨æ­¤å¤„ç­‰å¾…åç»­æ”¹ç»„ï¼š</p><a id="more"></a><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shuffle</span><span class="params">(array)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> m = <span class="keyword">array</span>.length, t, i;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// While there remain elements to shuffleâ€¦</span></span><br><span class="line">  <span class="keyword">while</span> (m) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Pick a remaining elementâ€¦</span></span><br><span class="line">    i = Math.floor(Math.random() * m--);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// And swap it with the current element.</span></span><br><span class="line">    t = <span class="keyword">array</span>[m];</span><br><span class="line">    <span class="keyword">array</span>[m] = <span class="keyword">array</span>[i];</span><br><span class="line">    <span class="keyword">array</span>[i] = t;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">array</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å³æ˜¯:</p><p>index   0   1   2   3   4   5   6   7   8   9   10  11   12<br>value   1   2   3   4   5   6   7   8   9   10  J   Q   K</p><p><strong>ç¬¬ä¸€è½®ï¼š</strong><br>å°† ä» æ•°ç»„é•¿åº¦ 12 ä¸­éšæœºå–å‡ºçš„ç´¢å¼•ï¼Œä¸æœ€åä¸€ä½ç½®æ¢:</p><p>.eg<br>m = 12<br>i = 3<br>index   0   1   2   3   4   5   6   7   8   9   10  11   12<br>value   1   2   3   K   5   6   7   8   9   10  J   Q   4</p><p><strong>ç¬¬äºŒè½®</strong><br>.eg<br>m = 11<br>i = â€¦ (0 ~ 11 ä¹‹é—´ï¼Œä¸ä¼šå†å½±å“åˆ°å·²æ’åºæ•°ç»„å…ƒç´ ï¼Œå³ 11 ä¹‹åçš„å…ƒç´ äº†~)</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½®æ’­</title>
      <link href="/2020/03/30/2020/%E8%BD%AE%E6%92%AD/"/>
      <url>/2020/03/30/2020/%E8%BD%AE%E6%92%AD/</url>
      
        <content type="html"><![CDATA[<p><em>2020-07-03æ›´æ–°æè¿°ï¼šå›å¤´å†çœ‹ï¼Œè¿™ä¸ªå¤„ç†è¿‡ç¨‹å¹¶ä¸ä¼˜é›…ğŸ¤’ï¼Œå†™çš„ä¹Ÿä¸å¥½ğŸ¤£ï¼Œæƒå½“å½“æ—¶çš„æ€è·¯è®°å½•å§</em></p><h4 id="ä»¿é€ -CloudCarousel-3Dè½®æ’­"><a href="#ä»¿é€ -CloudCarousel-3Dè½®æ’­" class="headerlink" title="ä»¿é€  CloudCarousel 3Dè½®æ’­"></a>ä»¿é€  CloudCarousel 3Dè½®æ’­</h4><p>å…ˆä¸Šæ•ˆæœå›¾:<br><img src="/2020/03/30/2020/è½®æ’­/NO1.gif" alt="NO1" title="NO1"><br>ï¼ˆå¾ˆæ˜¯ç²—ç³™ï¼Œè¿˜æœªåšæˆé€šç”¨å‹ï¼Œæœªä¼˜åŒ–ï¼Œå…ˆåšè®°å½•ä¸‹ï¼Œä»¥ <strong>8</strong> å›¾ä½ä¸ºä¾‹å­ï¼‰</p><a id="more"></a><h5 id="é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†å‡ ä¸ªå…ƒç´ æ’åˆ—æˆåœ†"><a href="#é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†å‡ ä¸ªå…ƒç´ æ’åˆ—æˆåœ†" class="headerlink" title="# é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†å‡ ä¸ªå…ƒç´ æ’åˆ—æˆåœ†"></a># <strong>é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†å‡ ä¸ªå…ƒç´ æ’åˆ—æˆåœ†</strong></h5><p>æˆ‘ä»¬å¯ä»¥å…ˆè®¡ç®— æ¯ä¸€ä¸ªå…ƒç´ ä¹‹é—´é—´éš”å¤šå°‘è§’åº¦<br><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span>Â <span class="built_in">distance</span>Â =Â <span class="number">360</span>Â /Â this.carouselData.<span class="built_in">length</span>Â ;</span><br><span class="line"><span class="keyword">const</span>Â itemdisÂ =Â <span class="built_in">distance</span>Â *Â Math.PIÂ /Â <span class="number">180</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 180Â° = Î  * å¼§åº¦</span></span><br><span class="line"><span class="comment">// =&gt; å¼§åº¦ = 180Â° / Î </span></span><br><span class="line"><span class="comment">// æ‰€ä»¥å½“æˆ‘ä»¬çŸ¥é“äº†æ¯ä¸€ä¸ªæ‰€å çš„è§’åº¦ï¼Œå°±å¯ä»¥çŸ¥é“å®ƒ æ¯ä¸¤ä¸ªé—´å®šé•¿çš„å¼§åº¦</span></span><br></pre></td></tr></table></figure></p><p><img src="/2020/03/30/2020/è½®æ’­/NO2.gif" alt="NO2" title="NO2"></p><p><strong>ä»¥ æ•°ç»„ä¸­æ¯ä¸€ä½ æ•°çš„ index ç´¢å¼•ä¸ å¼§åº¦ç›¸ä¹˜ï¼Œç»“åˆ cos ã€ sin å‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®©ä»–ä»¬å›´ç»•æˆä¸ºåœ†</strong></p><p>è€ŒåŠå¾„åˆ™äº¤ç»™ <strong>radius</strong> å»å†³å®š</p><ul><li>Math.sin( (itemdis  <em> index) ) </em> radiusH + â€˜pxâ€™</li><li>Math.cos( (itemdis <em> index) ) </em> radiusH + â€˜pxâ€™</li></ul><p>æ‰€ä»¥ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç•Œé¢ä¸Šç”»å‡ºï¼š<br><img src="/2020/03/30/2020/è½®æ’­/NO3.png" alt="NO3" title="NO3"></p><p><strong>ä¸ºä»€ä¹ˆå®ƒåªæœ‰ä¸¤ä¸ªï¼Ÿ</strong></p><p>è¿™å°±æ˜¯å› ä¸ºåœ†å¿ƒæˆ‘ä»¬å¹¶æ²¡æœ‰è¿›è¡Œè®¾ç½®ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ä¸Šä¸€æ­¥çš„åŸºç¡€ä¸Šè·å–å®ƒçš„çˆ¶å®¹å™¨çš„ å®½é«˜ ä½œä¸ºä¸­å¿ƒç‚¹ã€‚ï¼ˆä¸­å¿ƒç‚¹å¯ä»¥è‡ªç”±å»è®¾ç½®ï¼Œæ­¤å›¾ä¸ºäº†å®Œæ•´å±•ç°ï¼Œæ•°æ®ä¸å®Œå…¨ã€‚ï¼‰</p><p><img src="/2020/03/30/2020/è½®æ’­/NO4.png" alt="NO4" title="NO4"></p><p>äºæ˜¯æˆ‘ä»¬å®Œæˆäº†ç¬¬ä¸€æ­¥ï¼Œå°†ä»–ä»¬æ’åˆ—æˆ<strong>åœ†</strong>ã€‚</p><h5 id="æ”¾æ‰ï¼Œæœ‰ç«‹ä½“æ„Ÿ"><a href="#æ”¾æ‰ï¼Œæœ‰ç«‹ä½“æ„Ÿ" class="headerlink" title="# æ”¾æ‰ï¼Œæœ‰ç«‹ä½“æ„Ÿ"></a># <strong>æ”¾æ‰ï¼Œæœ‰ç«‹ä½“æ„Ÿ</strong></h5><p>ç¬¬äºŒæ­¥çš„æ“ä½œå…¶å®å¹¶ä¸éº»çƒ¦ï¼Œæˆ‘ä»¬ä»…éœ€è¦å°†ä»–ä»¬ bottom ç«–è½´çš„åŠå¾„è¿›è¡Œå‹ç¼©ï¼Œä»–ä»¬éšä¹‹å°±å¯ä»¥æˆä¸ºä¸€ä¸ªç«‹ä½“çš„æ¤­åœ†äº†ã€‚<strong>é æƒ³è±¡</strong></p><p><img src="/2020/03/30/2020/è½®æ’­/NO5.png" alt="NO5" title="NO5"></p><h5 id="åŠ¨èµ·æ¥"><a href="#åŠ¨èµ·æ¥" class="headerlink" title="# åŠ¨èµ·æ¥"></a># <strong>åŠ¨èµ·æ¥</strong></h5><p>èµ·åˆæƒ³ä¾é  å¯¹ <strong>æ•°æ®æ•°ç»„</strong> è¿›è¡Œ å¤´éƒ¨åˆ é™¤ï¼Œå°¾éƒ¨æ’å…¥æ”¹å˜åºåˆ—ä½ç½®ï¼Œä»è€Œè¾¾åˆ°åŠ¨èµ·æ¥çš„æ•ˆæœã€‚<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.intervalÂ =Â setInterval(()Â =&gt;Â &#123;</span><br><span class="line">    <span class="comment">// ä¸´ç•Œæ¡ä»¶ï¼Œå• 0 ç´¢å¼•çš„ä½ç½®ç­‰äºç›®æ ‡å…ƒç´  çš„æ—¶å€™å³åœæ­¢ã€‚</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.carouselData[<span class="number">0</span>][<span class="string">'name'</span>]Â ===Â item[<span class="string">'name'</span>])Â &#123;</span><br><span class="line">        clearInterval(<span class="keyword">this</span>.interval);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å‡º 0å·ä½ç½®</span></span><br><span class="line">    unitItemÂ =Â JSON.parse(JSON.stringify(<span class="keyword">this</span>.carouselData[<span class="number">0</span>]));</span><br><span class="line">    <span class="keyword">this</span>.carouselData.splice(<span class="number">0</span>,Â <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">this</span>.$nextTick(()Â =&gt;Â &#123;</span><br><span class="line">        <span class="comment">// å…¥ æ•°ç»„å°¾éƒ¨</span></span><br><span class="line">        <span class="keyword">this</span>.carouselData.push(unitItem);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,Â <span class="number">500</span>);</span><br></pre></td></tr></table></figure></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transitionÂ <span class="keyword">all</span>Â .<span class="number">8</span>sÂ ease</span><br></pre></td></tr></table></figure><p><strong>è·‘é¢˜ï¼š</strong><br>transition å±æ€§æ˜¯ä¸€ä¸ªç®€å†™å±æ€§ï¼Œç”¨äºè®¾ç½®å››ä¸ªè¿‡æ¸¡å±æ€§ï¼š</p><ul><li>transition-propertyï¼š<br>è§„å®šè®¾ç½®è¿‡æ¸¡æ•ˆæœçš„ CSS å±æ€§çš„åç§°</li><li>transition-durationï¼š<br>è§„å®šå®Œæˆè¿‡æ¸¡æ•ˆæœéœ€è¦å¤šå°‘ç§’æˆ–æ¯«ç§’ã€‚</li><li>transition-timing-functionï¼š<br>è§„å®šé€Ÿåº¦æ•ˆæœçš„é€Ÿåº¦æ›²çº¿ã€‚</li><li>transition-delay<br>å®šä¹‰è¿‡æ¸¡æ•ˆæœä½•æ—¶å¼€å§‹ã€‚</li></ul><p><strong>over</strong></p><p>è¿™æ ·çš„ç¡®å¯ä»¥æœ‰æ•ˆé’ˆå¯¹ä¸­é—´å…ƒç´ çš„ç§»åŠ¨æ”¹å˜ã€‚ä½†æ˜¯æ¯ä¸€æ¬¡æ’å…¥ æ•°ç»„å°¾éƒ¨ çš„è¯¥å…ƒç´ æ¥è¯´ï¼Œç”±äºæ— æ³•è·Ÿè¸ªå®ƒæ’å…¥å‰çš„ä½ç½®ï¼Œå…ƒç´ ä¿¡æ¯ç­‰ç­‰ç­‰ã€‚æ‰€ä»¥transitionå¯¹å®ƒæ¥è¯´æ˜¯æ— æ•ˆçš„ã€‚<br>è¿™å°±é€ æˆäº†ä¸‹é¢ï¼ˆå¦‚å›¾ï¼‰çš„é—®é¢˜ã€‚</p><p><img src="/2020/03/30/2020/è½®æ’­/NO6.png" alt="NO6" title="NO6"></p><p>è‡³å°‘æˆ‘ä»¬å®ç°äº†ç¬¬äºŒæ­¥ï¼ŒåŠ¨èµ·æ¥ã€‚</p><h5 id="æ›´å®Œç¾çš„åŠ¨èµ·æ¥"><a href="#æ›´å®Œç¾çš„åŠ¨èµ·æ¥" class="headerlink" title="# æ›´å®Œç¾çš„åŠ¨èµ·æ¥"></a># <strong>æ›´å®Œç¾çš„åŠ¨èµ·æ¥</strong></h5><p>åæ¥ï¼Œä¸€ä¸‹æƒ³ä¸ç€æ€ä¹ˆåŠï¼Œå°±å›å®¶å»æƒ³äº†ã€‚~ ~</p><p>åæ¥ï¼Œæˆ‘æƒ³åˆ°çš„è§£å†³æ–¹å¼ï¼ˆäº‹å®ä¸Šåº”è¯¥ä¸æ­¢ï¼Œæˆ‘åªèƒ½æƒ³åˆ°ä¸€ç§ã€‚ã€‚ï¼‰</p><p><strong>æˆ‘å¯ä»¥å…è®¸å®ƒæ•°ç»„ä»¥åŠæ¯ä¸€ä½çš„ç´¢å¼•ä½ç½®ç­‰ç­‰ä¸å˜ï¼Œæˆ‘å¯ä»¥åŠ¨æ€è®¡ç®—ï¼Œæˆ‘åº”è¯¥åœ¨æ¯ä¸€è½®ç»™å®ƒä»€ä¹ˆä½ç½®ã€‚å³ æˆ‘å¯ä»¥ç®—ç»™å®ƒï¼Œå®ƒåœ¨æŸä¸€ä¸ªæ—¶åˆ»ï¼Œåº”è¯¥åœ¨ä»€ä¹ˆç›¸å¯¹ä½ç½®äº†ã€‚</strong></p><p><img src="/2020/03/30/2020/è½®æ’­/NO4.png" alt="NO7" title="NO7"></p><p><strong>è§£æï¼š</strong><br>ä»¥æ•°ç»„åŠå…¶ç´¢å¼•ä¸ºä¾‹å­ï¼š(ä»¥ <strong>4å›¾ä½</strong> ä¸ºä¾‹å­)<br>ç´¢å¼•ä½ç½®ï¼š     [0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]</p><p>å‡è®¾æˆ‘ç‚¹äº† <strong>ç´¢å¼•2</strong> å¤„çš„ä½ç½®ï¼Œé‚£ä¹ˆ [2] å°±åº”è¯¥æ¥åˆ° [0] çš„ä½ç½®ï¼Œå®ƒæ‰€éœ€è¦ç»å†çš„è·¯å¾„æœ‰ [1]ã€[0]çš„è¿™ä¸¤ä¸ªä½ç½®ã€‚</p><p>æ‰€ä»¥å®ƒéœ€è¦éå†ä¸¤æ¬¡</p><hr><p>æ ·å¼ä½ç½®ï¼š     [0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]</p><hr><p>åˆå§‹æ—¶å€™ï¼š     [0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]<br>   ç¬¬ä¸€æ¬¡ï¼š<br>ä¸€æ¬¡ç»“æŸï¼š     [1]â€”â€”â€“[2]â€”â€”â€“[3]â€”â€”â€“[0]<br>   ç¬¬äºŒæ¬¡ï¼š<br>äºŒæ¬¡ç»“æŸï¼š     [2]â€”â€”â€“[3]â€”â€”â€“[0]â€”â€”â€“[1]</p><hr><p>startIndex = 0; // å¼€å§‹ä½ç½®ç´¢å¼•  0<br>step = ç‚¹å‡»ä½ç½® - å¼€å§‹ç´¢å¼• = &gt; 2 - 0 = 2; // å¾ªç¯2æ¬¡<br>iterStep = 1; å½“å‰ä½ç§»æ¬¡æ•°</p><hr><p>åˆå§‹æ—¶å€™ï¼š [0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]</p><ul><li>ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼š</li></ul><p>length = 4;<br><strong>for(let i = 0 ; i &lt;= length - 1; i++)</strong><br>åˆ¤æ–­æ¡ä»¶ï¼š i &lt; iterStep<br>[0]  |  0 &lt; 1  â€”&gt; [0]åº”è¯¥è·å¾—[3] çš„æ ·å¼ | length - iterStep + i  â€”&gt;  4 - 1 + 0 = 3;<br>[1]  |  1 !&lt; 1 â€”&gt; [1]åº”è¯¥è·å¾—[0] çš„æ ·å¼ | i - iterStep â€”&gt; 1 - 1 = 0;<br>[2]  |  2 !&lt; 1 â€”&gt; [2]åº”è¯¥è·å¾—[1] çš„æ ·å¼ | i - iterStep â€”&gt; 2 - 1 = 1;<br>[3]  |  3 !&lt; 1 â€”&gt; [3]åº”è¯¥è·å¾—[2] çš„æ ·å¼ | i - iterStep â€”&gt; 3 - 1 = 2;</p><p>è·å¾—æ ·å¼å¯¹åº” ï¼š<br>[1]â€”â€”â€“[2]â€”â€”â€“[3]â€”â€”â€“[0]</p><p>iterStep += 1; â€”&gt; iterStep = 2;<br>step -= 1; â€”&gt; step = 1;<br>step === 0 ï¼Ÿç»“æŸ ï¼šç»§ç»­ï¼›<br><strong>ç»§ç»­</strong></p><hr><ul><li>ç¬¬äºŒæ¬¡æ‰§è¡Œï¼š</li></ul><p>length = 4;<br><strong>for(let i = 0 ; i &lt;= length - 1; i++)</strong><br>åˆ¤æ–­æ¡ä»¶ï¼š i &lt; iterStep<br>[0]  |  0 &lt; 2  â€”&gt; [0]åº”è¯¥è·å¾—[2] çš„æ ·å¼ | length - iterStep + i  â€”&gt;  4 - 2 + 0 = 2;<br>[1]  |  1 &lt; 2 â€”&gt; [1]åº”è¯¥è·å¾—[3] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 2 + 1 = 3;<br>[2]  |  2 !&lt; 2 â€”&gt; [2]åº”è¯¥è·å¾—[0] çš„æ ·å¼ | i - iterStep â€”&gt; 2 - 2 = 0;<br>[3]  |  3 !&lt; 2 â€”&gt; [3]åº”è¯¥è·å¾—[1] çš„æ ·å¼ | i - iterStep â€”&gt; 3 - 2 = 1;</p><p>è·å¾—æ ·å¼å¯¹åº” ï¼š<br>[2]â€”â€”â€“[3]â€”â€”â€“[0]â€”â€”â€“[1]</p><p>iterStep += 1; â€”&gt; iterStep = 3;<br>step -= 1; â€”&gt; step = 0;<br>step === 0 ï¼Ÿç»“æŸ ï¼šç»§ç»­ï¼›<br><strong>ç»“æŸ</strong></p><p>æˆ‘ä»¬å°±å¯ä»¥å…ˆå®Œå–„ç¬¬ä¸€æ®µä»£ç ï¼š<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">letÂ oldIndexÂ =Â <span class="keyword">this</span>.nowFrontIndex;Â <span class="comment">//Â å½“å‰åˆç´¢å¼•Index</span></span><br><span class="line">letÂ stepÂ =Â indexÂ -Â oldIndex;Â <span class="comment">//Â éå†æ¬¡æ•°</span></span><br><span class="line">letÂ iterStepÂ =Â <span class="number">1</span>;Â <span class="comment">//Â ä¸´ç•Œæ¡ä»¶</span></span><br><span class="line">let length = arr.length;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.intervalÂ =Â setInterval(()Â =&gt;Â &#123;</span><br><span class="line">    <span class="keyword">if</span>Â (stepÂ ===Â <span class="number">0</span>)Â &#123;</span><br><span class="line">        <span class="keyword">this</span>.nowFrontIndexÂ =Â index;Â <span class="comment">//Â æ›´æ–°åˆå§‹Index</span></span><br><span class="line">        clearInterval(<span class="keyword">this</span>.interval);</span><br><span class="line">        <span class="keyword">this</span>.intervalÂ =Â <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    letÂ result;</span><br><span class="line">    <span class="keyword">for</span>(letÂ iÂ =Â <span class="number">0</span>;Â iÂ &lt;Â length;Â iÂ ++)Â &#123;</span><br><span class="line">        <span class="keyword">if</span>Â (iÂ &lt;Â iterStep)Â &#123;</span><br><span class="line">            resultÂ =Â <span class="keyword">this</span>.transformAtCircle(lengthÂ -Â iterStepÂ +Â i);</span><br><span class="line">            <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.arr,Â i,Â result);</span><br><span class="line">        &#125;Â <span class="keyword">else</span>Â &#123;</span><br><span class="line">            resultÂ =Â <span class="keyword">this</span>.transformAtCircle(iÂ -Â iterStep);</span><br><span class="line">            <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.arr,Â i,Â result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    iterStepÂ +=Â <span class="number">1</span>;</span><br><span class="line">    stepÂ -=Â <span class="number">1</span>;</span><br><span class="line">&#125;,Â <span class="number">400</span>);</span><br></pre></td></tr></table></figure></p><h6 id="å†ä¸€æ¬¡ç‚¹å‡»"><a href="#å†ä¸€æ¬¡ç‚¹å‡»" class="headerlink" title="å†ä¸€æ¬¡ç‚¹å‡»"></a>å†ä¸€æ¬¡ç‚¹å‡»</h6><p>å½“å‰ä½ç½®  [2]â€”â€”â€“[3]â€”â€”â€“[0]â€”â€”â€“[1]</p><p>å‡è®¾æˆ‘ç‚¹äº† <strong>ç´¢å¼•3</strong> å¤„çš„ä½ç½®ï¼Œé‚£ä¹ˆ [3] å°±åº”è¯¥æ¥åˆ° [0] çš„ä½ç½®ï¼Œå®ƒæ‰€éœ€è¦ç»å†çš„è·¯å¾„æœ‰ [0]çš„è¿™ä¸ªä½ç½®ã€‚</p><p>æ‰€ä»¥å®ƒéœ€è¦éå†ä¸€æ¬¡</p><hr><p>æ ·å¼ä½ç½®ï¼š     [0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]</p><hr><p>åˆå§‹æ—¶å€™ï¼š     [2]â€”â€”â€“[3]â€”â€”â€“[0]â€”â€”â€“[1]<br>   ç¬¬ä¸€æ¬¡ï¼š<br>ä¸€æ¬¡ç»“æŸï¼š     [3]â€”â€”â€“[0]â€”â€”â€“[1]â€”â€”â€“[2]</p><hr><p>startIndex = 2; // å¼€å§‹ä½ç½®ç´¢å¼•  2<br>step = ç‚¹å‡»ç´¢å¼• - å¼€å§‹ç´¢å¼• = &gt; 3 - 2 = 1; // å¾ªç¯2æ¬¡<br>iterStep = 1; å½“å‰ä½ç§»æ¬¡æ•°  å…³é”®ï¼ </p><p><strong>oldIndex ? iterStep += oldIndex : iterStep</strong> â€”&gt; iterStep = 3;</p><p>å¦‚æœå› ä¸ºæ­¤æ¬¡ç‚¹å‡»æ˜¯åœ¨å­˜åœ¨äº†ç¬¬ä¸€æ¬¡ç‚¹å‡»çš„æƒ…å†µä¸‹ï¼Œæ‰€ä»¥å¯¹äºç›®å‰çš„ç´¢å¼•ä½ç½®å…¶å®å·²ç»åç§»è¿‡äº†ã€‚</p><hr><p>åˆå§‹æ—¶å€™ï¼š [2]â€”â€”â€“[3]â€”â€”â€“[0]â€”â€”â€“[1]</p><ul><li>ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼š</li></ul><p>length = 4;<br><strong>for(let i = 0 ; i &lt;= length - 1; i++)</strong><br>åˆ¤æ–­æ¡ä»¶ï¼š i &lt; iterStep<br>[0]  |  0 &lt; 3  â€”&gt; [0]åº”è¯¥è·å¾—[1] çš„æ ·å¼ | length - iterStep + i  â€”&gt;  4 - 3 + 0 = 1;<br>[1]  |  1 &lt; 3 â€”&gt; [1]åº”è¯¥è·å¾—[2] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 3 + 1 = 2;<br>[2]  |  2 &lt; 3 â€”&gt; [2]åº”è¯¥è·å¾—[3] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 3 + 2= 3;<br>[3]  |  3 !&lt; 3 â€”&gt; [3]åº”è¯¥è·å¾—[0] çš„æ ·å¼ | i - iterStep â€”&gt; 3 - 3 = 0;</p><p>è·å¾—æ ·å¼å¯¹åº” ï¼š<br>[3]â€”â€”â€“[0]â€”â€”â€“[1]â€”â€”â€“[2]</p><p>iterStep += 1; â€”&gt; iterStep = 4;;<br>step -= 1; â€”&gt; step = 0;<br>step === 0 ï¼Ÿç»“æŸ ï¼šç»§ç»­ï¼›<br><strong>ç»“æŸ</strong></p><p>æ‰€ä»¥æˆ‘ä»¬å†ä¸€æ¬¡å®Œå–„ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç <br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">letÂ oldIndexÂ =Â <span class="keyword">this</span>.nowFrontIndex;Â <span class="comment">//Â å½“å‰åˆç´¢å¼•Index</span></span><br><span class="line">letÂ stepÂ =Â indexÂ -Â oldIndex;Â <span class="comment">//Â éå†æ¬¡æ•°</span></span><br><span class="line">letÂ iterStepÂ =Â <span class="number">1</span>;Â <span class="comment">//Â ä¸´ç•Œæ¡ä»¶</span></span><br><span class="line">let length = <span class="keyword">this</span>.arr.length;</span><br><span class="line">+++++</span><br><span class="line">+ <span class="keyword">if</span>(oldIndex) &#123;</span><br><span class="line">+     iterStep += oldIndex;</span><br><span class="line">+ &#125;</span><br><span class="line">+++++</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.intervalÂ =Â setInterval(()Â =&gt;Â &#123;</span><br><span class="line">    <span class="keyword">if</span>Â (stepÂ ===Â <span class="number">0</span>)Â &#123;</span><br><span class="line">        <span class="keyword">this</span>.nowFrontIndexÂ =Â index;Â <span class="comment">//Â æ›´æ–°åˆå§‹Index</span></span><br><span class="line">        clearInterval(<span class="keyword">this</span>.interval);</span><br><span class="line">        <span class="keyword">this</span>.intervalÂ =Â <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    letÂ result;</span><br><span class="line">    <span class="keyword">for</span>(letÂ iÂ =Â <span class="number">0</span>;Â iÂ &lt; length;Â iÂ ++)Â &#123;</span><br><span class="line">        <span class="keyword">if</span>Â (iÂ &lt;Â iterStep)Â &#123;</span><br><span class="line">            resultÂ =Â <span class="keyword">this</span>.transformAtCircle( lengthÂ -Â iterStepÂ +Â i);</span><br><span class="line">            <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.arr,Â i,Â result);</span><br><span class="line">        &#125;Â <span class="keyword">else</span>Â &#123;</span><br><span class="line">            resultÂ =Â <span class="keyword">this</span>.transformAtCircle(iÂ -Â iterStep);</span><br><span class="line">            <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.arr,Â i,Â result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    iterStepÂ +=Â <span class="number">1</span>;</span><br><span class="line">    stepÂ -=Â <span class="number">1</span>;</span><br><span class="line">&#125;,Â <span class="number">400</span>);</span><br></pre></td></tr></table></figure></p><h6 id="å†å†ä¸€æ¬¡ç‚¹å‡»"><a href="#å†å†ä¸€æ¬¡ç‚¹å‡»" class="headerlink" title="å†å†ä¸€æ¬¡ç‚¹å‡»"></a>å†å†ä¸€æ¬¡ç‚¹å‡»</h6><p>å½“å‰ä½ç½®  [3]â€”â€”â€“[0]â€”â€”â€“[1]â€”â€”â€“[2]</p><p>å‡è®¾æˆ‘ç‚¹äº† <strong>ç´¢å¼•1</strong> å¤„çš„ä½ç½®ï¼Œé‚£ä¹ˆ [1] å°±åº”è¯¥æ¥åˆ° [0] çš„ä½ç½®ï¼Œå®ƒæ‰€éœ€è¦ç»å†çš„è·¯å¾„æœ‰ [0]ï¼Œ[1]çš„è¿™ä¸ªä½ç½®ã€‚</p><p>æ‰€ä»¥å®ƒéœ€è¦éå†ä¸€æ¬¡</p><hr><p>æ ·å¼ä½ç½®ï¼š     [0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]</p><hr><p>åˆå§‹æ—¶å€™ï¼š     [3]â€”â€”â€“[0]â€”â€”â€“[1]â€”â€”â€“[2]<br>   ç¬¬ä¸€æ¬¡ï¼š<br>ä¸€æ¬¡ç»“æŸï¼š     [0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]<br>   ç¬¬äºŒæ¬¡ï¼š<br>äºŒæ¬¡ç»“æŸï¼š     [1]â€”â€”â€“[2]â€”â€”â€“[3]â€”â€”â€“[0]</p><hr><p>è¿˜è®°å¾—æˆ‘ä»¬çš„è®¡ç®—æ–¹å¼å—ï¼Ÿæˆ‘ä»¬å¿«é€Ÿèµ°ä¸€éã€‚</p><p>startIndex = 3; // å¼€å§‹ä½ç½®ç´¢å¼•  3<br>step = ç‚¹å‡»ç´¢å¼• - å¼€å§‹ç´¢å¼• = &gt; 1 - 3 = <strong>-2</strong> ï¼› //  ï¼Ÿ ï¼Ÿ ï¼Ÿ<br>iterStep = 1; å½“å‰ä½ç§»æ¬¡æ•°  å…³é”®ï¼ </p><p><strong>oldIndex ? iterStep += oldIndex : iterStep</strong> â€”&gt; 1 + 3 = 4ï¼›;</p><ul><li>ç¬¬ä¸€æ¬¡æ‰§è¡Œ</li></ul><p>length = 4;<br><strong>for(let i = 0 ; i &lt;= length - 1; i++)</strong><br>åˆ¤æ–­æ¡ä»¶ï¼š i &lt; iterStep<br>[0]  |  0 &lt; 4  â€”&gt; [0]åº”è¯¥è·å¾—[0] çš„æ ·å¼ | length - iterStep + i  â€”&gt;  4 - 4 + 0 = 0;<br>[1]  |  1 &lt; 4 â€”&gt; [1]åº”è¯¥è·å¾—[1] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 4 + 1 = 1;<br>[2]  |  2 &lt; 4 â€”&gt; [2]åº”è¯¥è·å¾—[2] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 4 + 2 = 2;<br>[3]  |  3 &lt; 3 â€”&gt; [3]åº”è¯¥è·å¾—[3] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 4 + 3 = 3;</p><p>è·å¾—æ ·å¼å¯¹åº” ï¼š<br>[0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]</p><p>iterStep += 1; â€”&gt; iterStep = 5;<br>step -= 1; â€”&gt; step = -3;<br>step === 0 ï¼Ÿç»“æŸ ï¼šç»§ç»­ï¼›<br><strong>ç»§ç»­</strong>ã€åŒæ—¶æˆ‘ä»¬åº”è¯¥æ³¨æ„åˆ°ï¼Œå®ƒå°†ä¸ä¼šåœæ­¢äº†ï¼ã€‘</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹æˆ‘ä»¬çš„å¾ªç¯æ¬¡æ•°äº†ã€‚</p><p>[3]â€”â€”â€“[0]â€”â€”â€“[1]â€”â€”â€“[2]<br>å½“æˆ‘ä»¬ç‚¹å‡» [0]  â€”&gt; 0 - 3 = -3 â€”&gt; step = -3 â€” å®é™…å¾ªç¯ 1 æ¬¡<br>å½“æˆ‘ä»¬ç‚¹å‡» [1]  â€”&gt; 1 - 3 = -2 â€”&gt; step = -2 â€” å®é™…å¾ªç¯ 2 æ¬¡<br>å½“æˆ‘ä»¬ç‚¹å‡» [2]  â€”&gt; 2 - 3 = -1 â€”&gt; step = -1 â€” å®é™…å¾ªç¯ 3 æ¬¡<br>-3 + length â€”&gt; -3 + 4 = 1<br>-2 + length â€”&gt; -2 + 4 = 2<br>-1 + length â€”&gt; -1 + 4 = 3<br><strong>so</strong><br>æˆ‘ä»¬éœ€è¦æ›´æ”¹å®Œå–„ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç äº†ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">letÂ oldIndexÂ =Â <span class="keyword">this</span>.nowFrontIndex;Â <span class="comment">//Â å½“å‰åˆç´¢å¼•Index</span></span><br><span class="line">letÂ stepÂ =Â indexÂ -Â oldIndex;Â <span class="comment">//Â éå†æ¬¡æ•°</span></span><br><span class="line">letÂ iterStepÂ =Â <span class="number">1</span>;Â <span class="comment">//Â ä¸´ç•Œæ¡ä»¶</span></span><br><span class="line">let length = <span class="keyword">this</span>.arr.length;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(oldIndex) &#123;</span><br><span class="line">   iterStep += oldIndex;</span><br><span class="line">&#125;</span><br><span class="line">+++++</span><br><span class="line">+ <span class="keyword">if</span> (step &lt; <span class="number">0</span>) &#123;</span><br><span class="line">+   step += length;</span><br><span class="line">+ &#125;</span><br><span class="line">+++++</span><br><span class="line"><span class="keyword">this</span>.intervalÂ =Â setInterval(()Â =&gt;Â &#123;</span><br><span class="line">    <span class="keyword">if</span>Â (stepÂ ===Â <span class="number">0</span>)Â &#123;</span><br><span class="line">        <span class="keyword">this</span>.nowFrontIndexÂ =Â index;Â <span class="comment">//Â æ›´æ–°åˆå§‹Index</span></span><br><span class="line">        clearInterval(<span class="keyword">this</span>.interval);</span><br><span class="line">        <span class="keyword">this</span>.intervalÂ =Â <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    letÂ result;</span><br><span class="line">    <span class="keyword">for</span>(letÂ iÂ =Â <span class="number">0</span>;Â iÂ &lt; length;Â iÂ ++)Â &#123;</span><br><span class="line">        <span class="keyword">if</span>Â (iÂ &lt;Â iterStep)Â &#123;</span><br><span class="line">            resultÂ =Â <span class="keyword">this</span>.transformAtCircle( lengthÂ -Â iterStepÂ +Â i);</span><br><span class="line">            <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.arr,Â i,Â result);</span><br><span class="line">        &#125;Â <span class="keyword">else</span>Â &#123;</span><br><span class="line">            resultÂ =Â <span class="keyword">this</span>.transformAtCircle(iÂ -Â iterStep);</span><br><span class="line">            <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.arr,Â i,Â result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    iterStepÂ +=Â <span class="number">1</span>;</span><br><span class="line">    stepÂ -=Â <span class="number">1</span>;</span><br><span class="line">&#125;,Â <span class="number">400</span>);</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æˆ‘ä»¬å†é‡å¤ä¸€ä¸‹ä»¥ä¸Šç‚¹å‡»ï¼Œæ‰§è¡Œçœ‹çœ‹ã€‚</p><h6 id="å†å†å†ä¸€æ¬¡ç‚¹å‡»"><a href="#å†å†å†ä¸€æ¬¡ç‚¹å‡»" class="headerlink" title="å†å†å†ä¸€æ¬¡ç‚¹å‡»"></a>å†å†å†ä¸€æ¬¡ç‚¹å‡»</h6><p>å½“å‰ä½ç½®  [3]â€”â€”â€“[0]â€”â€”â€“[1]â€”â€”â€“[2]</p><p>å‡è®¾æˆ‘ç‚¹äº† <strong>ç´¢å¼•1</strong> å¤„çš„ä½ç½®ï¼Œé‚£ä¹ˆ [1] å°±åº”è¯¥æ¥åˆ° [0] çš„ä½ç½®ï¼Œå®ƒæ‰€éœ€è¦ç»å†çš„è·¯å¾„æœ‰ [0]ï¼Œ[1]çš„è¿™ä¸ªä½ç½®ã€‚</p><p>æ‰€ä»¥å®ƒéœ€è¦éå†ä¸€æ¬¡</p><hr><p>æ ·å¼ä½ç½®ï¼š     [0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]</p><hr><p>åˆå§‹æ—¶å€™ï¼š     [3]â€”â€”â€“[0]â€”â€”â€“[1]â€”â€”â€“[2]<br>   ç¬¬ä¸€æ¬¡ï¼š<br>ä¸€æ¬¡ç»“æŸï¼š     [0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]<br>   ç¬¬äºŒæ¬¡ï¼š<br>äºŒæ¬¡ç»“æŸï¼š     [1]â€”â€”â€“[2]â€”â€”â€“[3]â€”â€”â€“[0]</p><hr><p>è¿˜è®°å¾—æˆ‘ä»¬çš„è®¡ç®—æ–¹å¼å—ï¼Ÿæˆ‘ä»¬å¿«é€Ÿèµ°ä¸€éã€‚</p><p>startIndex = 3; // å¼€å§‹ä½ç½®ç´¢å¼•  3<br>step = ç‚¹å‡»ç´¢å¼• - å¼€å§‹ç´¢å¼• = &gt; 1 - 3 = -2<br><strong>step &lt; 0 ? step += length : step</strong> â€”&gt; -2 + 4 = 2ï¼› step = 2;</p><p>iterStep = 1; å½“å‰ä½ç§»æ¬¡æ•°  å…³é”®ï¼ </p><p><strong>oldIndex ? iterStep += oldIndex : iterStep</strong> â€”&gt; 1 + 3 = 4ï¼› iterStep = 4;</p><ul><li>ç¬¬ä¸€æ¬¡æ‰§è¡Œ</li></ul><p>length = 4;<br><strong>for(let i = 0 ; i &lt;= length - 1; i++)</strong><br>åˆ¤æ–­æ¡ä»¶ï¼š i &lt; iterStep<br>[0]  |  0 &lt; 4  â€”&gt; [0]åº”è¯¥è·å¾—[0] çš„æ ·å¼ | length - iterStep + i  â€”&gt;  4 - 4 + 0 = 0;<br>[1]  |  1 &lt; 4 â€”&gt; [1]åº”è¯¥è·å¾—[1] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 4 + 1 = 1;<br>[2]  |  2 &lt; 4 â€”&gt; [2]åº”è¯¥è·å¾—[2] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 4 + 2 = 2;<br>[3]  |  3 &lt; 4 â€”&gt; [3]åº”è¯¥è·å¾—[3] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 4 + 3 = 3;</p><p>è·å¾—æ ·å¼å¯¹åº” ï¼š<br>[0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]</p><p>iterStep += 1; â€”&gt; iterStep = 5;<br>step -= 1; â€”&gt; step = 1;<br>step === 0 ï¼Ÿç»“æŸ ï¼šç»§ç»­ï¼›<br><strong>ç»§ç»­</strong></p><ul><li>ç¬¬äºŒæ¬¡æ‰§è¡Œ</li></ul><p>length = 4;<br><strong>for(let i = 0 ; i &lt;= length - 1; i++)</strong><br>åˆ¤æ–­æ¡ä»¶ï¼š i &lt; iterStep<br>[0]  |  0 &lt; 5  â€”&gt; [0]åº”è¯¥è·å¾—[3] çš„æ ·å¼ | length - iterStep + i  â€”&gt;  4 - 5 + 0 = -1;  â€”  ï¼Ÿ ï¼Ÿ ï¼Ÿ<br>[1]  |  1 &lt; 5 â€”&gt; [1]åº”è¯¥è·å¾—[0] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 5 + 1 = 0;<br>[2]  |  2 &lt; 5 â€”&gt; [2]åº”è¯¥è·å¾—[1] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 5 + 2 = 1;<br>[3]  |  3 &lt; 5 â€”&gt; [3]åº”è¯¥è·å¾—[2] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 5 + 3 = 2;</p><p>è·å¾—æ ·å¼å¯¹åº” ï¼š<br>[1]â€”â€”â€“[2]â€”â€”â€“[3]â€”â€”â€“[0 // <strong>-1</strong> ï¼Ÿï¼Ÿï¼Ÿ]</p><p>iterStep += 1; â€”&gt; iterStep = 6;<br>step -= 1; â€”&gt; step = 0;<br>step === 0 ï¼Ÿç»“æŸ ï¼šç»§ç»­ï¼›<br><strong>ç»“æŸ</strong><br>æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ° -1 ä½ç½® ? é‚£ 0 çš„æ ·å¼å°±å®Œå…¨é”™äº†ã€‚åç»­ä¹Ÿè‚¯å®šä¼šå…¨é”™ï¼<br>é‚£é—®é¢˜å°±åœ¨æˆ‘ä»¬çš„åˆ¤æ–­åˆ†æ”¯ä¸Šäº†ã€‚</p><p>å³ä½¿å­˜åœ¨ä¸Šä¸€è½®çš„ iterStep, ä¹Ÿä¸åº”è¯¥æŒç»­ä¸æ–­çš„ + oldIndex æˆ–è€… + 1 ä¸‹å»ã€‚<br>ä½†å®ƒè½®è½¬äº†length é•¿åº¦çš„åœˆåº¦ä¹‹åï¼Œå®ƒåº”è¯¥é‡æ–°ä» â€œ0â€å¼€å§‹è®¡æ•°ã€‚</p><p>ä¹Ÿå°±æ˜¯ iterStep &gt; length çš„æ—¶å€™ï¼Œå®ƒåº”è¯¥ <strong>iterStep - length</strong>;</p><p>æ‰€ä»¥æˆ‘ä»¬å†å†ä¸€æ¬¡æ”¹å˜æˆ‘ä»¬çš„ä»£ç </p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">letÂ oldIndexÂ =Â <span class="keyword">this</span>.nowFrontIndex;Â <span class="comment">//Â å½“å‰åˆç´¢å¼•Index</span></span><br><span class="line">letÂ stepÂ =Â indexÂ -Â oldIndex;Â <span class="comment">//Â éå†æ¬¡æ•°</span></span><br><span class="line">letÂ iterStepÂ =Â <span class="number">1</span>;Â <span class="comment">//Â ä¸´ç•Œæ¡ä»¶</span></span><br><span class="line">let length = <span class="keyword">this</span>.arr.length;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(oldIndex) &#123;</span><br><span class="line">   iterStep += oldIndex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (step &lt; <span class="number">0</span>) &#123;</span><br><span class="line">   step += length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.intervalÂ =Â setInterval(()Â =&gt;Â &#123;</span><br><span class="line">    <span class="keyword">if</span>Â (stepÂ ===Â <span class="number">0</span>)Â &#123;</span><br><span class="line">        <span class="keyword">this</span>.nowFrontIndexÂ =Â index;Â <span class="comment">//Â æ›´æ–°åˆå§‹Index</span></span><br><span class="line">        clearInterval(<span class="keyword">this</span>.interval);</span><br><span class="line">        <span class="keyword">this</span>.intervalÂ =Â <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    letÂ result;</span><br><span class="line">    <span class="keyword">for</span>(letÂ iÂ =Â <span class="number">0</span>;Â iÂ &lt; length;Â iÂ ++)Â &#123;</span><br><span class="line">        +++++</span><br><span class="line">        + <span class="keyword">if</span> (iterStep &gt; length) &#123;</span><br><span class="line">        +    iterStep -= length;</span><br><span class="line">        + &#125;</span><br><span class="line">        +++++</span><br><span class="line">        <span class="keyword">if</span>Â (iÂ &lt;Â iterStep)Â &#123;</span><br><span class="line">            resultÂ =Â <span class="keyword">this</span>.transformAtCircle( lengthÂ -Â iterStepÂ +Â i);</span><br><span class="line">            <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.arr,Â i,Â result);</span><br><span class="line">        &#125;Â <span class="keyword">else</span>Â &#123;</span><br><span class="line">            resultÂ =Â <span class="keyword">this</span>.transformAtCircle(iÂ -Â iterStep);</span><br><span class="line">            <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.arr,Â i,Â result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    iterStepÂ +=Â <span class="number">1</span>;</span><br><span class="line">    stepÂ -=Â <span class="number">1</span>;</span><br><span class="line">&#125;,Â <span class="number">400</span>);</span><br></pre></td></tr></table></figure><h6 id="å†å†å†å†ä¸€æ¬¡ç‚¹å‡»"><a href="#å†å†å†å†ä¸€æ¬¡ç‚¹å‡»" class="headerlink" title="å†å†å†å†ä¸€æ¬¡ç‚¹å‡»"></a>å†å†å†å†ä¸€æ¬¡ç‚¹å‡»</h6><p>å½“å‰ä½ç½®  [3]â€”â€”â€“[0]â€”â€”â€“[1]â€”â€”â€“[2]</p><p>å‡è®¾æˆ‘ç‚¹äº† <strong>ç´¢å¼•1</strong> å¤„çš„ä½ç½®ï¼Œé‚£ä¹ˆ [1] å°±åº”è¯¥æ¥åˆ° [0] çš„ä½ç½®ï¼Œå®ƒæ‰€éœ€è¦ç»å†çš„è·¯å¾„æœ‰ [0]ï¼Œ[1]çš„è¿™ä¸ªä½ç½®ã€‚</p><p>æ‰€ä»¥å®ƒéœ€è¦éå†ä¸€æ¬¡</p><hr><p>æ ·å¼ä½ç½®ï¼š     [0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]</p><hr><p>åˆå§‹æ—¶å€™ï¼š     [3]â€”â€”â€“[0]â€”â€”â€“[1]â€”â€”â€“[2]<br>   ç¬¬ä¸€æ¬¡ï¼š<br>ä¸€æ¬¡ç»“æŸï¼š     [0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]<br>   ç¬¬äºŒæ¬¡ï¼š<br>äºŒæ¬¡ç»“æŸï¼š     [1]â€”â€”â€“[2]â€”â€”â€“[3]â€”â€”â€“[0]</p><hr><p>è¿˜è®°å¾—æˆ‘ä»¬çš„è®¡ç®—æ–¹å¼å—ï¼Ÿæˆ‘ä»¬å¿«é€Ÿèµ°ä¸€éã€‚</p><p>startIndex = 3; // å¼€å§‹ä½ç½®ç´¢å¼•  3<br>step = ç‚¹å‡»ç´¢å¼• - å¼€å§‹ç´¢å¼• = &gt; 1 - 3 = -2<br><strong>step &lt; 0 ? step += length : step</strong> â€”&gt; -2 + 4 = 2ï¼› step = 2;</p><p>iterStep = 1; å½“å‰ä½ç§»æ¬¡æ•°  å…³é”®ï¼ </p><p><strong>oldIndex ? iterStep += oldIndex : iterStep</strong> â€”&gt; 1 + 3 = 4ï¼› iterStep = 4;</p><ul><li>ç¬¬ä¸€æ¬¡æ‰§è¡Œ</li></ul><p>length = 4;<br><strong>for(let i = 0 ; i &lt;= length - 1; i++)</strong></p><p><strong>iterStep &gt; length ? iterStep -= length : iterStep</strong> â€”&gt; iterStep = 4;</p><p>åˆ¤æ–­æ¡ä»¶ï¼š i &lt; iterStep<br>[0]  |  0 &lt; 4  â€”&gt; [0]åº”è¯¥è·å¾—[0] çš„æ ·å¼ | length - iterStep + i  â€”&gt;  4 - 4 + 0 = 0;<br>[1]  |  1 &lt; 4 â€”&gt; [1]åº”è¯¥è·å¾—[1] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 4 + 1 = 1;<br>[2]  |  2 &lt; 4 â€”&gt; [2]åº”è¯¥è·å¾—[2] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 4 + 2 = 2;<br>[3]  |  3 &lt; 4 â€”&gt; [3]åº”è¯¥è·å¾—[3] çš„æ ·å¼ | length - iterStep + i â€”&gt; 4 - 4 + 3 = 3;</p><p>è·å¾—æ ·å¼å¯¹åº” ï¼š<br>[0]â€”â€”â€“[1]â€”â€”â€“[2]â€”â€”â€“[3]</p><p>iterStep += 1; â€”&gt; iterStep = 5;<br>step -= 1; â€”&gt; step = 1;<br>step === 0 ï¼Ÿç»“æŸ ï¼šç»§ç»­ï¼›<br><strong>ç»§ç»­</strong></p><ul><li>ç¬¬äºŒæ¬¡æ‰§è¡Œ</li></ul><p>length = 4;<br><strong>for(let i = 0 ; i &lt;= length - 1; i++)</strong></p><p><strong>iterStep &gt; length ? iterStep -= length : iterStep</strong> â€”&gt; iterStep = 5 &gt; 4 â€”&gt; 1;</p><p>åˆ¤æ–­æ¡ä»¶ï¼š i &lt; iterStep<br>[0]  |  0 &lt; 1  â€”&gt; [0]åº”è¯¥è·å¾—[3] çš„æ ·å¼ | length - iterStep + i  â€”&gt;  4 - 1 + 0 = 3;<br>[1]  |  1 &lt; 1 â€”&gt; [1]åº”è¯¥è·å¾—[0] çš„æ ·å¼ | i - iterStep â€”&gt; 1 - 1 = 0ï¼›<br>[2]  |  2 &lt; 1 â€”&gt; [2]åº”è¯¥è·å¾—[1] çš„æ ·å¼ | i - iterStep â€”&gt; 2 - 1 = 1ï¼›<br>[3]  |  3 &lt; 1 â€”&gt; [3]åº”è¯¥è·å¾—[2] çš„æ ·å¼ | i - iterStep â€”&gt; 3 - 1 = 2ï¼›</p><p>è·å¾—æ ·å¼å¯¹åº” ï¼š<br>[1]â€”â€”â€“[2]â€”â€”â€“[3]â€”â€”â€“[0]</p><p>iterStep += 1; â€”&gt; iterStep = 2;<br>step -= 1; â€”&gt; step = 0;<br>step === 0 ï¼Ÿç»“æŸ ï¼šç»§ç»­ï¼›<br><strong>ç»“æŸ</strong></p><hr><p>è¿™æ ·å°±æš‚æ—¶å®Œæˆå•å‘çš„è½¬è½®ã€‚<br>è¿˜æœ‰åŒå‘å¾ªç¯çš„æ—‹è½¬ï¼Œå°±ä¸åšä»‹ç»äº†ã€‚<br>è´´ä»£ç ã€‚</p><h5 id="Over"><a href="#Over" class="headerlink" title="Over"></a>Over</h5><p>ä»¥ 8 å›¾ ä¸ºä¾‹å­</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>Â (<span class="keyword">this</span>.interval)Â &#123;</span><br><span class="line">        <span class="keyword">return</span>Â ;</span><br><span class="line">    &#125;</span><br><span class="line">    letÂ oldIndexÂ =Â <span class="keyword">this</span>.nowFrontIndex;Â <span class="comment">//Â å½“å‰åˆç´¢å¼•Index</span></span><br><span class="line">    letÂ midIndex,</span><br><span class="line">        isRightÂ =Â <span class="literal">false</span>;Â <span class="comment">//Â middleIndex</span></span><br><span class="line">    <span class="keyword">if</span>Â (oldIndexÂ &gt;Â <span class="number">3</span>)Â &#123;</span><br><span class="line">        midIndexÂ =Â oldIndexÂ -Â <span class="number">4</span>;</span><br><span class="line">    &#125;Â <span class="keyword">else</span>Â &#123;</span><br><span class="line">        midIndexÂ =Â oldIndexÂ +Â <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    isRightÂ =Â <span class="keyword">this</span>.computedIsRightPart(midIndex,Â index,Â oldIndex);Â <span class="comment">//Â å·¦å³</span></span><br><span class="line"></span><br><span class="line">    letÂ stepÂ =Â indexÂ -Â oldIndex;Â <span class="comment">//Â éå†æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">if</span>Â (stepÂ &lt;Â <span class="number">0</span>)Â &#123;</span><br><span class="line">        stepÂ =Â <span class="number">8</span>Â +Â step;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>Â (isRight)Â &#123;</span><br><span class="line">        stepÂ =Â oldIndexÂ -Â index;</span><br><span class="line">        <span class="keyword">if</span>Â (stepÂ &lt;Â <span class="number">0</span>)Â &#123;</span><br><span class="line">            stepÂ =Â <span class="number">8</span>Â +Â step</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    letÂ iterStepÂ =Â <span class="number">1</span>;Â <span class="comment">//Â ä¸´ç•Œæ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span>Â (oldIndex)Â &#123;</span><br><span class="line">        <span class="keyword">if</span>Â (!isRight)Â &#123;</span><br><span class="line">            iterStepÂ +=Â oldIndex;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.intervalÂ =Â setInterval(()Â =&gt;Â &#123;</span><br><span class="line">        <span class="keyword">if</span>Â (stepÂ ===Â <span class="number">0</span>)Â &#123;</span><br><span class="line">            <span class="keyword">this</span>.nowFrontIndexÂ =Â index;Â <span class="comment">//Â æ›´æ–°åˆå§‹Index</span></span><br><span class="line">            clearInterval(<span class="keyword">this</span>.interval);</span><br><span class="line">            <span class="keyword">this</span>.intervalÂ =Â <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        letÂ result;</span><br><span class="line">        <span class="keyword">for</span>(letÂ iÂ =Â <span class="number">0</span>;Â iÂ &lt;=Â <span class="number">7</span>;Â iÂ ++)Â &#123;</span><br><span class="line">            <span class="keyword">if</span>Â (isRight)Â &#123;</span><br><span class="line">                <span class="keyword">if</span>Â (iÂ &lt;Â oldIndex)Â &#123;</span><br><span class="line">                    letÂ keyÂ =Â <span class="number">8</span>Â -Â oldIndex;</span><br><span class="line">                    <span class="keyword">if</span>Â ((keyÂ +Â iÂ +Â iterStep)Â &lt;Â <span class="number">8</span>)Â &#123;</span><br><span class="line">                        resultÂ =Â <span class="keyword">this</span>.transformAtCircle(keyÂ +Â iÂ +Â iterStep);</span><br><span class="line">                        <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.computedCarouselLoca,Â i,Â result);</span><br><span class="line">                    &#125;Â <span class="keyword">else</span>Â &#123;</span><br><span class="line">                        resultÂ =Â <span class="keyword">this</span>.transformAtCircle((keyÂ +Â iÂ +Â iterStep)Â -Â <span class="number">8</span>);</span><br><span class="line">                        <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.computedCarouselLoca,Â i,Â result);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;Â <span class="keyword">else</span>Â &#123;</span><br><span class="line">                    <span class="keyword">if</span>Â ((iÂ -Â oldIndexÂ +Â iterStep)Â &lt;Â <span class="number">8</span>)Â &#123;</span><br><span class="line">                        resultÂ =Â <span class="keyword">this</span>.transformAtCircle(iÂ -Â oldIndexÂ +Â iterStep);</span><br><span class="line">                        <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.computedCarouselLoca,Â i,Â result);</span><br><span class="line">                    &#125;Â <span class="keyword">else</span>Â &#123;</span><br><span class="line">                        resultÂ =Â <span class="keyword">this</span>.transformAtCircle(iÂ -Â oldIndexÂ +Â iterStepÂ -Â <span class="number">8</span>);</span><br><span class="line">                        <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.computedCarouselLoca,Â i,Â result);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;Â <span class="keyword">else</span>Â &#123;</span><br><span class="line">                <span class="keyword">if</span>Â (iterStepÂ &gt;=Â <span class="number">9</span>)Â &#123;</span><br><span class="line">                    iterStepÂ =Â iterStepÂ -Â <span class="number">8</span>;</span><br><span class="line">                &#125;Â </span><br><span class="line">                <span class="keyword">if</span>Â (iÂ &lt;Â iterStep)Â &#123;</span><br><span class="line">                    <span class="comment">//Â letÂ keyÂ =Â 8Â -Â iterStepÂ +Â i;</span></span><br><span class="line">                    <span class="comment">//Â ifÂ (keyÂ &lt;Â 0)Â &#123;</span></span><br><span class="line">                    <span class="comment">//Â Â Â Â Â keyÂ =Â iterStepÂ -Â 9</span></span><br><span class="line">                    <span class="comment">//Â &#125;</span></span><br><span class="line">                    resultÂ =Â <span class="keyword">this</span>.transformAtCircle(<span class="number">8</span>Â -Â iterStepÂ +Â i);</span><br><span class="line">                    <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.computedCarouselLoca,Â i,Â result);</span><br><span class="line">                &#125;Â <span class="keyword">else</span>Â &#123;</span><br><span class="line">                    resultÂ =Â <span class="keyword">this</span>.transformAtCircle(iÂ -Â iterStep);</span><br><span class="line">                    <span class="keyword">this</span>.$<span class="keyword">set</span>(<span class="keyword">this</span>.computedCarouselLoca,Â i,Â result);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        iterStepÂ +=Â <span class="number">1</span>;</span><br><span class="line">        stepÂ -=Â <span class="number">1</span>;</span><br><span class="line">    &#125;,Â <span class="number">400</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>adv</title>
      <link href="/2020/02/15/2020/adv/"/>
      <url>/2020/02/15/2020/adv/</url>
      
        <content type="html"><![CDATA[<h6 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h6><p>2020å¼€å¹´å°±é­é‡äº†ç–«æƒ…ï¼Œæ¥åŠ¿æ±¹æ±¹ï¼Œæ­¦æ±‰åŠ æ²¹ğŸ™</p><p>æœ¬è¯¥å›å»ä¸Šç­çš„å¤§å®¶ï¼Œéƒ½æ”¹æˆäº†è¿œç¨‹åŠå…¬ï¼Œåˆç€å®é™…çš„ä¸šåŠ¡å·¥ä½œä¹Ÿæ²¡æœ‰ä¸‹å‘å¤šå°‘ï¼Œå°±åœ¨å‡æœŸæŠŠå°ç»„ä»»åŠ¡åšäº†ï¼Œå°è¯•å°è£…ä¸€äº›ç»„å†…çš„é€šç”¨ç»„ä»¶ã€‚</p><p>åˆ†åˆ«ç”±<code>input</code>ã€<code>select</code>ã€<code>button</code>ã€<code>time</code>ã€<code>Date</code>ã€<code>Tab</code>ã€‚<br>æ ·å¼æœ‰ä¸€äº›æ˜¯æ¨¡ä»¿äº†<code>Element</code>çš„ç»„ä»¶æ ·å¼ï¼Œå¹¶ä¸”åœ¨é‡åˆ°å†…éƒ¨çš„ä¸€äº›é€»è¾‘ä¸å¤ªæ˜äº†çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹Elementçš„ç›¸å…³ç»„ä»¶æºç ä»è€Œè¿›è¡Œè§£å†³äº†ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šæ•ˆæœå›¾â€¦</p><a id="more"></a><h6 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h6><p><img src="/2020/02/15/2020/adv/NO1.gif" alt="NO1" title="NO1"></p><h6 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h6><p><img src="/2020/02/15/2020/adv/NO2.gif" alt="NO2" title="NO2"></p><h6 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h6><p><img src="/2020/02/15/2020/adv/NO3.gif" alt="NO3" title="NO3"></p><h6 id="Time"><a href="#Time" class="headerlink" title="Time"></a>Time</h6><p><img src="/2020/02/15/2020/adv/NO4.gif" alt="NO4" title="NO4"></p><h6 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h6><p><img src="/2020/02/15/2020/adv/NO5.gif" alt="NO5" title="NO5"></p><h6 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h6><p><img src="/2020/02/15/2020/adv/NO6.gif" alt="NO6" title="NO6"></p><h6 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h6><p>å…¶å®å°è£…ä¸€äº›é€šç”¨ç»„ä»¶å¯¹æ•´ä¸€ä¸ªç»“æ„è·¯å¾„çš„å­¦ä¹ æŠŠæ¡ï¼Œæ¯”å¤šçœ‹ä¸€äº›æºç çš„ä½œç”¨å’Œå½±å“ç›¸å¯¹æ¥è¯´ä¹Ÿå¤§ä¸€äº›ã€‚<br>å†…éƒ¨æœ‰å¾ˆå¤šçš„äº‹ä»¶ï¼Œé€»è¾‘å…¶å®ä¹Ÿæ²¡æœ‰è€ƒé‡çš„å¾ˆæ¸…æ¥šï¼Œæ¯•ç«Ÿä¹Ÿæ˜¯ä¸åˆ°ä¸€ä¸ªæœˆå†…å®Œæˆçš„å†…å®¹ï¼Œå¦‚æœè¦ä¼˜åŒ–å’Œæ”¹è¿›ï¼Œå¯ä»¥ä¿®æ”¹çš„åœ°æ–¹å…¶å®è¿˜æœ‰å¾ˆå¤šã€‚<br>ä½†æ˜¯ä¹Ÿæ˜¯è¿™ä¸ªè¿‡ç¨‹å­¦ä¹ åˆ°äº†å¾ˆå¤šï¼Œä¾‹å¦‚å†æ¬¡æ¨¡ä»¿<code>Element</code>é‡æ–°å†™äº†ä¸€äº›é€‚ç”¨çš„å¤±ç„¦æŒ‡ä»¤ï¼Œæ—¥æœŸæ—¶é—´é¢æ¿çš„è®¡ç®—å‡½æ•°ã€å‘¨æ•°çš„è®¡ç®—å‡½æ•°ç­‰ç­‰ç­‰â€¦<br>è¿™äº›éƒ½æ˜¯å¾ˆæœ‰è¶£çš„çŸ¥è¯†ç‚¹ï¼Œä¸€ä¸‹å­çš„æ€»ç»“è¿˜æœ‰å¾ˆå¤šï¼Œæ¥ä¸‹æ¥ä¼šæ…¢æ…¢ä»‹ç»è¿™äº›å†…å®¹ï¼š</p><p><em>æœªå®Œå¾…ç»­â€¦</em></p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Vue </tag>
            
            <tag> Adv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‡ç»˜å›æµ</title>
      <link href="/2020/02/03/2020/%E9%87%8D%E7%BB%98%E5%9B%9E%E6%B5%81/"/>
      <url>/2020/02/03/2020/%E9%87%8D%E7%BB%98%E5%9B%9E%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<h4 id="é‡ç»˜ï¼ˆrepaintï¼‰"><a href="#é‡ç»˜ï¼ˆrepaintï¼‰" class="headerlink" title="é‡ç»˜ï¼ˆrepaintï¼‰"></a>é‡ç»˜ï¼ˆrepaintï¼‰</h4><p>ç”±äºèŠ‚ç‚¹çš„å‡ ä½•å±æ€§å‘ç”Ÿäº†æ”¹å˜æˆ–è€…ç”±äºæ ·å¼å‘ç”Ÿæ”¹å˜è€Œä¸å½±å“å¸ƒå±€çš„ï¼Œç§°ä¸ºé‡ç»˜ï¼Œä¾‹å¦‚outlineï¼Œvisibilityï¼Œcolorï¼Œbackground-colorã€‚</p><h4 id="å›æµï¼ˆreflowï¼‰"><a href="#å›æµï¼ˆreflowï¼‰" class="headerlink" title="å›æµï¼ˆreflowï¼‰"></a>å›æµï¼ˆreflowï¼‰</h4><p>å›æµæ˜¯å¸ƒå±€æˆ–è€…å‡ ä½•å±æ€§éœ€è¦æ”¹å˜å°±ç§°ä¸ºå›æµï¼Œå›æµæ˜¯å½±å“æµè§ˆå™¨æ€§èƒ½çš„å…³é”®å› ç´ ï¼Œå› ä¸ºå›æµè®¾è®¡æ¶‰åŠåˆ°éƒ¨åˆ†é¡µé¢ã€æˆ–è€…æ•´ä¸ªé¡µé¢çš„å¸ƒå±€æ›´æ–°ï¼Œä¸€ä¸ªå…ƒç´ çš„å›æµä¼šå¯¼è‡´å…¶æ‰€æœ‰å­å…ƒç´ ä»¥åŠDOMç´§éšå…¶åçš„èŠ‚ç”µç­‰å…ƒç´ çš„å›æµã€‚</p><h4 id="å…³ç³»"><a href="#å…³ç³»" class="headerlink" title="å…³ç³»"></a>å…³ç³»</h4><p>å›æµä¼šå¼•å‘é‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•èµ·å›æµã€‚</p><h4 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h4><ul><li><code>offsetTop</code>ã€<code>offsetLeft</code>ã€<code>offsetWidth</code>ã€<code>offsetHeight</code></li><li><code>scrollTop</code>ã€<code>scrollLeft</code>ã€<code>scrollWidth</code>ã€<code>scrollHeight</code></li><li><code>clientTop</code>ã€<code>clientLeft</code>ã€<code>clientWidth</code>ã€<code>clientHeight</code></li><li><code>width</code>ã€<code>height</code></li><li><code>getComputedStyle</code></li></ul><p>è¿™äº›å±æ€§ï¼Œå‡ä¼šå¼•èµ·å¼ºåˆ¶æ¸²æŸ“åˆ·æ–°é˜Ÿåˆ—ã€‚</p><h4 id="å‡å°‘é‡ç»˜ä¸å›æµ"><a href="#å‡å°‘é‡ç»˜ä¸å›æµ" class="headerlink" title="å‡å°‘é‡ç»˜ä¸å›æµ"></a>å‡å°‘é‡ç»˜ä¸å›æµ</h4><h5 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h5><ol><li>ä½¿ç”¨transformä»£æ›¿topï¼›</li><li>ä½¿ç”¨visibilityä»£æ›¿display: noneï¼Œå‰è€…é‡ç»˜ï¼Œåè€…å›æµï¼›</li><li>é¿å…ä½¿ç”¨tableå¸ƒå±€ï¼›</li><li>å°½å¯èƒ½å†DOMæ ‘æœ€æœ«ç«¯æ”¹å˜classï¼›</li><li><p>é¿å…å¤šå±‚å†…è”æ ·å¼</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &gt; <span class="selector-tag">a</span> &gt; <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å°†åŠ¨ç”»æ•ˆæœåº”ç”¨åˆ°positionä¸ºabsoluteæˆ–è€…fixedçš„å…ƒç´ ä¸Šï¼Œé¿å…å½±å“å…¶ä»–å…ƒç´ å¸ƒå±€ï¼›</p></li></ol><h5 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h5><ol><li>é¿å…é¢‘ç¹æ“ä½œæ ·å¼ï¼Œæœ€å¥½ä¸€æ¬¡æ€§å†™styleï¼Œä¸è¦åˆ†å¼€å¾ˆå¤šä¸ªï¼Œæˆ–è€…ä¸€æ¬¡æ€§æ›´æ”¹classï¼›</li><li>é¿å…é¢‘ç¹æ“ä½œDOMï¼›</li><li>é¿å…é¢‘ç¹è¯»å–ä¼šå¼•èµ·é‡ç»˜ã€å›æµçš„å±æ€§ï¼›</li><li>æœ‰è´Ÿè´£åŠ¨ç”»çš„å…ƒç´ ä½¿ç”¨ç»å¯¹å®šä½ï¼Œè„±ç¦»æ–‡æ¡£æµï¼Œå¦åˆ™å¼•èµ·çˆ¶å…ƒç´ åŠåç»­å…ƒç´ çš„é¢‘ç¹å›æµã€‚</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> CSS </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue-Diff</title>
      <link href="/2020/01/17/2020/Vue-Diff/"/>
      <url>/2020/01/17/2020/Vue-Diff/</url>
      
        <content type="html"><![CDATA[<p>å¤§éƒ¨åˆ†å†…å®¹å¼•ç”¨è‡ªæ­¤åšå®¢ï¼š<a href="http://hcysun.me/vue-design/zh/renderer-diff.html" target="_blank" rel="noopener">vue-design</a>ï¼Œ å†…å®¹æ›´å…¨é¢å’Œæ˜“æ‡‚ï¼Œæ¨èå¤§å®¶çœ‹åŸæ–‡ã€‚</p><h5 id="è™šæ‹ŸDOM"><a href="#è™šæ‹ŸDOM" class="headerlink" title="è™šæ‹ŸDOM"></a>è™šæ‹ŸDOM</h5><p><strong>ä»€ä¹ˆæ˜¯è™šæ‹ŸDOMï¼Ÿï¼š</strong></p><p>åœ¨å†…éƒ¨çš„è®¡ç®—ä¸­ï¼Œä½¿ç”¨JSå¯¹è±¡æ¥æè¿°å¹¶è®°å½•ä¸‹ä¸€ä¸ªDOMèŠ‚ç‚¹ï¼Œè¿™ä¸ªå°±æ˜¯è™šæ‹ŸDOM</p><a id="more"></a><p><img src="/2020/01/17/2020/Vue-Diff/NO1.png" alt="NO1" title="NO1"><br><img src="/2020/01/17/2020/Vue-Diff/NO2.png" alt="NO2" title="NO2"></p><p><strong>èµ·å› ï¼š</strong><br><em>æµè§ˆå™¨DOMæ ‘å¤ªå¤šåºæ‚ï¼Œå…·å¤‡çš„å±æ€§ååˆ†å¤æ‚ï¼Œæ›´æ–°æ¸²æŸ“æ‰€è€—è´¹çš„æ€§èƒ½å¤šã€å¤§ã€‚</em></p><p><strong>å®é™…ä¸Šçš„çš„ä½œç”¨ï¼Ÿï¼š</strong><br><img src="/2020/01/17/2020/Vue-Diff/NO3.png" alt="NO3" title="NO3"></p><p><strong>VDOMå®šä¹‰çš„ä½ç½®ï¼š</strong><br><em>src/core/vdom/vnode.js   æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°</em><br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//Â å®šä¹‰äº†VNode</span></span><br><span class="line"><span class="keyword">export</span>Â <span class="keyword">default</span>Â <span class="keyword">class</span>Â VNodeÂ &#123;</span><br><span class="line">Â Â tag:Â <span class="built_in">string</span>Â |Â <span class="built_in">void</span>;Â <span class="comment">/**Â æœ€ç»ˆå¾—vnodeæ ‡ç­¾å±æ€§Â */</span></span><br><span class="line">Â Â data:Â VNodeDataÂ |Â <span class="built_in">void</span>;Â <span class="comment">/**Â åŒ…å«æœ€ç»ˆèŠ‚ç‚¹ä¸Šçš„styleÂ classÂ attrÂ */</span></span><br><span class="line">Â Â children:Â ?<span class="built_in">Array</span>&lt;VNode&gt;;Â <span class="comment">/**Â å­èŠ‚ç‚¹Â */</span></span><br><span class="line">Â Â text:Â <span class="built_in">string</span>Â |Â <span class="built_in">void</span>;Â <span class="comment">/**Â æ–‡æœ¬å±æ€§Â */</span></span><br><span class="line">Â Â elm:Â NodeÂ |Â <span class="built_in">void</span>;Â <span class="comment">/**Â å¯¹åº”å¾—çœŸæ˜¯domÂ */</span></span><br><span class="line">Â Â ns:Â <span class="built_in">string</span>Â |Â <span class="built_in">void</span>;</span><br><span class="line">Â Â context:Â ComponentÂ |Â <span class="built_in">void</span>;Â <span class="comment">//Â renderedÂ inÂ thisÂ component'sÂ scope</span></span><br><span class="line">Â Â key:Â <span class="built_in">string</span>Â |Â <span class="built_in">number</span>Â |Â <span class="built_in">void</span>;Â <span class="comment">/**Â keyå€¼ï¼ŒÂ diffæ—¶å¯ä»¥æé«˜æ•ˆç‡ï¼ŒÂ å…·ä½“å…¥v-foræ—¶Â éœ€è¦å£°æ˜Â :keyÂ */</span></span><br><span class="line">Â Â componentOptions:Â VNodeComponentOptionsÂ |Â <span class="built_in">void</span>;</span><br><span class="line">Â Â componentInstance:Â ComponentÂ |Â <span class="built_in">void</span>;Â <span class="comment">//Â componentÂ instance</span></span><br><span class="line">Â Â parent:Â VNodeÂ |Â <span class="built_in">void</span>;Â <span class="comment">//Â componentÂ placeholderÂ node</span></span><br><span class="line">Â Â <span class="comment">//Â strictlyÂ internal</span></span><br><span class="line">Â Â raw:Â <span class="built_in">boolean</span>;Â <span class="comment">//Â containsÂ rawÂ HTML?Â (serverÂ only)</span></span><br><span class="line">Â Â isStatic:Â <span class="built_in">boolean</span>;Â <span class="comment">//Â hoistedÂ staticÂ node</span></span><br><span class="line">Â Â isRootInsert:Â <span class="built_in">boolean</span>;Â <span class="comment">//Â necessaryÂ forÂ enterÂ transitionÂ check</span></span><br><span class="line">Â Â isComment:Â <span class="built_in">boolean</span>;Â <span class="comment">//Â emptyÂ commentÂ placeholder?</span></span><br><span class="line">Â Â isCloned:Â <span class="built_in">boolean</span>;Â <span class="comment">//Â isÂ aÂ clonedÂ node?</span></span><br><span class="line">Â Â isOnce:Â <span class="built_in">boolean</span>;Â <span class="comment">//Â isÂ aÂ v-onceÂ node?</span></span><br><span class="line">Â Â asyncFactory:Â <span class="built_in">Function</span>Â |Â <span class="built_in">void</span>;Â <span class="comment">//Â asyncÂ componentÂ factoryÂ function</span></span><br><span class="line">Â Â asyncMeta:Â <span class="built_in">Object</span>Â |Â <span class="built_in">void</span>;</span><br><span class="line">Â Â isAsyncPlaceholder:Â <span class="built_in">boolean</span>;</span><br><span class="line">Â Â ssrContext:Â <span class="built_in">Object</span>Â |Â <span class="built_in">void</span>;</span><br><span class="line">Â Â fnContext:Â ComponentÂ |Â <span class="built_in">void</span>;Â <span class="comment">//Â realÂ contextÂ vmÂ forÂ functionalÂ nodes</span></span><br><span class="line">Â Â fnOptions:Â ?ComponentOptions;Â <span class="comment">//Â forÂ SSRÂ caching</span></span><br><span class="line">Â Â devtoolsMeta:Â ?<span class="built_in">Object</span>;Â <span class="comment">//Â usedÂ toÂ storeÂ functionalÂ renderÂ contextÂ forÂ devtools</span></span><br><span class="line">Â Â fnScopeId:Â ?<span class="built_in">string</span>;Â <span class="comment">//Â functionalÂ scopeÂ idÂ support</span></span><br><span class="line">Â Â <span class="keyword">constructor</span>Â (<span class="params"></span></span><br><span class="line"><span class="params">Â Â Â Â tag?:Â <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">Â Â Â Â data?:Â VNodeData,</span></span><br><span class="line"><span class="params">Â Â Â Â children?:Â ?<span class="built_in">Array</span>&lt;VNode&gt;,</span></span><br><span class="line"><span class="params">Â Â Â Â text?:Â <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">Â Â Â Â elm?:Â Node,</span></span><br><span class="line"><span class="params">Â Â Â Â context?:Â Component,</span></span><br><span class="line"><span class="params">Â Â Â Â componentOptions?:Â VNodeComponentOptions,</span></span><br><span class="line"><span class="params">Â Â Â Â asyncFactory?:Â <span class="built_in">Function</span></span></span><br><span class="line"><span class="params">Â Â </span>)Â &#123;</span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.tagÂ =Â tag</span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.dataÂ =Â data</span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.childrenÂ =Â children</span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.textÂ =Â text</span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.elmÂ =Â elm</span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.nsÂ =Â <span class="literal">undefined</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.contextÂ =Â context</span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.fnContextÂ =Â <span class="literal">undefined</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.fnOptionsÂ =Â <span class="literal">undefined</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.fnScopeIdÂ =Â <span class="literal">undefined</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.keyÂ =Â dataÂ &amp;&amp;Â data.key</span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.componentOptionsÂ =Â componentOptions</span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.componentInstanceÂ =Â <span class="literal">undefined</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.parentÂ =Â <span class="literal">undefined</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.rawÂ =Â <span class="literal">false</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.isStaticÂ =Â <span class="literal">false</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.isRootInsertÂ =Â <span class="literal">true</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.isCommentÂ =Â <span class="literal">false</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.isClonedÂ =Â <span class="literal">false</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.isOnceÂ =Â <span class="literal">false</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.asyncFactoryÂ =Â asyncFactory</span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.asyncMetaÂ =Â <span class="literal">undefined</span></span><br><span class="line">Â Â Â Â <span class="keyword">this</span>.isAsyncPlaceholderÂ =Â <span class="literal">false</span></span><br><span class="line">Â Â &#125;</span><br><span class="line">Â Â <span class="comment">//Â DEPRECATED:Â aliasÂ forÂ componentInstanceÂ forÂ backwardsÂ compat.</span></span><br><span class="line">Â Â <span class="comment">/*Â istanbulÂ ignoreÂ nextÂ */</span></span><br><span class="line">Â Â <span class="keyword">get</span>Â childÂ ():Â ComponentÂ |Â <span class="built_in">void</span>Â &#123;</span><br><span class="line">Â Â Â Â <span class="keyword">return</span>Â <span class="keyword">this</span>.componentInstance</span><br><span class="line">Â Â &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>é‚£æˆ‘ä»¬è¦å®šä¹‰å¤šå°‘ç§ç±»å‹çš„VNODEå‘¢ï¼Ÿ</strong></p><ul><li>æ³¨é‡ŠèŠ‚ç‚¹</li><li>æ–‡æœ¬èŠ‚ç‚¹</li><li>å…ƒç´ èŠ‚ç‚¹</li><li>ç»„ä»¶èŠ‚ç‚¹</li><li>å‡½æ•°å¼ç»„ä»¶èŠ‚ç‚¹</li><li>å…‹éš†èŠ‚ç‚¹</li></ul><p><em>å‰è¾¹çš„åŸºæœ¬å°±æ˜¯è¯»å–ä¸€ä¸ªDOMå…ƒç´ ä¹‹åï¼Œå»æ‹†è§£å»ç»„è£…æˆä¸€ä¸ªç›¸å¯¹åº”DOMçš„VNODEå…ƒç´ ï¼Œå†å›å¤´çœ‹çœ‹è¿™ä¸ªè™šæ‹ŸDOMå…¨ç¨‹ï¼Œæœ€éº»çƒ¦çš„åœ°æ–¹åœ¨å“ªé‡Œå‘¢ï¼Ÿ</em></p><p><strong>è€ŒVNODEæ›´æ–°çš„è¿™ä¸ªè¿‡ç¨‹ï¼Ÿ</strong><br><em>DOM-Diffã€patchï¼š</em> æ‰“è¡¥ä¸</p><p>ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å¯¹æ—§çš„VNODEæ ¹æ®æ–°çš„VNODEè¿›è¡Œä¿®è¡¥çš„è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ï¼Œä½¿å¾—æœ€ç»ˆæ–°æ—§VNODEä¿æŒä¸€è‡´ã€‚<strong>ä»¥newVNODEä¸ºåŸºå‡†ï¼Œæ”¹é€ oldVNODEï¼Œè¿™å°±æ˜¯patchå¹²çš„äº‹ï¼Œå½“ç„¶çš„å‰ææ˜¯ç›¸åŒç±»å‹çš„VNODEæ‰æœ‰å¯¹æ¯”çš„æ„ä¹‰ã€‚</strong></p><p><strong>å½“æ–°æ—§çš„VNODEç±»å‹ä¸åŒæ—¶ï¼š</strong>è°ƒç”¨ä¸€äº›replaceå°†æ–°çš„Vnodeæ›¿æ¢äº†æ—§Vnodeã€‚</p><p><strong>æ›´æ–°æ ‡ç­¾å…ƒç´ çš„åŸºæœ¬è§„åˆ™ï¼Œæ›´æ–°ç›¸åŒæ ‡ç­¾çš„VNodeæ—¶ï¼š</strong>ä¾‹å¦‚éƒ½ä¸ºdiv<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ—§çš„ VNodeconst prevVNode = h('div', &#123;</span></span><br><span class="line">  <span class="attribute">style</span>: &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="string">'100px'</span>,</span><br><span class="line">    <span class="attribute">height</span>: <span class="string">'100px'</span>,</span><br><span class="line">    <span class="attribute">backgroundColor</span>: <span class="string">'red'</span></span><br><span class="line">  &#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°çš„ VNodeconst nextVNode = h('div', &#123;</span></span><br><span class="line">  <span class="attribute">style</span>: &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="string">'100px'</span>,</span><br><span class="line">    <span class="attribute">height</span>: <span class="string">'100px'</span>,</span><br><span class="line">    <span class="attribute">border</span>: <span class="string">'1px solid green'</span></span><br><span class="line">  &#125;&#125;)</span><br></pre></td></tr></table></figure></p><ul><li>ç¬¬ 1 æ­¥ï¼šå½“æ–°çš„ VNodeData å­˜åœ¨æ—¶ï¼Œéå†æ–°çš„ VNodeDataã€‚</li><li>ç¬¬ 2 æ­¥ï¼šæ ¹æ®æ–° VNodeData ä¸­çš„ keyï¼Œåˆ†åˆ«å°è¯•è¯»å–æ—§å€¼å’Œæ–°å€¼ï¼Œå³ prevValue å’Œ nextValueã€‚</li><li>ç¬¬ 3 æ­¥ï¼šä½¿ç”¨ switchâ€¦case è¯­å¥åŒ¹é…ä¸åŒçš„æ•°æ®è¿›è¡Œä¸åŒçš„æ›´æ–°æ“ä½œ</li></ul><p><strong>æ›´æ–°å®ŒVNodeåï¼Œå…¶ä¸‹æ›´æ–°å­èŠ‚ç‚¹ï¼š</strong></p><p><img src="/2020/01/17/2020/Vue-Diff/NO4.png" alt="NO4" title="NO4"></p><p><strong>3 x 3 ç§ç»„åˆ</strong></p><ul><li><p>ä¸€ã€æ–°æ—§èŠ‚ç‚¹éƒ½æ˜¯å•å­èŠ‚ç‚¹ï¼Œé‚£æˆ‘ä»¬å¯¹æ¯”ä»–ä»¬æ›¿æ¢ä¸åŒå³å¯</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">patch</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure></li><li><p>äºŒã€æ—§èŠ‚ç‚¹ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹æ— å­èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°†æ—§èŠ‚ç‚¹å­èŠ‚ç‚¹ç§»é™¤å³å¯</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">removeChild()</span></span><br></pre></td></tr></table></figure></li><li><p>ä¸‰ã€æ—§èŠ‚ç‚¹æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹æœ‰å¤šä¸ªå­èŠ‚ç‚¹çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç§»é™¤æ—§èŠ‚ç‚¹å­èŠ‚ç‚¹ï¼Œå†å°†æ–°èŠ‚ç‚¹å­èŠ‚ç‚¹éå†æŒ‚è½½ä¸Šå»ã€‚</p></li></ul><p><img src="/2020/01/17/2020/Vue-Diff/NO5.png" alt="NO5" title="NO5"></p><ul><li>å››ã€äº”ã€å…­ã€å½“æ—§èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ–°èŠ‚ç‚¹æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæˆ–è€…å¤šä¸ªå­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¾æ¬¡æŒ‚è½½ä¸Šå»å³å¯ï¼Œè‹¥æ–°èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œé‚£å°±ä»€ä¹ˆéƒ½ä¸ç”¨åšäº†ã€‚</li><li>ä¸ƒã€å½“æ—§èŠ‚ç‚¹æœ‰å¤šä¸ªå­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ–°èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåˆ äº†æ—§èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼ŒæŒ‚è½½ä¸Šæ–°èŠ‚ç‚¹çš„é‚£ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚</li><li>å…«ã€å½“æ—§èŠ‚ç‚¹æœ‰å¤šä¸ªå­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ–°èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåˆ ç©ºæ—§èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹å³å¯ã€‚</li><li>ä¹ã€å½“æ—§èŠ‚ç‚¹æœ‰å¤šä¸ªå­èŠ‚ç‚¹æ—¶å€™ï¼Œæ–°èŠ‚ç‚¹ä¹Ÿæœ‰å¤šä¸ªå­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå°±æ˜¯æ ¸å¿ƒçš„Diffå¯¹æ¯”</li></ul><p><strong>å¯¹äºä¸¤å¤šçš„æƒ…å†µï¼Œå¤§å®¶èƒ½æƒ³åˆ°ç”¨ä»€ä¹ˆå½¢å¼è¿›è¡ŒDOMçš„æ›´æ–°å‘¢ï¼Ÿ</strong><br><strong>å…¨éƒ¨åˆ é™¤ï¼Ÿå†å…¨éƒ¨å¢åŠ </strong></p><h6 id="Diffç®—æ³•"><a href="#Diffç®—æ³•" class="headerlink" title="Diffç®—æ³•"></a>Diffç®—æ³•</h6><p>æ–°æ—§DOMçš„å†…éƒ¨èŠ‚ç‚¹åºæ‚ä¸”å¤æ‚ï¼Œæ‰€ä»¥æ ¸å¿ƒçš„Diffæ˜¯å±…äºåŒå±‚çº§é—´çš„æ¯”è¾ƒï¼Œå³æ˜¯ oldVnodeä¸­æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼ŒnewVnodeæœ‰å¤šä¸ªå­èŠ‚ç‚¹çš„æƒ…å†µ</p><p><img src="/2020/01/17/2020/Vue-Diff/NO6.png" alt="NO6" title="NO6"></p><p>æˆ‘ä»¬å†VNodeçš„elä¸­æŒ‚è½½äº†DOMå…ƒç´ </p><p><img src="/2020/01/17/2020/Vue-Diff/NO7.png" alt="NO7" title="NO7"></p><p>å¦‚æœæ ‡ç­¾ä»€ä¹ˆçš„ç›¸åŒï¼Œæˆ‘ä»¬ç”¨ä¹‹å‰åˆ—ä¸¾çš„é›†ä¸­patchå³å¯è¿›è¡Œæ¯”è¾ƒã€‚</p><p><img src="/2020/01/17/2020/Vue-Diff/NO8.png" alt="NO8" title="NO8"></p><p><img src="/2020/01/17/2020/Vue-Diff/NO9.png" alt="NO9" title="NO9"></p><p>å¦‚æœæ–°çš„VNodeåˆ—è¡¨ç›¸è¾ƒäºæ—§çš„VNodeæ˜¯é•¿çš„ï¼Œé‚£ä¹ˆæœ€åçš„èŠ‚ç‚¹æˆ‘ä»¬ä¾ç„¶è¦åˆ›å»ºèŠ‚ç‚¹ï¼Œæ—§çš„VNodeèŠ‚ç‚¹ç›¸è¾ƒäºæ–°çš„VNodeèŠ‚ç‚¹æ˜¯çŸ­çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ€åè¦åˆ é™¤é”€æ¯å¤šä½™çš„DOMèŠ‚ç‚¹ã€‚</p><h6 id="keyçš„ä½œç”¨"><a href="#keyçš„ä½œç”¨" class="headerlink" title="keyçš„ä½œç”¨"></a>keyçš„ä½œç”¨</h6><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">å‡è®¾ ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯<span class="built_in">key</span>æ ‡è¯†</span><br><span class="line"><span class="comment">// æ—§</span></span><br><span class="line">[</span><br><span class="line">  h(<span class="string">'li'</span>, <span class="keyword">null</span>, <span class="number">1</span>),</span><br><span class="line">  h(<span class="string">'li'</span>, <span class="keyword">null</span>, <span class="number">2</span>),</span><br><span class="line">  h(<span class="string">'li'</span>, <span class="keyword">null</span>, <span class="number">3</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°</span></span><br><span class="line">[</span><br><span class="line">  h(<span class="string">'li'</span>, <span class="keyword">null</span>, <span class="number">3</span>),</span><br><span class="line">  h(<span class="string">'li'</span>, <span class="keyword">null</span>, <span class="number">1</span>),</span><br><span class="line">  h(<span class="string">'li'</span>, <span class="keyword">null</span>, <span class="number">2</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æŒ‰ç…§ä¹‹å‰çš„å¯¹æ¯”ã€‚<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">h</span><span class="params">(<span class="string">'li'</span>, null, <span class="number">1</span>)</span></span></span><br><span class="line"><span class="comment">// vs</span></span><br><span class="line"><span class="function"><span class="title">h</span><span class="params">(<span class="string">'li'</span>, null, <span class="number">3</span>)</span></span></span><br></pre></td></tr></table></figure></p><p>æ¯«æ— ç–‘é—®æˆ‘ä»¬å¯èƒ½ä¸‰æ¬¡å¯¹æ¯”ä¸­éƒ½ä¼šå»æ‰§è¡Œä¸€ä¸‹å¯¹æ¯”æ–¹æ³•ï¼Œä½†æ˜¯æ ¹æ®æˆ‘ä»¬ç›´æ¥è§‚å¯Ÿï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥é€šè¿‡ç§»åŠ¨ä»–ä»¬çš„é¡ºåºä»è€Œè¾¾åˆ°æ›´æ–°DOMçš„æ•ˆæœçš„ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿é€šè¿‡keyè¿›è¡Œå¯¹æ¯”çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºVNodeçš„æ—¶å€™è¿˜éœ€è¦ä¿ç•™å¯¹å®ƒçš„keyçš„è®°å½•ã€‚</p><p><img src="/2020/01/17/2020/Vue-Diff/NO10.png" alt="NO10" title="NO10"></p><p><strong>æˆ‘ä»¬é€šè¿‡keyçŸ¥é“äº†ä»–ä»¬ä¹‹é—´çš„æ˜ å°„å…³ç³»</strong>ï¼Œæˆ‘ä»¬åªéœ€è¦éå†æ–°çš„childrenä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå»æ—§çš„childrenä¸­å¯»æ‰¾æ˜¯å¦æœ‰ç›¸åŒçš„keyå€¼èŠ‚ç‚¹å³å¯ã€‚</p><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éå†æ–°çš„ childrenfor (let i = 0; i &lt; nextChildren.length; i++) &#123;</span></span><br><span class="line">  <span class="keyword">const</span> nextVNode = nextChildren[i]</span><br><span class="line">  let j = <span class="number">0</span></span><br><span class="line">  <span class="comment">// éå†æ—§çš„ children</span></span><br><span class="line">  <span class="keyword">for</span> (j; j &lt; prevChildren.<span class="built_in">length</span>; j++) &#123;</span><br><span class="line">    <span class="keyword">const</span> prevVNode = prevChildren[j]</span><br><span class="line">    <span class="comment">// å¦‚æœæ‰¾åˆ°äº†å…·æœ‰ç›¸åŒ key å€¼çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œåˆ™è°ƒç”¨ `patch` å‡½æ•°æ›´</span></span><br><span class="line">    <span class="keyword">if</span> (nextVNode.key === prevVNode.key) &#123;</span><br><span class="line">      <span class="keyword">patch</span>(prevVNode, nextVNode, container)</span><br><span class="line">      <span class="keyword">break</span> </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&#125;</span><br></pre></td></tr></table></figure><p><strong>ç”¨keyæ ‡è®°ååˆæ€ä¹ˆæ‰¾åˆ°éœ€è¦ç§»åŠ¨çš„èŠ‚ç‚¹å‘¢ï¼Ÿ</strong></p><p><img src="/2020/01/17/2020/Vue-Diff/NO11.png" alt="NO11" title="NO11"></p><p>æˆ‘ä»¬å¯¹æ–°çš„VnodeèŠ‚ç‚¹è¿›è¡Œéå†ï¼Œå»æ—§èŠ‚ç‚¹æ‰¾å¯»æ‰€åœ¨çš„ç´¢å¼•ä½ç½®ï¼Œä¾‹å¦‚ï¼šæˆ‘ä»¬åœ¨æ–°èŠ‚ç‚¹ä¸­æ‰¾åˆ°li-aï¼Œå‘ç°åœ¨æ—§èŠ‚ç‚¹ä¸­æ‰€å¯¹åº”çš„ç´¢å¼•æ˜¯0ï¼Œä¾æ¬¡ç±»æ¨ï¼Œæœ€åçš„ç´¢å¼•å°±æ˜¯0-1-2ã€‚<br>è¿™ä¸ªç´¢å¼•å¯¹æˆ‘ä»¬æœ‰ä»€ä¹ˆå¸®åŠ©å‘¢ï¼Ÿ<br><strong>è¿™æ˜¯ä¸€ä¸ªé€’å¢çš„é¡ºåºï¼Œè¿™è¯´æ˜å¦‚æœåœ¨å¯»æ‰¾çš„è¿‡ç¨‹ä¸­é‡åˆ°çš„ç´¢å¼•å‘ˆç°é€’å¢è¶‹åŠ¿ï¼Œåˆ™è¯´æ˜æ–°æ—§ children ä¸­èŠ‚ç‚¹é¡ºåºç›¸åŒï¼Œä¸éœ€è¦ç§»åŠ¨æ“ä½œã€‚ç›¸åçš„ï¼Œå¦‚æœåœ¨å¯»æ‰¾çš„è¿‡ç¨‹ä¸­é‡åˆ°çš„ç´¢å¼•å€¼ä¸å‘ˆç°é€’å¢è¶‹åŠ¿ï¼Œåˆ™è¯´æ˜éœ€è¦ç§»åŠ¨æ“ä½œ</strong></p><p><img src="/2020/01/17/2020/Vue-Diff/NO12.png" alt="NO12" title="NO12"></p><p>æŒ‰ç…§è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ€ç»ˆæ‰¾å‡ºæ¥çš„ç´¢å¼•æ˜¯2-0-1</p><p>æˆ‘ä»¬ä¸€å¼€å§‹æ‰¾åˆ°çš„ç´¢å¼•æ˜¯2ï¼Œè€Œåæ˜¯0ï¼Œæˆ‘ä»¬é‡åˆ°äº†æ¯”2å°çš„ç´¢å¼•æ•°ï¼Œæ‰“ç ´äº†é€’å¢çš„è§„å¾‹ï¼Œæˆ‘ä»¬æ­¤æ—¶çŸ¥é“äº†ï¼Œåœ¨æ—§çš„Vnodeä¸­ï¼Œli-cæ‰€å¤„çš„ä½ç½®æ˜¯æ¯”li-aè¦é åçš„ï¼Œæˆ‘ä»¬å³ å¾—å‡º li-aå¦‚æœè¦æ›´æ–°åœ¨æ–°çš„VNodeä¸­ï¼Œå®ƒéœ€è¦åç§»ï¼Œ<strong>å¹¶ä»¥li-cåšæœ€å¤§ç´¢å¼•å‚ç…§ç‰©</strong></p><h6 id="ç§»åŠ¨èŠ‚ç‚¹"><a href="#ç§»åŠ¨èŠ‚ç‚¹" class="headerlink" title="ç§»åŠ¨èŠ‚ç‚¹"></a>ç§»åŠ¨èŠ‚ç‚¹</h6><p>æ–°çš„èŠ‚ç‚¹åœ¨ç»è¿‡å¯¹æ¯”åä¹Ÿå°†æ‹¥æœ‰å¯¹çœŸå®DOMçš„å¼•ç”¨</p><p><img src="/2020/01/17/2020/Vue-Diff/NO13.png" alt="NO13" title="NO13"></p><p><strong>æˆ‘ä»¬éœ€è¦æ€ä¹ˆç§»åŠ¨å…ƒç´ å‘¢ï¼Ÿ</strong><br>li-cä½œä¸ºç¬¬ä¸€å„å…ƒç´ ï¼Œæˆ‘ä»¬å®Œæˆå¯¹å®ƒçš„å†…éƒ¨çš„å¯¹æ¯”æ›´æ–°å³å¯</p><p>æˆ‘ä»¬éå†åˆ°li-açš„æ—¶å€™ï¼Œæˆ‘ä»¬çŸ¥é“å®ƒåœ¨æ—§DOMchildrenä¸­çš„ç´¢å¼•æ˜¯0ï¼Œæ‰€ä»¥0 &lt; 2ï¼Œæˆ‘ä»¬éœ€è¦ç§»åŠ¨li-aå…ƒç´ <br>è€Œæ­¤æ—¶æˆ‘ä»¬éå†çš„ä¸ºæ–°èŠ‚ç‚¹æ•°ç»„çš„li-aä½ç½®ï¼Œæˆ‘ä»¬æ‹¿åˆ°elçœŸå®DOMä¹‹åï¼Œåœ¨ä¸Šä¸€ä¸ªå…ƒç´ ä¹‹åæ’å…¥å³å¯ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const refNode = nextChildren[<span class="selector-tag">i</span> - <span class="number">1</span>]<span class="selector-class">.el</span><span class="selector-class">.nextSibling</span> <span class="comment">// ä¸Šä¸€ä¸ªå…ƒç´ åŸæœ¬çš„ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">// è°ƒç”¨ insertBefore å‡½æ•°ç§»åŠ¨ DOM</span></span><br><span class="line">container.insertBefore(prevVNode<span class="selector-class">.el</span>, refNode)</span><br></pre></td></tr></table></figure><p><img src="/2020/01/17/2020/Vue-Diff/NO14.png" alt="NO14" title="NO14"></p><h6 id="æ·»åŠ æ–°å…ƒç´ "><a href="#æ·»åŠ æ–°å…ƒç´ " class="headerlink" title="æ·»åŠ æ–°å…ƒç´ "></a>æ·»åŠ æ–°å…ƒç´ </h6><p><img src="/2020/01/17/2020/Vue-Diff/NO15.png" alt="NO15" title="NO15"></p><p>æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ï¼Œåœ¨æ—§çš„childrenä¸­li-dæ˜¯ä¸å­˜åœ¨çš„ã€‚<br>æˆ‘ä»¬åªéœ€è¦å°†æ–°çš„æ­¤èŠ‚ç‚¹æŒ‚è½½åœ¨æ­£ç¡®ä½ç½®ä¸Šå³å¯ã€‚<br><strong>å¦‚ä½•çŸ¥é“æ­¤èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Ÿ</strong><br>æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ ‡å¿—å˜é‡ï¼Œåœ¨éå†æ–°çš„childrenæ˜¯å£°æ˜ä¸ºfalseï¼Œåœ¨æ—§çš„å†…éƒ¨éå†æ—¶ï¼Œæ‰¾åˆ°æ­¤keyèŠ‚ç‚¹ï¼Œåˆ™ç½®ä¸ºtrueï¼Œæœ€ç»ˆéªŒè¯æ­¤å˜é‡å³å¯</p><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">for</span> (let i = <span class="number">0</span>; i &lt; nextChildren.<span class="built_in">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> nextVNode = nextChildren[i]</span><br><span class="line">  let j = <span class="number">0</span>,</span><br><span class="line">    find = <span class="literal">false</span> <span class="comment">//   &lt;== è¿™</span></span><br><span class="line">  <span class="keyword">for</span> (j; j &lt; prevChildren.<span class="built_in">length</span>; j++) &#123;</span><br><span class="line">    <span class="keyword">const</span> prevVNode = prevChildren[j]</span><br><span class="line">    <span class="keyword">if</span> (nextVNode.key === prevVNode.key) &#123;</span><br><span class="line">      find = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">patch</span>(prevVNode, nextVNode, container)</span><br><span class="line">      <span class="keyword">if</span> (j &lt; lastIndex) &#123;</span><br><span class="line">        <span class="keyword">const</span> refNode = nextChildren[i - <span class="number">1</span>].el.nextSibling</span><br><span class="line">        container.insertBefore(prevVNode.el, refNode)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æ›´æ–° lastIndex</span></span><br><span class="line">        lastIndex = j</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!find) &#123;</span><br><span class="line">    <span class="comment">// æŒ‚è½½æ–°èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">const</span> refNode =</span><br><span class="line">          i - <span class="number">1</span> &lt; <span class="number">0</span></span><br><span class="line">            ? prevChildren[<span class="number">0</span>].el</span><br><span class="line">            : nextChildren[i - <span class="number">1</span>].el.nextSibling</span><br><span class="line">        mount(nextVNode, container, <span class="literal">false</span>, refNode)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªi-1&lt;0 æ˜¯å› ä¸ºå½“å‰ä¸€ä¸ªå­èŠ‚ç‚¹ä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬æŠŠå®ƒæ’åœ¨æœ€å‰é¢å³å¯ã€‚</p><h6 id="ç§»é™¤ä¸å­˜åœ¨äº†çš„å…ƒç´ "><a href="#ç§»é™¤ä¸å­˜åœ¨äº†çš„å…ƒç´ " class="headerlink" title="ç§»é™¤ä¸å­˜åœ¨äº†çš„å…ƒç´ "></a>ç§»é™¤ä¸å­˜åœ¨äº†çš„å…ƒç´ </h6><p><img src="/2020/01/17/2020/Vue-Diff/NO16.png" alt="NO16" title="NO16"></p><p>æˆ‘ä»¬ç”¨ä»€ä¹ˆæ–¹æ³•å»ç§»é™¤å¯»æ‰¾éœ€è¦ç§»é™¤çš„DOMèŠ‚ç‚¹ï¼Ÿ<br>è¿˜è®°å¾—æˆ‘ä»¬ä¸€å¼€å§‹éå†çš„å³æ˜¯æ–°çš„childrenå—ï¼Œåœ¨å†…éƒ¨æ‰éå†æ—§childrençš„å—ï¼Ÿæˆ‘ä»¬åªä¼šæ‰§è¡Œä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡è§£å†³li-aã€ç¬¬äºŒæ¬¡è§£å†³li-bï¼Œç„¶åå°±é€€å‡ºå¾ªç¯äº†</p><p>**æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æ–°çš„childrenéå†ç»“æŸåï¼Œåœ¨è¿›è¡Œä¸€éæ—§childrençš„éå†ï¼Œå¹¶ä¸”ç”¨æ—§childrenèŠ‚ç‚¹å»æ–°çš„childrenä¸­å¯»æ‰¾ç›¸åŒèŠ‚ç‚¹ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™è¯´æ˜å·²ç»æ²¡æœ‰è¿™ä¸ªDOMäº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç§»é™¤å·²ç»ä¸å­˜åœ¨çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">// éå†æ—§çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; prevChildren.length; i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> prevVNode = prevChildren[i]</span><br><span class="line">  <span class="comment">// æ‹¿ç€æ—§ VNode å»æ–° children ä¸­å¯»æ‰¾ç›¸åŒçš„èŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">const</span> has = nextChildren.find(</span><br><span class="line">    nextVNode =&gt; nextVNode.key === prevVNode.key</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">if</span> (!has) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›¸åŒçš„èŠ‚ç‚¹ï¼Œåˆ™ç§»é™¤</span></span><br><span class="line">    container.removeChild(prevVNode.el)</span><br><span class="line">  &#125;&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å¯¹æ¯”ç¼ºé™·ï¼Ÿ</p><p><img src="/2020/01/17/2020/Vue-Diff/NO17.png" alt="NO17" title="NO17"></p><p><img src="/2020/01/17/2020/Vue-Diff/NO18.png" alt="NO18" title="NO18"></p><h5 id="VUEçš„å¯¹æ¯”ï¼Ÿï¼šåŒç«¯æ¯”è¾ƒ"><a href="#VUEçš„å¯¹æ¯”ï¼Ÿï¼šåŒç«¯æ¯”è¾ƒ" class="headerlink" title="VUEçš„å¯¹æ¯”ï¼Ÿï¼šåŒç«¯æ¯”è¾ƒ"></a>VUEçš„å¯¹æ¯”ï¼Ÿï¼šåŒç«¯æ¯”è¾ƒ</h5><p><img src="/2020/01/17/2020/Vue-Diff/NO19.png" alt="NO19" title="NO19"></p><p>æˆ‘ä»¬ä½¿ç”¨å››ä¸ªç´¢å¼•æŒ‡å‘ç€ old ä¸ new çš„å¼€å§‹ä¸ç»“æŸï¼Œå³åŒç«¯</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">oldStartIdx</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">oldEndIdx</span> = prevChildren.length - <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">newStartIdx</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">newEndIdx</span> = nextChildren.length - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">// åŒæ—¶</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">oldStartVNode</span> = prevChildren[oldStartIdx]</span><br><span class="line"><span class="keyword">let</span> <span class="attr">oldEndVNode</span> = prevChildren[oldEndIdx]</span><br><span class="line"><span class="keyword">let</span> <span class="attr">newStartVNode</span> = nextChildren[newStartIdx]</span><br><span class="line"><span class="keyword">let</span> <span class="attr">newEndVNode</span> = nextChildren[newEndIdx]</span><br></pre></td></tr></table></figure><p><strong>æ¯ä¸€æ¬¡çš„å¯¹æ¯”éƒ½ä¼šæ‰§è¡Œä»¥ä¸‹å››æ­¥ï¼š</strong><br>newStartIndex - oldStartIndex<br>newEndIndex - oldEndIndex<br>oldStartIndex - newEndIndex<br>newStartIndex - oldEndIndex</p><p><img src="/2020/01/17/2020/Vue-Diff/NO20.png" alt="NO20" title="NO20"></p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">  <span class="comment">// æ­¥éª¤ä¸€ï¼šoldStartVNode å’Œ newStartVNode æ¯”å¯¹&#125; </span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">  <span class="comment">// æ­¥éª¤äºŒï¼šoldEndVNode å’Œ newEndVNode æ¯”å¯¹&#125; </span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">  <span class="comment">// æ­¥éª¤ä¸‰ï¼šoldStartVNode å’Œ newEndVNode æ¯”å¯¹&#125;</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">  <span class="comment">// æ­¥éª¤å››ï¼šoldEndVNode å’Œ newStartVNode æ¯”å¯¹&#125;</span></span><br></pre></td></tr></table></figure><p> åœ¨ç¬¬å››æ­¥ä¸­æˆ‘ä»¬å¯ä»¥å¾—åˆ°å¯ä»¥å¤ç”¨çš„èŠ‚ç‚¹<br> æˆ‘ä»¬å°†li-dç§»åŠ¨åˆ°å¼€å¤´</p> <figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">  <span class="comment">// æ­¥éª¤ä¸€ï¼šoldStartVNode å’Œ newStartVNode æ¯”å¯¹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">  <span class="comment">// æ­¥éª¤äºŒï¼šoldEndVNode å’Œ newEndVNode æ¯”å¯¹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">  <span class="comment">// æ­¥éª¤ä¸‰ï¼šoldStartVNode å’Œ newEndVNode æ¯”å¯¹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">   * * * * * * * *  * * * * * * * * * * * * * è¿™ * * * * * * * * * *</span><br><span class="line">      <span class="comment">// æ­¥éª¤å››ï¼šoldEndVNode å’Œ newStartVNode æ¯”å¯¹</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// å…ˆè°ƒç”¨ patch å‡½æ•°å®Œæˆæ›´æ–°</span></span><br><span class="line">      patch(oldEndVNode, <span class="keyword">new</span><span class="type">StartVNode</span>, container)</span><br><span class="line">      <span class="comment">// æ›´æ–°å®Œæˆåï¼Œå°†å®¹å™¨ä¸­æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ç§»åŠ¨åˆ°æœ€å‰é¢ï¼Œä½¿å…¶æˆä¸ºç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">      container.insertBefore(oldEndVNode.el, oldStartVNode.el)</span><br><span class="line">      <span class="comment">// æ›´æ–°ç´¢å¼•ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line">      oldEndVNode = prevChildren[--oldEndIdx]</span><br><span class="line">      <span class="keyword">new</span><span class="type">StartVNode</span> = nextChildren[++<span class="keyword">new</span><span class="type">StartIdx</span>]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p> è€Œåæˆ‘ä»¬è¿›è¡Œä¸‹ä¸€æ¬¡çš„å¯¹æ¯”ï¼š</p><p><img src="/2020/01/17/2020/Vue-Diff/NO21.png" alt="NO21" title="NO21"></p><p><img src="/2020/01/17/2020/Vue-Diff/NO22.png" alt="NO22" title="NO22"></p><p><strong>ä»€ä¹ˆæ—¶å€™å¯ä»¥ç»“æŸå‘¢ï¼Ÿ</strong><br> <figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">while</span> (oldStartIdx &lt;= oldEndIdx &amp;&amp; <span class="keyword">new</span><span class="type">StartIdx</span> &lt;= <span class="keyword">new</span><span class="type">EndIdx</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// æ­¥éª¤ä¸€ï¼šoldStartVNode å’Œ newStartVNode æ¯”å¯¹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// æ­¥éª¤äºŒï¼šoldEndVNode å’Œ newEndVNode æ¯”å¯¹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// æ­¥éª¤ä¸‰ï¼šoldStartVNode å’Œ newEndVNode æ¯”å¯¹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// æ­¥éª¤å››ï¼šoldEndVNode å’Œ newStartVNode æ¯”å¯¹</span></span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><p> å½“oldStartIndex å¤§äº olaEndIndex æˆ–è€… newStartIndex å¤§äº newEndIndexçš„æ—¶å€™</p><p> <em>ç¬¬äºŒè½®ä¸­ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†li-cï¼Œè€Œå®ƒæ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ŒDOMé¡ºåºçš„è¯ä¸éœ€è¦ç§»åŠ¨</em></p> <figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (oldStartIdx &lt;= oldEndIdx &amp;&amp; <span class="keyword">new</span><span class="type">StartIdx</span> &lt;= <span class="keyword">new</span><span class="type">EndIdx</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// æ­¥éª¤ä¸€ï¼šoldStartVNode å’Œ newStartVNode æ¯”å¯¹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">    * * * * * * * * * * * * * * * * * * * * * è¿™ * * * * * * * * * *</span><br><span class="line">    <span class="comment">// æ­¥éª¤äºŒï¼šoldEndVNode å’Œ newEndVNode æ¯”å¯¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨ patch å‡½æ•°æ›´æ–°</span></span><br><span class="line">    patch(oldEndVNode, <span class="keyword">new</span><span class="type">EndVNode</span>, container)</span><br><span class="line">    <span class="comment">// æ›´æ–°ç´¢å¼•ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line">    oldEndVNode = prevChildren[--oldEndIdx]</span><br><span class="line">    <span class="keyword">new</span><span class="type">EndVNode</span> = nextChildren[--<span class="keyword">new</span><span class="type">EndIdx</span>]</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// æ­¥éª¤ä¸‰ï¼šoldStartVNode å’Œ newEndVNode æ¯”å¯¹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// æ­¥éª¤å››ï¼šoldEndVNode å’Œ newStartVNode æ¯”å¯¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…ˆè°ƒç”¨ patch å‡½æ•°å®Œæˆæ›´æ–°</span></span><br><span class="line">    patch(oldEndVNode, <span class="keyword">new</span><span class="type">StartVNode</span>, container)</span><br><span class="line">    <span class="comment">// æ›´æ–°å®Œæˆåï¼Œå°†å®¹å™¨ä¸­æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ç§»åŠ¨åˆ°æœ€å‰é¢ï¼Œä½¿å…¶æˆä¸ºç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">    container.insertBefore(oldEndVNode.el, oldStartVNode.el)</span><br><span class="line">    <span class="comment">// æ›´æ–°ç´¢å¼•ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line">    oldEndVNode = prevChildren[--oldEndIdx]</span><br><span class="line">    <span class="keyword">new</span><span class="type">StartVNode</span> = nextChildren[++<span class="keyword">new</span><span class="type">StartIdx</span>]</span><br><span class="line">  &#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/01/17/2020/Vue-Diff/NO23.png" alt="NO23" title="NO23"> </p><p> æˆ‘ä»¬æ‰§è¡Œç¬¬ä¸‰æ­¥çš„æ—¶å€™åœ¨li-aå¤„ï¼Œæ»¡è¶³äº†<br>oldStartVNode.key === newEndVNode.key<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">while</span> (oldStartIdx &lt;= oldEndIdx &amp;&amp; <span class="keyword">new</span><span class="type">StartIdx</span> &lt;= <span class="keyword">new</span><span class="type">EndIdx</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// æ­¥éª¤ä¸€ï¼šoldStartVNode å’Œ newStartVNode æ¯”å¯¹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// æ­¥éª¤äºŒï¼šoldEndVNode å’Œ newEndVNode æ¯”å¯¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨ patch å‡½æ•°æ›´æ–°</span></span><br><span class="line">    patch(oldEndVNode, <span class="keyword">new</span><span class="type">EndVNode</span>, container)</span><br><span class="line">    <span class="comment">// æ›´æ–°ç´¢å¼•ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line">    oldEndVNode = prevChildren[--oldEndIdx]</span><br><span class="line">    <span class="keyword">new</span><span class="type">EndVNode</span> = <span class="keyword">new</span><span class="type">EndVNode</span>[--<span class="keyword">new</span><span class="type">EndIdx</span>]</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">    * * * * * * * * * è¿™ * * * * * * * * *</span><br><span class="line">    <span class="comment">// æ­¥éª¤ä¸‰ï¼šoldStartVNode å’Œ newEndVNode æ¯”å¯¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨ patch å‡½æ•°æ›´æ–°</span></span><br><span class="line">    patch(oldStartVNode, <span class="keyword">new</span><span class="type">EndVNode</span>, container)</span><br><span class="line">    <span class="comment">// å°† oldStartVNode.el ç§»åŠ¨åˆ° oldEndVNode.el çš„åé¢ï¼Œä¹Ÿå°±æ˜¯ oldEndVNode.el.nextSibling çš„å‰é¢</span></span><br><span class="line">    container.insertBefore(</span><br><span class="line">      oldStartVNode.el,</span><br><span class="line">      oldEndVNode.el.nextSibling</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">// æ›´æ–°ç´¢å¼•ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line">    oldStartVNode = prevChildren[++oldStartIdx]</span><br><span class="line">    <span class="keyword">new</span><span class="type">EndVNode</span> = nextChildren[--<span class="keyword">new</span><span class="type">EndIdx</span>]</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// æ­¥éª¤å››ï¼šoldEndVNode å’Œ newStartVNode æ¯”å¯¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…ˆè°ƒç”¨ patch å‡½æ•°å®Œæˆæ›´æ–°</span></span><br><span class="line">    patch(oldEndVNode, <span class="keyword">new</span><span class="type">StartVNode</span>, container)</span><br><span class="line">    <span class="comment">// æ›´æ–°å®Œæˆåï¼Œå°†å®¹å™¨ä¸­æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ç§»åŠ¨åˆ°æœ€å‰é¢ï¼Œä½¿å…¶æˆä¸ºç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">    container.insertBefore(oldEndVNode.el, oldStartVNode.el)</span><br><span class="line">    <span class="comment">// æ›´æ–°ç´¢å¼•ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line">    oldEndVNode = prevChildren[--oldEndIdx]</span><br><span class="line">    <span class="keyword">new</span><span class="type">StartVNode</span> = nextChildren[++<span class="keyword">new</span><span class="type">StartIdx</span>]</span><br><span class="line">  &#125;&#125;</span><br></pre></td></tr></table></figure></p><p><strong>æœ€åä¸€è½®</strong><br><img src="/2020/01/17/2020/Vue-Diff/NO24.png" alt="NO24" title="NO24"> </p><p><img src="/2020/01/17/2020/Vue-Diff/NO25.png" alt="NO25" title="NO25"> </p><p>patch li-b å³å¯</p><p><img src="/2020/01/17/2020/Vue-Diff/NO26.png" alt="NO26" title="NO26"> </p><h6 id="åŒç«¯æ¯”è¾ƒä¼˜åŠ¿"><a href="#åŒç«¯æ¯”è¾ƒä¼˜åŠ¿" class="headerlink" title="åŒç«¯æ¯”è¾ƒä¼˜åŠ¿"></a>åŒç«¯æ¯”è¾ƒä¼˜åŠ¿</h6><p><strong>è¿˜è®°å¾—è¿™ä¸ªå—ï¼Ÿ</strong><br><img src="/2020/01/17/2020/Vue-Diff/NO27.png" alt="NO27" title="NO27"> </p><p><img src="/2020/01/17/2020/Vue-Diff/NO28.png" alt="NO28" title="NO28"> </p><p>åœ¨Reactçš„æ¯”è¾ƒä¸ŠåŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨åŒç«¯æ¯”è¾ƒæ¥çœ‹çœ‹</p><p><img src="/2020/01/17/2020/Vue-Diff/NO29.png" alt="NO29" title="NO29"> </p><ul><li>â‘£ç›¸åŒkeyï¼Œå¯å¤ç”¨ï¼Œç§»åŠ¨li-c</li></ul><p><img src="/2020/01/17/2020/Vue-Diff/NO30.png" alt="NO30" title="NO30"> </p><ul><li>ç„¶åæˆ‘ä»¬å‘ç°å°±ä¸å†éœ€è¦æ”¹å˜äº†</li></ul><h6 id="éç†æƒ³æƒ…å†µçš„å¤„ç†æ–¹å¼"><a href="#éç†æƒ³æƒ…å†µçš„å¤„ç†æ–¹å¼" class="headerlink" title="éç†æƒ³æƒ…å†µçš„å¤„ç†æ–¹å¼"></a>éç†æƒ³æƒ…å†µçš„å¤„ç†æ–¹å¼</h6><p>æœ‰è¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œå½“â‘ â‘¡â‘¢â‘£éƒ½æ— æ³•è¿›è¡ŒåŒ¹é…ä¸Šçš„æ—¶å€™</p><p><img src="/2020/01/17/2020/Vue-Diff/NO31.png" alt="NO31" title="NO31"> </p><p>é‚£åªèƒ½é€šè¿‡newStartIndexçš„è¿™èŠ‚ç‚¹å»oldChildrenä¸­å¯»æ‰¾å‡ºæ¥äº†<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (oldStartIdx &lt;= oldEndIdx &amp;&amp; <span class="keyword">new</span><span class="type">StartIdx</span> &lt;= <span class="keyword">new</span><span class="type">EndIdx</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// çœç•¥...</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// çœç•¥...</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldStartVNode.key === <span class="keyword">new</span><span class="type">EndVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// çœç•¥...</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldEndVNode.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key) &#123;</span><br><span class="line">    <span class="comment">// çœç•¥...</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  * * * * * * * è¿™ * * * * * * * * *</span><br><span class="line">    <span class="comment">// éå†æ—§ childrenï¼Œè¯•å›¾å¯»æ‰¾ä¸ newStartVNode æ‹¥æœ‰ç›¸åŒ key å€¼çš„å…ƒç´ </span></span><br><span class="line">    const idxInOld = prevChildren.findIndex(</span><br><span class="line">      node =&gt; node.key === <span class="keyword">new</span><span class="type">StartVNode</span>.key</span><br><span class="line">    )</span><br><span class="line">  &#125;&#125;</span><br></pre></td></tr></table></figure></p><p><img src="/2020/01/17/2020/Vue-Diff/NO32.png" alt="NO32" title="NO32"> </p><p>else çš„å…³é”®åœ¨äºï¼Œæ‰¾åˆ°äº†åœ¨oldChildrenä¸­çš„è¿™ä¸ªDOMï¼Œå¹¶ä¸”æ˜ç™½å®ƒå·²ç»åœ¨newChildrenä¸­è¢«ç§»åŠ¨åˆ°äº†æœ€å‰é¢ã€‚</p><ul><li>oldChildren ä¸­çš„DOMè¢«ç§»åŠ¨åˆ°æœ€å‰é¢</li><li>è°ƒç”¨patchå‡½æ•°å®Œæˆæ›´æ–°</li><li>æŠŠoldChildrençš„ç›®æ ‡èŠ‚ç‚¹ç§»åŠ¨åœ¨æœ€å‰é¢ï¼Œå³oldStartIndex.elå‰é¢</li><li>åŒæ—¶å°†è¯¥ä½ç½®å°†è¢«ç½®ä¸ºundefined</li></ul><p><img src="/2020/01/17/2020/Vue-Diff/NO33.png" alt="NO33" title="NO33"> </p><p>é‚£ä¹ˆå‰é¢çš„å¯¹æ¯”ä¹Ÿéœ€è¦å¢åŠ é‡åˆ°undefindedçš„æƒ…å†µè°ƒè¿‡çš„æ­¥éª¤ã€‚</p><h6 id="æ·»åŠ æ–°å…ƒç´ -1"><a href="#æ·»åŠ æ–°å…ƒç´ -1" class="headerlink" title="æ·»åŠ æ–°å…ƒç´ "></a>æ·»åŠ æ–°å…ƒç´ </h6><p><img src="/2020/01/17/2020/Vue-Diff/NO34.png" alt="NO34" title="NO34"> </p><p>ç”¨li-d æ‰§è¡Œä¸Šè¿°çš„æ­¥éª¤ï¼Œæ‰§è¡Œä¸ä¸‹å»ï¼Œli-bæ˜¯æ–°çš„èŠ‚ç‚¹</p><p>é‚£æ˜¯ä¸æ˜¯æˆ‘ä»¬â‘ â‘¡â‘¢â‘£æ‰§è¡Œä¸ä¸‹å»çš„æ—¶å€™ï¼Œå°† li-d æŒ‚è½½åœ¨æœ€å‰é¢å°±å¯ä»¥äº†å‘¢ï¼Ÿ<br>å³æŒ‚è½½åœ¨oldStartIndex.elå‰é¢ï¼Ÿ</p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªä¾‹å­</p><p><img src="/2020/01/17/2020/Vue-Diff/NO35.png" alt="NO35" title="NO35"> </p><p>å¤§å®¶æ¨¡æ‹Ÿä¸€ä¸‹ï¼šè‡ªç”±æ€è€ƒ</p><p>åˆ·</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åˆ·</span><br></pre></td></tr></table></figure><ul><li>â‘¡ä¸­æ‰¾åˆ°å¯å¤ç”¨çš„èŠ‚ç‚¹ï¼ŒåŒæ—¶å› ä¸ºæ˜¯æœ€åï¼Œæ‰€ä»¥DOMä¸ç§»åŠ¨ï¼Œpatchå³å¯</li></ul><p><strong>ä¸‹ä¸€æ­¥</strong></p><p><img src="/2020/01/17/2020/Vue-Diff/NO36.png" alt="NO36" title="NO36"> </p><ul><li>â‘¡ä¸­æ‰¾åˆ°å¯å¤ç”¨èŠ‚ç‚¹ï¼ŒåŒæ—¶DOMä¹Ÿä¸éœ€è¦ç§»åŠ¨ï¼Œpatchå³å¯</li></ul><p><strong>ä¸‹ä¸€æ­¥</strong><br><img src="/2020/01/17/2020/Vue-Diff/NO37.png" alt="NO37" title="NO37"> </p><ul><li>â‘¡ä¸­å¯å¤ç”¨ï¼Œä¾æ—§å¤„ç†<br><img src="/2020/01/17/2020/Vue-Diff/NO38.png" alt="NO38" title="NO38"> </li></ul><p>æ‰€ä»¥æˆ‘ä»¬å‘ç° li-d å¹¶æ²¡æœ‰è¢«å¤„ç†åˆ°<br>æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¢åŠ å¤šä¸€ä¸ªåˆ¤æ–­ï¼ŒoldEndIndex å°äº oldStartIndexçš„è¯ï¼Œå°±å­˜åœ¨æ²¡æœ‰è¢«å¤„ç†åˆ°çš„å…¨æ–°èŠ‚ç‚¹</p><p><strong>æˆ‘ä»¬éœ€è¦æŠŠè¿™äº›å…¨æ–°çš„èŠ‚ç‚¹æŒ‚è½½åœ¨oldStartIndexå‰é¢</strong></p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">while</span> (oldStartIdx &lt;= oldEndIdx &amp;&amp; <span class="keyword">new</span><span class="type">StartIdx</span> &lt;= <span class="keyword">new</span><span class="type">EndIdx</span>) &#123;</span><br><span class="line">  <span class="comment">// çœç•¥...&#125;</span></span><br><span class="line">  * * * * * * * * è¿™ * * * * * * </span><br><span class="line">  <span class="keyword">if</span> (oldEndIdx &lt; oldStartIdx) &#123;</span><br><span class="line">      <span class="comment">// æ·»åŠ æ–°èŠ‚ç‚¹</span></span><br><span class="line">      <span class="keyword">for</span> (let i = <span class="keyword">new</span><span class="type">StartIdx</span>; i &lt;= <span class="keyword">new</span><span class="type">EndIdx</span>; i++) &#123;</span><br><span class="line">        mount(nextChildren[i], container, <span class="literal">false</span>, oldStartVNode.el)</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h6 id="ç§»é™¤ä¸å­˜åœ¨çš„å…ƒç´ "><a href="#ç§»é™¤ä¸å­˜åœ¨çš„å…ƒç´ " class="headerlink" title="ç§»é™¤ä¸å­˜åœ¨çš„å…ƒç´ "></a>ç§»é™¤ä¸å­˜åœ¨çš„å…ƒç´ </h6><p>  <img src="/2020/01/17/2020/Vue-Diff/NO39.png" alt="NO39" title="NO39"> </p><p>  <strong>è‡ªç”±æ€è€ƒä¸€ä¸‹ï¼š</strong></p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/2020/01/17/2020/Vue-Diff/NO41.png" alt="NO41" title="NO41"> </p><ul><li>â‘ ä¸­ patch äº† li-a</li></ul><p><strong>ä¸‹ä¸€æ­¥</strong><br><img src="/2020/01/17/2020/Vue-Diff/NO42.png" alt="NO42" title="NO42"> </p><ul><li>â‘¡ä¸­ patch äº† li-c<br><img src="/2020/01/17/2020/Vue-Diff/NO43.png" alt="NO43" title="NO43"> </li></ul><p><strong>ç»“æŸ</strong></p><p>æ¡ä»¶ newEndIndex &lt; newStartIndex äº†<br>æ‰€ä»¥ä»¥æ­¤æ¡ä»¶è¯´æ˜æœ‰å…ƒç´ è¢«ç§»é™¤äº†</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (oldStartIdx &lt;= oldEndIdx &amp;&amp; <span class="keyword">new</span><span class="type">StartIdx</span> &lt;= <span class="keyword">new</span><span class="type">EndIdx</span>) &#123;</span><br><span class="line">  <span class="comment">// çœç•¥...&#125;</span></span><br><span class="line">      <span class="keyword">if</span> (oldEndIdx &lt; oldStartIdx) &#123;</span><br><span class="line">      <span class="comment">// æ·»åŠ æ–°èŠ‚ç‚¹</span></span><br><span class="line">      <span class="keyword">for</span> (let i = <span class="keyword">new</span><span class="type">StartIdx</span>; i &lt;= <span class="keyword">new</span><span class="type">EndIdx</span>; i++) &#123;</span><br><span class="line">        mount(nextChildren[i], container, <span class="literal">false</span>, oldStartVNode.el)</span><br><span class="line">      &#125;&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">new</span><span class="type">EndIdx</span> &lt; <span class="keyword">new</span><span class="type">StartIdx</span>) &#123;</span><br><span class="line">      <span class="comment">// ç§»é™¤æ“ä½œ</span></span><br><span class="line">      <span class="keyword">for</span> (let i = oldStartIdx; i &lt;= oldEndIdx; i++) &#123;</span><br><span class="line">        container.removeChild(prevChildren[i].el)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> è½¬è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSåŸå‹é“¾</title>
      <link href="/2019/12/15/2019/JS%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
      <url>/2019/12/15/2019/JS%E5%8E%9F%E5%9E%8B%E9%93%BE/</url>
      
        <content type="html"><![CDATA[<p>ğŸ‘‰ï¼š<a href="https://segmentfault.com/a/1190000021232132" target="_blank" rel="noopener">åŸæ–‡</a></p><h4 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h4><p><img src="/2019/12/15/2019/JSåŸå‹é“¾/NO1.png" alt="NO1" title="NO1"></p><h4 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h4><a id="more"></a><p>prototypeå±æ€§å¯ä»¥çœ‹æˆæ˜¯ä¸€å—ç‰¹æ®Šçš„å­˜å‚¨ç©ºé—´ï¼Œå­˜å‚¨äº†ä¾›â€œå¾’å¼Ÿâ€ã€â€œå¾’å­™â€ä»¬ä½¿ç”¨çš„æ–¹æ³•å’Œå±æ€§ã€‚</p><p><img src="/2019/12/15/2019/JSåŸå‹é“¾/NO2.png" alt="NO2" title="NO2"></p><h4 id="proto"><a href="#proto" class="headerlink" title="proto"></a><strong>proto</strong></h4><p><strong>proto</strong>å±æ€§ç›¸å½“äºé€šå¾€prototypeï¼ˆâ€œç…çŠç¦åœ°â€ï¼‰å”¯ä¸€çš„è·¯ï¼ˆæŒ‡é’ˆï¼‰<br>è®©â€œå¾’å¼Ÿâ€ã€â€œå¾’å­™â€ ä»¬æ‰¾åˆ°è‡ªå·±â€œå¸ˆçˆ¶â€ã€â€œå¸ˆçˆ¶çš„å¸ˆçˆ¶â€ æä¾›ç»™è‡ªå·±çš„æ–¹æ³•å’Œå±æ€§ã€‚</p><p><img src="/2019/12/15/2019/JSåŸå‹é“¾/NO3.png" alt="NO3" title="NO3"></p><h4 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h4><p>constructorå±æ€§æ˜¯è®©â€œå¾’å¼Ÿâ€ã€â€œå¾’å­™â€ ä»¬çŸ¥é“æ˜¯è°åˆ›é€ äº†è‡ªå·±ï¼Œè¿™é‡Œå¯ä¸æ˜¯â€œå¸ˆçˆ¶â€å•Šã€‚<br>è€Œæ˜¯è‡ªå·±çš„çˆ¶æ¯ï¼Œçˆ¶æ¯åˆ›é€ äº†è‡ªå·±ï¼Œçˆ¶æ¯åˆæ˜¯ç”±ä¸Šä¸€è¾ˆäººåˆ›é€ çš„ï¼Œâ€¦â€¦è¿½æº¯åˆ°å¤´å°±æ˜¯Function() </p><p><img src="/2019/12/15/2019/JSåŸå‹é“¾/NO4.png" alt="NO4" title="NO4"></p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScipt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¸©å‘eChartså‚æ•°</title>
      <link href="/2019/11/01/2019/%E8%B8%A9%E5%9D%91eCharts%E5%8F%82%E6%95%B0/"/>
      <url>/2019/11/01/2019/%E8%B8%A9%E5%9D%91eCharts%E5%8F%82%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p><img src="/2019/11/01/2019/è¸©å‘eChartså‚æ•°/NO0.png" alt="NO0" title="NO0"></p><p>åœ¨echartsä¸­ï¼Œå½“å¯¹å…¶ä¸­çš„optionå‚æ•°æœ‰æ‰€ä½¿ç”¨çš„æ—¶å€™ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨äºåˆ¤æ–­æ˜¯å¦åˆå¹¶æ—§å‚æ•°æ•°æ®ã€‚<br>å¦‚æœä¸ºtrueï¼Œåˆ™å°†å®Œå…¨æ›¿ä»£ï¼Œè€Œä¸ä¼šåœ¨ç•Œé¢ä¸Šå‡ºç°â€œéƒ¨åˆ†æ›´æ–°â€çš„æ•ˆæœ<br>å¦‚æœä¸ºfalseï¼Œåˆ™æ˜¯è¿­ä»£è¿›å…¥æ–°å‚æ•°ï¼Œä¼šå‡ºç°å³ä½¿è®¾ç½®äº†æ–°æ•°æ®optionï¼Œè¿˜ä¼šä¿ç•™æœ‰ éƒ¨åˆ†æ—§æ•°æ®çš„æƒ…å†µã€‚</p><p>æå¾—æˆ‘æ•´äº†å¥½ä¸€ä¼šä¸çŸ¥é“ä¸ºå•¥æ•°æ®æ²¡å“åº”ï¼Œä¹Ÿæ˜¯è‡ªå·±è ¢ğŸ¤£</p>]]></content>
      
      
      
        <tags>
            
            <tag> è¸©å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>thisæŒ‡å‘</title>
      <link href="/2019/10/17/2019/this%E6%8C%87%E5%90%91/"/>
      <url>/2019/10/17/2019/this%E6%8C%87%E5%90%91/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¸€å›¾è§£"><a href="#ä¸€å›¾è§£" class="headerlink" title="ä¸€å›¾è§£"></a>ä¸€å›¾è§£</h4><p><img src="/2019/10/17/2019/thisæŒ‡å‘/NO1.png" alt="NO1" title="NO1"></p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>canvasè¿›è¡Œå›¾åƒåƒç´ ç‚¹ç€è‰²</title>
      <link href="/2019/10/08/2019/canvas%E8%BF%9B%E8%A1%8C%E5%9B%BE%E5%83%8F%E5%83%8F%E7%B4%A0%E7%82%B9%E7%9D%80%E8%89%B2/"/>
      <url>/2019/10/08/2019/canvas%E8%BF%9B%E8%A1%8C%E5%9B%BE%E5%83%8F%E5%83%8F%E7%B4%A0%E7%82%B9%E7%9D%80%E8%89%B2/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¸€ã€canvasçš„å¤„ç†å°æŠ€å·§"><a href="#ä¸€ã€canvasçš„å¤„ç†å°æŠ€å·§" class="headerlink" title="ä¸€ã€canvasçš„å¤„ç†å°æŠ€å·§"></a>ä¸€ã€canvasçš„å¤„ç†å°æŠ€å·§</h4><p>åœ¨ä¿éšœçš„ä¸šåŠ¡ç›‘æ§é‡Œï¼Œé‡åˆ°è¿™ä¹ˆä¸€ä¸ªéš¾é¢˜ï¼Œéœ€è¦åœ¨åœºé¦†ä¿éšœçš„åŒæ—¶ï¼Œå¯¹ç°åœºçš„é‡‡é›†çš„æŒ‡æ ‡è¿›è¡Œä¸åŒé—¨é™é¢„è­¦è¿›è¡Œé¢œè‰²åŒºåˆ†â€¦ï¼Œå¹¶ä¸”ç”»å‡ºæ¥</p><p>è¿™å¯â€¦<br><img src="/2019/10/08/2019/canvasè¿›è¡Œå›¾åƒåƒç´ ç‚¹ç€è‰²/NO0.png" alt="NO0" title="NO0"></p><p>UIç»™äº†å¦‚ä¸‹ä¸¤å¼ å›¾ç‰‡ï¼š</p><h6 id="å›¾ä¸€ï¼š"><a href="#å›¾ä¸€ï¼š" class="headerlink" title="å›¾ä¸€ï¼š"></a>å›¾ä¸€ï¼š</h6><p><img src="/2019/10/08/2019/canvasè¿›è¡Œå›¾åƒåƒç´ ç‚¹ç€è‰²/NO1.png" alt="NO1" title="NO1"><br><a id="more"></a></p><h6 id="å›¾äºŒï¼š"><a href="#å›¾äºŒï¼š" class="headerlink" title="å›¾äºŒï¼š"></a>å›¾äºŒï¼š</h6><p><img src="/2019/10/08/2019/canvasè¿›è¡Œå›¾åƒåƒç´ ç‚¹ç€è‰²/NO2.png" alt="NO2" title="NO2"><br>éœ€è¦å»åˆæˆå¦‚ä¸‹ç¬¬ä¸‰å¼ å®æ—¶æŒ‡æ ‡ç€è‰²å›¾ï¼š</p><h6 id="å›¾ä¸‰ï¼š"><a href="#å›¾ä¸‰ï¼š" class="headerlink" title="å›¾ä¸‰ï¼š"></a>å›¾ä¸‰ï¼š</h6><p><img src="/2019/10/08/2019/canvasè¿›è¡Œå›¾åƒåƒç´ ç‚¹ç€è‰²/NO3.png" alt="NO3" title="NO3"></p><p>é‚£ä¹ˆè¯¥å¦‚ä½•åšå‘¢ï¼Ÿ</p><p>æœ‰éœ€è¦éœ€è¦æ ¹æ®æ•°æ®çš„IDï¼Œå»åˆ¤æ–­ä¸åŒçš„æŒ‡æ ‡å€¼æ‰€å¸¦æ¥çš„é¢œè‰²ï¼Œå¦‚ä½•ç»™è¿™ä¹ˆä¸€ä¸ªæ¤­åœ†å½¢é™„ä¸Šé¢œè‰²å‘¢ï¼Ÿ</p><p>å’ŒUIå•†é‡ä¹‹åï¼Œç»™å‡ºäº†å›¾äºŒè¿™ä¹ˆä¸€ä¸ªå…³é”®ä¿¡æ¯ã€‚<br><strong>èƒ½çœ‹å‡ºæœ‰ä»€ä¹ˆå¥¥ç§˜å—?</strong></p><p>æˆ‘ä»¬å…ˆæ¥æ€è€ƒä¸€ä¸‹å¦‚ä½•åŒ¹é…ä¸Šå„ä¸ªIDï¼Œç”¨äºç»™æ¯ä¸ªåŒºå—é™„ä¸Šé¢œè‰²ã€‚</p><p>æˆ‘ä»¬æ‹¥æœ‰ä¸€æ‰¹æœ‰IDçš„æ•°æ® <strong>-&gt;</strong> éœ€è¦èƒ½è¯†åˆ«åˆ°å›¾ä¸Šæ‰€å¯¹åº”çš„ä½ç½® <strong>-&gt;</strong> ç›¸åº”ä½ç½®åº”è¯¥æœ‰èƒ½æ ‡è¯†çš„å…³é”®ä¿¡æ¯ <strong>-&gt;</strong> å¦‚ä½•ä¸ºå›¾ç‰‡æ‰“ä¸Šå…³é”®ä¿¡æ¯</p><p>å› æ­¤canvaså°±å‡ºåœºäº†ã€‚</p><p>canvasçš„å…³é”®å±æ€§æ–¹æ³•ï¼š<br><strong>getImageData()</strong> ï¼Œå¯ä»¥è¯†åˆ«åˆ°æŒ‡å®šèŒƒå›´çš„é¢œè‰²å€¼å‡ºæ¥ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å€Ÿç”¨è¿™ä¸ªå°±å¯ä»¥åšåˆ°</p><p>æ²¡é”™ï¼Œå›¾äºŒ æ˜¯UIåˆ†åˆ«å¯¹å„ä¸ªåŒºå—å¡«å……çš„æœ‰è§„å¾‹é¢œè‰²<br>åˆ†åˆ«åªå¯¹Rï¼ŒGï¼ŒBè¿›è¡Œäº†é¢œè‰²å¡«å……<br>ç”±å†…åˆ°å¤–ï¼Œå¯¹å›¾ä¸€çš„åº§ä½è¿›è¡Œäº†æ ‡å‡º<br>å†…åœˆä¸€äºŒå±‚åˆ†åˆ«ç”±R1æ’è‡³R64ï¼Œä¹Ÿå°±æ˜¯<br>rgba(1,0,0,1)ã€rgba(2,0,0,1)â€¦</p><p>å› æ­¤æˆ‘ä»¬åœ¨é€šè¿‡<br><strong>let imgData = ctx1.getImageData(0, 0, FDW, FDH);</strong></p><p>è¯»å–åˆ°çš„imgDataä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¯†åˆ«ç›¸åº”çš„Ræ•°ç»„ï¼ŒçŸ¥é“è¯¥ä½ç½®ç‚¹æ˜¯å“ªä¸ªIDå±æ€§çš„ï¼Œå¹¶ä¸”æ‰¾å¯»åˆ°ç›¸åº”IDçš„é¢œè‰²å€¼ï¼Œä¸ºè¯¥ç‚¹é™„ä¸Šï¼Œä¾æ¬¡ç±»æ¨ï¼Œå°±å¯ä»¥å»ºç«‹ä¸€ä¸ª<strong>é¢œè‰²-ID-å›¾ç‰‡</strong>çš„å…³ç³»å‡ºæ¥</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">letÂ rÂ =Â imgData<span class="meta">.data</span>[i],Â gÂ =Â imgData<span class="meta">.data</span>[iÂ +Â <span class="number">1</span>],Â <span class="keyword">bÂ </span>=Â imgData<span class="meta">.data</span>[iÂ +Â <span class="number">2</span>],Â aÂ =Â imgData<span class="meta">.data</span>[iÂ +Â <span class="number">3</span>]<span class="comment">;</span></span><br><span class="line">if(aÂ !==Â <span class="number">0</span>Â &amp;&amp;Â (r!==<span class="number">0</span>Â <span class="title">||</span>Â g!==Â <span class="number">0</span>Â <span class="title">||</span>Â <span class="keyword">b!==Â </span><span class="number">0</span>))Â &#123;</span><br><span class="line">    DealColorData2(imgData,Â ObjData,Â r,Â g,Â <span class="keyword">b,Â </span>a,Â i)<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/10/08/2019/canvasè¿›è¡Œå›¾åƒåƒç´ ç‚¹ç€è‰²/GIF.gif" alt="NO4" title="NO4"></p>]]></content>
      
      
      
        <tags>
            
            <tag> ä¼˜åŒ– </tag>
            
            <tag> canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ </title>
      <link href="/2019/09/26/2019/%E4%B8%80%E4%B8%AA%E5%A4%B1%E7%84%A6%E6%8C%87%E4%BB%A4%E7%9A%84%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/09/26/2019/%E4%B8%80%E4%B8%AA%E5%A4%B1%E7%84%A6%E6%8C%87%E4%BB%A4%E7%9A%84%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h4 id="å‰æƒ…"><a href="#å‰æƒ…" class="headerlink" title="å‰æƒ…"></a>å‰æƒ…</h4><p>å‰æƒ…ï¼Œå±±è¥¿é¡¹ç›®ä¸­ç”±äºé€‰æ‹©ç­‰æ¡ä»¶å¢å¤šï¼Œäºæ˜¯æŠ½ç¦»å‡ºæ¥ä¸€ä¸ªç®€å•çš„å•é€‰å¤šé€‰ç»„ä»¶ã€‚æ ·å¼çš„è¯ï¼Œæ™®é€šæäº†ï¼Œä¹Ÿæ²¡ä¸å®Œå…¨æŒ‰ç…§æœ€åˆUIç»™çš„è®¾ç½®ç¨¿ã€‚å½“ç„¶è¿™æ˜¯å¦å¤–çš„è¯ã€‚<br>é‡åˆ°çš„å…¶ä¸­ä¸€ä¸ªé—®é¢˜å°±æ˜¯:<br>æˆ‘å¸Œæœ›å¯ä»¥æœ‰å¤±ç„¦æ—¶å¾—å›å¼¹ï¼Œé¦–å…ˆå°±æ˜¯æˆ‘æƒ³åˆ°å¾—æ˜¯åˆ©ç”¨æŒ‡ä»¤è¿›è¡Œåˆå§‹åŠ è½½æ—¶å€™å¯¹å„ç»„ä»¶å®ä¾‹ç»‘å®šä¸Šè¿™ä¹ˆä¸ªäº‹ä»¶é€»è¾‘ã€‚<br>äºæ˜¯æˆ‘å†™ä¸‹äº†è¿™ä¹ˆä¸€ä¸²ä»£ç ï¼š<br><a id="more"></a></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">bind: <span class="function">(<span class="params">el, event, vM</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> _that = vM.context;</span><br><span class="line">    <span class="keyword">const</span> aimdomArr = [<span class="string">'Moretext_'</span>, <span class="string">'MoreTextcontent_'</span>, <span class="string">'MoreTextTriDown_'</span>, <span class="string">'MoreTextTriUp_'</span>, <span class="string">'MoreSelcontent_'</span>,</span><br><span class="line">        <span class="string">'MoreSelUnit_'</span>, <span class="string">'SelUnitIcon_ SelUnitUnCho'</span>, <span class="string">'SelUnitText'</span>, <span class="string">'SelUnitIcon_ SelUnitCho'</span>,</span><br><span class="line">        <span class="string">'Singletext_'</span>, <span class="string">'SingleTextcontent_'</span>, <span class="string">'SingleTextTriDown_'</span>, <span class="string">'SingleTextTriUp_'</span>, <span class="string">'SingleSelcontent_'</span>, </span><br><span class="line">        <span class="string">'SingleSelUnit_'</span></span><br><span class="line">    ]</span><br><span class="line">    <span class="built_in">document</span>.body.onclick = <span class="function">(<span class="params">(<span class="params">e</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">let</span> TARGETName = e.target.className;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">let</span> judgeclick = aimdomArr.indexOf(<span class="params">TARGETName</span>);</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">if</span>(<span class="params">judgeclick === -1</span>) &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">            _that.isclickMore = <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">            _that.isclickSingle = <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">        &#125;</span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;</span>);</span></span><br><span class="line"><span class="function"> &#125;</span></span><br></pre></td></tr></table></figure><p>æˆ‘å¾—åˆè¡·æ˜¯è®°å½•ä¸‹ç»„ä»¶å¾—thisï¼Œç„¶ååœ¨ç›‘å¬å‘ç”Ÿåœ¨bodyä¸Šå¾—ç‚¹å‡»äº‹ä»¶ï¼Œå¦‚è‹¥ä¸æ˜¯å‘ç”Ÿåœ¨ç›¸å…³å¾—classç±»ä¸Šå¾—ï¼Œåˆ™å¯ä»¥è¿›è¡Œåˆ¤æ–­åˆ°ã€‚<br>ä½†æ˜¯ï¼Œå®é™…ä¸Šç»‘å®šå¾—thisï¼ˆ_thatï¼‰å¹¶ä¸ä¼šä¸€ç›´æ˜¯æ­£ç¡®å¾—é‚£ä¸ªï¼Œåœ¨bingå¾—å¤–å±‚å¹¶æ²¡æœ‰å“åº”å¾—ä½œç”¨åŸŸï¼Œæˆ‘ä»¬æ‰“å°ä¸€ä¸‹_tahtæ˜¯ä»€ä¹ˆã€‚</p><p><img src="/2019/09/26/2019/ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ /NO1.png" alt="NO1" title="NO1"></p><p>ä»¥åŠè§¦å‘äº‹ä»¶æ—¶å¾—that</p><p><img src="/2019/09/26/2019/ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ /NO2.png" alt="NO2" title="NO2"></p><p>éƒ½åœ¨æ¯ä¸€æ¬¡ç»„ä»¶å®ä¾‹ç»‘å®šæ—¶æŠŠ_thatä¸æ–­åˆ·æ–°æˆæœ€æ–°å¾—é‚£ä¸ªäº†<br>é‚£è¿™æ—¶å€™åº”è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ<br>ï¼ˆä»€ä¹ˆ, å¤§å£°ğŸ”ˆï¼‰<br>é—­åŒ…ã€‚</p><p>åœ¨åæ¥æˆ‘æƒ³åˆ°å¯ä»¥çœ‹çœ‹elementæ˜¯å¦‚ä½•å®ç°ç›¸å…³é€»è¾‘å¾—å‘¢ï¼Ÿäºæ˜¯å°±æ‰¾ä¸€æ‰¾elementå¯¹äºel-selectçš„å°è£…ã€‚<br><em>element-dev\packages\select\index.js</em><br>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"el-select"</span> :<span class="class"><span class="keyword">class</span></span>=<span class="string">"[selectSizeÂ ?Â 'el-select--'Â +Â selectSizeÂ :Â '']"</span></span><br><span class="line">Â Â Â Â <span class="meta">@click</span>.stop=<span class="string">"toggleMenu"</span></span><br><span class="line">Â Â Â Â v-clickoutside=<span class="string">"handleClose"</span>&gt;</span><br></pre></td></tr></table></figure><p>ä¹Ÿä»¥æŒ‡ä»¤å¾—å½¢å¼ <strong>clickoutside</strong>å¯¹è¿™ä¸ªé€»è¾‘è¿›è¡Œå°è£…ä»¥å¤‡å¤ç”¨<br><em>element-dev\src\utils\clickoutside.js</em></p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bind(el,Â </span><span class="keyword">binding,Â </span>vnode)Â &#123;</span><br><span class="line">Â Â Â Â nodeList.push(el)<span class="comment">;</span></span><br><span class="line">Â Â Â Â constÂ idÂ =Â seed++<span class="comment">;</span></span><br><span class="line">Â Â Â Â el[ctx]Â =Â &#123;</span><br><span class="line">Â Â Â Â Â Â id,</span><br><span class="line"><span class="symbol">Â Â Â Â Â Â documentHandler:</span>Â createDocumentHandler(el,Â <span class="keyword">binding,Â </span>vnode),</span><br><span class="line"><span class="symbol">Â Â Â Â Â Â methodName:</span>Â <span class="keyword">binding.expression,</span></span><br><span class="line"><span class="keyword">Â </span>Â Â Â Â Â <span class="keyword">bindingFn:Â </span><span class="keyword">binding.value</span></span><br><span class="line"><span class="keyword">Â </span>Â Â Â &#125;<span class="comment">;</span></span><br><span class="line">&#125;,</span><br><span class="line">nodeList.forEach(nodeÂ =&gt;Â node[ctx].documentHandler(e,Â startClick))<span class="comment">;</span></span><br><span class="line">ifÂ (<span class="keyword">binding.expressionÂ </span>&amp;&amp; el[ctx].methodNameÂ &amp;&amp; vnode.context[el[ctx].methodName])Â &#123; </span><br><span class="line">    vnode.context[el[ctx].methodName]()<span class="comment">; </span></span><br><span class="line">&#125;Â elseÂ &#123;</span><br><span class="line">    el[ctx].<span class="keyword">bindingFnÂ </span>&amp;&amp;Â el[ctx].<span class="keyword">bindingFn();</span></span><br><span class="line"><span class="keyword">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="/2019/09/26/2019/ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ /NO3.png" alt="NO3" title="NO3"><br><img src="/2019/09/26/2019/ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ /GIF.gif" alt="GIF" title="GIF"></p><h4 id="VueæŒ‡ä»¤çš„ç¼–å†™"><a href="#VueæŒ‡ä»¤çš„ç¼–å†™" class="headerlink" title="VueæŒ‡ä»¤çš„ç¼–å†™"></a>VueæŒ‡ä»¤çš„ç¼–å†™</h4><p>æˆ‘ä»¬é¡ºä¾¿å›é¡¾ä¸€ä¸‹å¯¹äºVueæŒ‡ä»¤çš„æŒ‡å¯¼å§ã€‚</p><h5 id="æ³¨å†Œå…¨å±€æŒ‡ä»¤"><a href="#æ³¨å†Œå…¨å±€æŒ‡ä»¤" class="headerlink" title="æ³¨å†Œå…¨å±€æŒ‡ä»¤"></a>æ³¨å†Œå…¨å±€æŒ‡ä»¤</h5><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Vue.directive(<span class="string">'focus'</span>, &#123;</span><br><span class="line">  <span class="comment">// å½“è¢«ç»‘å®šçš„å…ƒç´ æ’å…¥åˆ° DOM ä¸­æ—¶â€¦â€¦</span></span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> <span class="params">(el)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// èšç„¦å…ƒç´ </span></span><br><span class="line">    el.focus()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="æ³¨å†Œå±€éƒ¨æŒ‡ä»¤"><a href="#æ³¨å†Œå±€éƒ¨æŒ‡ä»¤" class="headerlink" title="æ³¨å†Œå±€éƒ¨æŒ‡ä»¤"></a>æ³¨å†Œå±€éƒ¨æŒ‡ä»¤</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">directives</span>: &#123;</span><br><span class="line">  <span class="attribute">focus</span>: &#123;</span><br><span class="line">    // æŒ‡ä»¤çš„å®šä¹‰</span><br><span class="line">    inserted: function (el) &#123;</span><br><span class="line">      el.<span class="built_in">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æŒ‡ä»¤æ¥æ”¶çš„é’©å­å‡½æ•°"><a href="#æŒ‡ä»¤æ¥æ”¶çš„é’©å­å‡½æ•°" class="headerlink" title="æŒ‡ä»¤æ¥æ”¶çš„é’©å­å‡½æ•°"></a>æŒ‡ä»¤æ¥æ”¶çš„é’©å­å‡½æ•°</h5><p>ä¸€ä¸ªæŒ‡ä»¤å®šä¹‰å¯¹è±¡å¯ä»¥æä¾›å¦‚ä¸‹å‡ ä¸ªé’©å­å‡½æ•° (å‡ä¸ºå¯é€‰)ï¼š</p><ul><li>bindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚</li><li>insertedï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ (ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)ã€‚</li><li>updateï¼šæ‰€åœ¨ç»„ä»¶çš„ VNode æ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­ VNode æ›´æ–°ä¹‹å‰ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–° (è¯¦ç»†çš„é’©å­å‡½æ•°å‚æ•°è§ä¸‹)ã€‚</li><li>componentUpdatedï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ VNode åŠå…¶å­ VNode å…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚</li><li>unbindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚</li></ul><h5 id="é’©å­å‡½æ•°æ¥æ”¶çš„å‚æ•°"><a href="#é’©å­å‡½æ•°æ¥æ”¶çš„å‚æ•°" class="headerlink" title="é’©å­å‡½æ•°æ¥æ”¶çš„å‚æ•°"></a>é’©å­å‡½æ•°æ¥æ”¶çš„å‚æ•°</h5><ul><li>elï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ DOMã€‚</li><li>bindingï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹ property:<pre><code>nameï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ v- å‰ç¼€ã€‚valueï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼šv-my-directive=&quot;1 + 1&quot; ä¸­ï¼Œç»‘å®šå€¼ä¸º 2ã€‚oldValueï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚expressionï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ v-my-directive=&quot;1 + 1&quot; ä¸­ï¼Œè¡¨è¾¾å¼ä¸º &quot;1 + 1&quot;ã€‚argï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ v-my-directive:foo ä¸­ï¼Œå‚æ•°ä¸º &quot;foo&quot;ã€‚modifiersï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šv-my-directive.foo.bar ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º { foo: true, bar: true }ã€‚vnodeï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚ç§»æ­¥ VNode API æ¥äº†è§£æ›´å¤šè¯¦æƒ…ã€‚oldVnodeï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚</code></pre></li></ul><p><strong>ä¸¾ä¾‹è¯´æ˜</strong><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">div</span> id=<span class="string">"hook-arguments-example"</span> v-demo:foo<span class="selector-class">.a</span><span class="selector-class">.b</span>=<span class="string">"message"</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Vue.directive(<span class="string">'demo'</span>, &#123;</span><br><span class="line">  bind: function (el, binding, vnode) &#123;</span><br><span class="line">    <span class="selector-tag">var</span> s = JSON.stringify</span><br><span class="line">    el<span class="selector-class">.innerHTML</span> =</span><br><span class="line">      <span class="string">'name: '</span>       + s(binding.name) + <span class="string">'&lt;br&gt;'</span> +  <span class="comment">// demo</span></span><br><span class="line">      <span class="string">'value: '</span>      + s(binding.value) + <span class="string">'&lt;br&gt;'</span> + <span class="comment">// messageçš„å€¼</span></span><br><span class="line">      <span class="string">'expression: '</span> + s(binding.expression) + <span class="string">'&lt;br&gt;'</span> + <span class="comment">// è¡¨è¾¾å¼ï¼Œå³message</span></span><br><span class="line">      <span class="string">'argument: '</span>   + s(binding.arg) + <span class="string">'&lt;br&gt;'</span> + <span class="comment">// æŒ‡ä»¤çš„ä¼ å‚ï¼Œå³foo</span></span><br><span class="line">      <span class="string">'modifiers: '</span>  + s(binding.modifiers) + <span class="string">'&lt;br&gt;'</span> <span class="comment">// ä¿®é¥°å¯¹è±¡ï¼Œå³a: true, b: true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œå¦‚æœæœ‰éœ€è¦è‡ªå®šä¹‰ä¼ å‚ï¼Œfooä¹Ÿæ˜¯å¯ä»¥ä¿®æ”¹ä¸ºåŠ¨æ€å‚æ•°çš„ã€‚</p><h6 id="åŠ¨æ€å‚æ•°"><a href="#åŠ¨æ€å‚æ•°" class="headerlink" title="åŠ¨æ€å‚æ•°"></a>åŠ¨æ€å‚æ•°</h6><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-mydirective:<span class="string">[argument]</span>=<span class="string">"value"</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Element </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¯•ä¸šäº†</title>
      <link href="/2019/06/27/2019/%E6%AF%95%E4%B8%9A%E4%BA%86/"/>
      <url>/2019/06/27/2019/%E6%AF%95%E4%B8%9A%E4%BA%86/</url>
      
        <content type="html"><![CDATA[<h5 id="æ¯•ä¸šäº†"><a href="#æ¯•ä¸šäº†" class="headerlink" title="æ¯•ä¸šäº†"></a>æ¯•ä¸šäº†</h5><p>è¯¸å¤šä¸èˆï¼Œå­¦ç”Ÿæ—¶ä»£å¤šå¥½ğŸ˜”</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥å¸¸ç¢ç¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»</title>
      <link href="/2019/05/13/2019/Flex%E5%B8%83%E5%B1%80%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B1%9E%E6%80%A7%E4%BB%8B%E7%BB%8D/"/>
      <url>/2019/05/13/2019/Flex%E5%B8%83%E5%B1%80%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B1%9E%E6%80%A7%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h4 id="flexçš„å¸ƒå±€å®šä¹‰ï¼š"><a href="#flexçš„å¸ƒå±€å®šä¹‰ï¼š" class="headerlink" title="flexçš„å¸ƒå±€å®šä¹‰ï¼š"></a>flexçš„å¸ƒå±€å®šä¹‰ï¼š</h4><ul><li>displayï¼š flexï¼›</li></ul><p>æœ‰æ‰€åŒºåˆ†å‡ºï¼Œä¸»è½´ï¼ˆmain-axisï¼‰ä¸äº¤å‰è½´(cross-axis)</p><p><img src="/2019/05/13/2019/Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»/bg2015071004.png" alt="1" title="1"></p><a id="more"></a><h4 id="å®¹å™¨ï¼ˆçˆ¶å…ƒç´ ï¼‰æœ‰ä»¥ä¸‹å…­ä¸ªå±æ€§"><a href="#å®¹å™¨ï¼ˆçˆ¶å…ƒç´ ï¼‰æœ‰ä»¥ä¸‹å…­ä¸ªå±æ€§" class="headerlink" title="å®¹å™¨ï¼ˆçˆ¶å…ƒç´ ï¼‰æœ‰ä»¥ä¸‹å…­ä¸ªå±æ€§"></a>å®¹å™¨ï¼ˆçˆ¶å…ƒç´ ï¼‰æœ‰ä»¥ä¸‹å…­ä¸ªå±æ€§</h4><h5 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a>flex-direction</h5><p>ï¼ˆrow/row-reverse/column/column-reverseï¼‰</p><ul><li>row : ä¸»è½´æ°´å¹³ï¼Œèµ·ç‚¹å·¦ç«¯</li><li>row-reverse : ä¸»è½´æ°´å¹³ï¼Œèµ·ç‚¹å³ç«¯</li><li>column : ä¸»è½´å‚ç›´ï¼Œèµ·ç‚¹ä¸Šç«¯</li><li>column-reverse : ä¸»è½´å‚ç›´ï¼Œèµ·ç‚¹ä¸‹ç«¯</li></ul><p><img src="/2019/05/13/2019/Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»/bg2015071005.png" alt="2" title="2"></p><h5 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap"></a>flex-wrap</h5><p>(nowrap/wrap/wrap-reverse)</p><ul><li>wrap : å½“ä¸»è½´æ’åˆ—ä¸ä¸‹æ—¶ï¼Œæ¢è¡Œ</li><li>nowrap : ä¸æ¢è¡Œ</li><li>wrap-reverse : æ¢è¡Œï¼Œä½†è½¬å‘çš„</li></ul><h5 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h5><p>(flex-flowæ˜¯flex-directionä¸flex-wrapçš„ç®€å†™å½¢å¼)</p><h5 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h5><p>ï¼š å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼<br>(flex-start/ flex-end/ center/ space-between/ space-around)</p><ul><li>flex-start : ä¸»è½´å¼€å§‹æ–¹å‘å¯¹é½</li><li>flex-end : ä¸»è½´ç»“æŸæ–¹å‘å¯¹é½</li><li>center : ä¸»è½´æ–¹å‘å±…ä¸­</li><li>space-between : ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®é—´éš™ç›¸ç­‰</li><li>space-around : é¡¹ç›®ä¸¤ä¾§é—´éš”ç›¸ç­‰ï¼Œé—´éš”æ˜¯ä¸è¾¹æ¡†çš„ä¸¤å€</li></ul><p><img src="/2019/05/13/2019/Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»/bg2015071010.png" alt="3" title="3"></p><h5 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a>align-items</h5><p>ï¼šå®šä¹‰äº† <strong>æ¯è¡Œ</strong> é¡¹ç›®çš„åœ¨ä¾§è½´æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼</p><ul><li>flex-start : ä¾§è½´å¼€å§‹æ–¹å‘å¯¹é½</li><li>flex-end : ä¾§è½´ç»“æŸæ–¹å‘å¯¹é½</li><li>center ï¼š ä¾§è½´å±…ä¸­å¯¹é½</li><li>baseline ï¼šé¡¹ç›®æ¯ä¸€è¡Œæ–‡å­—çš„å‡ çº¿å¯¹é½</li><li>stretch : é¡¹ç›®é«˜åº¦ä¸ºautoæ—¶ï¼Œå æ»¡æ•´ä¸ªå®¹å™¨</li></ul><p><img src="/2019/05/13/2019/Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»/bg2015071011.png" alt="4" title="4"></p><h5 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h5><p>ï¼š å®šä¹‰äº†å®¹å™¨åœ¨ä¾§è½´æ–¹å‘ä¸Šæœ‰é¢å¤–ç©ºé—´æ—¶ï¼Œå¦‚ä½•æ’å¸ƒæ¯ä¸€è¡Œ</p><ul><li>felx-start : ä¾§è½´å¼€å§‹æ–¹å‘å¯¹é½</li><li>felx-end : ä¾§è½´ç»“æŸæ–¹å‘å¯¹é½</li><li>center : ä¾§è½´ä¸­å¿ƒå¯¹é½</li><li>space-between ï¼š ä¸ä¾§è½´ä¸¤ç«¯å¯¹é½ï¼Œæ¯è¡Œè½´çº¿é—´éš”å¹³å‡</li><li>space-around : æ¯æ ¹è½´çº¿ä¸¤ä¾§é—´éš”ç›¸ç­‰</li><li>stretch : å æ»¡æ•´ä¸ªä¾§è½´</li></ul><p><img src="/2019/05/13/2019/Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»/bg2015071012.png" alt="5" title="5"></p><h4 id="é¡¹ç›®ï¼ˆå­å…ƒç´ ï¼‰æœ‰ä»¥ä¸‹å…­ä¸ªå±æ€§"><a href="#é¡¹ç›®ï¼ˆå­å…ƒç´ ï¼‰æœ‰ä»¥ä¸‹å…­ä¸ªå±æ€§" class="headerlink" title="é¡¹ç›®ï¼ˆå­å…ƒç´ ï¼‰æœ‰ä»¥ä¸‹å…­ä¸ªå±æ€§"></a>é¡¹ç›®ï¼ˆå­å…ƒç´ ï¼‰æœ‰ä»¥ä¸‹å…­ä¸ªå±æ€§</h4><h5 id="order"><a href="#order" class="headerlink" title="order"></a>order</h5><p>ï¼šå®šä¹‰äº†é¡¹ç›®çš„æ’åˆ—é¡ºåºï¼Œæ•°å€¼è¶Šå°æ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0</p><p><img src="/2019/05/13/2019/Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»/bg2015071013.png" alt="6" title="6"></p><h5 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h5><p>ï¼šå®šä¹‰äº†å±æ€§é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼›<br>é»˜è®¤ä¸º0ï¼Œå³ä½¿æœ‰å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ï¼›<br>å¦‚æœæ‰€æœ‰éƒ½ä¸º1ï¼Œä»–ä»¬å°†ç­‰åˆ†å‰©ä½™ç©ºé—´ï¼›<br>å¦‚æœæœ‰ä¸€ä¸ªä¸º2ï¼Œå…¶ä»–ä¸º1æ—¶ï¼Œå‰è€…å æ®åè€…ä¸¤å€çš„é¡¹ç›®ç©ºé—´ï¼›</p><h5 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h5><p>ï¼šå®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œè‹¥é¡¹ç›®ç©ºé—´ä¸è¶³æ—¶ï¼Œé¡¹ç›®å°†ç¼©å°<br>å¦‚æœæ‰€æœ‰éƒ½ä¸º1ï¼Œç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ï¼›<br>å¦‚æœæœ‰ä¸€ä¸ªä¸º0ï¼Œå…¶ä»–ä¸º1æ—¶ï¼Œå‰è€…ç©ºé—´ä¸ç¼©å°ï¼Œåè€…ç­‰æ¯”ä¾‹å‡åˆ†ç¼©å°</p><p><img src="/2019/05/13/2019/Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»/bg2015071015.jpg" alt="7" title="7"></p><h5 id="flex-basis"><a href="#flex-basis" class="headerlink" title="flex-basis"></a>flex-basis</h5><p>ï¼šå®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ï¼›åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®æ‰€å æ®çš„ä¸»è½´ç©ºé—´ï¼Œæ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦è¿˜æœ‰å¤šä½™ç©ºé—´<br>å¯ä»¥å®šä¹‰å’Œwidthå’Œheightå±æ€§ä¸€æ ·çš„å€¼ã€‚</p><h5 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h5><p>ï¼šflexæ˜¯flex-growã€flex-shrinkã€flex-basisçš„ç¼©å†™</p><h5 id="align-self"><a href="#align-self" class="headerlink" title="align-self"></a>align-self</h5><p>ï¼šå®šä¹‰å…è®¸å•ä¸ªé¡¹ç›®ä¸å…¶ä»–é¡¹ç›®æœ‰ä¸ä¸€æ ·çš„ä¾§è½´å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–align-item</p><p><img src="/2019/05/13/2019/Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»/bg2015071016.png" alt="8" title="8"></p>]]></content>
      
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> å¸ƒå±€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gulpæºç åˆ†æå­¦ä¹ (ä¸‰</title>
      <link href="/2019/04/09/2019/Gulp%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0-%E4%B8%89/"/>
      <url>/2019/04/09/2019/Gulp%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0-%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<h1 id="vinyl-fséƒ¨åˆ†"><a href="#vinyl-fséƒ¨åˆ†" class="headerlink" title="vinyl-fséƒ¨åˆ†"></a>vinyl-fséƒ¨åˆ†</h1><p>å½“æˆ‘ä»¬è¿›å…¥vinyl-fsçš„æ ¹ç›®å½•index.jsä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°vinyl-fsæ‰€å®ç°çš„srcã€destæ¥å£æ˜¯è¢«åˆ†å±äºäº†å‡ ä¸ªå¤–éƒ¨æ¨¡å— =&gt;<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å„è‡ªæ‰€å±çš„æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// æ–‡ä»¶çš„å¤„ç†ä¸Š</span></span><br><span class="line">  src: <span class="built_in">require</span>(<span class="string">'./lib/src'</span>),</span><br><span class="line">  dest: <span class="built_in">require</span>(<span class="string">'./lib/dest'</span>),</span><br><span class="line">  symlink: <span class="built_in">require</span>(<span class="string">'./lib/symlink'</span>),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h2 id="ä¸€ã€glob"><a href="#ä¸€ã€glob" class="headerlink" title="ä¸€ã€glob"></a>ä¸€ã€glob</h2><p>åœ¨è¿›å…¥ç›¸åº”çš„æ¨¡å—æ–¹æ³•åˆ†æä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯globï¼›</p><p>nodeçš„globæ˜¯æŒ‡å…è®¸ä½ ä½¿ç”¨ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨äºåŒ¹é…å¯¹åº”è§„åˆ™çš„æ–‡ä»¶ï¼Œ</p><a id="more"></a><p>ç±»ä¼¼äºæˆ‘ä»¬é€šå¸¸åœ¨gulpæ‰“åŒ…é…ç½®ä¸­æ‰€å†™çš„ä¸€æ ·ï¼š<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-tag">gulp</span><span class="selector-class">.src</span>([<span class="string">'./lib/images/*'</span>, <span class="string">'./lib/images/*/*'</span>])</span><br></pre></td></tr></table></figure></p><p>è€Œè¿™å…¶ä¸­å³æ˜¯æˆ‘ä»¬çš„globæ¨¡å¼ï¼Œä¹Ÿæ˜¯å¦‚æ­¤æˆ‘ä»¬å¯ä»¥åŒ¹é…æˆ‘ä»¬ç›¸åº”çš„ä¼ å…¥æ–‡ä»¶ã€‚</p><p><strong>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é™†ç»­çš„æ¥çœ‹ä¸€ä¸‹</strong>src<strong> ã€ </strong>dest<strong> çš„å…·ä½“å®ç°ã€‚</strong></p><h2 id="äºŒã€src"><a href="#äºŒã€src" class="headerlink" title="äºŒã€src"></a>äºŒã€src</h2><p>æˆ‘ä»¬è¿›å…¥ ./lib/src/index.js ä¸­æŸ¥çœ‹ç›¸åº”çš„å…¥å£æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> gs = <span class="built_in">require</span>(<span class="string">'glob-stream'</span>);</span><br><span class="line"><span class="comment">// ç»“åˆæµçš„é˜µåˆ—æˆä½¿ç”¨å•ä¸ªåŒå·¥æµæ³µå’Œduplexify</span></span><br><span class="line"><span class="comment">// å¦‚æœå…¶ä¸­ä¸€ä¸ªæµå…³é—­/é”™è¯¯ï¼Œç®¡é“ä¸­çš„æ‰€æœ‰æµéƒ½å°†è¢«é”€æ¯ã€‚</span></span><br><span class="line"><span class="keyword">var</span> pumpify = <span class="built_in">require</span>(<span class="string">'pumpify'</span>);</span><br><span class="line"><span class="comment">// åœ¨transformStreamä¸­åŒ…è£…ReadableStream</span></span><br><span class="line"><span class="keyword">var</span> toThrough = <span class="built_in">require</span>(<span class="string">'to-through'</span>);</span><br><span class="line"><span class="keyword">var</span> isValidGlob = <span class="built_in">require</span>(<span class="string">'is-valid-glob'</span>);</span><br><span class="line"><span class="keyword">var</span> createResolver = <span class="built_in">require</span>(<span class="string">'resolve-options'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹å„å¯¼å…¥æ¨¡å—å¯ä»¥è¿›å…¥ç›¸åº”æ–‡ä»¶ä¸­æŸ¥çœ‹æ³¨é‡Šåˆ†æ</span></span><br><span class="line"><span class="keyword">var</span> config = <span class="built_in">require</span>(<span class="string">'./options'</span>);</span><br><span class="line"><span class="keyword">var</span> prepare = <span class="built_in">require</span>(<span class="string">'./prepare'</span>);</span><br><span class="line"><span class="keyword">var</span> wrapVinyl = <span class="built_in">require</span>(<span class="string">'./wrap-vinyl'</span>);</span><br><span class="line"><span class="keyword">var</span> sourcemap = <span class="built_in">require</span>(<span class="string">'./sourcemap'</span>);</span><br><span class="line"><span class="keyword">var</span> readContents = <span class="built_in">require</span>(<span class="string">'./read-contents'</span>);</span><br><span class="line"><span class="keyword">var</span> resolveSymlinks = <span class="built_in">require</span>(<span class="string">'./resolve-symlinks'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">src</span>(<span class="params">glob, opt</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ­¤å¤„è¿›è¡Œé»˜è®¤çš„é…ç½®ä¸ä¼ å…¥çš„é…ç½®è¿›è¡Œè§£æé…ç½®ï¼Œè¯¦æƒ…å¯è§vintl-fs-Test\createResolverTest.js</span></span><br><span class="line">  <span class="comment">// ç±»ä¼¼åˆå¹¶é»˜è®¤é…ç½®é¡¹ä¸ç”¨æˆ·ä¼ å…¥é…ç½®é¡¹</span></span><br><span class="line">  <span class="keyword">var</span> optResolver = createResolver(config, opt);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦æœ‰æ•ˆçš„glob(ç®€åŒ–çš„æ­£åˆ™è¡¨è¾¾å¼)</span></span><br><span class="line">  <span class="keyword">if</span> (!isValidGlob(glob)) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Invalid glob argument: '</span> + glob);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> streams = [</span><br><span class="line">    <span class="comment">// ä½¿ç”¨äº†glob-streamæ¨¡å—ï¼Œä¼ å…¥ä¸€ä¸ª(ç®€åŒ–çš„æ­£åˆ™è¡¨è¾¾å¼)åšä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œoptå¯¹è±¡ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œ</span></span><br><span class="line">    <span class="comment">// è¿”å›åˆ›å»ºglobæµ</span></span><br><span class="line">    gs(glob, opt),</span><br><span class="line">    <span class="comment">// ä¼ å…¥ä¸Šè¿°çš„è§£æé…ç½®ï¼Œåˆ›å»ºä¸€ä¸ªvinlyæ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">    wrapVinyl(optResolver),</span><br><span class="line">    <span class="comment">// globçš„statä¸ºsymlinkçš„æƒ…å†µä¸‹ï¼Œè½¬ä¸ºç¡¬é“¾æ¥</span></span><br><span class="line">    resolveSymlinks(optResolver),</span><br><span class="line">    <span class="comment">// è¿›è¡Œæ–‡ä»¶statä»¥åŠä¸optResolveré…ç½®é€‰é¡¹ä¸Šè¿›è¡Œæ—¶é—´çš„æ¯”è¾ƒ</span></span><br><span class="line">    prepare(optResolver),</span><br><span class="line">    <span class="comment">// å¯¹æµè¿›è¡Œæ“ä½œï¼Œè·å–æ–‡ä»¶å†…å®¹ï¼Œå†™å…¥file.contentå±æ€§</span></span><br><span class="line">    <span class="comment">// é¢„è®¾ä¸ºBufferæ˜¯é€šè¿‡readBufferè·å–</span></span><br><span class="line">    <span class="comment">// å¦åˆ™åˆ™é€šè¿‡readStreamè·å–</span></span><br><span class="line">    readContents(optResolver),</span><br><span class="line">    <span class="comment">// å¯¹æ–‡ä»¶çš„æ˜ å°„ï¼Œæ˜¯å¦å¼€å¯ sourcemap</span></span><br><span class="line">    sourcemap(optResolver),</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    ä¸€æ­¥æ­¥çš„åŠ å·¥æˆstreams</span></span><br><span class="line"><span class="comment">    ä¼ äºpumpify</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> outputStream = pumpify.obj(streams);</span><br><span class="line">  <span class="comment">// è¿”å›outputStreamä½œä¸ºå‚æ•°çš„toThroughæµ</span></span><br><span class="line">  <span class="keyword">return</span> toThrough(outputStream);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = src;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œç®€å•çš„å°†å³æ˜¯æˆ‘ä»¬çš„gulp.srcä¾¿æ˜¯ä½¿ç”¨äºå°†åŒ¹é…çš„æ–‡ä»¶è½¬æ¢ä¸ºæµçš„å½¢å¼è¿›è€Œé€šè¿‡å„é¡¹å¤„ç†</p><p><strong>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹destä¸­å¯¹streamçš„å¤„ç†</strong></p><h2 id="ä¸‰ã€dest"><a href="#ä¸‰ã€dest" class="headerlink" title="ä¸‰ã€dest"></a>ä¸‰ã€dest</h2><p>æˆ‘ä»¬ä¾æ—§è¿›å…¥ç›¸åº”çš„ ./lib/dest/index.js ä¸­æŸ¥çœ‹å…¶å…¥å£æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">destä¸»è¦ä½œç”¨æ˜¯æ ¹æ®srcæ¥å£æ¥æ”¶é€è¿‡æ¥çš„è¾“å‡ºæµï¼Œå¹¶ç”Ÿæˆæ–‡ä»¶äºæŒ‡å®šæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// å°†æµä¿¡æ¯è½¬ä¸º</span></span><br><span class="line"><span class="keyword">var</span> lead = <span class="built_in">require</span>(<span class="string">'lead'</span>);</span><br><span class="line"><span class="comment">// ç»“åˆæµçš„é˜µåˆ—æˆä½¿ç”¨å•ä¸ªåŒå·¥æµæ³µå’Œduplexify</span></span><br><span class="line"><span class="comment">// å¦‚æœå…¶ä¸­ä¸€ä¸ªæµå…³é—­/é”™è¯¯ï¼Œç®¡é“ä¸­çš„æ‰€æœ‰æµéƒ½å°†è¢«é”€æ¯ã€‚</span></span><br><span class="line"><span class="keyword">var</span> pumpify = <span class="built_in">require</span>(<span class="string">'pumpify'</span>);</span><br><span class="line"><span class="comment">// åœ¨å†™å…¥æ–‡ä»¶å‰ç¡®è®¤ç›®æ ‡æ–‡ä»¶å¤¹å­˜åœ¨</span></span><br><span class="line"><span class="keyword">var</span> mkdirpStream = <span class="built_in">require</span>(<span class="string">'fs-mkdirp-stream'</span>);</span><br><span class="line"><span class="comment">// é…ç½®é€‰é¡¹çš„è§£æ</span></span><br><span class="line"><span class="keyword">var</span> createResolver = <span class="built_in">require</span>(<span class="string">'resolve-options'</span>);</span><br><span class="line"><span class="comment">// é…ç½®</span></span><br><span class="line"><span class="keyword">var</span> config = <span class="built_in">require</span>(<span class="string">'./options'</span>);</span><br><span class="line"><span class="comment">// ç”¨äºæ¯”è¾ƒ</span></span><br><span class="line"><span class="keyword">var</span> prepare = <span class="built_in">require</span>(<span class="string">'./prepare'</span>);</span><br><span class="line"><span class="comment">// ç”Ÿæˆsourcemap</span></span><br><span class="line"><span class="keyword">var</span> sourcemap = <span class="built_in">require</span>(<span class="string">'./sourcemap'</span>);</span><br><span class="line"><span class="keyword">var</span> writeContents = <span class="built_in">require</span>(<span class="string">'./write-contents'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> folderConfig = &#123;</span><br><span class="line">  outFolder: &#123;</span><br><span class="line">    type: <span class="string">'string'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dest</span>(<span class="params">outFolder, opt</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¦‚æœç›®æ ‡outFolderä¸ºç©º---&gt;æŠ¥é”™</span></span><br><span class="line">  <span class="keyword">if</span> (!outFolder) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Invalid dest() folder argument.'</span> +</span><br><span class="line">      <span class="string">' Please specify a non-empty string or a function.'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é…ç½®ä¸ç”¨æˆ·ä¼ å…¥é…ç½®çš„è§£æ</span></span><br><span class="line">  <span class="keyword">var</span> optResolver = createResolver(config, opt);</span><br><span class="line">  <span class="comment">// æ–‡ä»¶è·¯å¾„çš„é…ç½®è§£æ---åœ°å€</span></span><br><span class="line">  <span class="keyword">var</span> folderResolver = createResolver(folderConfig, &#123; <span class="attr">outFolder</span>: outFolder &#125;);</span><br><span class="line">  <span class="comment">// </span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">dirpath</span>(<span class="params">file, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dirMode = optResolver.resolve(<span class="string">'dirMode'</span>, file);</span><br><span class="line"></span><br><span class="line">    callback(<span class="literal">null</span>, file.dirname, dirMode);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æµ</span></span><br><span class="line">  <span class="keyword">var</span> saveStream = pumpify.obj(</span><br><span class="line">    <span class="comment">// æå–ä»¥åŠæ ¡éªŒæµä¿¡æ¯</span></span><br><span class="line">    prepare(folderResolver, optResolver),</span><br><span class="line">    <span class="comment">// ç”Ÿæˆsourcemapåœ°å›¾</span></span><br><span class="line">    sourcemap(optResolver),</span><br><span class="line">    <span class="comment">// ä¼ å…¥è§£ædirModeçš„ä»¥ä¸‹æ–¹æ³•ï¼Œ...</span></span><br><span class="line">    mkdirpStream.obj(dirpath),</span><br><span class="line">    <span class="comment">// æƒ³åˆåçš„ç›¸åº”é…ç½®ä¼ å…¥writeContentsï¼Œç„¶åå†™å…¥ç›¸åº”æ–‡ä»¶</span></span><br><span class="line">    writeContents(optResolver)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Sink the output stream to start flowing</span></span><br><span class="line">  <span class="comment">// æµæ²‰æ·€ä¸ºæ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">return</span> lead(saveStream);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = dest;</span><br></pre></td></tr></table></figure><p>ä¾æ®ç€ç›¸åº”çš„æ¨¡å—æŒ‡ç¤ºï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¤§è‡´çš„æ¸…æ¥šäº†gulpè¿›è¡Œæ‰“åŒ…æ“ä½œçš„æµç¨‹</p>]]></content>
      
      
      
        <tags>
            
            <tag> Gulp </tag>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gulpæºç åˆ†æå­¦ä¹ (äºŒ</title>
      <link href="/2019/04/06/2019/Gulp%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0-%E4%BA%8C/"/>
      <url>/2019/04/06/2019/Gulp%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0-%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="undertakeræ¨¡å—æ–‡ä»¶åˆ†æ"><a href="#undertakeræ¨¡å—æ–‡ä»¶åˆ†æ" class="headerlink" title="undertakeræ¨¡å—æ–‡ä»¶åˆ†æ"></a>undertakeræ¨¡å—æ–‡ä»¶åˆ†æ</h2><p>æˆ‘ä»¬ä»ä¸Šä¸€ç¯‡çš„å…¥å£æ–‡ä»¶åˆ†æå¯ä»¥å¾—çŸ¥ï¼Œ<strong>Gulp</strong>è¿›è¡Œtaskã€seriesã€parallelç­‰ä»»åŠ¡æ—¶ï¼Œæ‰€æ‰§è¡Œçš„æ–¹æ³•å…¥å£å…¶å®æ¥æºäº<em>undertaker</em>æ¨¡å—</p><p>å› æ­¤æˆ‘ä»¬ä¹Ÿè¿›å…¥ç›¸åº”çš„<em>undertaker</em>æ¨¡å—ä¸€æ¢ç©¶ç«Ÿ</p><h2 id="ä¸€ã€undertaker-index-js"><a href="#ä¸€ã€undertaker-index-js" class="headerlink" title="ä¸€ã€undertaker-index.js"></a>ä¸€ã€undertaker-index.js</h2><a id="more"></a><p>undertakeræ¨¡å—ä¸‹çš„index.jsæ–¹æ³• =&gt;</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Nodeå·¥å…·å‡½æ•°ä¸­çš„ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">var</span> inherits = <span class="keyword">require</span>(<span class="string">'util'</span>).inherits;</span><br><span class="line"><span class="comment">// Nodeä¸­çš„äº‹ä»¶è§¦å‘å™¨</span></span><br><span class="line"><span class="keyword">var</span> EventEmitter = <span class="keyword">require</span>(<span class="string">'events'</span>).EventEmitter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> DefaultRegistry = <span class="keyword">require</span>(<span class="string">'undertaker-registry'</span>);</span><br><span class="line"><span class="keyword">var</span> tree = <span class="keyword">require</span>(<span class="string">'./lib/tree'</span>);</span><br><span class="line"><span class="keyword">var</span> task = <span class="keyword">require</span>(<span class="string">'./lib/task'</span>);</span><br><span class="line"><span class="keyword">var</span> series = <span class="keyword">require</span>(<span class="string">'./lib/series'</span>);</span><br><span class="line"><span class="keyword">var</span> lastRun = <span class="keyword">require</span>(<span class="string">'./lib/last-run'</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="keyword">parallel</span> = <span class="keyword">require</span>(<span class="string">'./lib/parallel'</span>);</span><br><span class="line"><span class="keyword">var</span> registry = <span class="keyword">require</span>(<span class="string">'./lib/registry'</span>);</span><br><span class="line"><span class="keyword">var</span> _getTask = <span class="keyword">require</span>(<span class="string">'./lib/get-task'</span>);</span><br><span class="line"><span class="keyword">var</span> _setTask = <span class="keyword">require</span>(<span class="string">'./lib/set-task'</span>);</span><br></pre></td></tr></table></figure><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">inherits(Undertaker, EventEmitter);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç„¶åç»§ç»­çœ‹ä¸€ä¸‹å…¶ä»–æ¨¡å—æ–¹æ³•çš„å…·ä½“ä½œç”¨</span></span><br><span class="line">Undertaker.prototype.tree = tree;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.task = task;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.series = series;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.lastRun = lastRun;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.parallel = parallel;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.registry = registry;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype._getTask = _getTask;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype._setTask = _setTask;</span><br></pre></td></tr></table></figure><p>ä¾æ—§é‡‡ç”¨æ ¸å¿ƒå·¥å…·å‡½æ•°çš„inheritsæ–¹æ³•è¿›è¡Œæ„é€ å‡½æ•°çš„ç»§æ‰¿</p><p>inherits(Undertaker, EventEmitter); æ­¤å¤„ä½¿å¾—<strong>Undertake</strong>ræ„é€ å‡½æ•°ç»§æ‰¿è‡ª<strong>Node</strong>æ ¸å¿ƒæ¨¡å—<strong>EventEmitter</strong> çš„åŸå‹é“¾ä¸Šæ–¹æ³•ï¼Œä»¥åŠå°†EventEmitterçš„æ„é€ å‡½æ•°ç»‘å®šåœ¨Undertakeræ„é€ å‡½æ•°çš„<strong>super_</strong>ä¸Šã€‚</p><p>å¹¶ä¸”å°†æˆ‘ä»¬åœ¨å¼€å§‹éƒ¨åˆ†æ‰€requireè¿›æ¥çš„æ–¹æ³•å‡½æ•°æ·»åŠ è‡³åŸå§‹é“¾prototypeä¸Šï¼Œä»¥ä¾¿è°ƒç”¨</p><font color="ffff00"><em>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…¶ä¸­è¿˜æœ‰ä¸€ä¸ªä¸»æ–¹æ³•ï¼Œå½“ä¸­åˆå®ç°äº†ä»€ä¹ˆå‘¢ =&gt; ?</em></font><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Undertaker</span><span class="params">(customRegistry)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  EventEmitter.call(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹DefaultRegistry(undertaker-registry)éƒ½å¹²äº†ä»€ä¹ˆ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">this</span>._registry = <span class="keyword">new</span> DefaultRegistry();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…è®¸ç”¨æˆ·è‡ªå®šä¹‰çš„å¯„å­˜å™¨ä»»åŠ¡</span></span><br><span class="line">  <span class="keyword">if</span> (customRegistry) &#123;</span><br><span class="line">    <span class="keyword">this</span>.registry(customRegistry);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// process.env =&gt; åŒ…å«å¯¹ç”¨æˆ·ç¯å¢ƒä¿¡æ¯çš„ å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">this</span>._settle = (process.env.UNDERTAKER_SETTLE === <span class="string">'true'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>EventEmitter.call(this); å°†EventEmitteræ‰§è¡Œå‡½æ•°çš„thisç»‘å®š</p><p>this._registry = new DefaultRegistry(); newäº†ä¸€ä¸ªDefaultRegistryçš„å®ä¾‹èµ‹äºˆthis._registryå±æ€§</p><p>// åä¸¤å¥æˆ‘ä»¬ç¨åå¤„ç†</p><p><em>DefaultRegistry</em>æ¥æºäº<em>undertaker-registry</em></p><p>å¥½çš„ï¼Œé‚£è®©æˆ‘ä»¬ç°åœ¨æ¥çœ‹ä¸€ä¸‹ï¼Œ<strong>undertaker-registry</strong> éƒ½å°†å¹²äº›ä»€ä¹ˆäº‹ã€‚</p><h2 id="äºŒã€undertaker-registry-index-js"><a href="#äºŒã€undertaker-registry-index-js" class="headerlink" title="äºŒã€undertaker-registry - index.js"></a>äºŒã€undertaker-registry - index.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æä¾›äº†å½¢å¦‚getã€setçš„æ¥å£,å……å½“å¯„å­˜å™¨çš„ä½œç”¨å­˜æ”¾ç€é‚£äº›ä»»åŠ¡é˜Ÿåˆ—</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DefaultRegistry</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> DefaultRegistry === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DefaultRegistry();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>._tasks = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯èƒ½æ˜¯åˆå§‹åŒ–çš„ä½œç”¨</span></span><br><span class="line">DefaultRegistry.prototype.init = <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">taker</span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»ä¸Šè¾¹çš„_taskså¯¹è±¡ä¸­å»key=nameçš„é‚£ä¸ª</span></span><br><span class="line">DefaultRegistry.prototype.get = <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>._tasks[name];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// setçš„æ—¶å€™,é’ˆå¯¹ä¼ å…¥çš„nameä½œä¸ºkey,å­˜æ”¾ç›¸åº”çš„å¤„ç†æ–¹æ³•fn</span></span><br><span class="line">DefaultRegistry.prototype.set = <span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>._tasks[name] = fn;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">DefaultRegistry.prototype.tasks = <span class="function"><span class="keyword">function</span> <span class="title">tasks</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="comment">// æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨-&gt;æ‰©å±•-&gt;reduce()çš„ç”¨æ³•</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>._tasks).reduce(<span class="function"><span class="keyword">function</span>(<span class="params">tasks, name</span>) </span>&#123;</span><br><span class="line">    tasks[name] = self.get(name);</span><br><span class="line">    <span class="keyword">return</span> tasks;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line">  <span class="comment">// &#123;&#125;å°†ä½œä¸ºtasksçš„åˆå§‹å€¼-&gt;ä¹Ÿå°±æ˜¯=&gt; ç›¸å½“äºä»¤ä¸€å¼€å§‹çš„  tasks=&#123;&#125;,  æœ€ç»ˆè¿”å›</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = DefaultRegistry;</span><br></pre></td></tr></table></figure><p>undertaker-registryæ–¹æ³•ï¼Œå¢åŠ åœ¨å…¶æ„é€ å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡_tasks = {}</p><p>å¹¶ä¸”åœ¨å…¶åŸå‹é“¾ä¸Šæä¾›äº†å››ä¸ªæ–¹æ³•</p><ul><li>init</li><li>get</li><li>set</li><li>tasks</li></ul><p>ä¹Ÿå°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå†…éƒ¨å±æ€§_registryä½œä¸ºå¯„å­˜å™¨<strong>æ³¨å†Œ/å¯„å­˜å™¨æ¨¡å¼çš„å®ç°ï¼Œæä¾›ç»Ÿä¸€æ¥å£æ¥å­˜å‚¨å’Œè¯»å– tasks</strong></p><h3 id="å›åˆ°undertaker-index-js"><a href="#å›åˆ°undertaker-index-js" class="headerlink" title="å›åˆ°undertaker-index.js"></a>å›åˆ°undertaker-index.js</h3><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…è®¸ç”¨æˆ·è‡ªå®šä¹‰çš„å¯„å­˜å™¨ä»»åŠ¡</span></span><br><span class="line">  <span class="keyword">if</span> <span class="comment">(customRegistry)</span> &#123;</span><br><span class="line">    this.registry<span class="comment">(customRegistry)</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥çš„è¿™ä¸€å¥ï¼š</p><p>æ˜¯æ ¹æ®å‰éƒ¨å¼•å…¥çš„æ¥å®ç°çš„ï¼Œé‚£ä¹ˆå®ƒå…·ä½“å®ç°äº†ä»€ä¹ˆåŠŸèƒ½å‘¢ï¼Ÿ<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">var registry</span> = require(<span class="string">'./lib/registry'</span>);</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ =&gt; </p><h2 id="ä¸‰ã€-lib-registry"><a href="#ä¸‰ã€-lib-registry" class="headerlink" title="ä¸‰ã€ ./lib/registry"></a>ä¸‰ã€ ./lib/registry</h2><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setTasks</span></span>(inst, task, name) &#123;</span><br><span class="line">  inst.<span class="keyword">set</span>(name, task);</span><br><span class="line">  <span class="keyword">return</span> inst;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">registry</span></span>(<span class="keyword">new</span><span class="type">Registry</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">new</span><span class="type">Registry</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._registry;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//éªŒè¯æ˜¯å¦æœ‰æ•ˆï¼Œä¸»è¦åˆ¤æ–­æ˜¯å¦å¸¦æœ‰ .get/.set/.tasks/.init æ¥å£ï¼Œè‹¥ä¸ç¬¦åˆåˆ™æŠ›å‡ºé”™è¯¯</span></span><br><span class="line">  validateRegistry(<span class="keyword">new</span><span class="type">Registry</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> tasks = <span class="built_in">this</span>._registry.tasks();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å°†ç°æœ‰ tasks æ‹·è´åˆ°æ–°çš„å¯„å­˜å™¨ä¸Š</span></span><br><span class="line">  <span class="built_in">this</span>._registry = reduce(tasks, setTasks, <span class="keyword">new</span><span class="type">Registry</span>);</span><br><span class="line">  <span class="comment">//è°ƒç”¨åˆå§‹åŒ–æ¥å£ï¼ˆæ— è®ºæ˜¯å¦éœ€è¦ï¼Œå¯„å­˜å™¨åŠ¡å¿…å¸¦æœ‰ä¸€ä¸ªinitæ¥å£ï¼‰</span></span><br><span class="line">  <span class="built_in">this</span>._registry.init(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = registry;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œå°†æ¥é€æ­¥åˆ†æå…¶ä½™å„ä»»åŠ¡æ–¹æ³•æ¨¡å—çš„ä½œç”¨</p><p>å…¶ä¸­åŒ…æ‹¬</p><p>Undertaker.prototype.tree = tree; </p><p>Undertaker.prototype.task = task; </p><p>Undertaker.prototype.series = series;</p><p>Undertaker.prototype.lastRun = lastRun;</p><p>Undertaker.prototype.parallel = parallel;</p><p>Undertaker.prototype.registry = registry;</p><p>Undertaker.prototype._getTask = _getTask;</p><p>Undertaker.prototype._setTask = _setTask;</p><p>å°†æŒ‰ä»¥ä¸‹é¡ºåºè¿›è¡Œ =&gt; </p><p><strong>/lib/set-task</strong></p><p><strong>/lib/get-task</strong></p><p><strong>/lib/last-run</strong></p><p><strong>/lib/task</strong></p><p><strong>/lib/tree</strong></p><p><strong>/lib/series</strong></p><p><strong>/lib/parallel</strong></p><h2 id="å››ã€-lib-set-task"><a href="#å››ã€-lib-set-task" class="headerlink" title="å››ã€./lib/set-task"></a>å››ã€./lib/set-task</h2><p>set-task</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> metadata = <span class="built_in">require</span>(<span class="string">'./helpers/metadata'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">var WM = require('es6-weak-map');</span></span><br><span class="line"><span class="comment">var metadata = new WM();</span></span><br><span class="line"><span class="comment">=&gt;ES6ä¸­çš„WeakMapæ–°ç±»å‹,åœ¨å…¶ä¸­å¼•ç”¨çš„å¯¹è±¡ä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶,ä¾‹å¦‚ä¹¦ä¸­è®²å¯ç”¨äºå­˜æ”¾ä¸€äº›DOMç›¸å…³å¯¹è±¡</span></span><br><span class="line"><span class="comment">=&gt;æ­¤å¤„ä¸ºä»€ä¹ˆç”¨WeakMapä¸ç”¨Map,å¯èƒ½æ˜¯æ–¹ä¾¿ä»»åŠ¡æ‰§è¡Œç»“æŸ,æœ‰æ•ˆæ¸…ç†å†…å­˜</span></span><br><span class="line"><span class="comment">æä¾›getã€setç­‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// setæ–¹æ³•é‡‡ç”¨äº†map(WeakMap)çš„æ•°æ®ç±»å‹è¿›è¡Œå­˜æ”¾</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æš´éœ²äº†ä¸€ä¸ªsetæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¶ä¸­å¯¹taskç¬¬ä¸€ä¸ªå‚æ•°çš„nameè¿›è¡Œç±»å‹åˆ¤æ–­=&gt;é”™è¯¯åˆ™æŠ¥</span></span><br><span class="line">  assert(name, <span class="string">'Task name must be specified'</span>);</span><br><span class="line">  assert(<span class="keyword">typeof</span> name === <span class="string">'string'</span>, <span class="string">'Task name must be a string'</span>);</span><br><span class="line">  assert(<span class="keyword">typeof</span> fn === <span class="string">'function'</span>, <span class="string">'Task function must be specified'</span>);</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ç»‘å®šthis, åœ¨thisä¸­ä½¿ç”¨å‚æ•° fn å¯¹è±¡çš„æ–¹æ³•ä»¥åŠå‚æ•°</span></span><br><span class="line">  <span class="comment">// å› ä¸ºWeakMapä¸­è¦æ±‚çš„keyå¯¹è±¡ä¸èƒ½è¢«å¼•ç”¨è¿‡</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">taskWrapper</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªæ–°åŒ…è£…thisåçš„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">unwrap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›åŸæœ¬çš„fnå‡½æ•°æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">return</span> fn;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†nameã€fnåŒ…è£…</span></span><br><span class="line">  taskWrapper.unwrap = unwrap;</span><br><span class="line">  taskWrapper.displayName = name;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ‰“å°ä¸€ä¸‹è¾“å‡ºæ˜¯ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`taskWrapperï¼š <span class="subst">$&#123;taskWrapper&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> meta = metadata.get(fn) || &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰“å°ä¸€ä¸‹è¾“å‡ºæ˜¯ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`meta: <span class="subst">$&#123;meta&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> nodes = [];</span><br><span class="line">  <span class="keyword">if</span> (meta.branch) &#123;</span><br><span class="line">    nodes.push(meta.tree);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> task = <span class="keyword">this</span>._registry.set(name, taskWrapper) || taskWrapper;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰“å°ä¸€ä¸‹è¾“å‡ºæ˜¯ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`task: <span class="subst">$&#123;task&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å­˜å…¥WeakMapå¯¹è±¡</span></span><br><span class="line">  metadata.set(task, &#123;</span><br><span class="line">    name: name,</span><br><span class="line">    orig: fn,</span><br><span class="line">    tree: &#123;</span><br><span class="line">      label: name,</span><br><span class="line">      type: <span class="string">'task'</span>,</span><br><span class="line">      nodes: nodes,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰“å°ä¸€ä¸‹è¾“å‡ºæ˜¯ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`metadata: <span class="subst">$&#123;metadata.get(task)&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">set</span>;</span><br></pre></td></tr></table></figure><h2 id="äº”ã€-lib-get-task"><a href="#äº”ã€-lib-get-task" class="headerlink" title="äº”ã€./lib/get-task"></a>äº”ã€./lib/get-task</h2><p>get-taskæ–¹æ³•æ¨¡å—ä»£ç å¾ˆç®€å•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå°±æ˜¯å¯¹undertaker-registryä¸­çš„getæ–¹æ³•æå–</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä»_registryå¯„å­˜å™¨ä¸­get</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>._registry.get(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">get</span>;</span><br></pre></td></tr></table></figure><h2 id="å…­ã€-lib-last-run"><a href="#å…­ã€-lib-last-run" class="headerlink" title="å…­ã€./lib/last-run"></a>å…­ã€./lib/last-run</h2><p>ç”¨æ¥è®°å½•å’Œè·å–é’ˆå¯¹æŸä¸ªæ–¹æ³•çš„æ‰§è¡Œå‰/åæ—¶é—´</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// npmä¸­å…¶ä»‹ç»çš„åŠŸèƒ½ä¸º,è®°å½•å‡½æ•°çš„æ—¶é—´ç‚¹ =&gt; å¯¹metadataå¯¹è±¡çš„å±æ€§ä¸€é¡¿æ“ä½œ</span></span><br><span class="line"><span class="keyword">var</span> retrieveLastRun = <span class="built_in">require</span>(<span class="string">'last-run'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> metadata = <span class="built_in">require</span>(<span class="string">'./helpers/metadata'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lastRun</span>(<span class="params">task, timeResolution</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (timeResolution == <span class="literal">null</span>) &#123;</span><br><span class="line">    timeResolution = process.env.UNDERTAKER_TIME_RESOLUTION;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> fn = task;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> task === <span class="string">'string'</span>) &#123;</span><br><span class="line">    fn = <span class="keyword">this</span>._getTask(task);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> meta = metadata.get(fn);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (meta) &#123;</span><br><span class="line">    fn = meta.orig || fn;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> retrieveLastRun(fn, timeResolution);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = lastRun;</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€-lib-tree"><a href="#ä¸ƒã€-lib-tree" class="headerlink" title="ä¸ƒã€./lib/tree"></a>ä¸ƒã€./lib/tree</h2><p>é€šè¿‡éå†metadataï¼Œè·å–å½“å‰æ³¨å†Œè¿‡çš„æ‰€æœ‰ä»»åŠ¡çš„metadata</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'use strict'</span>;</span><br><span class="line"></span><br><span class="line">var defaults = <span class="built_in">require</span>(<span class="string">'object.defaults'</span>);</span><br><span class="line">var map = <span class="built_in">require</span>(<span class="string">'collection-map'</span>);</span><br><span class="line"></span><br><span class="line">var metadata = <span class="built_in">require</span>(<span class="string">'./helpers/metadata'</span>);</span><br><span class="line"></span><br><span class="line">// å¯ç”¨äºè·å–å½“å‰æ³¨å†Œè¿‡çš„æ‰€æœ‰ä»»åŠ¡çš„metadata-WeakMap</span><br><span class="line">// ä¹Ÿå°±æ˜¯è¯´,å¯ä»¥è·å–åˆ°å½“å‰æˆ‘ä»¬å®šä¹‰äº†é‚£äº›ä»»åŠ¡,å¯¹åº”æ–¹æ³•,ä»»åŠ¡é—´ä¾èµ–ç­‰å…³ç³»</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tree</span><span class="params">(opts)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">  // æ­¤æ–¹æ³•ä¼šè¦†ç›–åˆ¤æ–­æ˜¯å¦å­˜åœ¨opts,å¹¶è¦†ç›–å…¶ä¸­çš„&#123;deep: <span class="literal">false</span>&#125;</span><br><span class="line">  opts = defaults(opts || &#123;&#125;, &#123;</span><br><span class="line">    deep: <span class="literal">false</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  // è·å–å¯„å­˜å™¨ä¸­çš„tasks</span><br><span class="line">  var tasks = this._registry.tasks();</span><br><span class="line">  </span><br><span class="line">  // éå†taskså¹¶ä¸”è¿”å›WeakMap(metadata)çš„â€œä»»åŠ¡æ•°ç»„â€ </span><br><span class="line">  var nodes = map(tasks, <span class="function"><span class="keyword">function</span><span class="params">(task)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    var meta = metadata.get(task);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (opts.deep) &#123;</span><br><span class="line">      <span class="keyword">return</span> meta.tree;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> meta.tree.label;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    label: <span class="string">'Tasks'</span>,</span><br><span class="line">    nodes: nodes,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = tree;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">var undertaker = <span class="built_in">require</span>(<span class="string">'undertaker'</span>);</span><br><span class="line">ut = new undertaker();</span><br><span class="line"></span><br><span class="line">ut.task(<span class="string">'taskA'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span></span>&#123;console.<span class="built_in">log</span>(<span class="string">'A'</span>); cb()&#125;);</span><br><span class="line">ut.task(<span class="string">'taskB'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span></span>&#123;console.<span class="built_in">log</span>(<span class="string">'B'</span>); cb()&#125;);</span><br><span class="line">ut.task(<span class="string">'taskC'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span></span>&#123;console.<span class="built_in">log</span>(<span class="string">'C'</span>); cb()&#125;);</span><br><span class="line">ut.task(<span class="string">'taskD'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span></span>&#123;console.<span class="built_in">log</span>(<span class="string">'D'</span>); cb()&#125;);</span><br><span class="line">ut.task(<span class="string">'taskE'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span></span>&#123;console.<span class="built_in">log</span>(<span class="string">'E'</span>); cb()&#125;);</span><br><span class="line"></span><br><span class="line">ut.task(<span class="string">'taskC'</span>, ut.series(<span class="string">'taskA'</span>, <span class="string">'taskB'</span>));</span><br><span class="line">ut.task(<span class="string">'taskE'</span>, ut.parallel(<span class="string">'taskC'</span>, <span class="string">'taskD'</span>));</span><br><span class="line"></span><br><span class="line">var tree = ut.tree();</span><br><span class="line">console.<span class="built_in">log</span>(tree);</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h2 id="å…«ã€-lib-task"><a href="#å…«ã€-lib-task" class="headerlink" title="å…«ã€./lib/task"></a>å…«ã€./lib/task</h2><p>ä½¿ç”¨ä¸¾ä¾‹ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">gulp.task(<span class="string">'css_comm'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src([<span class="string">'1.css'</span>,<span class="string">'2.css'</span>])</span><br><span class="line">      .pipe(<span class="built_in">concat</span>(<span class="string">'common.css'</span>))</span><br><span class="line">      .pipe(gulp.dest(<span class="string">'./build/css'</span>))</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">task</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ­¤å¤„ ifåˆ¤æ–­ å†™æ³•ä¸ºå¤„ç†â€œæ–°â€æ‰“åŒ…å†™æ³•</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  function uglify()&#123;</span></span><br><span class="line"><span class="comment">    return gulp.src(['src/*.js'])</span></span><br><span class="line"><span class="comment">        .pipe(uglify())</span></span><br><span class="line"><span class="comment">        .pipe(gulp.dest('dist'));</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  gulp.task(uglify);</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">'function'</span>) &#123;</span><br><span class="line">    fn = name;</span><br><span class="line">    name = fn.displayName || fn.name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å½“ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸ºç©ºä¸å­˜åœ¨æ—¶ï¼Œå³æ˜¯å¯¹ç›¸åº”ä»»åŠ¡çš„è·å–----é…åˆä¸Šä¸€æ®µ  if ä¸€èµ·çœ‹</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    gulp.task('css_comm', function() &#123;</span></span><br><span class="line"><span class="comment">    &#125;);</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">if</span> (!fn) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._getTask(name);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è°ƒæ•´å¥½å…³ç³»,å†æ¬¡å­˜å…¥task</span></span><br><span class="line">  <span class="keyword">this</span>._setTask(name, fn);</span><br><span class="line">  <span class="comment">// console.log(`name: $&#123;name&#125;, fn: $&#123;fn&#125;`)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/*æ­¤ä¸¤å¤„çš„_getTaskå’Œ_setTask=&gt;å¯ä»¥çœ‹ä¸€ä¸‹,ç±»ä¼¼äºä¸€å¼€å§‹DefaultRegistryä¸­å¯¹tasksä¸­</span></span><br><span class="line"><span class="comment">    ä»»åŠ¡çš„æ“ä½œ(get\set)</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = task;</span><br></pre></td></tr></table></figure><h2 id="ä¹ã€-lib-parallel"><a href="#ä¹ã€-lib-parallel" class="headerlink" title="ä¹ã€./lib/parallel"></a>ä¹ã€./lib/parallel</h2><p>this.parallelçš„ä½¿ç”¨ =&gt;</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var undertaker = <span class="built_in">require</span>(<span class="string">'undertaker'</span>);</span><br><span class="line">ut = new undertaker();</span><br><span class="line"></span><br><span class="line">  ut.task(<span class="string">'taskA'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskB'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskC'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskD'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// taskD éœ€è¦åœ¨ <span class="string">'taskA'</span>, <span class="string">'taskB'</span>, <span class="string">'taskC'</span> æ‰§è¡Œå®Œæ¯•åæ‰å¼€å§‹æ‰§è¡Œï¼Œ</span><br><span class="line">// å…¶ä¸­ <span class="string">'taskA'</span>, <span class="string">'taskB'</span>, <span class="string">'taskC'</span> çš„æ‰§è¡Œæ˜¯å¼‚æ­¥çš„</span><br><span class="line">ut.task(<span class="string">'taskD'</span>, ut.parallel(<span class="string">'taskA'</span>, <span class="string">'taskB'</span>, <span class="string">'taskC'</span>));</span><br></pre></td></tr></table></figure><p><strong>é‚£è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹parallelä¸­åˆ†åˆ«å®ç°äº†äº›ä»€ä¹ˆå§ï¼</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bach = <span class="built_in">require</span>(<span class="string">'bach'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> metadata = <span class="built_in">require</span>(<span class="string">'./helpers/metadata'</span>);</span><br><span class="line"><span class="keyword">var</span> buildTree = <span class="built_in">require</span>(<span class="string">'./helpers/buildTree'</span>);</span><br><span class="line"><span class="keyword">var</span> normalizeArgs = <span class="built_in">require</span>(<span class="string">'./helpers/normalizeArgs'</span>);</span><br><span class="line"><span class="keyword">var</span> createExtensions = <span class="built_in">require</span>(<span class="string">'./helpers/createExtensions'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parallel</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> create = <span class="keyword">this</span>._settle ? bach.settleParallel : bach.parallel;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¹æ®â€œä»»åŠ¡â€æ•°ç»„ä»å¯„å­˜å™¨ä¸­è·å–å±•å¼€çš„ä»»åŠ¡æ•°ç»„</span></span><br><span class="line">  <span class="keyword">var</span> args = normalizeArgs(<span class="keyword">this</span>._registry, <span class="built_in">arguments</span>);</span><br><span class="line">  <span class="comment">// ä¸ºå¯¹è±¡æ‰©å±•æ–°â€œâ€å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">var</span> extensions = createExtensions(<span class="keyword">this</span>);</span><br><span class="line">  <span class="comment">// å°†å‚æ•°ä¸æ‰©å±•çš„å¯¹è±¡(after,before,create,error)åšå…³è”</span></span><br><span class="line">  <span class="comment">// æ‰€ä»¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å®ƒå…·ä½“å®ç°äº†äº›ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// bach.settleParallel+</span></span><br><span class="line">  </span><br><span class="line">  (args, extensions) : bach.parallel(args, extensions)</span><br><span class="line">  <span class="keyword">var</span> fn = create(args, extensions);</span><br><span class="line"></span><br><span class="line">  fn.displayName = <span class="string">'&lt;parallel&gt;'</span>;</span><br><span class="line"></span><br><span class="line">  metadata.set(fn, &#123;</span><br><span class="line">    name: fn.displayName,</span><br><span class="line">    branch: <span class="literal">true</span>,</span><br><span class="line">    tree: &#123;</span><br><span class="line">      label: fn.displayName,</span><br><span class="line">      type: <span class="string">'function'</span>,</span><br><span class="line">      branch: <span class="literal">true</span>,</span><br><span class="line">      nodes: buildTree(args),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> fn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = parallel;</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬ä»ä¸Šåˆ°ä¸‹çš„åˆ†æä¸€ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®â€œä»»åŠ¡â€æ•°ç»„ä»å¯„å­˜å™¨ä¸­è·å–å±•å¼€çš„ä»»åŠ¡æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> args = normalizeArgs(<span class="keyword">this</span>._registry, <span class="built_in">arguments</span>);</span><br></pre></td></tr></table></figure><p><strong>normalizeArgs</strong> æ–¹æ³•æ˜¯æ¥æºäºæ¨¡å— <strong>./helpers/normalizeArgs</strong></p><p>é‚£è®©æˆ‘ä»¬è½¬å‘æ¥çœ‹ä¸€ä¸‹æ­¤æ¨¡å—</p><h3 id="ä¹-1-ã€normalizeArgs"><a href="#ä¹-1-ã€normalizeArgs" class="headerlink" title="ä¹(1)ã€normalizeArgs"></a>ä¹(1)ã€normalizeArgs</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// nODEçš„æ–­è¨€æµ‹è¯•</span></span><br><span class="line"><span class="keyword">var</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»ä¼¼äºArray.map()çš„æ”¹è¿›ç‰ˆæœ¬=&gt;æœ€ç»ˆè¿”å›çš„ä¹Ÿæ˜¯æ•°ç»„</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">:npmä¸­çš„è®²è§£</span></span><br><span class="line"><span class="comment">map(['a', 'b', 'c'], function(ele, i) &#123;</span></span><br><span class="line"><span class="comment">  return i + ele;</span></span><br><span class="line"><span class="comment">&#125;);</span></span><br><span class="line"><span class="comment">//=&gt; ['0a', '1b', '2c']</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> map = <span class="built_in">require</span>(<span class="string">'arr-map'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æ•°ç»„å±•å¼€ä¸ºå¹³é¢æ•°ç»„,è§£é™¤åµŒå¥—</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">flatten(['a', ['b', ['c']], 'd', ['e']]);</span></span><br><span class="line"><span class="comment">//=&gt; ['a', 'b', 'c', 'd', 'e']*/</span></span><br><span class="line"><span class="keyword">var</span> flatten = <span class="built_in">require</span>(<span class="string">'arr-flatten'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶åˆ°å¯„å­˜å™¨ä»¥åŠç›¸åº”çš„â€œä»»åŠ¡æ•°ç»„â€</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">normalizeArgs</span>(<span class="params">registry, args</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¼ é€’å…¥ä¸€ä¸ªä¸€ä¸ªçš„â€œä»»åŠ¡â€æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getFunction</span>(<span class="params">task</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// taskç±»å‹åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> task === <span class="string">'function'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> task;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»æˆ‘ä»¬å¯„å­˜å™¨ä¸­æ‰¾åˆ°æœ‰æ²¡æœ‰è¿™ä¸ªkeyçš„function,å› ä¸ºå­˜åœ¨æ—§çš„å†™æ³•----ä¸çŸ¥æ˜¯å¦æœ‰ç†è§£é”™</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    gulp.task('uglify', function()&#123;</span></span><br><span class="line"><span class="comment">        return gulp.src(['src/*.js'])</span></span><br><span class="line"><span class="comment">            .pipe(uglify())</span></span><br><span class="line"><span class="comment">            .pipe(gulp.dest('dist'));</span></span><br><span class="line"><span class="comment">    &#125;);</span></span><br><span class="line"><span class="comment">    gulp.task('default', ['uglify']);</span></span><br><span class="line"><span class="comment">    =&gt;ä¸Šé¢çš„ä¸€å¼€å§‹ç»™registryä¼ å…¥çš„æ˜¯ä¸€ä¸ªuglifyçš„key</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">var</span> fn = registry.get(task);</span><br><span class="line">    <span class="comment">// é”™è¯¯å¤„ç†</span></span><br><span class="line">    assert(fn, <span class="string">'Task never defined: '</span> + task);</span><br><span class="line">    <span class="comment">// å›</span></span><br><span class="line">    <span class="keyword">return</span> fn;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// â€œä»»åŠ¡æ•°ç»„â€å±•å¼€</span></span><br><span class="line">  <span class="keyword">var</span> flattenArgs = flatten(args);</span><br><span class="line">  <span class="comment">// æ ¹æ®é•¿åº¦,åˆ¤æ–­æ˜¯å¦å†™ç©ºäº†</span></span><br><span class="line">  assert(flattenArgs.length, <span class="string">'One or more tasks should be combined using series or parallel'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¹â€œä»»åŠ¡æ•°ç»„â€çš„ä»»åŠ¡è¿›è¡Œæ–¹æ³•çš„éå†</span></span><br><span class="line">  <span class="keyword">return</span> map(flattenArgs, getFunction);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = normalizeArgs;</span><br></pre></td></tr></table></figure><p>//é€šè¿‡å‚æ•°è·å–å­˜åœ¨å¯„å­˜å™¨ï¼ˆregistryï¼‰ä¸­çš„ taskFunctionsï¼ˆæ•°ç»„å½¢å¼ï¼‰<br>var args = normalizeArgs(this._registry, arguments);</p><p><strong>æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­é˜…è¯»ä¸‹ä¸€å¥ï¼š</strong><br>var extensions = createExtensions(this);</p><p>è€Œ<strong>createExtensions</strong>æ˜¯æ¥æºäºæ¨¡å—<strong>helpers/createExtensions</strong></p><p>é‚£ä¹ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹å…¶ä¸­å®ç°äº†ä»€ä¹ˆ = ?</p><h3 id="ä¹-2-ã€createExtensions"><a href="#ä¹-2-ã€createExtensions" class="headerlink" title="ä¹(2)ã€createExtensions"></a>ä¹(2)ã€createExtensions</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æŸå‡½æ•°,å¹¶è®°å½•æ•è·å½“å‰æ—¶é—´æˆ³æˆ–è€…ä¼ å…¥æ—¶é—´æˆ³</span></span><br><span class="line"><span class="keyword">var</span> captureLastRun = <span class="built_in">require</span>(<span class="string">'last-run'</span>).capture;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ä¸€ä¸ªfunctionå¹¶åˆ é™¤æœ€åä¸€æ¬¡è¿è¡Œæ—¶æ—¶é—´æˆ³</span></span><br><span class="line"><span class="keyword">var</span> releaseLastRun = <span class="built_in">require</span>(<span class="string">'last-run'</span>).release;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> metadata = <span class="built_in">require</span>(<span class="string">'./metadata'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> uid = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Storage</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> meta = metadata.get(fn);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.fn = meta.orig || fn;</span><br><span class="line">  <span class="keyword">this</span>.uid = uid++;</span><br><span class="line">  <span class="keyword">this</span>.name = meta.name;</span><br><span class="line">  <span class="keyword">this</span>.branch = meta.branch || <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">this</span>.captureTime = <span class="built_in">Date</span>.now();</span><br><span class="line">  <span class="keyword">this</span>.startHr = [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Storage.prototype.capture = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  captureLastRun(<span class="keyword">this</span>.fn, <span class="keyword">this</span>.captureTime);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Storage.prototype.release = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  releaseLastRun(<span class="keyword">this</span>.fn);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createExtensions</span>(<span class="params">ee</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    create: <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// è°ƒç”¨createæ—¶å€™,è®°å½•ä¸€ä¸‹ç›¸å…³ä¿¡æ¯,å¹¶è¿”å›</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Storage(fn);</span><br><span class="line">    &#125;,</span><br><span class="line">    before: <span class="function"><span class="keyword">function</span>(<span class="params">storage</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// Nodeè·å–ç›¸å¯¹äºè¿‡å»æŸä¸€åˆ»çš„æ—¶é—´</span></span><br><span class="line">      storage.startHr = process.hrtime();</span><br><span class="line">      <span class="comment">// Nodeè§¦å‘startäº‹ä»¶,åé¢ä¸ºå‚æ•°</span></span><br><span class="line">      ee.emit(<span class="string">'start'</span>, &#123;</span><br><span class="line">        uid: storage.uid,</span><br><span class="line">        name: storage.name,</span><br><span class="line">        branch: storage.branch,</span><br><span class="line">        time: <span class="built_in">Date</span>.now(),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    after: <span class="function"><span class="keyword">function</span>(<span class="params">result, storage</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// è°ƒç”¨æ—¶åˆ¤æ–­æ˜¯å¦æœ‰é”™,æœ‰åˆ™çˆ†</span></span><br><span class="line">      <span class="keyword">if</span> (result &amp;&amp; result.state === <span class="string">'error'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.error(result.value, storage);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// è®°å½•å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line">      storage.capture();</span><br><span class="line">      <span class="comment">// Nodeè§¦å‘stopäº‹ä»¶</span></span><br><span class="line">      ee.emit(<span class="string">'stop'</span>, &#123;</span><br><span class="line">        uid: storage.uid,</span><br><span class="line">        name: storage.name,</span><br><span class="line">        branch: storage.branch,</span><br><span class="line">        duration: process.hrtime(storage.startHr),</span><br><span class="line">        time: <span class="built_in">Date</span>.now(),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span>(<span class="params">error, storage</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(error)) &#123;</span><br><span class="line">        error = error[<span class="number">0</span>];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// åˆ é™¤å‡ºé”™çš„æ­¤æ¬¡æ‰§è¡Œæ—¶é—´æˆ³</span></span><br><span class="line">      storage.release();</span><br><span class="line">      ee.emit(<span class="string">'error'</span>, &#123;</span><br><span class="line">        uid: storage.uid,</span><br><span class="line">        name: storage.name,</span><br><span class="line">        branch: storage.branch,</span><br><span class="line">        error: error,</span><br><span class="line">        duration: process.hrtime(storage.startHr),</span><br><span class="line">        time: <span class="built_in">Date</span>.now(),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = createExtensions;</span><br></pre></td></tr></table></figure><p>æ­¤æ–¹æ³•æ‰©å±•ï¼Œä¸ºå˜é‡æ–°å¢æ‹¥æœ‰<strong>create</strong>ã€<strong>before</strong>ã€<strong>after</strong>ã€<strong>error</strong>ç­‰æ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡</p><p>æœ€ç»ˆæœŸæœ›å°†æ‰©å±•å‡ºæ¥çš„å¯¹è±¡ä¸æˆ‘ä»¬çš„â€œä»»åŠ¡â€taskå…³è”</p><p><strong>æ¥ç€æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸€å¥:</strong></p><p>var fn = create(args, extensions);</p><p>create =&gt; var create = this._settle ? bach.settleParallel : bach.parallel;</p><p><strong>bach</strong>æ¨¡å—æ¥æºäº<strong>bach</strong></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹bachæ¨¡å—å®ç°äº†äº›ä»€ä¹ˆ =&gt; ?</p><h3 id="ä¹-3-ã€bach"><a href="#ä¹-3-ã€bach" class="headerlink" title="ä¹(3)ã€bach"></a>ä¹(3)ã€bach</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  series: <span class="built_in">require</span>(<span class="string">'./lib/series'</span>),</span><br><span class="line">  parallel: <span class="built_in">require</span>(<span class="string">'./lib/parallel'</span>),</span><br><span class="line">  settleSeries: <span class="built_in">require</span>(<span class="string">'./lib/settleSeries'</span>),</span><br><span class="line">  settleParallel: <span class="built_in">require</span>(<span class="string">'./lib/settleParallel'</span>),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è€Œæˆ‘ä»¬æ‰€éœ€è¦ç”¨çš„çš„parallelæ˜¯æ¥æºäº<strong>lib/parallel</strong></p><p>è€Œ<strong>lib/parallel</strong>å…·ä½“ä»£ç å¦‚ä¸‹:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹æ•°ç»„å–å€¼æ“ä½œ,å–ç¬¬ä¸€åŠæœ€åä¸€ä¸ª</span></span><br><span class="line"><span class="keyword">var</span> initial = <span class="built_in">require</span>(<span class="string">'array-initial'</span>);</span><br><span class="line"><span class="keyword">var</span> last = <span class="built_in">require</span>(<span class="string">'array-last'</span>);</span><br><span class="line"><span class="comment">// ç”¨äºå¼‚æ­¥åŒ–å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> asyncDone = <span class="built_in">require</span>(<span class="string">'async-done'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nowAndLater = <span class="built_in">require</span>(<span class="string">'now-and-later'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> helpers = <span class="built_in">require</span>(<span class="string">'./helpers'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iterator</span>(<span class="params">fn, key, cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é‚£asyncDoneåˆæ˜¯åšä»€ä¹ˆçš„å‘¢ =&gt; ?</span></span><br><span class="line">  <span class="comment">// ä¼ å…¥ä¸€ä¸ªæ–¹æ³•ä¸å›è°ƒ</span></span><br><span class="line">  <span class="keyword">return</span> asyncDone(fn, cb);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildParallel</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ ¡éªŒä¼ å…¥å‚æ•°(argumentsçš„åˆæ³•æ€§)</span></span><br><span class="line">  <span class="keyword">var</span> args = helpers.verifyArguments(<span class="built_in">arguments</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å–åˆ°æœ€åä¸€ä¸ªå‚æ•°,å³ä¼ å…¥æ—¶çš„extensions,ç„¶åæ‰§è¡Œæ­¤æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// å¦‚æœæœ€åä¸€ä¸ªå‚æ•°!==functionåˆ™return å›</span></span><br><span class="line">  <span class="keyword">var</span> extensions = helpers.getExtensions(last(args));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (extensions) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ‰©å±•å¯¹è±¡å­˜åœ¨,å–ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">    args = initial(args);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æˆ‘ä»¬å…·ä½“æ¥çœ‹ä¸€ä¸‹nowAndLater.mapåšäº†ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">parallel</span>(<span class="params">done</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    ä¼ å…¥äº†å››ä¸ªå€¼(args, function iterator(fn, key, cb) &#123;return asyncDone(fn, cb);&#125;, æ‰©å±•çš„å¯¹è±¡, done)</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    nowAndLater.map(args, iterator, extensions, done);</span><br><span class="line">    <span class="comment">//éå†tasksæ•°ç»„ï¼Œå°†å…¶ç”Ÿå‘½å‘¨æœŸå’Œextensionså±æ€§å…³è”èµ·æ¥,ä¸”å°†æ¯ä¸ªtaskå¼‚æ­¥åŒ–ï¼Œä¸”å¹¶å‘æ‰§è¡Œ</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> parallel;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = buildParallel;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ®µä»£ç ä¸­æ‰€ç”¨çš„çš„é‡è¦æ–¹æ³•å‡½æ•°æœ‰è¿™äº›ï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iterator</span><span class="params">(fn, key, cb)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> asyncDone(fn, cb);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*...çœç•¥*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parallel</span><span class="params">(done)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  nowAndLater.map(args, iterator, extensions, done);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆå¯ä»¥è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<strong>async-Done</strong>åˆ†åˆ«åšäº†ä»€ä¹ˆ =&gt; ï¼Ÿ</p><h3 id="ä¹-4-async-Done"><a href="#ä¹-4-async-Done" class="headerlink" title="ä¹(4)async-Done"></a>ä¹(4)async-Done</h3><p>å®ƒå¯ä»¥æŠŠä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰å¼‚æ­¥åŒ–</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//demo1</span></span><br><span class="line"><span class="keyword">var</span> asyncDone = <span class="built_in">require</span>(<span class="string">'async-done'</span>);</span><br><span class="line"></span><br><span class="line">asyncDone(<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æµ‹è¯•AsyncDone---1--å¼€å§‹'</span>);</span><br><span class="line">    done(<span class="literal">null</span>, <span class="string">'æµ‹è¯•AsyncDone---1--ç»“æŸ'</span>)</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//  æˆåŠŸæ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œ``error`å°†ä¸ºnullã€‚</span></span><br><span class="line">  <span class="comment">//  `result`å°†æ˜¯ç¬¬ä¸€ä¸ªå‡½æ•°çš„ç»“æœã€‚</span></span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">asyncDone(<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æµ‹è¯•AsyncDone---2--å¼€å§‹'</span>);</span><br><span class="line">    setTimeout( done.bind(<span class="keyword">this</span>, <span class="literal">null</span>, <span class="string">'æµ‹è¯•AsyncDone---2--ç»“æŸ'</span>), <span class="number">1000</span> )</span><br><span class="line"></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">asyncDone(<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æµ‹è¯•AsyncDone---3--å¼€å§‹'</span>);</span><br><span class="line">    done(<span class="literal">null</span>, <span class="string">'æµ‹è¯•AsyncDone---3--ç»“æŸ'</span>)</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œçš„ç»“æœ :</strong></p><ul><li>æµ‹è¯•AsyncDoneâ€”1â€“å¼€å§‹</li><li>æµ‹è¯•AsyncDoneâ€”1â€“ç»“æŸ</li><li>æµ‹è¯•AsyncDoneâ€”2â€“å¼€å§‹</li><li>æµ‹è¯•AsyncDoneâ€”3â€“å¼€å§‹</li><li>æµ‹è¯•AsyncDoneâ€”3â€“ç»“æŸ</li><li>æµ‹è¯•AsyncDoneâ€”2â€“ç»“æŸ</li></ul><p>å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ–¹æ³•ä¸­çš„doneå°†ä¼šæé†’ç¬¬äºŒä¸ªå‚æ•°(callback)å»æ‰§è¡Œç›¸å…³å›è°ƒ</p><p><strong>æ¥ä¸‹æ¥æˆ‘ä»¬æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹parallelçš„é‡è¦éƒ¨åˆ† :</strong></p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parallel</span><span class="params">(done)</span> </span>&#123;</span><br><span class="line">nowAndLater.map(args, iterator, extensions, done);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€ŒnowAndLaterçš„æ¨¡å—æ¥å£æ¥æºäº<strong>now-and-later</strong></p><p>é‚£æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹<strong>now-and-later</strong>å®ç°äº†äº›ä»€ä¹ˆå‘¢?</p><h3 id="ä¹-5-ã€now-and-later"><a href="#ä¹-5-ã€now-and-later" class="headerlink" title="ä¹(5)ã€now-and-later"></a>ä¹(5)ã€now-and-later</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> once = <span class="built_in">require</span>(<span class="string">'once'</span>);</span><br><span class="line"><span class="keyword">var</span> helpers = <span class="built_in">require</span>(<span class="string">'./helpers'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map</span>(<span class="params">values, iterator, extensions, done</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> extensions === <span class="string">'function'</span>) &#123;</span><br><span class="line">        done = extensions;</span><br><span class="line">        extensions = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> done !== <span class="string">'function'</span>) &#123;</span><br><span class="line">        done = helpers.noop;  <span class="comment">//æ²¡æœ‰ä¼ å…¥doneåˆ™èµ‹äºˆä¸€ä¸ªç©ºå‡½æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®© done å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    done = once(done);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> keys = <span class="built_in">Object</span>.keys(values);</span><br><span class="line">    <span class="keyword">var</span> length = keys.length;</span><br><span class="line">    <span class="keyword">var</span> count = length;</span><br><span class="line">    <span class="keyword">var</span> idx = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„ã€å’Œvaluesç­‰é•¿çš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">var</span> results = helpers.initializeResults(values);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * helpers.defaultExtensions(extensions) è¿”å›å¦‚ä¸‹å¯¹è±¡ï¼š</span></span><br><span class="line"><span class="comment">     *  &#123;</span></span><br><span class="line"><span class="comment">            create: extensions.create || defaultExts.create,</span></span><br><span class="line"><span class="comment">            before: extensions.before || defaultExts.before,</span></span><br><span class="line"><span class="comment">            after: extensions.after || defaultExts.after,</span></span><br><span class="line"><span class="comment">            error: extensions.error || defaultExts.error,</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">var</span> exts = helpers.defaultExtensions(extensions);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (idx = <span class="number">0</span>; idx &lt; length; idx++) &#123;</span><br><span class="line">        <span class="keyword">var</span> key = keys[idx];</span><br><span class="line">        next(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value = values[key];</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ª Storage å®ä¾‹</span></span><br><span class="line">        <span class="keyword">var</span> storage = exts.create(value, key) || &#123;&#125;;</span><br><span class="line">        <span class="comment">//è§¦å‘'start'äº‹ä»¶</span></span><br><span class="line">        exts.before(storage);</span><br><span class="line">        <span class="comment">//åˆ©ç”¨ async-done å°† taskFunction è½¬ä¸ºå¼‚æ­¥æ–¹æ³•å¹¶æ‰§è¡Œ</span></span><br><span class="line">        iterator(value, once(handler));</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="comment">//è§¦å‘'error'äº‹ä»¶</span></span><br><span class="line">                exts.error(err, storage);</span><br><span class="line">                <span class="keyword">return</span> done(err, results);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è§¦å‘'stop'äº‹ä»¶</span></span><br><span class="line">            exts.after(result, storage);</span><br><span class="line">            results[key] = result;</span><br><span class="line">            <span class="keyword">if</span> (--count === <span class="number">0</span>) &#123;</span><br><span class="line">                done(err, results);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = map;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™æ®µä»£ç çš„ map æ–¹æ³•ä¸­ï¼Œé€šè¿‡ for å¾ªç¯éå†äº†æ¯ä¸ªä¼ å…¥ parallel æ¥å£çš„ taskFunctionï¼Œç„¶åä½¿ç”¨ iteratorï¼ˆasync-doneï¼‰å°† taskFunction å¼‚æ­¥åŒ–å¹¶æ‰§è¡Œï¼ˆæ‰§è¡Œå®Œæ¯•ä¼šè§¦å‘ hadlerï¼‰ï¼Œå¹¶å°† extensions çš„å„æ–¹æ³•å’Œ task çš„ç”Ÿå‘½å‘¨æœŸå…³è”èµ·æ¥ï¼ˆæ¯”å¦‚åœ¨ä»»åŠ¡å¼€å§‹æ—¶æ‰§è¡Œâ€œstartâ€äº‹ä»¶ã€ä»»åŠ¡å‡ºé”™æ—¶æ‰§è¡Œâ€œerrorâ€äº‹ä»¶ï¼‰ã€‚ â€”â€”[å¼•ç”¨è‡ªvaoyåšå®¢è¯´æ˜]</p><h2 id="åã€-lib-series"><a href="#åã€-lib-series" class="headerlink" title="åã€./lib/series"></a>åã€./lib/series</h2><p>seriesæ¥å£çš„ä½¿ç”¨:</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ut.task(<span class="string">'taskA'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;<span class="comment">/*ç•¥*/</span>&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskB'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;<span class="comment">/*ç•¥*/</span>&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskC'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;<span class="comment">/*ç•¥*/</span>&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskD'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;<span class="comment">/*ç•¥*/</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// taskD éœ€è¦åœ¨ 'taskA', 'taskB', 'taskC' æ‰§è¡Œå®Œæ¯•åæ‰å¼€å§‹æ‰§è¡Œï¼Œ</span></span><br><span class="line"><span class="comment">// å…¶ä¸­ 'taskA', 'taskB', 'taskC' çš„æ‰§è¡Œå¿…é¡»æ˜¯æŒ‰é¡ºåºä¸€ä¸ªæ¥ä¸€ä¸ªçš„</span></span><br><span class="line">  ut.task(<span class="string">'taskD'</span>, ut.series(<span class="string">'taskA'</span>, <span class="string">'taskB'</span>, <span class="string">'taskC'</span>));</span><br></pre></td></tr></table></figure><p>å…¶å®ç°å’Œparallelæ˜¯åŸºæœ¬ä¸€è‡´çš„ï¼Œä½†åœ¨seriesä¸­ä½¿ç”¨çš„æ˜¯nowAndlaterçš„mapSeriesæ¥å£</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">next</span><span class="built_in">(key</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">next</span><span class="built_in">(key</span>) &#123;</span><br><span class="line">        var <span class="keyword">value</span> = values<span class="built_in">[key</span>];</span><br><span class="line"></span><br><span class="line">        var storage = exts.create(<span class="keyword">value</span>,<span class="built_in"> key</span>) || &#123;&#125;;</span><br><span class="line"></span><br><span class="line">        exts.before(storage);</span><br><span class="line">        iterator(<span class="keyword">value</span>, once(handler));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> handler(err, result) &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                exts<span class="built_in">.error</span>(err, storage);</span><br><span class="line">                <span class="keyword">return</span> done(err, results); //æœ‰ä»»åŠ¡å‡ºé”™ï¼Œæ•…æ‰€æœ‰ä»»åŠ¡åº”åœæ­¢è°ƒç”¨</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            exts.after(result, storage);</span><br><span class="line">            results<span class="built_in">[key</span>] = result;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (++idx &gt;= length) &#123;</span><br><span class="line">                done(err, results); //å…¨éƒ¨ä»»åŠ¡å·²ç»ç»“æŸäº†</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">next</span>(keys[idx]);  //<span class="keyword">next</span>ä¸åœ¨æ˜¯æ”¾åœ¨å¤–é¢çš„å¾ªç¯é‡Œï¼Œè€Œæ˜¯åœ¨ä»»åŠ¡çš„å›è°ƒé‡Œ</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„åœ¨seriesæ¥å£ä¸­é€šè¿‡æ”¹åŠ¨ next çš„ä½ç½®ï¼Œå¯ä»¥å¾ˆå¥½åœ°è¦æ±‚ä¼ å…¥çš„ä»»åŠ¡å¿…é¡»ä¸€ä¸ªæ¥ä¸€ä¸ªå»æ‰§è¡Œï¼ˆåä¸€ä¸ªä»»åŠ¡åœ¨å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•çš„å›è°ƒé‡Œæ‰ä¼šå¼€å§‹æ‰§è¡Œï¼‰ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Gulp </tag>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gulpæºç åˆ†æå­¦ä¹ (ä¸€</title>
      <link href="/2019/04/05/2019/Gulp%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0-%E4%B8%80/"/>
      <url>/2019/04/05/2019/Gulp%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0-%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<p align="center"><br>  <a href="https://gulpjs.com" target="_blank" rel="noopener"><br>    <img height="257" width="114" src="https://raw.githubusercontent.com/gulpjs/artwork/master/gulp-2x.png"><br>  </a><br></p><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>ç›®å‰å·¥ä½œä¼šä¾èµ–äºGulpè¿›è¡Œé¡¹ç›®çš„æ„å»ºæ‰“åŒ…ï¼Œä¹Ÿä¸ºäº†å¯ä»¥æœ‰æ›´æ·±å…¥çš„å­¦ä¹ å¿ƒå¾—ä¸æ”¶è·ã€‚å› æ­¤åœ¨æ­¤è®°å½•å¯¹äº<em>Gulp</em>æºç çš„é˜…è¯»ã€åŠä¸ªäººç†è§£</p><p>åœ¨æ€»ç»“çš„markdown ä¸ <strong>ä¸ªäººåšå®¢</strong> æœ‰ç›¸å…³ç³»åˆ—æ–‡ç« ï¼Œåœ¨æ­¤é¡¹ç›®å„æ–‡ä»¶å¤¹çš„æºç ä¸­ä¹Ÿæœ‰ç›¸åº”çš„æºç åˆ†æçš„æ³¨é‡Š</p><p><em>ç‰ˆæœ¬ </em><br><strong>gulpï¼š ^4.0.0 ç‰ˆæœ¬ä¸ºä¾‹</strong></p><h2 id="Gulp"><a href="#Gulp" class="headerlink" title="Gulp"></a>Gulp</h2><a id="more"></a><p>æºç ç›¸å…³ï¼š</p><ul><li><p>gulpä¸»å…¥å£åˆ†æâ€”<a href="https://github.com/Jayantxu/gulp-source/tree/master/gulp" target="_blank" rel="noopener">gulp-index.js</a></p></li><li><p>glob-watcheræ¨¡å—åˆ†æâ€”<a href="https://github.com/Jayantxu/gulp-source/tree/master/glob-watcher" target="_blank" rel="noopener">glob-watcher-index.js</a></p></li><li><p>undertakeræ¨¡å—åˆ†æâ€”<a href="https://github.com/Jayantxu/gulp-source/tree/master/undertaker" target="_blank" rel="noopener">undertaker-index.js</a></p></li><li><p>vinyl-fsæ¨¡å—åˆ†æâ€”<a href="https://github.com/Jayantxu/gulp-source/tree/master/vinyl-fs" target="_blank" rel="noopener">vinyl-fs-index.js</a></p></li></ul><h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>æ­¤ç¯‡åˆ†ææœ‰å†…å®¹å€Ÿé‰´äºå‰è¾ˆçš„gulpæºç åˆ†æåšå®¢ï¼Œæ·±è¡¨æ„Ÿè°¢ï¼Œåœ¨æ­¤è¯´æ˜ï¼š</p><p><a href="https://www.cnblogs.com/vajoy/p/6349817.html" target="_blank" rel="noopener">gulpæºç è§£æ ç³»åˆ—</a></p><p>åŒæ—¶ä¹Ÿæ¨èä¸€ä¸ªæ”¶é›†ä¸°å¯Œgulpèµ„æ–™çš„GHé¡¹ç›®ï¼Œä½œä¸ºå­¦ä¹ ä¹‹ç”¨ï¼š</p><p><a href="https://github.com/Platform-CUF/use-gulp" target="_blank" rel="noopener">use-gulp</a></p><h2 id="å…³äºæˆ‘"><a href="#å…³äºæˆ‘" class="headerlink" title="å…³äºæˆ‘"></a>å…³äºæˆ‘</h2><p>ä½œè€…ï¼š JayantXu</p><p>é‚®ç®±ï¼š <a href="mailto:Jayant89@163.com" target="_blank" rel="noopener">Jayant89@163.com</a></p><p>ä¸ªäººåšå®¢ï¼š <a href="www.essssss.com">Jayantxu</a></p><p>Github(è‹¥å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©,æ„Ÿè°¢star)   - ï¼š<a href="https://github.com/Jayantxu/gulp-source" target="_blank" rel="noopener">GitHub</a> </p><p>ç¬¬ä¸€æ¬¡å†™æºç åˆ†æç³»åˆ—ï¼Œè‹¥æœ‰ä¸è¶³ä¹‹å¤„è¯·è°…è§£ï¼Œå¯¹ä»»ä½•å†…å®¹æœ‰æ‰€ç–‘é—®ï¼Œæ¬¢è¿è”ç³»æˆ‘ã€‚</p><hr><h2 id="gulp-index-jsçš„åˆ†æ"><a href="#gulp-index-jsçš„åˆ†æ" class="headerlink" title="gulp-index.jsçš„åˆ†æ:"></a>gulp-index.jsçš„åˆ†æ:</h2><h2 id="gulpåŸºæœ¬ä½¿ç”¨"><a href="#gulpåŸºæœ¬ä½¿ç”¨" class="headerlink" title="gulpåŸºæœ¬ä½¿ç”¨"></a>gulpåŸºæœ¬ä½¿ç”¨</h2><p><a href="https://www.gulpjs.com.cn/docs/api/" target="_blank" rel="noopener">gulp-apiä»‹ç»</a></p><h2 id="å…¥å£æ–‡ä»¶åˆ†æ"><a href="#å…¥å£æ–‡ä»¶åˆ†æ" class="headerlink" title="å…¥å£æ–‡ä»¶åˆ†æ"></a>å…¥å£æ–‡ä»¶åˆ†æ</h2><h2 id="ä¸€"><a href="#ä¸€" class="headerlink" title="ä¸€"></a>ä¸€</h2><p>å¯ä»¥åœ¨æœ¬æ–‡ä»¶ç›®å½•ä¸‹å¯»æ‰¾åˆ°index.jsï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å…¶ä¸­éƒ½æœ‰ä»€ä¹ˆå†…å®¹ =&gt;</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> util = require(<span class="string">'util'</span>); </span><br><span class="line"><span class="keyword">var</span> Undertaker = require(<span class="string">'undertaker'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> vfs = require(<span class="string">'vinyl-fs'</span>);<span class="keyword">var</span> watch = require(<span class="string">'glob-watcher'</span>);</span><br><span class="line"></span><br><span class="line">function Gulp() &#123;</span><br><span class="line">  Undertaker.call(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Bind the functions for destructuring</span></span><br><span class="line">  <span class="keyword">this</span>.watch = <span class="keyword">this</span>.watch.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.task = <span class="keyword">this</span>.task.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.series = <span class="keyword">this</span>.series.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.parallel = <span class="keyword">this</span>.parallel.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.registry = <span class="keyword">this</span>.registry.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.tree = <span class="keyword">this</span>.tree.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.lastRun = <span class="keyword">this</span>.lastRun.bind(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">util.inherits(Gulp, Undertaker);</span><br><span class="line"></span><br><span class="line">Gulp.prototype.src = vfs.src;</span><br><span class="line">Gulp.prototype.dest = vfs.dest;</span><br><span class="line">Gulp.prototype.symlink = vfs.symlink;</span><br><span class="line">Gulp.prototype.watch = function(glob, opt, task) &#123;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Let people use this class from our instance</span></span><br><span class="line">Gulp.prototype.Gulp = Gulp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> inst = new Gulp();</span><br><span class="line">module.exports = inst;</span><br></pre></td></tr></table></figure><h2 id="äºŒ"><a href="#äºŒ" class="headerlink" title="äºŒ"></a>äºŒ</h2><p>è®©æˆ‘ä»¬ç”±ä¸Šåˆ°ä¸‹çš„çœ‹ä¸€éï¼š</p><p>å…¶ä¸­ï¼Œå£°æ˜äº†æ‰€éœ€è¦åŠ è½½çš„ä¾èµ–åŒ…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Nodeå†…éƒ¨utilæ¨¡å—ï¼Œæ˜¯Nodeä¸­ä¸€ä¸ªæ ¸å¿ƒçš„å·¥å…·å‡½æ•°æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œä»»åŠ¡ç®¡ç†æœ‰å…³çš„é€»è¾‘,---&gt; gulp.task()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Undertaker = <span class="built_in">require</span>(<span class="string">'undertaker'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// vinyl-fsæ¨¡å—: src/dest/symlink</span></span><br><span class="line"><span class="keyword">var</span> vfs = <span class="built_in">require</span>(<span class="string">'vinyl-fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// npmä¸­ä»‹ç»ä¸º ï¼š è§‚å¯Ÿå…¨å±€å¹¶åœ¨æ›´æ”¹æ—¶æ‰§è¡ŒåŠŸèƒ½ï¼Œå…·æœ‰ç”¨äºå»æŠ–åŠ¨å’Œæ’é˜Ÿçš„æ™ºèƒ½é»˜è®¤å€¼ã€‚</span></span><br><span class="line"><span class="keyword">var</span> watch = <span class="built_in">require</span>(<span class="string">'glob-watcher'</span>);</span><br></pre></td></tr></table></figure><h2 id="ä¸‰"><a href="#ä¸‰" class="headerlink" title="ä¸‰"></a>ä¸‰</h2><p>æˆ‘ä»¬æ¥ä¸‹å»çœ‹ä¸€ä¸‹<strong>Gulp</strong>è¿™ä¸ªæ–¹æ³•ä¸­å®ç°äº†ä»€ä¹ˆåŠŸèƒ½</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function Gulp() &#123;</span><br><span class="line">  <span class="comment">// è½¬this,å°†Undertakerçš„æ–¹æ³•ç»‘å®šåˆ°thisä¸­</span></span><br><span class="line">  Undertaker.call(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»‘å®šå‡½æ•°ä¸ºè§£æ„</span></span><br><span class="line">  <span class="keyword">this</span>.watch = <span class="keyword">this</span>.watch.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.task = <span class="keyword">this</span>.task.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.series = <span class="keyword">this</span>.series.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.parallel = <span class="keyword">this</span>.parallel.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.registry = <span class="keyword">this</span>.registry.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.tree = <span class="keyword">this</span>.tree.bind(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.lastRun = <span class="keyword">this</span>.lastRun.bind(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åœ¨æ­¤çœ‹åˆ°æˆ‘ä»¬æ‰€ç”¨åˆ°çš„gulp.task\gulp.seriesç­‰æ–¹æ³•éƒ½æ˜¯æ¥æºäº<font color="ff0000"><strong>undertaker</strong></font>è¿™ä¸ªæ¨¡å—</p><h2 id="å››"><a href="#å››" class="headerlink" title="å››"></a>å››</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»§æ‰¿,(æ„é€ å‡½æ•°,çˆ¶ç±»æ„é€ å‡½æ•°)</span></span><br><span class="line"><span class="selector-tag">util</span><span class="selector-class">.inherits</span>(Gulp, Undertaker);</span><br></pre></td></tr></table></figure><p>utilæ˜¯Nodeä¸­çš„æ ¸å¿ƒå·¥å…·å‡½æ•°æ¨¡å—ï¼Œå…¶ä¸­çš„inheritsæ˜¯å®ç°ç»§æ‰¿çš„ä¸€ç§æ–¹æ³•</p><p><a href="http://nodejs.cn/api/util.html#util_util_inherits_constructor_superconstructor" target="_blank" rel="noopener">Node-Api-util.inherits</a></p><p>å…¶ä¸­ä¼ å…¥çš„å‚æ•°ä¸º(å­ç±»æ„é€ å‡½æ•°, çˆ¶ç±»æ„é€ å‡½æ•°)</p><h2 id="äº”"><a href="#äº”" class="headerlink" title="äº”"></a>äº”</h2><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Gulp</span>.proto<span class="keyword">type</span>.src = vfs.src;</span><br><span class="line"><span class="type">Gulp</span>.proto<span class="keyword">type</span>.dest = vfs.dest;</span><br><span class="line"><span class="type">Gulp</span>.proto<span class="keyword">type</span>.symlink = vfs.symlink;</span><br><span class="line"><span class="type">Gulp</span>.proto<span class="keyword">type</span>.watch = function(glob, opt, task) &#123;</span><br><span class="line">  // çœç•¥äº›è®¸ä»£ç <span class="comment">---åç»­æ¶‰åŠæ­¤éƒ¨åˆ†å°†å†æåŠ</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// <span class="type">Let</span> people use this class from our instance</span><br><span class="line"><span class="type">Gulp</span>.proto<span class="keyword">type</span>.<span class="type">Gulp</span> = <span class="type">Gulp</span>;</span><br></pre></td></tr></table></figure><p>ç¬¬äº”éƒ¨åˆ†çš„ä»£ç æ—¢æ˜¯å°†åœ¨Gulpçš„åŸå‹peototypeä¸Šå¢åŠ éƒ¨åˆ†æ–¹æ³•ï¼Œä¸”æ¥æºäº<font color="ff0000"><strong>vinyl-fs</strong></font>è¿™ä¸ªæ¨¡å—</p><h2 id="å…­"><a href="#å…­" class="headerlink" title="å…­"></a>å…­</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> inst = <span class="keyword">new</span> Gulp();</span><br><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span> = inst;</span><br></pre></td></tr></table></figure><p>æœ€åä¸€å—å³æ˜¯newä¸€ä¸ªGulpçš„å®ä¾‹ï¼Œå¹¶å°†å…¶æš´éœ²å‡ºæ¥ä¾›è°ƒç”¨ä½¿ç”¨</p><h2 id="ä¸ƒ"><a href="#ä¸ƒ" class="headerlink" title="ä¸ƒ"></a>ä¸ƒ</h2><p>ç”±æ­¤</p><p>æˆ‘ä»¬å¯ä»¥çŸ¥é“æˆ‘ä»¬éœ€è¦äº†è§£gulpçš„å†…éƒ¨æ‰§è¡Œæœºåˆ¶ä»¥åŠæµç¨‹ï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨äº</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">undertakerã€</span><br><span class="line">vinyl-<span class="built_in">fs</span>ã€</span><br><span class="line">glob-watcher</span><br></pre></td></tr></table></figure><p>è¿™ä¸‰æ¨¡å—åˆ†åˆ«éƒ½å°†å®ç°ä»€ä¹ˆåŠŸèƒ½ã€‚</p><hr><h4 id="é¢˜å¤–-gt"><a href="#é¢˜å¤–-gt" class="headerlink" title="é¢˜å¤–-&gt;"></a>é¢˜å¤–-&gt;</h4><h5 id="util-inheritså®ç°äº†ä»€ä¹ˆï¼Ÿ"><a href="#util-inheritså®ç°äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="util.inheritså®ç°äº†ä»€ä¹ˆï¼Ÿ"></a>util.inheritså®ç°äº†ä»€ä¹ˆï¼Ÿ</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>); </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Base</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'base'</span>; </span><br><span class="line">    <span class="keyword">this</span>.base = <span class="number">1991</span>; </span><br><span class="line">    <span class="keyword">this</span>.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello '</span> + <span class="keyword">this</span>.name); </span><br><span class="line">    &#125;; </span><br><span class="line">&#125; </span><br><span class="line">Base.prototype.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sub</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'sub'</span>; </span><br><span class="line">&#125; </span><br><span class="line">util.inherits(Sub, Base); </span><br><span class="line"><span class="keyword">var</span> objBase = <span class="keyword">new</span> Base(); </span><br><span class="line">objBase.showName();  <span class="comment">// base</span></span><br><span class="line">objBase.sayHello(); <span class="comment">// Hello base</span></span><br><span class="line"><span class="built_in">console</span>.log(objBase);  <span class="comment">// Base()</span></span><br><span class="line"><span class="keyword">var</span> objSub = <span class="keyword">new</span> Sub(); </span><br><span class="line">objSub.showName();  <span class="comment">// sub</span></span><br><span class="line"><span class="comment">// objSub.sayHello();  // is not a function</span></span><br><span class="line"><span class="built_in">console</span>.log(objSub);</span><br></pre></td></tr></table></figure><p>åœ¨ç½‘ä¸Šå¯»æ‰¾çš„æµ‹è¯•ï¼Œinheritsæ˜¯é€šè¿‡å°†çˆ¶ç±»æ„é€ å‡½æ•°çš„åŸå‹é“¾å¤åˆ¶åˆ°å­ç±»çš„åŸå‹é“¾ä¸Šï¼Œè¿›è€Œå®ç°çš„ç»§æ‰¿ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿåªèƒ½ç»§æ‰¿åˆ°ç›¸åº”åŸå‹é“¾ä¸Šçš„æ–¹æ³•</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">exports.inherits</span> <span class="string">=</span> <span class="string">function(ctor,</span> <span class="string">superCtor)</span> <span class="string">&#123;</span></span><br><span class="line">  <span class="string">//</span> <span class="string">ä¸€äº›å‚æ•°çš„åˆæ³•æ€§åˆ¤æ–­ï¼Œç•¥â€¦â€¦</span></span><br><span class="line"></span><br><span class="line">  <span class="string">ctor.super_</span> <span class="string">=</span> <span class="string">superCtor;</span></span><br><span class="line">  <span class="string">ctor.prototype</span> <span class="string">=</span> <span class="string">Object.create(superCtor.prototype,</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">    constructor:</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">      value:</span> <span class="string">ctor,</span></span><br><span class="line"><span class="attr">      enumerable:</span> <span class="literal">false</span><span class="string">,</span></span><br><span class="line"><span class="attr">      writable:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line"><span class="attr">      configurable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line">  <span class="string">&#125;);</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="string">åŒæ—¶ç»§æ‰¿çš„å­ç±»ä¹Ÿå¯ä»¥é€šè¿‡super_è®¿é—®åˆ°çˆ¶ç±»çš„æ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="string">console.log(Sub.super_</span> <span class="string">===</span> <span class="string">Base)</span> <span class="string">//</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Gulp </tag>
            
            <tag> æºç  </tag>
            
            <tag> 2019 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nodeè¯»å–å›¾ç‰‡å¹¶è½¬Base64</title>
      <link href="/2019/03/30/2019/Node%E8%AF%BB%E5%8F%96%E5%9B%BE%E7%89%87%E5%B9%B6%E8%BD%ACBase64/"/>
      <url>/2019/03/30/2019/Node%E8%AF%BB%E5%8F%96%E5%9B%BE%E7%89%87%E5%B9%B6%E8%BD%ACBase64/</url>
      
        <content type="html"><![CDATA[<p>Nodeä½œä¸ºåç«¯å¼€å‘æ—¶ï¼Œå¯ä»¥é‡‡ç”¨è¯»å–å›¾ç‰‡æ–‡ä»¶ï¼Œå¹¶è½¬ä¸ºbase64ç¼–ç ï¼Œä½¿å¾—å‰ç«¯å¾—åˆ°å±•ç¤º</p><p>è¿ç”¨åˆ°çš„æ¨¡å—åˆ†åˆ«æœ‰<strong>fs</strong>ã€<strong>path</strong>ã€<strong>mime-types</strong></p><p>mime-typeéœ€è¦é¢å¤–å®‰è£…ï¼Œå¯äºé¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --<span class="keyword">save</span> mime-<span class="keyword">type</span></span><br></pre></td></tr></table></figure></p><p>å¹¶ä¸”è€ƒè™‘åˆ°åç»­çš„è¯»å–è½¬åŒ–çš„éœ€è¦ï¼Œå¯å°†æ–¹æ³•ä½¿ç”¨promiseå¼‚æ­¥ï¼Œå¹¶ä¸”åœ¨æ•°é‡ä¸å®šæ—¶å¯ä»¥ä½¿ç”¨<em>promise.all()</em>è¿›è¡Œå¼‚æ­¥ç­‰å¾…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> mineType = <span class="built_in">require</span>(<span class="string">'mime-types'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  base64img: <span class="function"><span class="keyword">function</span> (<span class="params">file</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> base64imgpromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> result</span><br><span class="line">      <span class="comment">// åˆ¤æ–­ä¼ å…¥è·¯å¾„æ˜¯å¦ä¸ºç©ºï¼Œç©ºå³ä¸å­˜åœ¨</span></span><br><span class="line">      <span class="keyword">if</span> (!file) &#123;</span><br><span class="line">        result = <span class="string">''</span></span><br><span class="line">        resolve(result)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// è½¬æ¢è·¯å¾„</span></span><br><span class="line">      file = path.join(__dirname, <span class="string">'../'</span>, file)</span><br><span class="line">      <span class="keyword">let</span> filePath = path.resolve(file)</span><br><span class="line">      fs.readFile(path.resolve(filePath), <span class="string">'base64'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(err + <span class="string">'è¯»å–é”™è¯¯'</span>)</span><br><span class="line">          result = &#123;</span><br><span class="line">            code: <span class="string">'1'</span>,</span><br><span class="line">            data: &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            msg: <span class="string">'æœåŠ¡å™¨å‡ºé”™'</span></span><br><span class="line">          &#125;</span><br><span class="line">          reject(result)</span><br><span class="line">        &#125;</span><br><span class="line">        result = <span class="string">'data:'</span> + mineType.lookup(filePath) + <span class="string">';base64,'</span> + data</span><br><span class="line">        resolve(result)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> base64imgpromise</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æœ€ç»ˆæˆ‘ä»¬å¾—åˆ°äº†base64ç¼–ç çš„å›¾ç‰‡åï¼Œæ—¢å¯ä»¥å‘é€å›å‰ç«¯ï¼Œå¯¹imgæ ‡ç­¾çš„srcè¿›è¡Œç»‘å®šbase64ï¼Œä»è€Œåœ¨å‰ç«¯é¡µé¢å±•ç¤º</p>]]></content>
      
      
      
        <tags>
            
            <tag> Node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gridå¸ƒå±€</title>
      <link href="/2019/03/26/2019/Grid%E5%B8%83%E5%B1%80/"/>
      <url>/2019/03/26/2019/Grid%E5%B8%83%E5%B1%80/</url>
      
        <content type="html"><![CDATA[<p>æ˜¨å¤©çœ‹è§é˜®å¤§ç¥çš„åšå®¢æ›´æ–°Gridå¸ƒå±€çš„ç›¸å…³çŸ¥è¯†æ€»ç»“ï¼Œå­¦ä¹ ç›¸å…³çš„çŸ¥è¯†ç‚¹</p><font><strong>åŸæ–‡é“¾æ¥ï¼š</strong></font> <a href="http://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html" target="_blank" rel="noopener">é˜®ä¸€å³°-Gridå¸ƒå±€</a><br><a id="more"></a><br><br><font><strong>ä¸ªäººç»ƒä¹ å°demoï¼š</strong></font><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">ç½‘æ ¼Gridå¸ƒå±€</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>ç½‘æ ¼Gridå¸ƒå±€<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">*&#123;</span></span><br><span class="line"><span class="undefined">padding: 0;</span></span><br><span class="line"><span class="undefined">margin: 0;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.container</span>&#123;</span></span><br><span class="line"><span class="css"><span class="selector-tag">display</span>: <span class="selector-tag">grid</span>;<span class="comment">/*è¡Œå†…çš„gridå¸ƒå±€*/</span></span></span><br><span class="line"><span class="undefined">grid-template-columns: 100px 100px 100px;</span></span><br><span class="line"><span class="undefined">grid-template-rows: 100px 100px 100px;</span></span><br><span class="line"><span class="undefined">grid-column-gap: 10px;</span></span><br><span class="line"><span class="undefined">grid-row-gap: 10px;</span></span><br><span class="line"><span class="undefined">justify-content: center;</span></span><br><span class="line"><span class="css"><span class="selector-tag">grid-auto-flow</span>: <span class="selector-tag">row</span>;<span class="comment">/*å¸ƒå±€åŸºå‡†ï¼ŒæŒ‰è¡Œè¿˜æ˜¯åˆ—*/</span></span></span><br><span class="line"><span class="undefined">/* grid-template-areas:'header header header'</span></span><br><span class="line"><span class="undefined">'main main aside'</span></span><br><span class="line"><span class="undefined">'footer footer footer'; */</span></span><br><span class="line"><span class="undefined">/*</span></span><br><span class="line"><span class="css"><span class="selector-tag">align-items</span><span class="selector-pseudo">:center</span> è®¾ç½®å•å…ƒæ ¼å†…å®¹çš„å‚ç›´ä½ç½®;</span></span><br><span class="line"><span class="undefined">justify-items: è®¾ç½®å•å…ƒæ ¼å†…å®¹çš„æ°´å¹³ä½ç½®;</span></span><br><span class="line"><span class="undefined">place-items: åˆå¹¶ç®€å†™äº†ä¸Šè¿°ä¸¤ä¸ª;</span></span><br><span class="line"><span class="xml">place-items: <span class="tag">&lt;<span class="name">align-items</span>&gt;</span> <span class="tag">&lt;<span class="name">justify-items</span>&gt;</span>; </span></span><br><span class="line"><span class="undefined">*/</span></span><br><span class="line"><span class="undefined">/* </span></span><br><span class="line"><span class="undefined">align-content: è®¾ç½®æ•´ä¸ªå†…å®¹åŒºåŸŸåœ¨gridå®¹å™¨é‡Œçš„å‚ç›´ä½ç½®;</span></span><br><span class="line"><span class="undefined">justify-content: è®¾ç½®æ•´ä¸ªå†…å®¹åŒºåŸŸåœ¨gridå®¹å™¨é‡Œçš„æ°´å¹³ä½ç½®;</span></span><br><span class="line"><span class="undefined">place-content: åˆå¹¶å‰ä¸¤è€…; */</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.item-a</span>&#123;</span></span><br><span class="line"><span class="undefined">background-color: pink;</span></span><br><span class="line"><span class="css"><span class="comment">/*ä»ç¬¬å‡ æ¡ç½‘æ ¼çº¿å¼€å§‹ï¼Œåˆ°ç¬¬å‡ æ¡ç½‘æ ¼çº¿ç»“æŸ*/</span></span></span><br><span class="line"><span class="undefined">grid-column-start: 1;</span></span><br><span class="line"><span class="css"><span class="comment">/*å·¦è¾¹æ¡†çš„èµ·å§‹çº¿*/</span></span></span><br><span class="line"><span class="undefined">grid-column-end: 3;</span></span><br><span class="line"><span class="css"><span class="comment">/* å³è¾¹æ¡†çš„ç»“æŸçº¿ */</span></span></span><br><span class="line"><span class="css"><span class="comment">/* åŒç†æœ‰ä¸Šä¸‹ï¼šgrid-row-start; grid-row-end */</span></span></span><br><span class="line"><span class="undefined">/* justify-self: è®¾ç½®å•å…ƒæ ¼å†…å®¹çš„æ°´å¹³ä½ç½®;ä¸justice-itemsä½œç”¨ä¸€è‡´,ä½†åªæ§åˆ¶å•ä¸ªé¡¹ç›®;</span></span><br><span class="line"><span class="undefined">align-self: è®¾ç½®å•å…ƒæ ¼å†…å®¹çš„å‚ç›´ä½ç½®;ä¸align-itemsä½œç”¨ä¸€è‡´,ä½†åªæ§åˆ¶å•ä¸ªé¡¹ç›®;</span></span><br><span class="line"><span class="undefined">place-self: å‰ä¸¤è€…çš„åˆå¹¶å†™æ³•; */</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.item-b</span>&#123;</span></span><br><span class="line"><span class="undefined">background-color: red;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.item-c</span>&#123;</span></span><br><span class="line"><span class="undefined">background-color: blue;</span></span><br><span class="line"><span class="css"><span class="comment">/*ç¼©å†™ç‰ˆï¼šä»ç¬¬å‡ æ¡å¼€å§‹ï¼Œåˆ°ç¬¬å‡ æ¡ç»“æŸ*/</span></span></span><br><span class="line"><span class="undefined">grid-row: 2/4;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.item-d</span>&#123;</span></span><br><span class="line"><span class="undefined">background-color: yellow;</span></span><br><span class="line"><span class="undefined">grid-column: 2/4;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.item-e</span>&#123;</span></span><br><span class="line"><span class="undefined">background-color: black;</span></span><br><span class="line"><span class="undefined">color: white;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.item-f</span>&#123;</span></span><br><span class="line"><span class="undefined">background-color: grey;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>foo<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'container'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item-a"</span>&gt;</span>item-a<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item-b"</span>&gt;</span>item-b<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item-c"</span>&gt;</span>item-c<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item-d"</span>&gt;</span>item-d<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item-e"</span>&gt;</span>item-d<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item-f"</span>&gt;</span>item-d<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>bar<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2019/03/26/2019/Gridå¸ƒå±€/Gridå¸ƒå±€.png" alt="Gridå¸ƒå±€" title="Gridå¸ƒå±€"></p>]]></content>
      
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> å¸ƒå±€ </tag>
            
            <tag> è½¬è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜»æ­¢å†’æ³¡ã€é»˜è®¤äº‹ä»¶</title>
      <link href="/2019/03/03/2019/%E9%98%BB%E6%AD%A2%E5%86%92%E6%B3%A1%E3%80%81%E9%BB%98%E8%AE%A4%E4%BA%8B%E4%BB%B6/"/>
      <url>/2019/03/03/2019/%E9%98%BB%E6%AD%A2%E5%86%92%E6%B3%A1%E3%80%81%E9%BB%98%E8%AE%A4%E4%BA%8B%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>å–æ¶ˆå†’æ³¡ï¼š</p><p>w3cçš„æ–¹æ³•æ˜¯e.stopPropagationï¼ŒIEä¸ºe.cancelBubble = true<br>window.event ? window.event.cancelBubble = true : e.stopPropagation</p><p>å–æ¶ˆé»˜è®¤ï¼š</p><p>w3cçš„æ–¹æ³•æ˜¯e.prcentDefault()ï¼ŒIEä¸ºe.returnValue = false<br>return false;</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">stopBubble</span> <span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">if</span>(e &amp;&amp; e.stopPropagation) &#123;</span></span><br><span class="line"><span class="undefined">      e.stopPropagation();</span></span><br><span class="line"><span class="actionscript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.event.cancelBubble = <span class="literal">true</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">stopDefault</span> <span class="params">(e)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">if</span>(e &amp;&amp; e.prventDefault) &#123;</span></span><br><span class="line"><span class="undefined">      e.prventDefault();</span></span><br><span class="line"><span class="actionscript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.event.returnValue = <span class="literal">false</span>;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSSæ¸…é™¤æµ®åŠ¨çš„å‡ ç§æ–¹å¼</title>
      <link href="/2019/03/03/2019/CSS%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8/"/>
      <url>/2019/03/03/2019/CSS%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<p>2019-3-3æ›´æ–°<br><a id="more"></a></p><font color="#ff0000"><strong>æµ®åŠ¨æ•ˆæœé‡ç°</strong></font><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  <span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>:<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">1000px</span>;</span><br><span class="line">    <span class="attribute">background</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.child</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">background</span>: green;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;!-- æµ®åŠ¨æ•ˆæœ --&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"parent"</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"child"</span>&gt; child&lt;/div&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"child"</span>&gt; child&lt;/div&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"child"</span>&gt; child&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>å›¾ï¼š<br><img src="/2019/03/03/2019/CSSæ¸…é™¤æµ®åŠ¨/æµ®åŠ¨é‡ç°.png" alt="æµ®åŠ¨é‡ç°" title="æµ®åŠ¨é‡ç°"></p><font color="#ff0000"><strong>æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼1 clear:both</strong></font><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æ¸…é™¤æµ®åŠ¨æ–¹å¼1 clear:both*/</span></span><br><span class="line"><span class="selector-class">.parent1</span> &#123;</span><br><span class="line"><span class="attribute">padding</span>:<span class="number">10px</span>;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">1000px</span>;</span><br><span class="line"><span class="attribute">margin-top</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child1</span> &#123;</span><br><span class="line"><span class="attribute">float</span>: left;</span><br><span class="line"><span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clear1</span> &#123;</span><br><span class="line"><span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼<span class="number">1</span>,ä½¿ç”¨é¢å¤–æ ‡ç­¾<span class="attribute">clear</span>:both --&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=<span class="string">"parent1"</span>&gt;</span><br><span class="line">      &lt;<span class="selector-tag">div</span> class=<span class="string">"child1"</span>&gt; child&lt;/div&gt;</span><br><span class="line">      &lt;<span class="selector-tag">div</span> class=<span class="string">"child1"</span>&gt; child&lt;/div&gt;</span><br><span class="line">      &lt;<span class="selector-tag">div</span> class=<span class="string">"child1"</span>&gt; child&lt;/div&gt;</span><br><span class="line">      &lt;<span class="selector-tag">div</span> class=<span class="string">"clear1"</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br></pre></td></tr></table></figure><p>å›¾ï¼š</p><p><img src="/2019/03/03/2019/CSSæ¸…é™¤æµ®åŠ¨/è§£å†³æµ®åŠ¨çš„æ–¹å¼1.png" alt="è§£å†³æµ®åŠ¨çš„æ–¹å¼1" title="è§£å†³æµ®åŠ¨çš„æ–¹å¼1"></p><font color="#ff0000"><strong>æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼2 overflow: hidden</strong></font><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/* æ¸…é™¤æµ®åŠ¨æ–¹å¼2,overflow*/</span><br><span class="line">.parent2 &#123;</span><br><span class="line">padding:10px;</span><br><span class="line">width:1000px;</span><br><span class="line">overflow: hidden;</span><br><span class="line">margin-top: 50px;</span><br><span class="line">background: red;</span><br><span class="line">&#125;</span><br><span class="line">.child2 &#123;</span><br><span class="line">float: left;</span><br><span class="line">margin-right: 10px;</span><br><span class="line">width: 50px;</span><br><span class="line">height: 50px;</span><br><span class="line">background: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¸…é™¤æµ®åŠ¨æ–¹å¼2,ä½¿ç”¨overflowå±æ€§,å®šä¹‰äº†overflowåï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ£€æŸ¥æµ®åŠ¨åŒºåŸŸé«˜åº¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"parent2"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"child2"</span>&gt;</span> child<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"child2"</span>&gt;</span> child<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"child2"</span>&gt;</span> child<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- ä¸èƒ½å’Œpositioné…åˆä½¿ç”¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å›¾ï¼š</p><p><img src="/2019/03/03/2019/CSSæ¸…é™¤æµ®åŠ¨/è§£å†³æµ®åŠ¨çš„æ–¹å¼1.png" alt="è§£å†³æµ®åŠ¨çš„æ–¹å¼1" title="è§£å†³æµ®åŠ¨çš„æ–¹å¼1"></p><font color="#ff0000"><strong>æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼3 å®šä¹‰çˆ¶å…ƒç´ ä¼ªç±»afteræ¸…é™¤æµ®åŠ¨</strong></font><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ¸…é™¤æµ®åŠ¨æ–¹å¼3,:after*/</span></span><br><span class="line"><span class="selector-class">.parent3</span> &#123;</span><br><span class="line"><span class="attribute">padding</span>:<span class="number">10px</span>;</span><br><span class="line"><span class="attribute">background</span>: red;</span><br><span class="line"><span class="attribute">margin-top</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parent3</span>:after &#123;</span><br><span class="line"><span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line"><span class="attribute">display</span>: block;</span><br><span class="line"><span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child3</span> &#123;</span><br><span class="line"><span class="attribute">float</span>: left;</span><br><span class="line"><span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä½¿ç”¨ä¼ªå…ƒç´ æ¸…é™¤æµ®åŠ¨:after --&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"parent3"</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"child3"</span>&gt; child&lt;/div&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"child3"</span>&gt; child&lt;/div&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"child3"</span>&gt; child&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><img src="/2019/03/03/2019/CSSæ¸…é™¤æµ®åŠ¨/è§£å†³æµ®åŠ¨çš„æ–¹å¼1.png" alt="è§£å†³æµ®åŠ¨çš„æ–¹å¼1" title="è§£å†³æµ®åŠ¨çš„æ–¹å¼1"></p><hr><p>2019-2-2</p><p>ç»å¸¸åœ¨å„ç§å‰ç«¯é¢è¯•é¢˜ä¸­å‡ºç°ï¼Œä»Šå¤©å°±å°†åŸæœ¬CSDNåšå®¢ä¸Šæ€»ç»“çš„æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼å†æ¬¡å›é¡¾å¹¶ä¸”æ¬è¿è¿‡æ¥</p><font color="ff0000"><strong>1</strong></font><p>å®šä¹‰ä¼ªç±»æ¸…é™¤<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfloat</span><span class="selector-pseudo">:after</span> &#123; </span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><font color="ff0000"><strong>2</strong></font><p>å®šä¹‰ç©ºdivè¿›è¡Œclear<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfloat</span> &#123; </span><br><span class="line">  <span class="attribute">clear</span>: both</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><font color="ff0000"><strong>3</strong></font><p>ä¸ºçˆ¶å…ƒç´ è®¾ç½®é«˜åº¦<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000080</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;<span class="comment">/*è§£å†³ä»£ç */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><font color="ff0000"><strong>4</strong></font><p>ä¸ºçˆ¶å…ƒç´ è®¾ç½®overflow:hidden</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000080</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;<span class="comment">/*è§£å†³ä»£ç */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">98%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden&#125;</span><br></pre></td></tr></table></figure><font color="ff0000"><strong>5</strong></font><p>çˆ¶å…ƒç´ ä¸€å¹¶æµ®åŠ¨</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000080</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;<span class="comment">/*è§£å†³ä»£ç */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">98%</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">float</span>: left</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>marginé‡å ä»¥åŠè§£å†³åŠæ³•</title>
      <link href="/2019/03/01/2019/margin%E9%87%8D%E5%8F%A0%E4%BB%A5%E5%8F%8A%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
      <url>/2019/03/01/2019/margin%E9%87%8D%E5%8F%A0%E4%BB%A5%E5%8F%8A%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>å…ˆé‡ç°ä¸€éä¸¤ä¸ªå—çº§å…ƒç´ åœ¨ä¸Šä¸‹marginæ–¹å‘çš„é‡å ç°è±¡<br><a id="more"></a><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- é‡ç°æµ®åŠ¨ --&gt;</span><br><span class="line"><span class="comment">/* é‡ç°æµ®åŠ¨*/</span></span><br><span class="line"><span class="selector-class">.contain</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.first</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.second</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"contain"</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=<span class="string">"first"</span>&gt;first &lt;/div&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=<span class="string">"second"</span>&gt;second  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p><img src="/2019/03/01/2019/marginé‡å ä»¥åŠè§£å†³åŠæ³•/marginé‡ç°.png" alt="marginé‡ç°" title="marginé‡ç°"></p><p>æ­¤å¤„æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“ç¬¬ä¸€ä¸ª(first)æ‹¥æœ‰çš„margin-bottomï¼š20px;ä¸ç¬¬äºŒä¸ª(second)divå—æ‰€æ‹¥æœ‰çš„margin-top:20px;å åŠ åœ¨äº†ä¸€å—</p><p>è€Œæˆ‘ä»¬æ ¹æ®BFCï¼ˆå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰æˆ‘ä»¬å¯ä»¥åœ¨å¿…è¦æ—¶å€™æœ‰æ•ˆé¿å…è¿™ç§ç°è±¡å¯¹äºæˆ‘ä»¬å¸ƒå±€çš„å½±å“<br>è€Œæˆ‘ä»¬åˆ›å»ºBFCçš„æ¡ä»¶æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ul><li>floatä¸æ˜¯noneï¼Œä½¿è¯¥å…ƒç´ æµ®åŠ¨èµ·æ¥</li><li>positionçš„å€¼ä¸æ˜¯staticæˆ–è€…relative</li><li>displayçš„å€¼æ˜¯inline-blockï¼Œtable-cellï¼Œ flexï¼Œtable-captionï¼Œ inline-flex</li><li>overflowä¸æ˜¯visible</li></ul><p>BFCçš„ç‰¹å¾ï¼š</p><ul><li>æ‰€æœ‰å­å…ƒç´ åŒ…æ‹¬æµ®åŠ¨å…ƒç´ ï¼Œä¸å®¹å™¨å·¦è¾¹å¯¹é½</li><li>å±äºåŒä¸€ä¸ªBFCçš„çˆ¶å…ƒç´ ä¸å­å…ƒç´ ï¼Œç›¸é‚»çš„<strong>çˆ¶å­</strong>æˆ–è€…<strong>å…„å¼Ÿ</strong>é—´çš„marginå‚ç›´æ–¹å‘ä¼šé‡å ï¼Œ<strong>è‹¥ä¸¤ä¸ªå…ƒç´ å±äºä¸åŒBFC</strong>ï¼Œåˆ™å‚ç›´æ–¹å‘ä¸Šä¸é‡å </li><li>å¯ä»¥æ’‘å¼€å®¹å™¨ï¼ˆè‹¥å­å…ƒç´ æ˜¯floatï¼Œåˆ™çˆ¶å…ƒç´ è®¾ç½®overflowï¼šhiddenï¼Œçˆ¶å…ƒç´ å°±å½¢æˆä¸€ä¸ªBFC</li></ul><p>å› æ­¤æˆ‘ä»¬å®è·µå°è¯•å¦‚ä½•ä½¿ç”¨å½¢æˆBFCè§£å†³marginé‡å æ‰€å¸¦æ¥çš„å½±å“</p><font color="#ff0000"><strong>ä¸€</strong></font><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ¸…é™¤marginæ–¹å¼1*/</span></span><br><span class="line"><span class="selector-class">.contain1</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.first1</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.second1</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line">&lt;!-- æ¸…é™¤ï¼Œ<span class="attribute">margin</span>é‡å æ–¹å¼<span class="number">1</span> é€šè¿‡æ–°å¢çˆ¶å…ƒç´ ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„BFCå— --&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"contain1"</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=<span class="string">"first1"</span>&gt; first <span class="number">1</span>&lt;/div&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> style=<span class="string">"overflow:hidden;"</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">div</span> class=<span class="string">"second1"</span>&gt; second1&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><img src="/2019/03/01/2019/marginé‡å ä»¥åŠè§£å†³åŠæ³•/marginé‡å è§£å†³æ–¹å¼1.png" alt="marginé‡å è§£å†³æ–¹å¼1" title="marginé‡å è§£å†³æ–¹å¼1"></p><p>æˆ‘ä»¬ä¸ºsecondå—å…ƒç´ ï¼Œæ–°å¢ä¸€ä¸ªçˆ¶å…ƒç´ ï¼Œå¹¶ä¸”è®¾ç½®å…¶overflowï¼ŒæˆåŠŸä½¿å¾—first1ä¸second1åˆ†åˆ«å½’å±ä¸åŒçš„BFCå—ï¼Œä»è€Œç»“å±€marginé‡å é—®é¢˜ã€‚</p><font color="#ff0000"><strong>äºŒ</strong></font><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ¸…é™¤marginæ–¹å¼2*/</span></span><br><span class="line"><span class="selector-class">.contain2</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.first2</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.second2</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line">&lt;!-- æ¸…é™¤<span class="attribute">margin</span>é‡å æ–¹å¼<span class="number">2</span>ï¼Œå­å…ƒç´ æµ®åŠ¨ :ç›¸é‚»çš„å­å…ƒç´ éƒ½æµ®åŠ¨ï¼Œæˆ–è€…ä¸‹é¢çš„é‚£ä¸ªæµ®åŠ¨--&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=<span class="string">"contain2"</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=<span class="string">"first2"</span>&gt; first <span class="number">2</span>&lt;/div&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=<span class="string">"second2"</span> style=<span class="string">"float: left;"</span>&gt; second <span class="number">2</span>&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿å¾—ç›¸é‚»å…„å¼Ÿå…ƒç´ æµ®åŠ¨çš„å½¢å¼ï¼Œæ»¡è¶³floatä¸ç­‰äºnoneï¼Œä»è€Œä½¿å¾—second2å½¢æˆä¸€ä¸ªæ–°çš„BFCå—ï¼Œè€Œè§£å†³marginé‡å çš„é—®é¢˜</p><p>æ•ˆæœï¼š<br><img src="/2019/03/01/2019/marginé‡å ä»¥åŠè§£å†³åŠæ³•/marginé‡å è§£å†³æ–¹å¼2.png" alt="marginé‡å è§£å†³æ–¹å¼2" title="marginé‡å è§£å†³æ–¹å¼2"></p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> CSS </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSSçœç•¥å·å®ç°</title>
      <link href="/2019/03/01/2019/CSS%E7%9C%81%E7%95%A5%E5%8F%B7%E5%AE%9E%E7%8E%B0/"/>
      <url>/2019/03/01/2019/CSS%E7%9C%81%E7%95%A5%E5%8F%B7%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<font><strong>ä¸€</strong></font><a id="more"></a><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">"contain"</span>&gt;</span><br><span class="line">    &lt;p <span class="keyword">class</span>=<span class="string">"contain-1"</span>&gt;å¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå¾ˆå¤šæ–‡å­—[è¦æœ‰å›ºå®šå®½åº¦]&lt;/p&gt;</span><br><span class="line">    &lt;p <span class="keyword">class</span>=<span class="string">"contain-2"</span>&gt;</span><br><span class="line">        å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬</span><br><span class="line">        [<span class="meta">æ­¤è®¾å®šä¸é€‚åˆå¤šè¡Œæ–‡æœ¬</span>]</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.contain-1</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.contain-2</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">white-space</span>:white-space;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å…³æ³¨text-overflowï¼šellipsisï¼›å±æ€§ï¼Œæ­¤å±æ€§é’ˆå¯¹å•è¡Œæ–‡æœ¬çš„æœ«å°¾æ˜¾ç¤ºçœç•¥å·</p><p>å¦‚å›¾ï¼š<br><img src="/2019/03/01/2019/CSSçœç•¥å·å®ç°/CSSçœç•¥å·å®ç°1.png," alt="CSSçœç•¥å·å®ç°1.png" title="CSSçœç•¥å·å®ç°1.png"></p><font><strong>äºŒ</strong></font><p>å½“ç›®æ ‡æµè§ˆå™¨å†…æ ¸æ˜¯webkitã€æˆ–ç§»åŠ¨ç«¯ä¸ºä¸»æ—¶ï¼Œå¯é‡‡ç”¨é’ˆå¯¹webkitçš„ç§æœ‰å±æ€§<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-webkit-box-orient:vertical;</span><br><span class="line">-webkit-line-clamp:<span class="number">2</span>;</span><br></pre></td></tr></table></figure></p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">"contain1"</span>&gt;</span><br><span class="line">    &lt;p <span class="keyword">class</span>=<span class="string">"contain1-1"</span>&gt;å¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå¾ˆå¤šæ–‡å­—&lt;/p&gt;</span><br><span class="line">    &lt;p <span class="keyword">class</span>=<span class="string">"contain1-2"</span>&gt;</span><br><span class="line">        å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬</span><br><span class="line">        [<span class="meta">æœ‰é€‚ç”¨èŒƒå›´,ä»…é€‚ç”¨äºwebkitæµè§ˆå™¨åŠç§»åŠ¨ç«¯</span>]</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.contain1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: grey;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.contain1-1</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    <span class="attribute">-webkit-box-orient</span>:vertical;</span><br><span class="line">    <span class="attribute">-webkit-line-clamp</span>:<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.contain1-2</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    <span class="attribute">-webkit-box-orient</span>:vertical;</span><br><span class="line">    <span class="attribute">-webkit-line-clamp</span>:<span class="number">2</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯é’ˆå¯¹webkitå†…æ ¸çš„æµè§ˆå™¨ä»¥åŠç§»åŠ¨ç«¯æµè§ˆå™¨è¿›è¡Œçœç•¥å·å¸ƒå±€</p><p>å¦‚å›¾:<br><img src="/2019/03/01/2019/CSSçœç•¥å·å®ç°/CSSçœç•¥å·å®ç°2.png," alt="CSSçœç•¥å·å®ç°2.png" title="CSSçœç•¥å·å®ç°2.png"></p><font><strong>ä¸‰</strong></font><p>ä½¿ç”¨ä¼ªå…ƒç´ é—®é¢˜<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"contain2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> &gt;</span></span><br><span class="line">        å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬[åˆ©ç”¨ä¼ªå…ƒç´ ,é€‚ç”¨æ€§å¹¿,åœ¨æ–‡å­—æœªè¶…è¡Œçš„æƒ…å†µä¸‹ä¹Ÿä¼šå‡ºç°çœç•¥å·]</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.contain2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: grey;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.contain2</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="comment">/*éœ€è¦é¢å¤–æ³¨æ„line-heightå’Œmax-heightéœ€è¦æ—¶line-heightçš„æ•´æ•°å€,å¦åˆ™ä¼šé€ æˆè¶…å‡ºæ–‡å­—æ˜¾ç¤ºä¸€åŠçš„æƒ…å†µ,å¦å¤–å¦‚æœæ²¡æœ‰è¿™ä¸¤ä¸ªå…ƒç´ ,è§†è§‰ä¸Šä¼šæœ‰â€œæ— è®ºä»€ä¹ˆæƒ…å†µéƒ½å¸¦çœç•¥å·çš„æƒ…å†µâ€*/</span></span><br><span class="line">    <span class="attribute">line-height</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.contain2</span> <span class="selector-tag">p</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"..."</span>;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">bottom</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background</span>:<span class="built_in">linear-gradient</span>(to right,transparent,grey 55%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚å›¾:</p><p><img src="/2019/03/01/2019/CSSçœç•¥å·å®ç°/CSSçœç•¥å·å®ç°3.png," alt="CSSçœç•¥å·å®ç°2.png" title="CSSçœç•¥å·å®ç°2.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–</title>
      <link href="/2019/02/21/2019/Gulp%E5%A2%9E%E9%87%8F%E7%BC%96%E8%AF%91%E4%BC%98%E5%8C%96/"/>
      <url>/2019/02/21/2019/Gulp%E5%A2%9E%E9%87%8F%E7%BC%96%E8%AF%91%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>æ€»ç»“18å¹´12æœˆGulpå¢é‡ç¼–è¯‘ä¼˜åŒ–</p><p>å®ä¹ æ—¶å€™ï¼Œæœ‰ä¸€å¤©ï¼Œç…§å¸¸è¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œåœ¨ç­‰å¾…é¡¹ç›®è¿è¡Œgulpæ„å»ºå‘½ä»¤ä¹‹åï¼Œç­‰å¾…ç€æ„å»ºçš„å®Œæˆâ€¦</p><p>è¿™æ—¶å€™å¯¼å¸ˆçœ‹äº†ä¸€çœ¼ï¼Œè¯´ï¼šâ€œæ˜¯ä¸æ˜¯è§‰å¾—å¾ˆæ…¢å’§ï¼Œèƒ½ä¼˜åŒ–ä¸€ä¸‹å°±å¥½äº†â€ã€‚</p><p>æ˜¯å‘€ï¼Œæ¯æ¬¡åå‡ ç§’çš„ç­‰å¾…ï¼ŒçœŸçš„æ˜¯å¾ˆæ¼«é•¿çš„å’§</p><a id="more"></a><p><img src="/2019/02/21/2019/Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–/gulpå¢é‡ç¼–è¯‘3.png" alt="gulpå¢é‡ç¼–è¯‘3.png" title="gulpå¢é‡ç¼–è¯‘3.png"></p><p>ä¹Ÿå°±æ˜¯è¿™æ ·ä¸€å¥è¯ï¼Œæˆ‘æƒ³é—²ä¸‹æ¥çš„æ—¶é—´å¯ä»¥è¯•ä¸€è¯•å˜›ï¼Œåæ­£è¿‘æœŸéœ€æ±‚ä¹Ÿä¸ä¼šå¤ªè¿‡å¿™ç¢Œï¼Œè€Œä¸”Gulpç›¸å…³çš„å‘½ä»¤ä¹Ÿä¸ç®—å¤šï¼Œä¹Ÿå°±æ˜¯å¦‚æ­¤ï¼Œå¼€å§‹äº†Gulpçš„é‡æ–°å¤ä¹ ã€‚</p><p><strong><font color="ff0000">å¼€å§‹å•¦~</font></strong></p><p>å…ˆåˆ†æäº†é¡¹ç›®çš„gulpfile.jsæ„å»ºè¿‡ç¨‹</p><p><img src="/2019/02/21/2019/Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–/gulpå¢é‡ç¼–è¯‘1.png" alt="gulpå¢é‡ç¼–è¯‘1" title="gulpå¢é‡ç¼–è¯‘1"></p><p>å¯ä»¥çœ‹åˆ°é¡¹ç›®åŸå…ˆè¿›è¡Œäº†gulp.taskçš„æ§åˆ¶ï¼Œå¹¶å°†ä¾æ¬¡è¿›è¡ŒarrTaskä¸­çš„ä»»åŠ¡</p><p>è€Œåœ¨â€™clean_buildâ€™ä¸­ï¼Œgulpå°†ä¼šæ¸…ç©ºbuildæ‰“åŒ…åçš„æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºæˆ‘ä»¬å»ºç«‹èµ·æ¥çš„å¢é‡ç¼–è¯‘é€»è¾‘æ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘ä»¬éœ€è¦ä¸æœªåšæ”¹å˜çš„æ–‡ä»¶è¿›è¡Œæ¯”è¾ƒï¼Œç„¶ååˆ¤æ–­æˆ‘ä»¬æ˜¯å¦ä¿®æ”¹äº†è¯¥æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†è¿›è¡Œè¯¥æ–‡ä»¶çš„å¤„ç†ï¼Œå¦‚æœä¸æ˜¯ï¼Œé‚£æˆ‘ä»¬å°±ä¸éœ€è¦å¤„ç†è¯¥æ–‡ä»¶ï¼Œè¿™æ ·ä¾¿å¯ä»¥çœå»å¾ˆå¤šé‡å¤å¤„ç†çš„æ—¶é—´</span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æŠ½å‡ºä¸€æ®µå…¬å…±ä»£ç åˆ†æä¸æŸ¥çœ‹å…¶æ„å»ºåŸç†</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">gulp</span><span class="selector-class">.task</span>(<span class="string">'css_comm'</span>, function() &#123;</span><br><span class="line">  <span class="selector-tag">return</span> <span class="selector-tag">gulp</span><span class="selector-class">.src</span>([<span class="string">'1.css'</span>,<span class="string">'2.min.css'</span>,<span class="string">'3.css'</span>,<span class="string">'4.css'</span>])</span><br><span class="line">        <span class="selector-class">.pipe</span>(concat(<span class="string">'5.css'</span>)) <span class="comment">// åˆå¹¶common.css</span></span><br><span class="line">        <span class="selector-class">.pipe</span>(rev())    <span class="comment">// åŠ MD5åç¼€</span></span><br><span class="line">        <span class="selector-class">.pipe</span>(cleanCss())   <span class="comment">//å‹ç¼©css</span></span><br><span class="line">        <span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'./build/css'</span>)) <span class="comment">// å‹ç¼©å®Œ</span></span><br><span class="line">        <span class="selector-class">.pipe</span>(rev.manifest())</span><br><span class="line">        <span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'./rev/css'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>çœ‹å®Œä»£ç ï¼Œé‚£æ—¶å€™å°±æƒ³åš¯ï¼Œè¦æ˜¯æˆ‘ä»¬åˆæ­¥åœ¨æ¯ä¸€æ¬¡åˆå¹¶ï¼Œ<font color="ff0000"><strong>æœªåŠ MDæˆ³</strong></font>ä¹‹å‰ï¼Œä»¥åŠ<font color="ff0000"><strong>æœªç»å‹ç¼©</strong></font>ç­‰æ“ä½œå‰å¯¹ä¸Šä¸€æ¬¡çš„æ„å»ºæ–‡ä»¶è¿›è¡Œæ¯”è¾ƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠ‰æ‹©å‡ºæ˜¯å¦ç»§ç»­å¯¹è¯¥æ–‡ä»¶è¿›è¡Œæ„å»ºï¼Œè¿™æ ·å°±å¯ä»¥è¾¾åˆ°æˆ‘ä»¬è‡ªåŠ¨è¯†åˆ«æ„å»ºçš„ç›®çš„äº†ã€‚</p><p>å› æ­¤æ–°å»ºäº†ä¸€ä¸ªbeforebuildæ–‡ä»¶å¤¹ä½œä¸ºä¸­è½¬æ–‡ä»¶å¤¹ç”¨äºå‹ç¼©ï¼ŒåŠ æˆ³ä¹‹å‰è¿›è¡Œçš„æ¯”è¾ƒä½œç”¨</p><p><img src="/2019/02/21/2019/Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–/gulpå¢é‡ç¼–è¯‘4.png" alt="gulpå¢é‡ç¼–è¯‘4" title="gulpå¢é‡ç¼–è¯‘4"></p><p><img src="/2019/02/21/2019/Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–/gulpå¢é‡ç¼–è¯‘5.png" alt="gulpå¢é‡ç¼–è¯‘5" title="gulpå¢é‡ç¼–è¯‘5"></p><p>äºæ˜¯å¯»æ‰¾ç›¸åº”æ˜¯å¦æœ‰å®ç°æ­¤æ¯”è¾ƒåŠŸèƒ½çš„gulpåŒ…ï¼Œåœ¨npmä¸Šæ‰¾åˆ°ä¸€ä¸ª<font color="ff0000"><strong>gulp-changed</strong></font><br>å…¶ç”¨æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å…¶ä¸­çš„hasChangedå¯ä»¥æ ¹æ®ä¸‹åˆ—ä¸‰é¡¹åšæ¯”è¾ƒ</span><br><span class="line">changed.compareLastModifiedTime</span><br><span class="line">changed.compareContents</span><br><span class="line">changed<span class="selector-class">.compareSha1Digest</span> (Deprecated)</span><br><span class="line"></span><br><span class="line">å¯ä»¥å¯¹å†…å®¹ï¼Œæœ€åä¿®æ”¹æ—¶é—´ç­‰æ–¹å¼å¯¹æ–‡ä»¶ä½œæ¯”è¾ƒï¼Œä»è€Œåˆ¤æ–­æ˜¯å¦ä¿®æ”¹è¿‡æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure></p><font color="ff0000"><em>ä¿®æ”¹ï¼š</em></font><br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">gulp</span><span class="selector-class">.task</span>(<span class="string">'css_comm'</span>, function() &#123;</span><br><span class="line">  <span class="selector-tag">return</span> <span class="selector-tag">gulp</span><span class="selector-class">.src</span>([<span class="string">'1.css'</span>,<span class="string">'2.min.css'</span>,<span class="string">'3.css'</span>,<span class="string">'4.css'</span>])</span><br><span class="line">        <span class="selector-class">.pipe</span>(concat(<span class="string">'5.css'</span>)) <span class="comment">// åˆå¹¶common.css</span></span><br><span class="line">        <span class="selector-class">.pipe</span>(changed(<span class="string">'./beforebuild/6.css'</span>,&#123;<span class="attribute">hasChanged</span>: changed.compareLastModifiedTime&#125;)) <span class="comment">//å¯¹æ¯”ä¸­è½¬beforebuildä¸­çš„6.css</span></span><br><span class="line">        <span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'./beforebuild/6.css'</span>)) <span class="comment">// å…ˆè¾“å‡ºä¸€é</span></span><br><span class="line">        <span class="selector-class">.pipe</span>(rev())    <span class="comment">// åŠ MD5åç¼€</span></span><br><span class="line">        <span class="selector-class">.pipe</span>(cleanCss())   <span class="comment">//å‹ç¼©css</span></span><br><span class="line">        <span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'./build/css'</span>)) <span class="comment">// å‹ç¼©å®Œ</span></span><br><span class="line">        <span class="selector-class">.pipe</span>(rev.manifest())</span><br><span class="line">        <span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'./rev/css'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br><br>å…³é”®ä¹‹å¤„åœ¨äºæ·»åŠ äº†æ­¤ä¸¤è¡Œå¯¹æ¯”ä»£ç ï¼š<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.pipe</span>(changed(<span class="string">'./beforebuild/6.css'</span>,&#123;<span class="attribute">hasChanged</span>: changed.compareLastModifiedTime&#125;)) <span class="comment">//å¯¹æ¯”ä¸­è½¬beforebuildä¸­çš„6.css</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'./beforebuild/6.css'</span>)) <span class="comment">// å…ˆè¾“å‡ºä¸€é</span></span><br></pre></td></tr></table></figure><br><br>changedæ ¹æ®å…ˆå‰è¾“å‡ºçš„æ–‡ä»¶çš„æœ€ç»ˆä¿®æ”¹æ—¶é—´è¿›è¡Œæ¯”è¾ƒæ–‡ä»¶æ˜¯å¦æ”¹å˜<br><br>è€Œå¦‚æœæœ‰æ”¹å˜ï¼Œå†è¾“å‡ºè¦†ç›–beforebuildä¸­çš„6.cssï¼ŒåŒæ—¶ç»§ç»­æ‰§è¡Œåç»­å‹ç¼©ï¼ŒåŠ æˆ³ç­‰å‘½ä»¤ï¼Œä»è€Œè¾“å‡ºåˆ°buildæ–‡ä»¶ä¸­çš„6.css<br><br><br>æœ€ç»ˆå°†ç›¸å…³æŒ‡ä»¤åˆ’åˆ†ä¸ºdefaultã€devï¼Œç”¨äºåŒºåˆ†å¼€å‘ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒä¸­æ‰€ç”¨ä¸åŒã€‚å› ä¸ºç”Ÿäº§ç¯å¢ƒä¸­éœ€è¦æ‰§è¡Œâ€™clean_buildâ€™æŒ‡ä»¤ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ¸…é™¤è¿‡ç¨‹ã€‚<br><img src="/2019/02/21/2019/Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–/gulpå¢é‡ç¼–è¯‘8.png" alt="gulpå¢é‡ç¼–è¯‘8" title="gulpå¢é‡ç¼–è¯‘8"><br><br>ä¾æ¬¡å¯¹é¡¹ç›®gulpä¸­çš„æ–‡ä»¶å¦‚æ­¤å¤„ç†ï¼Œæœ€ç»ˆå°†æ„å»ºå‡é€Ÿç”±<font><strong>15s</strong></font>é™ä½è‡³<font><strong>4s</strong></font>ã€‚<br><br><br><font color="ff0000"><strong>å‰åå¯¹æ¯”ï¼š</strong></font><p><img src="/2019/02/21/2019/Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–/gulpå¢é‡ç¼–è¯‘3.png" alt="gulpå¢é‡ç¼–è¯‘3" title="gulpå¢é‡ç¼–è¯‘3"></p><p><img src="/2019/02/21/2019/Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–/gulpå¢é‡ç¼–è¯‘6.png" alt="gulpå¢é‡ç¼–è¯‘6" title="gulpå¢é‡ç¼–è¯‘6"></p><p>è‡³æ­¤ï¼Œgulpçš„å¢é‡ç¼–è¯‘åˆæ­¥å®Œæˆã€‚<br>åç»­ä»ç„¶æœ‰ä¸€äº›ä»£ç ä¼˜åŒ–çš„ç©ºé—´åœ¨ï¼Œæ‰€ä»¥å¹¶ä¸è®¤ä¸ºè¿™æ˜¯æœ€ç»ˆçš„ä¼˜åŒ–ç»“æœã€‚</p><font><strong>åŠ æ²¹!</strong></font><hr><p>é™„ä¸Šåœ¨gulpä¸­æ–‡ç½‘ï¼ŒæŸ¥çœ‹åˆ°çš„gulpå¢é‡ç¼–è¯‘ï¼Œå®˜æ–¹ä½¿ç”¨watchä¸cacheè¿›è¡Œçš„å¢é‡å¤„ç†ã€‚</p><p>Gulpå¢é‡ç¼–è¯‘: <a href="https://www.gulpjs.com.cn/docs/recipes/incremental-builds-with-concatenate/" target="_blank" rel="noopener">gulpå¢é‡ç¼–è¯‘</a></p><p><img src="/2019/02/21/2019/Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–/gulpå¢é‡ç¼–è¯‘9.png" alt="gulpå¢é‡ç¼–è¯‘9" title="gulpå¢é‡ç¼–è¯‘9"></p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Gulp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptæ·±æµ…æ‹·è´</title>
      <link href="/2019/02/18/2019/JavaScript%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/"/>
      <url>/2019/02/18/2019/JavaScript%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬é¦–å…ˆç¨å¾®å¤ä¹ ä¸€ä¸‹æœ‰å…³JSä¸­çš„æ•°æ®ç±»å‹åŠç›¸å…³çŸ¥è¯†ç‚¹</p><p>1-ç®€å•æ•°æ®ç±»å‹ï¼šUndefinedï¼ŒNullï¼ŒBooleanï¼ŒSymbolï¼ŒNumberï¼ŒString</p><p>2-å¤æ‚æ•°æ®ç±»å‹ï¼šå¯¹è±¡</p><p>ç®€å•æ•°æ®ç±»å‹ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­</p><p>å¤æ‚æ•°æ®ç±»å‹å³å¼•ç”¨ç±»å‹ï¼Œä¿å­˜äºå †å†…å­˜ä¸­ï¼›å¼•ç”¨çš„ç±»å‹å€¼å®é™…ä¸ºæŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆ</p><p>è¿™ä¸æˆ‘ä»¬ä»Šå¤©æ‰€éœ€è¦è®²åˆ°çš„æ·±æµ…æ‹·è´æœ‰å…³ğŸ˜</p><p><img src="/2019/02/18/2019/JavaScriptæ·±æµ…æ‹·è´/æ·±æµ…æ‹·è´.jpg" alt="&quot;æ·±æµ…æ‹·è´.jpg&quot;" title="æ·±æµ…æ‹·è´.jpg"></p><a id="more"></a><p><strong><font color="ff0000">æµ…æ‹·è´</font></strong></p><p>ç›¸å½“äºæˆ‘ä»¬å¤åˆ¶äº†è¯¥å¯¹è±¡æˆ–æ•°ç»„ï¼Œç„¶è€Œè¯¥â€œæŒ‡é’ˆâ€ä»ç„¶æŒ‡å‘åŸæœ¬å†…å­˜ç©ºé—´<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name:<span class="string">'wsscat'</span>,</span><br><span class="line">  age:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = obj;</span><br><span class="line">obj2[<span class="string">'c'</span>] = <span class="number">5</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj);<span class="comment">//Object &#123;name: "wsscat", age: 0, c: 5&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2);<span class="comment">////Object &#123;name: "wsscat", age: 0, c: 5&#125;</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬æ”¹å˜obj2çš„[â€˜câ€™]æ—¶å€™ï¼Œobj1ä¼šå—åˆ°å…¶å½±å“</p><p><strong><font color="ff0000">æ·±æ‹·è´</font></strong></p><p><em>æ•°ç»„ï¼š</em><br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>-slice()ï¼š</span><br><span class="line"></span><br><span class="line">var arr = [<span class="string">'wsscat'</span>, <span class="string">'autumns'</span>, <span class="string">'winds'</span>];</span><br><span class="line">var arrCopy = arr.slice(<span class="number">0</span>);</span><br><span class="line">arrCopy[<span class="number">0</span>] = <span class="string">'tacssw'</span></span><br><span class="line">console.log(arr)//[<span class="string">'wsscat'</span>, <span class="string">'autumns'</span>, <span class="string">'winds'</span>]</span><br><span class="line">console.log(arrCopy)//[<span class="string">'tacssw'</span>, <span class="string">'autumns'</span>, <span class="string">'winds'</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>-concat():</span><br><span class="line"></span><br><span class="line">var arr = [<span class="string">'wsscat'</span>, <span class="string">'autumns'</span>, <span class="string">'winds'</span>];</span><br><span class="line">var arrCopy = arr.concat();</span><br><span class="line">arrCopy[<span class="number">0</span>] = <span class="string">'tacssw'</span></span><br><span class="line">console.log(arr)//[<span class="string">'wsscat'</span>, <span class="string">'autumns'</span>, <span class="string">'winds'</span>]</span><br><span class="line">console.log(arrCopy)//[<span class="string">'tacssw'</span>, <span class="string">'autumns'</span>, <span class="string">'winds'</span>]</span><br></pre></td></tr></table></figure></p><p><em>å¯¹è±¡</em></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">1</span>-æ–°å»ºå¯¹è±¡åéå†å®ç°</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">      name:<span class="string">'wsscat'</span>,</span><br><span class="line">      age:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">obj2.name = obj.name;</span><br><span class="line">obj2.age = obj.age</span><br><span class="line"></span><br><span class="line">obj.name = <span class="string">'autumns'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj);<span class="comment">//Object &#123;name: "autumns", age: 0&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2);<span class="comment">//Object &#123;name: "wsscat", age: 0&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>-å°è£…å¥½æ–¹æ³•è¿›è¡Œå¯¹è±¡æ‹·è´å¤„ç†</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'wsscat'</span>,</span><br><span class="line">  age: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> deepCopy = <span class="function"><span class="keyword">function</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> result = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> source[key] === <span class="string">'object'</span>) &#123;</span><br><span class="line">    result[key] = deepCopy(source[key])</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result[key] = source[key]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj3 = deepCopy(obj)</span><br><span class="line">obj.name = <span class="string">'autumns'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj);<span class="comment">//Object &#123;name: "autumns", age: 0&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj3);<span class="comment">//Object &#123;name: "wsscat", age: 0&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node+Express+Elementå®ç°æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</title>
      <link href="/2019/02/10/2019/Node-express%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD/"/>
      <url>/2019/02/10/2019/Node-express%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<p>æ¯•è®¾çš„å…±äº«å›¾ä¹¦ç³»ç»Ÿéœ€è¦æ‰€è¿ç”¨åˆ°çš„ï¼Œæœ‰å…³æ–‡ä»¶çš„ä¸Šä¼ ã€ä¸‹è½½åŠŸèƒ½çš„å®ç°ï¼Œç°åœ¨å°±æ€»ç»“ä¸€ä¸‹è®°å½•åœ¨åšå®¢ä¸Šï¼š</p><p><strong>ä¸Šä¼ åŠŸèƒ½</strong></p><p><em>å‰ç«¯</em></p><p>ä¸Šä¼ æ‰€ä½¿ç”¨çš„elementçš„uploadç»„ä»¶<br><a id="more"></a><br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">el</span>-upload class=<span class="string">"upload-demo"</span> ref=<span class="string">"upload"</span> action=<span class="string">""</span></span><br><span class="line">    :with-credentials=<span class="string">"true"</span></span><br><span class="line">    :<span class="keyword">on</span>-error=<span class="string">"handleError"</span></span><br><span class="line">    :limit=<span class="string">"1"</span></span><br><span class="line">    :before-upload=<span class="string">"beforeAvatarUpload"</span></span><br><span class="line">    :<span class="keyword">file</span>-<span class="keyword">list</span>=<span class="string">"fileList"</span></span><br><span class="line">    :http-request=<span class="string">"commintEditor"</span></span><br><span class="line">    :<span class="keyword">on</span>-exceed=<span class="string">"uploadExceed"</span></span><br><span class="line">    :<span class="keyword">on</span>-<span class="keyword">change</span>=<span class="string">"uploadChange"</span></span><br><span class="line">    :<span class="keyword">on</span>-<span class="built_in">remove</span>=<span class="string">"uploadRemove"</span></span><br><span class="line">    :auto-upload=<span class="string">"false"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">el</span>-button slot=<span class="string">"trigger"</span> size=<span class="string">"small"</span> <span class="built_in">type</span>=<span class="string">"primary"</span>&gt;é€‰å–æ–‡ä»¶&lt;/<span class="keyword">el</span>-button&gt;</span><br><span class="line">    &lt;!-- &lt;<span class="keyword">el</span>-button style=<span class="string">"margin-left: 10px;"</span> size=<span class="string">"small"</span> <span class="built_in">type</span>=<span class="string">"success"</span> @click=<span class="string">"submitUpload"</span>&gt;ä¸Šä¼ åˆ°æœåŠ¡å™¨&lt;/<span class="keyword">el</span>-button&gt; --&gt;</span><br><span class="line">    &lt;div slot=<span class="string">"tip"</span> class=<span class="string">"el-upload__tip"</span>&gt;åªèƒ½ä¸Šä¼ jpgã€pdfã€docæ–‡ä»¶ï¼Œä¸”ä¸è¶…è¿‡<span class="number">5</span>MB&lt;/div&gt;</span><br><span class="line">&lt;/<span class="keyword">el</span>-upload&gt;</span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­å¯¹ä¸€äº›é’©å­æ–¹æ³•è¿›è¡Œäº†å®šä¹‰ï¼Œç”¨äºæ£€éªŒä¸Šä¼ çš„è®¾å®šå¤§å°ï¼Œæ ¼å¼ç­‰â€¦ä¾‹å¦‚<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">beforeAvatarUpload (file) &#123;</span><br><span class="line">      <span class="keyword">var</span> fileType = file.name.substring(file.name.lastIndexOf(<span class="string">'.'</span>) + <span class="number">1</span>)</span><br><span class="line">      console.log(fileType)</span><br><span class="line">      <span class="keyword">const</span> isJPG = fileType === <span class="string">'jpg'</span></span><br><span class="line">      <span class="keyword">const</span> iswordx = fileType === <span class="string">'docx'</span></span><br><span class="line">      <span class="keyword">const</span> isword = fileType === <span class="string">'doc'</span></span><br><span class="line">      <span class="keyword">const</span> ispdf = fileType === <span class="string">'pdf'</span></span><br><span class="line">      <span class="keyword">const</span> ispng = fileType === <span class="string">'png'</span></span><br><span class="line">      <span class="keyword">const</span> isLt5M = file.size / <span class="number">1024</span> / <span class="number">1024</span> &lt; <span class="number">5</span></span><br><span class="line">      <span class="keyword">if</span> (!isJPG &amp;&amp; !isword &amp;&amp; !ispdf &amp;&amp; !iswordx &amp;&amp; !ispng) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(<span class="string">'ä¸Šä¼ åªèƒ½æ˜¯ jpgã€pngã€docã€pdf æ ¼å¼!'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!isLt5M) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(<span class="string">'ä¸Šä¼ å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 5MB!'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> (isJPG || isword || ispdf || iswordx || ispng) &amp;&amp; isLt5M</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  ä»¥ä¸Šæ˜¯å¯¹äºæ–‡ä»¶æ ¼å¼ï¼Œå¤§å°çš„æ£€éªŒ</span></span><br></pre></td></tr></table></figure></p><p>åœ¨ä¸Šä¼ çš„å‡½æ•°ä¸­ä½¿ç”¨formdataçš„å½¢å¼ä¼ è¾“<br><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">formData.<span class="built_in">append</span>(<span class="string">'file'</span>, <span class="variable">_file</span>)</span><br></pre></td></tr></table></figure></p><p>å¹¶ä¸”ç‹¬ç«‹é…ç½®ç›¸åº”Axiosçš„headers<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> config = &#123;</span><br><span class="line">        headers: &#123;</span><br><span class="line">          <span class="string">'Content-Type'</span>: <span class="string">'multipart/form-data'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></p><p><em>åå°</em></p><p>åå°æ¥æ”¶éƒ¨åˆ†ä½¿ç”¨çš„æ˜¯formidableæ¨¡å—ï¼Œå¹¶ä¸ºå…¶è®¾å®šæœåŠ¡å™¨ä¸­çš„é»˜è®¤å­˜å‚¨ç›®å½•</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¥æ”¶æ–‡ä»¶</span></span><br><span class="line"><span class="selector-tag">var</span> formidable = require(<span class="string">'formidable'</span>)</span><br><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">form</span> = new formidable.IncomingForm()</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span><span class="selector-class">.uploadDir</span> = <span class="string">'./uploadFile'</span></span><br></pre></td></tr></table></figure><p>å¯¹æ–‡ä»¶çš„è§£æéƒ¨åˆ†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­¤æ¨¡å—è§£æè¯·æ±‚ä¿¡æ¯ï¼Œå°†jsonæ•°æ®ä¸æ–‡ä»¶æ•°æ®åˆ†å¼€ä¸ºfieldã€filesä¸¤éƒ¨åˆ†</span></span><br><span class="line">form.parse(req, <span class="function"><span class="keyword">function</span> (<span class="params">err, field, files</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// fieldså­˜æ”¾jsonæ•°æ®ï¼Œfileså­˜æ”¾çš„æ˜¯æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">  files.field = field</span><br><span class="line">  <span class="keyword">var</span> $params = files.field</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  æˆ‘ä»¬å¯ä»¥è¯†åˆ«è‹¥fileså­˜åœ¨ï¼Œåˆ™è¿›è¡Œå­˜å‚¨å†™å…¥çš„æ“ä½œå†åç»­è¿›è¡Œæ•°æ®åº“è®°å½•æ“ä½œ</span></span><br><span class="line">  <span class="comment">//  1</span></span><br><span class="line">  <span class="comment">//  å¦‚æœæœ‰æ–‡ä»¶çš„æƒ…å†µä¸‹</span></span><br><span class="line">  <span class="keyword">if</span> (files.file) &#123;</span><br><span class="line">    <span class="comment">//  oldpathä¸ºè§£æè¯·æ±‚ä¸­æ–‡ä»¶æ—¶å­˜æ”¾çš„ç›®å½•åœ°å€ï¼Œæˆ‘ä»¬ç›®å‰éœ€è¦å°†å…¶é‡å‘½åç„¶åæ”¾å…¥æˆ‘ä»¬æ‰€éœ€è¦çš„æœ€ç»ˆåœ°å€</span></span><br><span class="line">    <span class="keyword">let</span> oldpath = path.join(files.file.path)</span><br><span class="line">    <span class="comment">//  è·å–filesç›¸å…³å±æ€§</span></span><br><span class="line">    <span class="keyword">var</span> JsonFile = files.file</span><br><span class="line">    <span class="keyword">var</span> fileName = JsonFile.name</span><br><span class="line">    <span class="comment">//  æ–°çš„ç›®å½•ï¼Œä¸ºäº†é˜²æ­¢åŒåï¼Œå†åŠ ä¸Šéšæœºæ•°</span></span><br><span class="line">    <span class="keyword">var</span> ranFileName = <span class="built_in">String</span>(<span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * <span class="number">8999</span> + <span class="number">10000</span>)).concat(fileName)</span><br><span class="line">    <span class="comment">//  æ–°ç”ŸæˆåŒ…å«éšæœºæ•°çš„æ–‡ä»¶åä¸ç›®å½•æ‹¼æ¥çš„åœ°å€</span></span><br><span class="line">    newpath = path.join(<span class="string">'./uploadFile'</span>, ranFileName)</span><br><span class="line">    <span class="comment">//  åˆ©ç”¨fsæ¨¡å—è¿›è¡Œæ–‡ä»¶é‡å‘½åå¹¶ä¸”ç§»åŠ¨</span></span><br><span class="line">    fs.rename(oldpath, newpath, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        result = &#123;</span><br><span class="line">          code: <span class="string">'1'</span>,</span><br><span class="line">          data: &#123;</span><br><span class="line">          &#125;,</span><br><span class="line">          msg: <span class="string">'æ–°æ–‡ç« ä¸Šä¼ é”™è¯¯'</span></span><br><span class="line">        &#125;</span><br><span class="line">        jsonWrite(res, result)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`ä¸Šä¼ æ–‡ä»¶é‡å‘½åé”™è¯¯<span class="subst">$&#123;err&#125;</span>`</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//  è¿›è¡Œæ•°æ®åº“è®°å½•ï¼Œnewpathä¸ºç§»åŠ¨åçš„ç›®å½•è®°å½•</span></span><br><span class="line">        commitToSql(req, res, $params, newpath)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//  æ— æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œæ•°æ®åº“è®°å½•</span></span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//  è¿›è¡Œæ•°æ®åº“è®°å½•ï¼Œnewpathä¸ºç§»åŠ¨åçš„ç›®å½•è®°å½•</span></span><br><span class="line">    commitToSql(req, res, $params, newpath)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>äºæ­¤ï¼Œä¾¿å®Œæˆäº†æ–‡ä»¶çš„ä¸Šä¼ è®°å½•ï¼ˆå…¶ä½™çœç•¥ä»£ç ï¼‰</p><hr><p><strong>ä¸‹è½½åŠŸèƒ½</strong></p><p><em>å‰ç«¯</em></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  åˆ©ç”¨window.openæ‰“å¼€ä¸€ä¸ªæ–°çš„é¡µé¢ï¼Œå¹¶ä¸”å‘é€ç›¸åº”çš„è¯·æ±‚è¿æ¥ä¸å‚æ•°</span></span><br><span class="line"><span class="comment">//  ç¼ºç‚¹ï¼šé¡µé¢é—ªç°</span></span><br><span class="line">lookArticle (index, row) &#123;</span><br><span class="line">  <span class="keyword">var</span> bookusername = row.username</span><br><span class="line">  <span class="keyword">var</span> booktitle = row.title</span><br><span class="line">  <span class="built_in">window</span>.open(<span class="string">`/lookArticle?bookusername=<span class="subst">$&#123;bookusername&#125;</span>&amp;booktitle=<span class="subst">$&#123;booktitle&#125;</span>`</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><em>åå°</em></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  åˆ†æç›¸åº”æ–‡ä»¶åç§°</span></span><br><span class="line"><span class="selector-tag">var</span> fileName = <span class="variable">$params</span>.fileName</span><br><span class="line"><span class="comment">//  æ‹¼æ¥åå°æœåŠ¡å™¨ä¸­æ–‡ä»¶çš„è·¯å¾„ï¼Œä»¥ä¾¿ä½¿ç”¨</span></span><br><span class="line"><span class="selector-tag">var</span> currFile = path.join(__dirname, <span class="string">'../uploadFile/'</span> + fileName)</span><br><span class="line"><span class="comment">//  ä½¿ç”¨fs.existsåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œç›®å‰å·²ç»ä¸æ¨èä½¿ç”¨fs.exists</span></span><br><span class="line">fs.exists(currFile, function (exists) &#123;</span><br><span class="line">  <span class="keyword">if</span> (exists) &#123;</span><br><span class="line">    console.log(<span class="string">'æ–‡ä»¶å­˜åœ¨'</span>)</span><br><span class="line">    res.download(currFile)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = &#123;</span><br><span class="line">      <span class="selector-tag">code</span>: <span class="string">'1'</span>,</span><br><span class="line">      data: &#123;</span><br><span class="line">      &#125;,</span><br><span class="line">      msg: <span class="string">'æ–‡ä»¶ä¸å­˜åœ¨'</span></span><br><span class="line">    &#125;</span><br><span class="line">    jsonWrite.jsonWrite(res, result)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>äºæ­¤å®Œæˆæ–‡ä»¶çš„ä¸‹è½½åŠŸèƒ½<br>æ¼”ç¤ºä»£ç ç•¥ä¸ºç®€å•</p>]]></content>
      
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> Node </tag>
            
            <tag> Express </tag>
            
            <tag> Element </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–°å¹´å¿«ä¹</title>
      <link href="/2019/02/08/2019/%E6%96%B0%E5%B9%B4%E5%BF%AB%E4%B9%90/"/>
      <url>/2019/02/08/2019/%E6%96%B0%E5%B9%B4%E5%BF%AB%E4%B9%90/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©æ˜¯å¤§å¹´åˆå››äº†ï¼Œè¿‡å»å‡ å¤©åœ¨çƒ­çƒˆçš„æ°”æ°›ä¸­ï¼Œè¿æ¥äº†å†œå†çŒªå¹´ï¼Œæˆ‘ä¹Ÿé¢ä¸´ç€å¤§å­¦å››å¹´çš„æœ€åä¸€ä¸ªå­¦æœŸï¼Œçæƒœ!ï¼Œå¸Œæœ›æ–°çš„ä¸€å¹´çš„æ¥ä¸´å¯ä»¥ä¸ºè‡ªå·±å¸¦æ¥ä¸é”™çš„å¥½è¿ï¼Œåœ¨å·¥ä½œä¸Šé¡ºåˆ©ï¼Œè‡ªå·±ä¸€åˆ‡çš„è§„åˆ’ï¼Œä¹Ÿå¯ä»¥é¡ºåˆ©çš„è¿›è¡Œä¸å®ç°ã€‚<strong>åŠ æ²¹ï¼</strong></p><p>ä¹Ÿå¸Œæœ›å®¶äººï¼Œæœ‹å‹ä»¬ï¼Œå¤§å®¶ï¼Œæ–°å¹´å¿«ä¹ï¼Œå¿ƒæƒ³äº‹æˆï¼Œèº«ä½“å¥åº·ï¼Œä¸‡äº‹å¦‚æ„ã€‚</p><p><img src="/2019/02/08/2019/æ–°å¹´å¿«ä¹/timg.gif" alt="2019" title="2019"></p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥å¸¸ç¢ç¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node+MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug</title>
      <link href="/2019/02/02/2019/Node-MySQL%E9%87%8A%E6%94%BE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E7%9A%84Bug/"/>
      <url>/2019/02/02/2019/Node-MySQL%E9%87%8A%E6%94%BE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E7%9A%84Bug/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åšæ¯•ä¸šè®¾è®¡æ—¶ï¼Œåœ¨å‰ç«¯ä¸šåŠ¡ä¸­å‘åå°è¯·æ±‚ç”¨æˆ·æ•°æ®æ—¶ï¼Œæ¯å½“è¯·æ±‚æ¬¡æ•°è¶…è¿‡äº”æ¬¡ï¼ŒåŠä»¥ä¸Šæ—¶ï¼Œæ€»ä¼šå¡æ­»ï¼Œäºæ˜¯ï¼Œç”¨ç®€å•çš„consoleåˆ¤æ–­ä»£ç åœæ­¢ä½ç½®ï¼Œå‘ç°æ¯æ¬¡è¿è¡Œåˆ°pool.getConnectionæ—¶ç¬¬äº”æ¬¡è¿æ¥æŸ¥è¯¢å°±ä¼šå¡ä½ï¼Œå¦‚å›¾</p><p><img src="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/QQæˆªå›¾20190202195830.png" alt="äº”æ¬¡è¿è¡Œåœ1" title="äº”æ¬¡è¿è¡Œåœ1"></p><p>å›¾ä¸€</p><p><img src="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/QQæˆªå›¾20190202195902.png" alt="äº”æ¬¡è¿è¡Œåœ2" title="äº”æ¬¡è¿è¡Œåœ2"></p><p>å›¾äºŒ</p><p>äºæ˜¯ä¹å°±æ„Ÿè§‰æ˜¯ç”±äºå‰æ¬¡è¿æ¥æ—¶çš„æ•°æ®åº“è¿æ¥æ²¡æœ‰é‡Šæ”¾çš„åŸå› å¯¼è‡´çš„ï¼Œäºæ˜¯ï¼Œåœ¨cmdä¸­æŸ¥çœ‹mysqlçš„è¿æ¥æƒ…å†µ</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql &gt; mysqladmin -uroot -<span class="selector-tag">p</span> processlist</span><br></pre></td></tr></table></figure><a id="more"></a><p>å†å®éªŒå‰ç«¯çš„è¯·æ±‚æ—¶ï¼Œæ•°æ®åº“çš„è¿æ¥æƒ…å†µ</p><p><font color="7f7f7f"><em>æ²¡æœ‰è¿æ¥è¯·æ±‚æ—¶</em></font><br><img src="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/QQæˆªå›¾20190202200600.png" alt="æ²¡æœ‰è¿æ¥è¯·æ±‚" title="æ²¡æœ‰è¿æ¥è¯·æ±‚"></p><p><font color="7f7f7f"><em>ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶</em></font><br><img src="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/QQæˆªå›¾20190202200619.png" alt="ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶" title="ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶"></p><p><font color="7f7f7f"><em>ç¬¬äºŒæ¬¡è¯·æ±‚æ—¶</em></font><br><img src="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/QQæˆªå›¾20190202200631.png" alt="ç¬¬äºŒæ¬¡è¯·æ±‚æ—¶" title="ç¬¬äºŒæ¬¡è¯·æ±‚æ—¶"></p><p><font color="7f7f7f"><em>ç¬¬äº”æ¬¡è¯·æ±‚æ—¶</em></font><br><img src="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/QQæˆªå›¾20190202200646.png" alt="ç¬¬äº”æ¬¡è¯·æ±‚æ—¶" title="ç¬¬äº”æ¬¡è¯·æ±‚æ—¶"></p><p>äºæ˜¯ä¹ï¼Œå¾—çŸ¥äº†æ¯ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œåå°çš„ä»£ç ä¸­æ€»æœ‰ä¸¤ä¸ªæ•°æ®åº“æŸ¥è¯¢æ²¡æœ‰é‡Šæ”¾è¿æ¥ï¼Œä»è€Œå¯¼è‡´ï¼Œç¨‹åºçš„ä¸­æ–­</p><p>é‚£æ¥ä¸‹æ¥æ¥æ£€æŸ¥ä¸€ä¸‹ä»£ç ï¼š</p><p><font color="ff0000">ç®€ç•¥çš„å†™ï¼Œä»£ç å¦‚ä¸‹</font><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getAlluserTotalPromise = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> promise2 = <span class="keyword">new</span> Promise(<span class="function"><span class="keyword">function</span> <span class="params">(resolve, reject)</span> </span>&#123;</span><br><span class="line">    pool.getConnection(<span class="function"><span class="keyword">function</span> <span class="params">(err, connection)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(result)</span><br><span class="line">      &#125;</span><br><span class="line">      connection.query($sql.userCenter.getuserTotal, [], (err, result) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          connection.release()</span><br><span class="line">          reject(result)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          resolve(result)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> promise2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡èµ°æŸ¥å‘ç°ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œif-elseé€»è¾‘æ—¶ï¼Œå¯¹äºelseæ—¶çš„æµç¨‹ä¸­å¿˜è®°æ·»åŠ æ•°æ®åº“é‡Šæ”¾äº†ï¼Œä»¥åŠåæ¥é‡‡ç”¨äº†æ–°çš„æ–¹å¼æ˜¯å¦æ•°æ®åº“è¿æ¥</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">pool</span><span class="selector-class">.releaseConnection</span>(<span class="selector-tag">connection</span>)</span><br></pre></td></tr></table></figure><p>äºæ˜¯æˆ‘ä»¬å°±å°†ä»£ç æ”¹ä¸ºäº†<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getAlluserTotalPromise = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> promise2 = <span class="keyword">new</span> Promise(<span class="function"><span class="keyword">function</span> <span class="params">(resolve, reject)</span> </span>&#123;</span><br><span class="line">    pool.getConnection(<span class="function"><span class="keyword">function</span> <span class="params">(err, connection)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        reject(result)</span><br><span class="line">      &#125;</span><br><span class="line">      connection.query($sql.userCenter.getuserTotal, [], (err, result) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="comment">// ä¿®æ”¹ä½ç½®</span></span><br><span class="line">          reject(result)</span><br><span class="line">          pool.releaseConnection(connection)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// ä¿®æ”¹ä½ç½®</span></span><br><span class="line">          resolve(result)</span><br><span class="line">          pool.releaseConnection(connection)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> promise2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¹‹åæˆ‘ä»¬å†ä¸€ééå‘é€è¯·æ±‚ï¼ŒæŸ¥çœ‹æ•°æ®åº“çš„è¿æ¥æƒ…å†µï¼Œå‘ç°è¿™æ—¶å€™æ•°æ®åº“çš„è¿æ¥é‡Šæ”¾å°±æ­£å¸¸äº†</p><p><font color="7f7f7f"><em>æ­£å¸¸è¯·æ±‚æ—¶</em></font><br><img src="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/QQæˆªå›¾20190202201843.png" alt="æ­£å¸¸è¯·æ±‚æ—¶" title="æ­£å¸¸è¯·æ±‚æ—¶"></p><p>å°±æŠŠä»Šå¤©çš„Bugè§£å†³äº†ï¼Œè·¯æ¼«æ¼«ï¼Œä»¥åè¿˜ä¼šå¤šç€å‘¢ï¼Œä¹Ÿç®—æ˜¯è‡ªå·±çš„ç²—å¿ƒå¤§æ„å¯¼è‡´çš„ï¼Œå¸Œæœ›ä»¥åè§£å†³é—®é¢˜çš„èƒ½åŠ›æ›´åŠ å‰å®³æœ‰æ‰€æå‡ï¼ŒèŠ‚çº¦æ—¶é—´</p>]]></content>
      
      
      
        <tags>
            
            <tag> Node </tag>
            
            <tag> Express </tag>
            
            <tag> MySQL </tag>
            
            <tag> Bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>transformçˆ¶å…ƒç´ å¯¹fixedå­å…ƒç´ çš„å½±å“</title>
      <link href="/2019/02/02/2019/transform%E5%AF%B9fixed/"/>
      <url>/2019/02/02/2019/transform%E5%AF%B9fixed/</url>
      
        <content type="html"><![CDATA[<p>åœ¨åº”ç”¨äº†å±æ€§transformçš„çˆ¶å…ƒç´ ä¸Šï¼Œè‹¥å…¶æ‹¥æœ‰fixedå±æ€§çš„å­å…ƒç´ ï¼Œåˆ™è¯¥å­å…ƒç´ çš„fixedå±æ€§è®²å¤±æ•ˆï¼Œå¹¶å°†ä»¥å…¶çˆ¶å…ƒç´ ä¸ºå®šä½åŸºå‡†</p><p>è¯¦æƒ…è¯·çœ‹ä¾‹å­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.outer</span> &#123;</span></span><br><span class="line"><span class="undefined">  overflow: hidden;</span></span><br><span class="line"><span class="undefined">  width: 300px;</span></span><br><span class="line"><span class="undefined">  height: 300px;</span></span><br><span class="line"><span class="undefined">  background: yellow;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.mid</span> &#123;</span></span><br><span class="line"><span class="undefined">  margin: 20px;</span></span><br><span class="line"><span class="undefined">  width: 200px;</span></span><br><span class="line"><span class="undefined">  height: 200px;</span></span><br><span class="line"><span class="undefined">  transform: translate(0, 0);</span></span><br><span class="line"><span class="undefined">  background: greenyellow;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.inner</span> &#123;</span></span><br><span class="line"><span class="undefined">  position: fixed;</span></span><br><span class="line"><span class="undefined">  top: 0;</span></span><br><span class="line"><span class="undefined">  left: 0;</span></span><br><span class="line"><span class="undefined">  width: 100px;</span></span><br><span class="line"><span class="undefined">  height: 100px;</span></span><br><span class="line"><span class="undefined">  background: pink;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"outer"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mid"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç æ‰€å‘ˆç°çš„å¸ƒå±€æ ·å¼ï¼š</p><p><img src="/2019/02/02/2019/transformå¯¹fixed/20181120224139596.png" alt="transform" title="transform"></p><a id="more"></a><p>è‹¥æˆ‘ä»¬åˆ é™¤å»çˆ¶å…ƒç´ çš„transformå±æ€§ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.outer</span> &#123;</span></span><br><span class="line"><span class="undefined">  overflow: hidden;</span></span><br><span class="line"><span class="undefined">  width: 300px;</span></span><br><span class="line"><span class="undefined">  height: 300px;</span></span><br><span class="line"><span class="undefined">  background: yellow;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.mid</span> &#123;</span></span><br><span class="line"><span class="undefined">  margin: 20px;</span></span><br><span class="line"><span class="undefined">  width: 200px;</span></span><br><span class="line"><span class="undefined">  height: 200px;</span></span><br><span class="line"><span class="undefined">  background: greenyellow;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.inner</span> &#123;</span></span><br><span class="line"><span class="undefined">  position: fixed;</span></span><br><span class="line"><span class="undefined">  top: 0;</span></span><br><span class="line"><span class="undefined">  left: 0;</span></span><br><span class="line"><span class="undefined">  width: 100px;</span></span><br><span class="line"><span class="undefined">  height: 100px;</span></span><br><span class="line"><span class="undefined">  background: pink;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"outer"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mid"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2019/02/02/2019/transformå¯¹fixed/20181120224251281.png" alt="transform2" title="transform2"></p><p>ç”±æ­¤å¯è§ï¼Œå…¶çˆ¶å…ƒç´ çš„transformå¯¹fixedå­å…ƒç´ çš„å½±å“ï¼›</p><p>æ³¨ï¼Œæ­¤å®ä¾‹åœ¨chormeä»¥åŠfirefoxä¸‹æœ‰æ•ˆï¼ŒIEç¯å¢ƒç­‰ä¸å—å½±å“</p>]]></content>
      
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> Bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueçˆ¶å­ç»„ä»¶é—´çš„é€šä¿¡</title>
      <link href="/2019/02/02/2019/Vue%E7%88%B6%E5%AD%90%E9%80%9A%E4%BF%A1/"/>
      <url>/2019/02/02/2019/Vue%E7%88%B6%E5%AD%90%E9%80%9A%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<font color="ff0000"><strong>çˆ¶ â€“&gt; å­</strong></font><p>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’ï¼Œåˆ©ç”¨propså±æ€§<br><a id="more"></a><br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="comment">&lt;!-- é€šè¿‡ä¸ºå­ç»„ä»¶ç»‘å®šå±æ€§ --&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">child</span> <span class="attr">:parentToChild</span>=<span class="string">"value1"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span>             </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span></span><br><span class="line"><span class="xml">export default </span><span class="template-variable">&#123;</span></span><br><span class="line"><span class="template-variable">  data () &#123;</span></span><br><span class="line"><span class="template-variable">    return &#123;</span></span><br><span class="line"><span class="template-variable">      value1:'çˆ¶ç»„ä»¶çš„å€¼ä¼ ç»™å­ç»„ä»¶'</span></span><br><span class="line"><span class="template-variable">    &#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">  &#125;,</span></span><br><span class="line"><span class="xml">  components: </span><span class="template-variable">&#123;&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">  mounted () </span><span class="template-variable">&#123;&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">  watch: </span><span class="template-variable">&#123;&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">  methods: </span><span class="template-variable">&#123;&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">å­ç»„ä»¶</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      valueFromParent:<span class="string">''</span>,</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  components: &#123;&#125;,</span></span><br><span class="line"><span class="undefined">  </span></span><br><span class="line"><span class="actionscript">  <span class="comment">// å­ç»„ä»¶é€šè¿‡propså¯ä»¥æ‹¿åˆ°çˆ¶ç»„ä»¶ä¼ é€’çš„å€¼</span></span></span><br><span class="line"><span class="actionscript">  props: [<span class="string">'parentToChild'</span>],</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  mounted () &#123;&#125;,</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// å€˜è‹¥éœ€è¦ä¸dataä¸­ç»‘å®šçš„æ•°æ®é¡¹åº”ï¼Œåˆ™åœ¨watchä¸­åšç›‘è§†</span></span></span><br><span class="line"><span class="undefined">  watch: &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="string">'parentToChild'</span>: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.valueFromParent = <span class="keyword">this</span>.parentToChild</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><font color="ff0000"><strong>å­ â€“&gt; çˆ¶</strong></font><p>åˆ©ç”¨emitæ–¹æ³•ï¼Œç»‘å®šè§¦å‘äº‹ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">å­ç»„ä»¶</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"clickEvent"</span>&gt;</span>ç‚¹å‡»æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      value1:<span class="string">'è¿™æ˜¯è¦ä¼ ç»™çˆ¶ç»„ä»¶çš„å€¼'</span>,</span></span><br><span class="line"><span class="actionscript">      value2:<span class="string">'å¯ä»¥ä¼ å¤šä¸ªå€¼'</span>,</span></span><br><span class="line"><span class="actionscript">      value3:<span class="literal">false</span>,</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  components: &#123;&#125;,</span></span><br><span class="line"><span class="undefined">  props: [],</span></span><br><span class="line"><span class="undefined">  mounted () &#123;&#125;,</span></span><br><span class="line"><span class="undefined">  watch: &#123;&#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    clickEvent()&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// é€šè¿‡ç»‘å®šäº‹ä»¶ï¼Œè§¦å‘emit</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$emit(<span class="string">'sendValueToParent'</span>,<span class="keyword">this</span>.value1,</span></span><br><span class="line"><span class="actionscript"><span class="keyword">this</span>.value2,<span class="keyword">this</span>.value3,<span class="literal">true</span>);    </span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  created()&#123;&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯çˆ¶ç»„ä»¶<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- ç»‘å®šäº‹ä»¶è§¦å‘getValueFromChild  --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">child</span> @<span class="attr">sendValueToParent</span> = <span class="string">"getValueFromChild"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  components: &#123;&#125;,</span></span><br><span class="line"><span class="undefined">  mounted () &#123;&#125;,</span></span><br><span class="line"><span class="undefined">  watch: &#123;&#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// è§¦å‘çš„äº‹ä»¶</span></span></span><br><span class="line"><span class="undefined">    getValueFromChild(value1,value2,value3,value4)&#123;                             &lt;-----å…³é”®</span></span><br><span class="line"><span class="actionscript">      <span class="comment">//æ‰“å°å€¼åˆ†åˆ«æ˜¯</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">//value1: è¿™æ˜¯è¦ä¼ ç»™çˆ¶ç»„ä»¶çš„å€¼</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">//value2: å¯ä»¥ä¼ å¤šä¸ªå€¼</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">//value3: false</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">//value4: true</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  created()&#123;&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯çˆ¶å­ç»„ä»¶ç›¸äº’ä¼ é€’å€¼å¾—å¤§è‡´è¡Œä¸º</p><p>å¤§è‡´å¯ä»¥ç”¨äºï¼šä¾‹<br>åˆ†é¡µå™¨ç»„ä»¶ä¸çˆ¶ç»„ä»¶çš„å…³ç³»</p><p><img src="/2019/02/02/2019/Vueçˆ¶å­é€šä¿¡/vue.jpg" alt="vueçˆ¶å­ç»„ä»¶" title="vueçˆ¶å­ç»„ä»¶"></p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Axiosä½¿ç”¨</title>
      <link href="/2019/01/31/2019/Axios%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/01/31/2019/Axios%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>è¿™å‡ å¤©ä¸´è¿‘è¿‡å¹´ï¼Œå®ä¹ çš„å…¬å¸ä¹Ÿä»25å·å¼€å§‹æ”¾å‡äº†ï¼Œå¥½å¥½ä¼‘æ•´äº†å‡ å¤©ï¼Œæ‘¸é±¼åšåšæ¯•ä¸šè®¾è®¡ï¼Œä¹Ÿè¿˜æœ‰å‡ å¤©å°±è¦è¿‡å¹´äº†ï¼Œä½†æ—¶é—´ç´§è¿«ï¼Œæ¯•ä¸šï¼Œå·¥ä½œçš„å„ç§äº‹æƒ…ä¹Ÿéƒ½å°†æ£˜æ‰‹èµ·æ¥ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸èƒ½é—²å¤ªä¹…å‘¢ï¼Œè¦æœ‰æ‰€ç´§è¿«æ„Ÿâ€¦</p><p>ä»Šå¤©é›¶æ˜Ÿæ€»ç»“ä¸€ä¸‹ä¹‹å‰ç¬”è®°ä¸­çš„Axiosçš„ä½¿ç”¨æ–¹æ³•:<br><a id="more"></a></p><hr><font color="ff0000"><em>get</em></font><figure class="highlight scilab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">'/user?ID=12345'</span>)</span><br><span class="line">  .<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span> <span class="params">(response)</span> &#123;</span></span><br><span class="line">    console.<span class="built_in">log</span>(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="keyword">catch</span>(<span class="function"><span class="keyword">function</span> <span class="params">(error)</span> &#123;</span></span><br><span class="line">    console.<span class="built_in">log</span>(<span class="built_in">error</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯é€‰åœ°ï¼Œä¸Šé¢çš„è¯·æ±‚å¯ä»¥è¿™æ ·åš</span></span><br><span class="line">axios.get(<span class="string">'/user'</span>, &#123;</span><br><span class="line">  params: &#123;</span><br><span class="line">  ID: <span class="number">12345</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span> <span class="params">(response)</span> &#123;</span></span><br><span class="line">  console.<span class="built_in">log</span>(response);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="keyword">catch</span>(<span class="function"><span class="keyword">function</span> <span class="params">(error)</span> &#123;</span></span><br><span class="line">  console.<span class="built_in">log</span>(<span class="built_in">error</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><font color="ff0000"><em>post</em></font><figure class="highlight scilab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(<span class="string">'/user'</span>, &#123;</span><br><span class="line">  firstName: <span class="string">'Fred'</span>,</span><br><span class="line">  lastName: <span class="string">'Flintstone'</span></span><br><span class="line">&#125;)</span><br><span class="line">.<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span> <span class="params">(response)</span> &#123;</span></span><br><span class="line">  console.<span class="built_in">log</span>(response);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="keyword">catch</span>(<span class="function"><span class="keyword">function</span> <span class="params">(error)</span> &#123;</span></span><br><span class="line">  console.<span class="built_in">log</span>(<span class="built_in">error</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><font color="ff0000"><em>Axios API</em></font><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯ä½¿ç”¨ä¸‹åˆ—é…ç½®æ–¹æ³•è¯·æ±‚axios(config)</span></span><br><span class="line"><span class="selector-tag">axios</span>(&#123;</span><br><span class="line"><span class="attribute">method</span>: <span class="string">'post'</span>,</span><br><span class="line"><span class="attribute">url</span>: <span class="string">'/user/12345'</span>,</span><br><span class="line"><span class="attribute">data</span>: &#123;</span><br><span class="line">    <span class="attribute">firstName</span>: <span class="string">'Fred'</span>,</span><br><span class="line">    <span class="attribute">lastName</span>: <span class="string">'Flintstone'</span></span><br><span class="line">&#125;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">axios</span>(url[, config])</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">axios</span>(<span class="string">'/user/12345'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä»¥åŠå‡ ç§å…¶ä»–çš„è¯·æ±‚åˆ«å: </span><br><span class="line"></span><br><span class="line"><span class="selector-tag">axios</span><span class="selector-class">.request</span>(config)    </span><br><span class="line"><span class="selector-tag">axios</span><span class="selector-class">.get</span>(url[, config])    </span><br><span class="line"><span class="selector-tag">axios</span><span class="selector-class">.delete</span>(url[, config])    </span><br><span class="line"><span class="selector-tag">axios</span><span class="selector-class">.head</span>(url[, config])    </span><br><span class="line"><span class="selector-tag">axios</span><span class="selector-class">.post</span>(url[, data[, config]])</span><br><span class="line"><span class="selector-tag">axios</span><span class="selector-class">.put</span>(url[, data[, config]])  </span><br><span class="line"><span class="selector-tag">axios</span><span class="selector-class">.patch</span>(url[, data[, config]])</span><br></pre></td></tr></table></figure><font color="ff0000"><em>å¤šä¸ªAxiosçš„æ‰§è¡Œ</em></font><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="keyword">all</span>(iterable)</span><br><span class="line">axios.spread(callback)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title">getUserAccount</span>() &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="type">axios.get('/user/12345')</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title">getUserPermissions</span>() &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="type">axios.get('/user/12345/permissions')</span>;&#125;</span><br><span class="line"></span><br><span class="line">axios.<span class="keyword">all</span>([getUserAccount(), getUserPermissions()])</span><br><span class="line">  .<span class="keyword">then</span>(axios.spread(<span class="keyword">function</span> <span class="title"></span>(acct, perms) &#123;</span><br><span class="line">  // ä¸¤ä¸ªè¯·æ±‚ç°åœ¨éƒ½æ‰§è¡Œå®Œæˆ</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><font color="ff0000"><em>Axiosè¯·æ±‚çš„é…ç½®é¡¹</em></font><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attribute">url</span>: <span class="string">'url'</span>  <span class="comment">// è¯·æ±‚çš„url</span></span><br><span class="line">    <span class="attribute">method</span>: <span class="string">'get'</span>  <span class="comment">//  è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="attribute">baseURL</span>: <span class="string">'url'</span>  <span class="comment">//  å°†baserURLåŠ åœ¨urlå‰è¾¹ï¼Œä¾¿äºaxiosä¼ é€’ä¸ºç›¸å¯¹URL </span></span><br><span class="line">    <span class="attribute">transformRequest</span>: [function (data) &#123;</span><br><span class="line">        return data</span><br><span class="line">    &#125;] <span class="comment">//å…è®¸å‘æœåŠ¡å™¨å‘é€æ•°æ®å‰ï¼Œä¿®æ”¹è¯·æ±‚çš„æ•°æ®ï¼Œåªé™äº 'PUT','POST','PATCH'è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">    <span class="attribute">transformRequest</span>: [function (data) &#123;</span><br><span class="line">        return data</span><br><span class="line">    &#125;] <span class="comment">//å…è®¸å‘æœåŠ¡å™¨å“åº”æ•°æ®åï¼Œæ•°æ®ä¼ é€’ç»™then/catchå‰ï¼Œä¿®æ”¹å“åº”æ•°æ®</span></span><br><span class="line">    <span class="attribute">headers</span>: &#123;<span class="string">''</span>X-Requested-With<span class="string">': '</span>XMLHttpRequest<span class="string">''</span>&#125;  <span class="comment">//è‡ªå®šä¹‰è¯·æ±‚å¤´</span></span><br><span class="line">    <span class="attribute">params</span>: &#123;</span><br><span class="line">        <span class="attribute">ID</span>: <span class="number">12345</span></span><br><span class="line">    &#125;  <span class="comment">// å°†å‘é€çš„URLå‚æ•°</span></span><br><span class="line">    <span class="attribute">paramsSerializer</span>: function (params) &#123;</span><br><span class="line">        return Qs.stringify(params, &#123;<span class="attribute">arrayFormat</span>: <span class="string">'brackets'</span>&#125;)</span><br><span class="line">    &#125;   <span class="comment">// è´Ÿè´£åºåˆ—åŒ– paramsï¼Œä¸ºä»€ä¹ˆï¼Ÿ-&gt;çœ‹è§£å†³é—®é¢˜1ã€ï¼Œæ‰€ä»¥éœ€è¦åºåˆ—åŒ–</span></span><br><span class="line">    <span class="attribute">data</span>: &#123;</span><br><span class="line">        <span class="attribute">firstName</span>: <span class="string">'Fred'</span>   <span class="comment">// ä½œä¸ºè¯·æ±‚ä¸»ä½“å‘é€çš„æ•°æ®</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">timeout</span>: <span class="number">1000</span>   <span class="comment">// æŒ‡å®šè¯·æ±‚è¶…æ—¶çš„æ—¶é—´æ•°ï¼Œè¶…æ—¶å°†ä¸­æ–­</span></span><br><span class="line">    <span class="attribute">withCredentials</span>: false  <span class="comment">//è·¨åŸŸæ—¶æ˜¯å¦éœ€è¦å‡­è¯</span></span><br><span class="line">    </span><br><span class="line">    ä»¥åŠå…¶ä½™ä¼—å¤šæ–¹æ³•...</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><font color="ff0000"><em>paramsä¸data</em></font><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">params</span>ä¸<span class="class"><span class="keyword">data</span>çš„åŒºåˆ«ï¼Ÿï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="title">params</span>æ˜¯æ·»åŠ åˆ°urlçš„è¯·æ±‚å­—ç¬¦ä¸²çš„ï¼Œç”¨äºgetè¯·æ±‚</span><br><span class="line"><span class="class"><span class="keyword">data</span>æ˜¯æ·»åŠ åˆ°bodyä¸­çš„ï¼Œç”¨äºpostè¯·æ±‚</span></span><br></pre></td></tr></table></figure><font color="ff0000"><em>Axiosè¯·æ±‚çš„ç»“æ„</em></font><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">response-&gt;<span class="symbol">:</span>å“åº”ç»“æ„</span><br><span class="line">&#123;</span><br><span class="line">  /<span class="regexp">/ `data` ç”±æœåŠ¡å™¨æä¾›çš„å“åº”</span></span><br><span class="line"><span class="regexp">  data: &#123;&#125;,</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ `status` æ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ç </span></span><br><span class="line"><span class="regexp">  status: 200,</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ `statusText` æ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ä¿¡æ¯</span></span><br><span class="line"><span class="regexp">  statusText: 'OK',</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ `headers` æœåŠ¡å™¨å“åº”çš„å¤´</span></span><br><span class="line"><span class="regexp">  headers: &#123;&#125;,</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ `config` æ˜¯ä¸ºè¯·æ±‚æä¾›çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="regexp">  config: &#123;&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><font color="ff0000"><em>axios.createåˆ›å»ºå®ä¾‹</em></font><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// è‡ªå®šä¹‰åˆ›é€ ä¸€ä¸ªaxiosçš„å®ä¾‹ï¼Œè¿™æ ·äº¦å¯ä»¥ä¸é»˜è®¤çš„axiosåŒºåˆ†å¼€æ¥</span><br><span class="line">var<span class="built_in"> instance </span>= axios.create(&#123;</span><br><span class="line">  baseURL: 'https://api.example.com'</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><font color="ff0000"><em>axiosæ‹¦æˆªå™¨</em></font><p>å¯ç»Ÿä¸€åœ¨è¯·æ±‚å‘é€æ—¶æˆ–è€…æ¥æ”¶æ—¶åšç½‘ç»œçš„ç»Ÿä¸€å¤„ç†ï¼Œä¾‹å¦‚å“åº”çš„404ç­‰é”™è¯¯å¤„ç†ï¼Œè€Œä¸ç”¨äº¤ç”±æ¯ä¸€ä¸ªè¯·æ±‚å“åº”æ¥åš</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ</span></span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ</span></span><br><span class="line">  <span class="keyword">return</span> response;</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Axios </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript bindçš„æ¨¡æ‹Ÿå®ç°</title>
      <link href="/2019/01/24/2019/JSbind%E6%A8%A1%E6%8B%9F/"/>
      <url>/2019/01/24/2019/JSbind%E6%A8%A1%E6%8B%9F/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨mqyqingfeng<a href="https://github.com/mqyqingfeng/Blog/issues/12#" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œ</a>çš„githubBlogä¸Šçœ‹åˆ°æœ‰å…³JSçš„bindçš„æ¨¡æ‹Ÿå®ç°ï¼Œäºæ˜¯ä¹Ÿè·Ÿç€ä¸€èµ·å®ç°äº†ä¸€éï¼Œéœ€è¦æ›´åŠ è¯¦ç»†çš„äº†è§£çš„è¯ï¼Œä¹Ÿå»ºè®®å‰å¾€å‰è¾ˆçš„Blogå­¦ä¹ ï¼Œæ„Ÿè°¢ã€‚</p><p>ä»¥ä¸‹æ˜¯æˆ‘å­¦ä¹ åè¿›è¡Œæ¨¡æ‹Ÿçš„å®ç°æ–¹å¼ã€‚</p><a id="more"></a><hr><font color="ff0000"><strong>bindå‡½æ•°</strong></font><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo =&#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bindFoo = bar.bind(foo)</span><br><span class="line"><span class="comment">// bindä¸ä¼šç«‹å³æ‰§è¡Œ</span></span><br><span class="line">bindFoo(); <span class="comment">//1</span></span><br></pre></td></tr></table></figure><br><br>æˆ‘ä»¬å¯ä»¥æ€»ç»“å¾—åˆ°ï¼Œbindå‡½æ•°ä¸åŒäºcallã€applyï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæœªæ‰§è¡Œçš„å‡½æ•°ï¼Œå¹¶ä¸”ç­‰å¾…ä½ çš„æ‰§è¡Œ<br><br>äºæ˜¯æˆ‘ä»¬æ ¹æ®æ­¤åšå‡ºç¬¬ä¸€ç‰ˆæ¨¡æ‹Ÿ<br><br>â€”<br><br><font color="ff0000"><strong>ç¬¬ä¸€ç‰ˆ</strong></font><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo =&#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Function</span>.prototype.bind2 = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        self.apply(context)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result = bar.bind2(foo)</span><br><span class="line">result(); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><font color="7f7f7f"><em>ä¸Šé¢æˆ‘ä»¬æ¨¡æ‹Ÿå‡ºæ¥å¯¹äºthisçš„æŒ‡å‘é—®é¢˜ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»§ç»­å¯¹å®ƒçš„ä¼ é€’å‚æ•°è¿›è¡Œå¤„ç†</em></font><font color="7f7f7f"><em>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹åŸç”Ÿbindçš„å¤„ç†ä¸æ•ˆæœ</em></font><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo =&#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name)   <span class="comment">//  Jayant</span></span><br><span class="line">    <span class="built_in">console</span>.log(age)    <span class="comment">// 23</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.value) <span class="comment">//1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ­¤å¤„ä¼ äº†éƒ¨åˆ†å‚æ•°</span></span><br><span class="line"><span class="keyword">var</span> bindFoo = bar.bind(foo, <span class="string">'Jayant'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†ä¼ éƒ¨åˆ†å‚æ•°</span></span><br><span class="line">bindFoo(<span class="number">23</span>)</span><br></pre></td></tr></table></figure><hr><font color="ff0000"><strong>ç¬¬äºŒç‰ˆ</strong></font><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind3 = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="comment">// å…ˆæ¥å—ä¸€éç¬¬ä¸€æ¬¡çš„å‚æ•°ï¼Œ</span></span><br><span class="line">    <span class="comment">// ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ä¼ é€’çš„åœ¨returnçš„functionä¸­å¤„ç†</span></span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> bindArr = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>)</span><br><span class="line">        <span class="comment">// å¤„ç†ä¼ å…¥çš„å‚æ•°;</span></span><br><span class="line">        <span class="keyword">return</span> self.apply(context, args.concat(bindArr));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><font color="7f7f7f"><em>æˆ‘ä»¬é€‰æ‹©å°†å‚æ•°åœ¨å…¶ä¸­åˆ’åˆ†å‡ºæ¥ï¼ŒäºŒæ­¥å¤„ç†ï¼Œå®Œæˆäº†bindå‚æ•°é—®é¢˜</em></font><hr><p><font color="ff0000"><strong>æœ€ç»ˆç‰ˆ</strong></font></p><p><font color="7f7f7f"><em>å¤„ç†æœ‰å…³bindå‡½æ•°çš„newé—®é¢˜</em></font><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind4 = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Function.prototype.bind - what is trying to be bound is not callable"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> fNOP = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> fBound = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> bindArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">        <span class="keyword">return</span> self.apply(<span class="keyword">this</span> <span class="keyword">instanceof</span> fNOP ? <span class="keyword">this</span> : context, args.concat(bindArgs));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fNOP.prototype = <span class="keyword">this</span>.prototype;</span><br><span class="line">    fBound.prototype = <span class="keyword">new</span> fNOP();</span><br><span class="line">    <span class="keyword">return</span> fBound;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSapplyæ¨¡æ‹Ÿ</title>
      <link href="/2019/01/23/2019/JSapply%E6%A8%A1%E6%8B%9F/"/>
      <url>/2019/01/23/2019/JSapply%E6%A8%A1%E6%8B%9F/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬ä¸Šä¸€èŠ‚è®¨è®ºäº†callå‡½æ•°çš„å®ç°ï¼ŒæŒ‰å›¾ç´¢éª¥ï¼Œapplyå‡½æ•°çš„å®ç°ä¹Ÿæ˜¯ç±»ä¼¼çš„</p><a id="more"></a><h4 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// applyæ¨¡æ‹Ÿ</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.apply_ = <span class="function"><span class="keyword">function</span> (<span class="params">obj, arr</span>) </span>&#123;</span><br><span class="line">    obj = obj ? <span class="built_in">Object</span>(obj) : <span class="built_in">window</span>;</span><br><span class="line">    obj.fn = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> result;</span><br><span class="line">    <span class="keyword">if</span> (!arr) &#123;</span><br><span class="line">        result = obj.fn();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> args = [];</span><br><span class="line">        <span class="comment">// æ³¨æ„è¿™é‡Œçš„iä»0å¼€å§‹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="line">            args.push(<span class="string">"arr["</span> + i + <span class="string">"]"</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        result = <span class="built_in">eval</span>(<span class="string">"obj.fn("</span> + args + <span class="string">")"</span>); <span class="comment">// æ‰§è¡Œfn</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">delete</span> obj.fn; <span class="comment">//åˆ é™¤fn</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript callçš„æ¨¡æ‹Ÿå®ç°</title>
      <link href="/2019/01/23/2019/JScall%E6%A8%A1%E6%8B%9F/"/>
      <url>/2019/01/23/2019/JScall%E6%A8%A1%E6%8B%9F/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨mqyqingfeng<a href="https://github.com/mqyqingfeng/Blog/issues/11" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œ</a>çš„githubBlogä¸Šçœ‹åˆ°æœ‰å…³JSçš„callçš„æ¨¡æ‹Ÿå®ç°ï¼Œäºæ˜¯ä¹Ÿè·Ÿç€ä¸€èµ·å®ç°äº†ä¸€éï¼Œéœ€è¦æ›´åŠ è¯¦ç»†çš„äº†è§£çš„è¯ï¼Œä¹Ÿå»ºè®®å‰å¾€å‰è¾ˆçš„Blogå­¦ä¹ ï¼Œæ„Ÿè°¢ã€‚</p><p>ä»¥ä¸‹æ˜¯æˆ‘å­¦ä¹ åè¿›è¡Œæ¨¡æ‹Ÿçš„å®ç°æ–¹å¼ã€‚</p><a id="more"></a><hr><font color="ff0000"><strong>callçš„ä½¿ç”¨</strong></font><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  value: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name) <span class="comment">// Jayant</span></span><br><span class="line">  <span class="built_in">console</span>.log(age)  <span class="comment">// 23</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.value) <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line">bar.call(foo,<span class="string">'Jayant'</span>,<span class="number">23</span>)</span><br></pre></td></tr></table></figure><br><br><font color="7f7f7f"><em>å¦‚æœå°†bar()ä½œä¸ºfooçš„å±æ€§ï¼š</em></font><p>é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥å®Œæˆå…¶thisçš„æ”¹å˜<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    value: <span class="number">1</span>,</span><br><span class="line">    bar: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å°†barä½œä¸ºå±æ€§æ”¾åœ¨fooä¸Š</span></span><br><span class="line">foo.bar();</span><br></pre></td></tr></table></figure></p><p>é‚£ä¹ˆæŒ‰ç…§æ­¤æ€è·¯ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥å°†å¤§è‡´çš„è¡Œä¸ºæŠ½è±¡ç§°ä¸º<br><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// èµ‹ç»™å±æ€§--æ‰§è¡Œå®ƒ--åˆ é™¤å®ƒ</span></span><br><span class="line">foo.<span class="keyword">fn</span> = bar()</span><br><span class="line">foo.<span class="keyword">fn</span>()</span><br><span class="line">delete foo.<span class="keyword">fn</span></span><br></pre></td></tr></table></figure></p><font color="7f7f7f"><em>äºæ˜¯æˆ‘ä»¬æ ¹æ®æˆ‘ä»¬çš„æ€è·¯ï¼Œå®ç°ç¬¬ä¸€ç‰ˆç»‘å®šå®ç°ï¼š</em></font><hr><font color="ff0000"><strong>ç¬¬ä¸€ç‰ˆ:</strong></font><p>æˆ‘ä»¬é€‰æ‹©å°†è¯¥å‡½æ•°å®šä¹‰åœ¨FunctionåŸå‹ä¸Š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.call2 = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    context.fn = <span class="keyword">this</span>;</span><br><span class="line">    context.fn();</span><br><span class="line">    <span class="keyword">delete</span> context.fn;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.value)</span><br><span class="line">&#125;</span><br><span class="line">bar.call2(foo)  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></p><font color="7f7f7f"><em>æˆ‘ä»¬åœ¨call2å‡½æ•°ä¸Šå°†thisèµ‹äºˆäº†contextçš„fnå±æ€§ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œä¹‹ååˆ é™¤å®ƒ</em></font><hr><font color="7f7f7f"><em>å…¶æ¬¡callä¸­è¿˜æœ‰å‚æ•°çš„é—®é¢˜ï¼ŒæŒ‰ç…§æˆ‘ä»¬çš„ç¬¬ä¸€ç‰ˆå®ç°ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ä¼ å…¥å‚æ•°</em></font><font color="7f7f7f"><em>äºæ˜¯æˆ‘ä»¬è¿›ä¸€æ­¥è¿›è¡Œå‚æ•°çš„å¤„ç†</em></font><font color="ff0000"><strong>ç¬¬äºŒç‰ˆ</strong></font><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.call3 = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    context.fn = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> args = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å› ä¸ºæ­¤å¤„çš„argumentsé‡Œè¾¹æœ‰å‚æ•°,å‰¥å¤ºç¬¬ä¸€ä¸ªçš„contextæ–¹æ³•,å…¶ä½™å°±æ˜¯å‚æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">1</span>,len=<span class="built_in">arguments</span>.length;i&lt;len;i++)&#123;</span><br><span class="line">        args.push(<span class="built_in">arguments</span>[i])</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;!--å…³é”®åœ¨äºä¸Šè¾¹å¯¹äº<span class="built_in">arguments</span>å‚æ•°çš„æå–--&gt;</span><br><span class="line"></span><br><span class="line">    context.fn(...args);</span><br><span class="line">    <span class="keyword">delete</span> context.fn;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">name,age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name)   <span class="comment">//  jayant2</span></span><br><span class="line">    <span class="built_in">console</span>.log(age)    <span class="comment">// 23</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.value) <span class="comment">//  1</span></span><br><span class="line">&#125;</span><br><span class="line">bar.call3(foo,<span class="string">'jayant2'</span>,<span class="number">23</span>)</span><br></pre></td></tr></table></figure><font color="7f7f7f"><em>äºæ˜¯æˆ‘ä»¬å®Œæˆäº†call3å‡½æ•°å†…çš„å‚æ•°å®šä¹‰ï¼Œä¼ é€’é—®é¢˜</em></font><hr><font color="ff0000"><strong>ç¬¬ä¸‰ç‰ˆ</strong></font><font color="7f7f7f"><em>ç¬¬ä¸‰ç‰ˆï¼Œè¿›è¡Œäº†å‡½æ•°çš„å…·ä½“å®Œå–„ï¼Œthisä¸ºç©ºçš„æƒ…å†µï¼ŒæŒ‡å‘nullï¼Œå°†å€¼è¿”å›çš„æƒ…å†µ</em></font><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.call4 = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    &lt;!--æ­¤å¤„è¿›è¡Œäº†ä¼ å…¥<span class="keyword">this</span>æ˜¯å¦ä¸ºç©ºçš„æƒ…å†µ--&gt;</span><br><span class="line">    <span class="keyword">var</span> context = context || <span class="built_in">window</span></span><br><span class="line"></span><br><span class="line">    context.fn = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> args = [];</span><br><span class="line">    <span class="comment">// å› ä¸ºæ­¤å¤„çš„argumentsé‡Œè¾¹æœ‰å‚æ•°,å‰¥å¤ºç¬¬ä¸€ä¸ªçš„contextæ–¹æ³•,å…¶ä½™å°±æ˜¯å‚æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">1</span>,len=<span class="built_in">arguments</span>.length;i&lt;len;i++)&#123;</span><br><span class="line">        args.push(<span class="built_in">arguments</span>[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> result = context.fn(...args);</span><br><span class="line">    <span class="keyword">delete</span> context.fn;</span><br><span class="line">    &lt;!--è¿›è¡Œäº†è¿”å›å€¼å¤„ç†--&gt;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">name,age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name)   <span class="comment">//  jayant2</span></span><br><span class="line">    <span class="built_in">console</span>.log(age)    <span class="comment">// 23</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.value) <span class="comment">//  1</span></span><br><span class="line">&#125;</span><br><span class="line">bar.call4(foo,<span class="string">'jayant4'</span>,<span class="number">23</span>)</span><br></pre></td></tr></table></figure><font color="7f7f7f"><em>è‡³æ­¤ï¼Œä»¥ä¸Šå°±æ˜¯è¿›è¡Œcallæ¨¡æ‹Ÿçš„å¤§è‡´è¿‡ç¨‹</em></font><p><img src="/2019/01/23/2019/JScallæ¨¡æ‹Ÿ/JScall.jpg" alt="åº­é™¢æµ·è¾¹" title="åº­é™¢æµ·è¾¹"></p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptç»§æ‰¿</title>
      <link href="/2019/01/23/2019/JavaScript%E7%BB%A7%E6%89%BF/"/>
      <url>/2019/01/23/2019/JavaScript%E7%BB%A7%E6%89%BF/</url>
      
        <content type="html"><![CDATA[<p>å‰å‡ å¤©æ•´ç†äº†æœ‰å…³<strong>JavaScriptç»§æ‰¿</strong>çš„å‡ ç§æ–¹å¼ï¼Œä»Šå¤©å°±ä¸€å¹¶çš„ä»å°è±¡ç¬”è®°ä¸­æ•´ç†ä¸Šæ¥ã€‚</p><h4 id="åŸå‹é“¾ç»§æ‰¿"><a href="#åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿"></a>åŸå‹é“¾ç»§æ‰¿</h4><a id="more"></a><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.property = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.property</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.subproperty = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å¤„ç»§æ‰¿</span></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType()                </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å¤„ä¹Ÿåœ¨åŸå‹ä¸­å†™äº†è‡ªå·±çš„getSubValueæ–¹æ³•</span></span><br><span class="line">SubType.prototype.getSubValue = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;        </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.subproperty</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> SubType()</span><br><span class="line">alert(instance.getSuperValue)        <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å¤„é‡æ–°å®šä¹‰äº†è¶…ç±»å‹ä¸­çš„è¯¥æ–¹æ³•</span></span><br><span class="line">SubType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">alert(instance.getSuperValue())    <span class="comment">//false</span></span><br></pre></td></tr></table></figure><p>ç¼ºé™·ï¼š</p><ol><li>å¤šä¸ªå®ä¾‹å¯¹å¼•ç”¨ç±»å‹çš„æ“ä½œä¼šè¢«ç¯¡æ”¹ã€‚</li></ol><h4 id="å€Ÿç”¨æ„é€ å‡½æ•°"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°"></a>å€Ÿç”¨æ„é€ å‡½æ•°</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function SuperType () &#123;</span><br><span class="line">    this<span class="selector-class">.colors</span> = [<span class="string">'red'</span>, <span class="string">'blue'</span>, <span class="string">'green'</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function SubType() &#123;</span><br><span class="line">    <span class="comment">//ç»§æ‰¿SuperTypeï¼Œæ­¤å¤„ç»§æ‰¿/å€ŸåŠ©æ„é€ å‡½æ•°</span></span><br><span class="line">    SuperType.call(this)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> instance1 = new SubType()</span><br><span class="line">instance1<span class="selector-class">.colors</span><span class="selector-class">.push</span>(<span class="string">'black'</span>)</span><br><span class="line"><span class="function"><span class="title">alert</span><span class="params">(instance.colors)</span></span>    <span class="comment">//'red','blue','green','black'</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> instance2 = new SubType()</span><br><span class="line"><span class="function"><span class="title">alert</span><span class="params">(instance2.colors)</span></span>    <span class="comment">//'red','blue','green'</span></span><br></pre></td></tr></table></figure><p><em>å¦‚ä½•ä¼ é€’å‚æ•°ï¼Ÿ</em></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function SuperType(name) &#123;</span><br><span class="line">    this<span class="selector-class">.name</span> = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function SubType() &#123;</span><br><span class="line">    <span class="comment">// æ­¤å¤„ç»§æ‰¿ï¼Œå¹¶ä¼ é€’å…·ä½“nameå€¼</span></span><br><span class="line">    SuperType.call(this, <span class="string">'Jayant'</span>)    </span><br><span class="line">    this<span class="selector-class">.age</span> = <span class="number">29</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> instance = new SubType()</span><br><span class="line"><span class="function"><span class="title">alert</span><span class="params">(instance.name)</span></span>    <span class="comment">// Jayant</span></span><br><span class="line"><span class="function"><span class="title">alert</span><span class="params">(instance.age)</span></span>    <span class="comment">//29</span></span><br></pre></td></tr></table></figure><p>ç¼ºé™·ï¼š</p><ol><li>åªèƒ½ç»§æ‰¿çˆ¶ç±»çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿åŸå‹å±æ€§/æ–¹æ³•</li><li>æ— æ³•å®ç°å¤ç”¨ï¼Œæ¯ä¸ªå­ç±»éƒ½æœ‰çˆ¶ç±»å®ä¾‹å‡½æ•°çš„å‰¯æœ¬ï¼Œå½±å“æ€§èƒ½</li></ol><h4 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h4><p>ç»“åˆåŸå‹é“¾ä¸æ„é€ å‡½æ•°ï¼Œæ€è·¯ä¸ºï¼šä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œåˆå®ç”¨æ„é€ å‡½æ•°å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">function SuperType(name) &#123;</span><br><span class="line">    this<span class="selector-class">.name</span> = name</span><br><span class="line">    this<span class="selector-class">.colors</span> = [<span class="string">'red'</span>, <span class="string">'green'</span>, <span class="string">'blue'</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType<span class="selector-class">.prototype</span><span class="selector-class">.sayName</span> = function() &#123;</span><br><span class="line">    alert(this.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function SubType(name, age) &#123;</span><br><span class="line">    <span class="comment">// æ„é€ ç»§æ‰¿å±æ€§   ç¬¬ä¸€æ¬¡è°ƒç”¨SuperType</span></span><br><span class="line">    SuperType.call(this,name)</span><br><span class="line">    this<span class="selector-class">.age</span> = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸå‹é“¾ç»§æ‰¿  ç¬¬äºŒæ¬¡è°ƒç”¨SuperType</span></span><br><span class="line">SubType<span class="selector-class">.prototype</span> = new SuperType()    </span><br><span class="line"></span><br><span class="line">SubType<span class="selector-class">.prototype</span><span class="selector-class">.constructor</span> = SubType</span><br><span class="line"></span><br><span class="line">SubType<span class="selector-class">.prototypr</span><span class="selector-class">.sayAge</span> = function() &#123;</span><br><span class="line">    alert(this.age)</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">var</span> instance1 = new SubType(<span class="string">'Jayant'</span>, <span class="number">23</span>)</span><br><span class="line">instance1<span class="selector-class">.colors</span><span class="selector-class">.push</span>(<span class="string">'black'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">alert</span><span class="params">(instance1.colors)</span></span>    <span class="comment">//'red','blue','green',black'</span></span><br><span class="line">instance1.sayName()        <span class="comment">//Jayant</span></span><br><span class="line">instance1.sayAge()        <span class="comment">// 23</span></span><br><span class="line"></span><br><span class="line">vat instance2 = new SubType(<span class="string">'Grey'</span>, <span class="number">27</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">alert</span><span class="params">(instance2.colors)</span></span>    <span class="comment">//'red','blue','green'</span></span><br><span class="line">instance2.sayName()       <span class="comment">// 'Grey'</span></span><br><span class="line">instance2.sayAge()        <span class="comment">//27</span></span><br></pre></td></tr></table></figure><p>ç»„åˆä¸Šè¿°ä¸¤ç§æ–¹æ³•å°±æ˜¯ç»„åˆç»§æ‰¿ã€‚ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œç”¨å€Ÿç”¨æ„é€ å‡½æ•°æŠ€æœ¯æ¥å®ç°å®ä¾‹å±æ€§çš„ç»§æ‰¿<br>ç¼ºç‚¹ï¼š</p><ol><li>ç¬¬ä¸€æ¬¡è°ƒç”¨SuperType()ï¼Œç»™SubType.prototypeå†™å…¥ä¸¤ä¸ªå±æ€§nameï¼Œcolorï¼›</li><li>ç¬¬äºŒæ¬¡è°ƒç”¨SuperType()ï¼Œç»™instanceå†™å…¥ä¸¤ä¸ªnameï¼Œcolor</li></ol><h4 id="åŸå‹å¼ç»§æ‰¿"><a href="#åŸå‹å¼ç»§æ‰¿" class="headerlink" title="åŸå‹å¼ç»§æ‰¿"></a>åŸå‹å¼ç»§æ‰¿</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">    F.prototype = obj;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">'1'</span>,</span><br><span class="line">    friends: [<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> anotherPerson = object(person);</span><br><span class="line">anotherPerson.name = <span class="string">'Greg'</span>;</span><br><span class="line">anotherPerson.friends.push(<span class="string">'rob'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> secondPerson = object(person);</span><br><span class="line">secondPerson.name = <span class="string">'Sreg'</span>;</span><br><span class="line">secondPerson.friends.push(<span class="string">'Sob'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(anotherPerson.friends); <span class="comment">//  '1', '2', '3', 'rob', 'Sob'</span></span><br></pre></td></tr></table></figure><p>ç¼ºé™·ï¼š</p><ol><li>åŸå‹é“¾ç»§æ‰¿å¤šä¸ªå®ä¾‹çš„å¼•ç”¨ç±»å‹å±æ€§æŒ‡å‘ç›¸åŒï¼Œå­˜åœ¨ç¯¡æ”¹çš„å¯èƒ½ã€‚</li><li>æ— æ³•ä¼ é€’å‚æ•°</li></ol><h4 id="å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿå¼ç»§æ‰¿"></a>å¯„ç”Ÿå¼ç»§æ‰¿</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAnthor</span><span class="params">(original)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="keyword">clone</span> = object(original)</span><br><span class="line">    <span class="comment">// æ·»åŠ æ–°æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">clone</span>.sayHi = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123; </span><br><span class="line">        alert(<span class="string">'Hi'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">clone</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¾¹ä¾‹å­ä¸­ï¼ŒcreateAnther()å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå°†è¦ä½œä¸ºæ–°å¯¹è±¡åŸºç¡€çš„å¯¹è±¡ï¼Œç„¶åå°†å¯¹è±¡(original)ä¼ é€’ç»™object()å‡½æ•°ï¼Œå°†è¿”å›çš„ç»“æœèµ‹å€¼ç»™Clone<br>å†ä¸ºcloneå¯¹è±¡æ·»åŠ ä¸€ä¸ªæ–°æ–¹æ³•sayHi()ï¼Œæœ€åè¿”å›ç»™cloneå¯¹è±¡ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">'Nicholas'</span>,</span><br><span class="line">    friends: [<span class="string">'shelby'</span>, <span class="string">'court'</span>, <span class="string">'van'</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">var</span> anthorPerson = createAnther(person)</span><br><span class="line">antherPerson.sayHi()        <span class="comment">//Hi</span></span><br></pre></td></tr></table></figure><p>åœ¨åŸå‹å¼ç»§æ‰¿çš„åŸºç¡€ä¸Šï¼Œå¢å¼ºå¯¹è±¡ï¼Œè¿”å›æ„é€ å‡½æ•°ã€‚</p><h4 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h4><p>ä¸ºé¿å…å¦‚åŒç»„åˆç»§æ‰¿çš„æ–¹å¼ï¼Œä¼šè°ƒç”¨ä¸¤æ¬¡è¶…ç±»å‹æ„é€ å‡½æ•°ï¼Œè¡ç”Ÿå‡ºäº†å¯„ç”Ÿç»„åˆç»§æ‰¿æ–¹å¼</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function inheritPrototype(subType, superType) &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">    <span class="selector-tag">var</span> prototype = object(superType.prototype)</span><br><span class="line">    <span class="comment">//å¢å¼ºå¯¹è±¡</span></span><br><span class="line">    prototype<span class="selector-class">.constructor</span> = subType                 </span><br><span class="line">    <span class="comment">//æŒ‡å®šå¯¹è±¡</span></span><br><span class="line">    subType<span class="selector-class">.prototype</span> = prototype   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ä¾‹</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span><span class="params">(name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.colors = [<span class="string">'red'</span>, <span class="string">'blue'</span>, <span class="string">'green'</span>]</span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span><span class="params">(name, age)</span> </span>&#123;</span><br><span class="line">    SuperType.call(<span class="keyword">this</span>, name)</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line">inheritPrototype(SubType, SuperType)</span><br><span class="line"></span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><font color="7f7f7f"><em><br>ä¼˜åŠ¿åœ¨äºåªè°ƒç”¨ä¸€æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å°†å­æ„é€ å‡½æ•°ï¼Œçˆ¶æ„é€ å‡½æ•°ä¼ å…¥æ–¹æ³•ä¸­ï¼Œå¤åˆ¶ä¸€éçˆ¶ç±»å‹çš„åŸå‹ï¼Œå¹¶ä¸ºå…¶æ·»åŠ constructorå±æ€§</em></font><h4 id="ES6-Extends"><a href="#ES6-Extends" class="headerlink" title="ES6 Extends"></a>ES6 Extends</h4>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptåˆ›å»ºå¯¹è±¡</title>
      <link href="/2019/01/23/2019/JavaScript%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/"/>
      <url>/2019/01/23/2019/JavaScript%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<p>å‰å‡ å¤©æ•´ç†äº†æœ‰å…³<strong>JavaScriptåˆ›å»ºå¯¹è±¡</strong>çš„å‡ ç§æ–¹å¼ï¼Œä»Šå¤©å°±ä¸€å¹¶çš„ä»å°è±¡ç¬”è®°ä¸­æ•´ç†ä¸Šæ¥ã€‚</p><hr><p><font color="ff0000"><strong>å·¥å‚æ¨¡å¼</strong></font><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function createPerson(name, age, job) &#123;</span><br><span class="line">    <span class="selector-tag">var</span> o = new Object()</span><br><span class="line">    o<span class="selector-class">.name</span> = name</span><br><span class="line">    o<span class="selector-class">.age</span> = age</span><br><span class="line">    o<span class="selector-class">.job</span> = job</span><br><span class="line">    o<span class="selector-class">.sayName</span> = function () &#123;</span><br><span class="line">        alert(this.name)</span><br><span class="line">    &#125;</span><br><span class="line">    return o</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">var</span> person1= createPerson(<span class="string">'jayant'</span>, <span class="number">23</span>, <span class="string">'web'</span>)</span><br><span class="line"><span class="selector-tag">var</span> person2 = createPerson(<span class="string">'esss'</span>, <span class="number">22</span>, <span class="string">'**'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å› ä¸ºæ–¹æ³•ä¸­å·²ç»newäº†ä¸€ä¸ªobjectäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦newå®ƒ</span></span><br></pre></td></tr></table></figure></p><a id="more"></a><p><font color="ff0000"><strong>æ„é€ å‡½æ•°æ¨¡å¼</strong></font><br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name, age, job)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">    <span class="keyword">this</span>.job = job</span><br><span class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        alert (<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">'jayant'</span>, <span class="number">23</span>, <span class="string">'web'</span>)</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">'esss'</span>, <span class="number">22</span>, <span class="string">'no'</span>)</span><br></pre></td></tr></table></figure></p><p><em>æ„é€ å‡½æ•°Personä¸å·¥å‚æ¨¡å¼createPersonçš„åŒºåˆ«ï¼š</em></p><ul><li>æ²¡æœ‰æ˜¾å¼åˆ›å»ºå¯¹è±¡ï¼Œå†…éƒ¨new Object</li><li>ç›´æ¥å°†å±æ€§èµ‹äºˆthiså¯¹è±¡</li><li>æ²¡æœ‰return è¯­å¥</li></ul><p><em>å¦‚æœéœ€è¦ä½¿ç”¨æ„é€ å‡½æ•°ç”Ÿæˆä¸€ä¸ªPersonå®ä¾‹ï¼Œåˆ™æˆ‘ä»¬éœ€è¦newä¸€ä¸‹ï¼Œnewä¸€ä¸ªå¯¹è±¡ä¼šç»å†ä»¥ä¸‹è¿‡ç¨‹ï¼š</em></p><ul><li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</li><li>å°†æ„é€ å‡½æ•°ä½œç”¨åŸŸèµ‹äºˆæ–°å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯this</li><li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç </li><li>è¿”å›æ–°å¯¹è±¡</li></ul><p><em>æ„é€ å‡½æ•°çš„<font color="7f7f7f">ä¸è¶³ä¹‹å¤„</font>ï¼š</em></p><p>person1ä¸person2ä¸­æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ªè¿™ä¸ªæ–¹æ³•ï¼Œéƒ½éœ€è¦åˆ›å»ºä¸€éï¼Œ<font color="7f7f7f">é€ æˆå†…å­˜ä¸Šçš„æµªè´¹</font><br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line">alert(person1.sayName == person2.sayName)ã€€ã€€<span class="comment">//false</span></span><br></pre></td></tr></table></figure></p><p>äºæ˜¯åˆæ ¹æ®æ­¤ä¸è¶³ä¹‹å¤„è¡ç”Ÿå‡ºä»¥ä¸‹æ–¹æ³•ï¼š</p><p><font color="7f7f7f"><em>æ„é€ å‡½æ•°çš„ä¼˜åŒ–ï¼š</em></font><br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> <span class="params">(name, age, job)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">    <span class="keyword">this</span>.job = job</span><br><span class="line">    <span class="keyword">this</span>.sayName = sayName</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1ã€å°†å…±æœ‰æ–¹æ³•å®šä¹‰åœ¨å…¨å±€ä¸Šï¼Œ2ã€å‡½æ•°å¤šçš„è¯ï¼Œè¦å®šä¹‰å¤š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayName</span><span class="params">()</span> </span>&#123;   </span><br><span class="line">    alert(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯è¿™ä¸ªæ“ä½œåˆä¼šé€ æˆå¦‚æœå‡½æ•°å¾ˆå¤šï¼Œéœ€è¦å®šä¹‰å¾ˆå¤šæ–¹æ³•ï¼›å¹¶ä¸”æ˜¯å®šä¹‰æˆä¸ºäº†å…¨å±€å‡½æ•°ï¼Œè¿™å®Œå…¨ä¸éœ€è¦</p><hr><p><font color="ff0000"><strong>åŸå‹æ¨¡å¼</strong></font></p><p><font color="7f7f7f"><em>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œä¸ºäº†ä½¿æ‰€æœ‰å®ä¾‹å¯ä»¥å…±äº«åˆ°å±æ€§å’Œæ–¹æ³•ï¼Œä»è€Œä¸å¿…åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰</em></font><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function Person() &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®šä¹‰åœ¨åŸå‹ä¸Š</span></span><br><span class="line">Person<span class="selector-class">.prototype</span><span class="selector-class">.name</span> = <span class="string">'Jayant'</span></span><br><span class="line">Person<span class="selector-class">.prototype</span><span class="selector-class">.age</span> = <span class="number">23</span></span><br><span class="line">Person<span class="selector-class">.prototype</span><span class="selector-class">.job</span> = <span class="string">'web'</span></span><br><span class="line">Person<span class="selector-class">.prototype</span><span class="selector-class">.sayName</span> = function() &#123;</span><br><span class="line">    alert(this.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">var</span> person1 = new Person()</span><br><span class="line">person1.sayName()    <span class="comment">//Jayant</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> person2 = new Person()</span><br><span class="line">person2.sayName()    <span class="comment">//Jayant</span></span><br></pre></td></tr></table></figure></p><p><em><font color="7f7f7f">å¥½å¤„ï¼š</font></em> å…¬å…±æ–¹æ³•ï¼Œå±æ€§å¯ä»¥å…±ç”¨ï¼ŒåŒæ—¶æ˜¯å®šä¹‰åœ¨å…¶æ„é€ å‡½æ•°åŸå‹ä¸Šçš„</p><p><em><font color="7f7f7f">ä¸è¶³ï¼š</font></em> æ˜¯è¿‡äºå…±äº«ï¼Œä»¥è‡³äºæ‰€æœ‰çš„å®ä¾‹éƒ½æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œå®ä¾‹äº†</p><p><font color="7f7f7f">ä¾‹å¦‚ï¼š</font><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">person1<span class="selector-class">.age</span> = <span class="number">100</span></span><br><span class="line">person2<span class="selector-class">.age</span> <span class="comment">// 100</span></span><br></pre></td></tr></table></figure></p><hr><p><font color="ff0000"><strong>ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼ä¸åŸå‹æ¨¡å¼</strong></font><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function Person(name, age) &#123;</span><br><span class="line">    this<span class="selector-class">.name</span> = name</span><br><span class="line">    this<span class="selector-class">.age</span> = age</span><br><span class="line">    this<span class="selector-class">.friends</span> = [<span class="string">'ä¹¾éš†'</span>, <span class="string">'åº·ç†™'</span>]</span><br><span class="line">&#125;</span><br><span class="line">Person<span class="selector-class">.prototype</span> = &#123;</span><br><span class="line">    constructor: Person</span><br><span class="line">    sayName: function () &#123;</span><br><span class="line">        alert(this.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">var</span> person1 = new Person()</span><br><span class="line"><span class="selector-tag">var</span> person2 = new Person()</span><br><span class="line">person1<span class="selector-class">.friends</span><span class="selector-class">.push</span>(<span class="string">'å¬´æ”¿'</span>)</span><br><span class="line">person1<span class="selector-class">.friends</span>    <span class="comment">//ä¹¾éš†ï¼Œåº·ç†™ï¼Œå¬´æ”¿</span></span><br><span class="line">person2<span class="selector-class">.friends</span>    <span class="comment">//ä¹¾éš†ï¼Œåº·ç†™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¤å¯åº¦ï¼Œä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ç§åˆ›å»ºå¯¹è±¡æ–¹å¼</span></span><br></pre></td></tr></table></figure></p><hr><p><font color="ff0000"><strong>å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼</strong></font><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">    o.name = name</span><br><span class="line">    o.age = age</span><br><span class="line">    o.job = job</span><br><span class="line">    o.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> o</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> friend = <span class="keyword">new</span> Person(<span class="string">'Jayant'</span>, <span class="number">23</span>, <span class="string">'web'</span>)</span><br></pre></td></tr></table></figure></p><p><font color="7f7f7f"><em>å·¥å‚æ¨¡å¼</em></font><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">    o.name = name</span><br><span class="line">    o.age = age</span><br><span class="line">    o.job = job</span><br><span class="line">    o.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> o</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> friend = Person(<span class="string">'Jayant'</span>, <span class="number">23</span>, <span class="string">'web'</span>)</span><br></pre></td></tr></table></figure></p><p><em>å¯„ç”Ÿæ„é€ å‡½æ•°ä¸å·¥å‚æ¨¡å¼çš„åŒºåˆ«</em><br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯„ç”Ÿæ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> friend = <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">'Jayant'</span>, <span class="number">23</span>, <span class="string">'web'</span>)  </span><br><span class="line"><span class="comment">// å·¥å‚æ¨¡å¼ </span></span><br><span class="line"><span class="keyword">var</span> friend = Person(<span class="string">'Jayant'</span>, <span class="number">23</span>, <span class="string">'web'</span>)</span><br></pre></td></tr></table></figure></p><hr><p><font color="ff0000"><strong>ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼</strong></font><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">    o.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(name)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> name</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = Person(<span class="string">'jayant'</span>, <span class="number">23</span>)</span><br><span class="line">person.sayName()    <span class="comment">//jayant</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é™¤äº†è°ƒç”¨sayNameæ–¹æ³•ï¼Œæ²¡åŠæ³•è·å–å…¶æ•°æ®æˆå‘˜ï¼ŒæŸç§æƒ…å†µä¸‹å®‰å…¨æ€§ up up</span></span><br></pre></td></tr></table></figure></p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitç›¸å…³å‘½ä»¤</title>
      <link href="/2019/01/23/2019/Git%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/"/>
      <url>/2019/01/23/2019/Git%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>å°†è‡ªå·±å·¥ä½œä¸­æ‰€æ•´ç†å‡ºæ¥çš„å¸¸ç”¨Gitå‘½ä»¤äºæ­¤æ€»ç»“ä¸€ä¸‹</p><a id="more"></a><h5 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">// æ·»åŠ æ–‡ä»¶è‡³åŒºåŸŸ</span><br><span class="line">git add . </span><br><span class="line"></span><br><span class="line">// æäº¤æ–‡ä»¶è‡³æœ¬åœ°ä»“åº“</span><br><span class="line">git commit -m &quot;xxx&quot;</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹ç›®å‰å·¥ä½œçŠ¶æ€</span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line">// åœ¨æ·»åŠ ä¹‹å‰å¯ä»¥æŸ¥çœ‹ä¿®æ”¹çš„è®°å½•</span><br><span class="line">git diff </span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹æäº¤çš„log</span><br><span class="line">git log</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹ç²¾ç®€çš„æäº¤log</span><br><span class="line">git log --pretty=oneline   </span><br><span class="line"></span><br><span class="line">// æ¢å¤æœ¬åœ°åˆ†æ”¯è‡³HEAD^</span><br><span class="line">git reset --hard HEAD^   </span><br><span class="line"></span><br><span class="line">// é‡ç½®æœ¬åœ°åˆ†æ”¯è‡³æŸåˆ†æ”¯</span><br><span class="line">git reset --hard 956d...   </span><br><span class="line"></span><br><span class="line">// åˆ‡æ¢åˆ°xxåˆ†æ”¯</span><br><span class="line">git checkout branch   </span><br><span class="line"></span><br><span class="line">// æœ¬åœ°åˆ›å»ºxxåˆ†æ”¯</span><br><span class="line">git checkout -b branch   </span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å½“å‰è¿œç¨‹åº“</span><br><span class="line">git remote -v   </span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯</span><br><span class="line">git remote -a</span><br><span class="line"></span><br><span class="line">// å°†ç›®å‰originè¿æ¥ä¸ºxxxçš„è¿œç¨‹</span><br><span class="line">git remote add origin https://xxx   </span><br><span class="line"></span><br><span class="line">// å…‹éš†æŸä»“åº“è‡³æœ¬åœ°</span><br><span class="line">git clone http: //xxx    </span><br><span class="line"></span><br><span class="line">// åˆ é™¤æœ¬åœ°æŸåˆ†æ”¯</span><br><span class="line">git branch -d branch   </span><br><span class="line"></span><br><span class="line">// åˆ é™¤è¿œç¨‹æŸåˆ†æ”¯</span><br><span class="line">git push origin --delete branch   </span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹æœ¬åœ°æœ‰çš„åˆ†æ”¯</span><br><span class="line">git branch   </span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹è¿œç¨‹æœ‰çš„åˆ†æ”¯</span><br><span class="line">git branch -r   </span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹logçš„æµç¨‹åˆ†æ”¯å›¾</span><br><span class="line">git log --graph   </span><br><span class="line"></span><br><span class="line">// æ‹‰å–æœ¬åœ°æ²¡æœ‰çš„è¿œç¨‹æŸåˆ†æ”¯</span><br><span class="line">git checkout -b æœ¬åœ°åˆ†æ”¯å origin/è¿œç¨‹åˆ†æ”¯å   </span><br><span class="line"></span><br><span class="line">// åˆ‡æ¢ä¸æ‹‰å–æœ€æ–°åˆ†æ”¯</span><br><span class="line">git checkout maste  git pull --rebas </span><br><span class="line">git checkout branchxxx </span><br><span class="line"></span><br><span class="line">// æäº¤ä½œä¸ºä¸€æ¬¡è®°å½•ï¼ŒMERGEä¿®æ”¹å®Œæˆå</span><br><span class="line">ï¼šgit add .   git commit  </span><br><span class="line"></span><br><span class="line">// REBASEä¿®æ”¹å®Œæˆåï¼Œæäº¤ç»§ç»­</span><br><span class="line">ï¼šgit add &lt;filename&gt; git rebase --continue</span><br><span class="line"></span><br><span class="line">// å‚¨è—å·¥ä½œç°åœº</span><br><span class="line">git stash</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹å‚¨è—çš„å·¥ä½œç°åœº</span><br><span class="line">git stash list</span><br><span class="line"></span><br><span class="line">// æ¢å¤åº”ç”¨å·¥ä½œç°åœº</span><br><span class="line">git stash apply xxx</span><br><span class="line"></span><br><span class="line">// åˆ é™¤ç¬¬ä¸€ä¸ªå·¥ä½œç°åœº</span><br><span class="line">git stash drop</span><br></pre></td></tr></table></figure><h5 id="æµç¨‹å¼æ“ä½œ"><a href="#æµç¨‹å¼æ“ä½œ" class="headerlink" title="æµç¨‹å¼æ“ä½œ"></a>æµç¨‹å¼æ“ä½œ</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">- åˆ›å»ºfeatureåˆ†æ”¯ï¼š</span><br><span class="line">git checkout master </span><br><span class="line">git ckeckout -b feature-s16 </span><br><span class="line">git push  </span><br><span class="line">//å†æ ¹æ®baseæç¤ºä¿¡æ¯ï¼Œå°†æœ¬åœ°åˆ†æ”¯è¿æ¥ä¸Šoriginä¸Šè¯¥åˆ†æ”¯</span><br><span class="line"></span><br><span class="line">- åœ¨featureä¸Šè¿›è¡Œå¼€å‘ï¼š</span><br><span class="line">git add xxx</span><br><span class="line">git commit -m &quot;xxx&quot;</span><br><span class="line"></span><br><span class="line">- è‹¥ä¸ºå¤šäººååŒå¼€å‘æ›´æ–°åˆ†æ”¯ï¼Œæœ‰rebaseå†²çªï¼š</span><br><span class="line">// æ‹‰å–å¹¶åˆå¹¶è¿œç¨‹è¯¥åˆ†æ”¯</span><br><span class="line">git pull --rebase  </span><br><span class="line">// æ­¤ä¸¤ä¸ªå‘½ä»¤ä¸ºåˆå¹¶æœ‰å†²çªæ—¶ï¼Œè§£å†³å†²çªåçš„ç»§ç»­åˆå¹¶å‘½ä»¤</span><br><span class="line">git add .  git rebase --continue    </span><br><span class="line"></span><br><span class="line">- å®Œæˆfeatureå¼€å‘ï¼š</span><br><span class="line">git checkout dev</span><br><span class="line">// æœ¬åœ°åˆ‡æ¢è‡³devåˆ†æ”¯åï¼Œæ‹‰å–è¿œç«¯æœ€æ–°çš„devåˆ†æ”¯ä»£ç </span><br><span class="line">git pull --rebase  </span><br><span class="line"></span><br><span class="line">- å†å°†featureåˆ†æ”¯åˆå¹¶åˆ°devåˆ†æ”¯ä¸Šï¼š</span><br><span class="line">git merge --no-ff feature-s16 </span><br><span class="line">// å°†åˆå¹¶åçš„devåˆ†æ”¯æ¨ä¸Šè¿œç«¯</span><br><span class="line">git push origin dev  </span><br><span class="line"></span><br><span class="line">- å†å°†fevåˆ†æ”¯åˆå¹¶è‡³masteråˆ†æ”¯ä¸Šï¼š</span><br><span class="line">git merge --no-ff dev </span><br><span class="line">// å°†åˆå¹¶åçš„masteråˆ†æ”¯æ¨ä¸Šè¿œç«¯</span><br><span class="line">git push origin master  </span><br><span class="line"></span><br><span class="line">- ä¸€æ®µæ—¶é—´ååˆ é™¤featureåˆ†æ”¯ï¼š</span><br><span class="line">git branch -d feature-s16</span><br><span class="line">// åˆ é™¤è¿œç«¯è¯¥åˆ†æ”¯</span><br><span class="line">git push origin --delete feature-s16  </span><br><span class="line"></span><br><span class="line">- è‹¥merge --no-ffåˆå¹¶æœ‰å†²çªï¼š</span><br><span class="line">// å°†è‡ªåŠ¨æäº¤ä¸€ä¸ªåˆå¹¶è®°å½•</span><br><span class="line">git add .  git commit</span><br></pre></td></tr></table></figure><p><img src="/2019/01/23/2019/Gitç›¸å…³å‘½ä»¤/Git.jpg" alt="ç«¹æ—å°é“" title="ç«¹æ—å°é“"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello</title>
      <link href="/2019/01/22/2019/hello-world/"/>
      <url>/2019/01/22/2019/hello-world/</url>
      
        <content type="html"><![CDATA[<p>æ¬¢è¿æ¥åˆ°JAYANT BLOG! .</p><h2 id="å¼€å¤´è¯­"><a href="#å¼€å¤´è¯­" class="headerlink" title="å¼€å¤´è¯­"></a>å¼€å¤´è¯­</h2><p>è·Ÿéšç€ç½‘ä¸Šçš„å¤šç§æ­å»ºæ–¹å¼ï¼Œæ­å»ºé™¤äº†å±äºè‡ªå·±çš„hexoåšå®¢ï¼Œå…´å¥‹ä¹‹ä½™ä¹Ÿéå¸¸æœŸå¾…æˆ‘èƒ½ç»™äºˆè¿™ä¸ªåšå®¢ä¸åŒçš„â€œçŸ¥è¯†â€ç”Ÿå‘½åŠ›ï¼Œä¹ŸæœŸå¾…æˆ‘æ‰€è®°å½•ä¸‹çš„å¤šç§å¤šæ ·ï¼Œå„æ–¹å„é¢çš„åšæ–‡å†…å®¹å¯ä»¥ç»™æ¥åˆ°è¿™ä¸ªç½‘ç«™ä¸Šçš„æœ‹å‹ä»¬å¸¦æ¥å¸®åŠ©</p><p>ä¹‹åä¹Ÿå°†é™†é™†ç»­ç»­å°†ä¹‹å‰çš„åšæ–‡è¿ç§»è¿‡æ¥ï¼›</p><p><img src="/2019/01/22/2019/hello-world/MyPic.png" alt="å¿ƒä¸­è—ä¹‹æ— æ—¥å¿˜ä¹‹" title="å¿ƒä¸­è—ä¹‹ï¼Œæ— æ—¥å¿˜ä¹‹"></p>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥å¸¸ç¢ç¢ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
