<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="browsermode" content="application">
<meta name="apple-touch-fullscreen" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Jayant Blog">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name="format-detection" content="telephone=no">

  <link rel="apple-touch-icon" sizes="72x72" href="/img/MyPic.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/MyPic.png">


  <meta name="subtitle" content="äº’è”ç½‘ç›²åŒº...ğŸ˜">




  <meta name="keywords" content="Gulp, æºç , nlvi">


<link rel="apple-touch-startup-image" media="(device-width: 375px)" href="assets/apple-launch-1125x2436.png">
<link rel="apple-touch-startup-image" media="(orientation: landscape)" href="assets/apple-touch-startup-image-2048x1496.png">
<link rel="stylesheet" href="/style/style.css">
<script>
  var nlviconfig = {
    title: "Jayant Blog",
    author: "Jayantxu",
    baseUrl: "/",
    theme: {
      scheme: "banderole",
      lightbox: false,
      animate: true,
      search: true,
      friends: false,
      reward: false,
      pjax: false,
      lazy: false,
      toc: true
    }
  }
</script>







    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">




    <link rel="icon" href="/img/MyPic.png">












<style>
@font-face {
  font-family: "Allura";
  src: url('/font/allura/allura.ttf');
}
</style>

  <title> Gulpæºç åˆ†æå­¦ä¹ (äºŒ Â· Jayant Blog </title>
</head>
<body>
  <div class="container">
    <header class="header" id="header">
  <div class="header-wrapper">
    <div class="logo">
  <div class="logo-inner syuanpi tvIn" style="display:none;">
    <h1><a href="/">Jayant Blog</a></h1>
    
      <span id="subtitle">äº’è”ç½‘ç›²åŒº...ğŸ˜</span>
    
  </div>
</div>

    <nav class="main-nav">
  
  <ul class="main-nav-list syuanpi tvIn">
  
    <li class="menu-item">
      <a href="javascript:;" id="search-btn" aria-label="Search">
        <i class="iconfont icon-search"></i>
      </a>
    </li>
  
  
  
    
  
    <li class="menu-item">
      <a href="/" id="ä¸»é¡µ">
        <span class="base-name">
          
            ä¸»é¡µ
          
        </span>
      </a>
    </li>
  
  
    
  
    <li class="menu-item">
      <a href="/archives" id="æ–‡ç« ">
        <span class="base-name">
          
            æ–‡ç« 
          
        </span>
      </a>
    </li>
  
  
    
  
    <li class="menu-item">
      <a href="javascript:;" id="tags">
        <span class="base-name">
          
            TAGS
          
        </span>
      </a>
    </li>
  
  
    
  
    <li class="menu-item">
      <a href="/about" id="å…³äºæˆ‘">
        <span class="base-name">
          
            å…³äºæˆ‘
          
        </span>
      </a>
    </li>
  
  
  </ul>
  
</nav>

  </div>
</header>
<div class="mobile-header" id="mobile-header">
  <div class="mobile-header-nav">
    <div class="mobile-header-item" id="mobile-left">
      <div class="header-menu-item">
        <div class="header-menu-line"></div>
      </div>
    </div>
    <h1 class="mobile-header-title">
      <a href="/">Jayant Blog</a>
    </h1>
    <div class="mobile-header-item"></div>
  </div>
  <div class="mobile-header-body">
    <ul class="mobile-header-list">
      
        <li class="mobile-nav-item syuanpi fadeInRightShort back-0">
          <a href="/">
            
              ä¸»é¡µ
            
          </a>
        </li>
      
        <li class="mobile-nav-item syuanpi fadeInRightShort back-1">
          <a href="/archives">
            
              æ–‡ç« 
            
          </a>
        </li>
      
        <li class="mobile-nav-item syuanpi fadeInRightShort back-2">
          <a href="javascript:;" id="mobile-tags">
            
              TAGS
            
          </a>
        </li>
      
        <li class="mobile-nav-item syuanpi fadeInRightShort back-3">
          <a href="/about">
            
              å…³äºæˆ‘
            
          </a>
        </li>
      
    </ul>
  </div>
</div>



    <div class="container-inner" style="display:none;">
      <main class="main" id="main">
        <div class="main-wrapper">
          
    
  
  <article class="
  post
   is_post 
  ">
    <header class="post-header">
      <div class="post-time syuanpi fadeInRightShort back-1">
        <div class="post-time-wrapper">
          
          <time>2019-04-06</time>
          
        </div>
      </div>
      <h1 class="post-title syuanpi fadeInRightShort back-2">
        
          Gulpæºç åˆ†æå­¦ä¹ (äºŒ
        
      </h1>
    </header>
    <div class="post-content syuanpi fadeInRightShort back-3">
      
        <h2 id="undertakeræ¨¡å—æ–‡ä»¶åˆ†æ"><a href="#undertakeræ¨¡å—æ–‡ä»¶åˆ†æ" class="headerlink" title="undertakeræ¨¡å—æ–‡ä»¶åˆ†æ"></a>undertakeræ¨¡å—æ–‡ä»¶åˆ†æ</h2><p>æˆ‘ä»¬ä»ä¸Šä¸€ç¯‡çš„å…¥å£æ–‡ä»¶åˆ†æå¯ä»¥å¾—çŸ¥ï¼Œ<strong>Gulp</strong>è¿›è¡Œtaskã€seriesã€parallelç­‰ä»»åŠ¡æ—¶ï¼Œæ‰€æ‰§è¡Œçš„æ–¹æ³•å…¥å£å…¶å®æ¥æºäº<em>undertaker</em>æ¨¡å—</p>
<p>å› æ­¤æˆ‘ä»¬ä¹Ÿè¿›å…¥ç›¸åº”çš„<em>undertaker</em>æ¨¡å—ä¸€æ¢ç©¶ç«Ÿ</p>
<h2 id="ä¸€ã€undertaker-index-js"><a href="#ä¸€ã€undertaker-index-js" class="headerlink" title="ä¸€ã€undertaker-index.js"></a>ä¸€ã€undertaker-index.js</h2><a id="more"></a>
<p>undertakeræ¨¡å—ä¸‹çš„index.jsæ–¹æ³• =&gt;</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Nodeå·¥å…·å‡½æ•°ä¸­çš„ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">var</span> inherits = <span class="keyword">require</span>(<span class="string">'util'</span>).inherits;</span><br><span class="line"><span class="comment">// Nodeä¸­çš„äº‹ä»¶è§¦å‘å™¨</span></span><br><span class="line"><span class="keyword">var</span> EventEmitter = <span class="keyword">require</span>(<span class="string">'events'</span>).EventEmitter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> DefaultRegistry = <span class="keyword">require</span>(<span class="string">'undertaker-registry'</span>);</span><br><span class="line"><span class="keyword">var</span> tree = <span class="keyword">require</span>(<span class="string">'./lib/tree'</span>);</span><br><span class="line"><span class="keyword">var</span> task = <span class="keyword">require</span>(<span class="string">'./lib/task'</span>);</span><br><span class="line"><span class="keyword">var</span> series = <span class="keyword">require</span>(<span class="string">'./lib/series'</span>);</span><br><span class="line"><span class="keyword">var</span> lastRun = <span class="keyword">require</span>(<span class="string">'./lib/last-run'</span>);</span><br><span class="line"><span class="keyword">var</span> <span class="keyword">parallel</span> = <span class="keyword">require</span>(<span class="string">'./lib/parallel'</span>);</span><br><span class="line"><span class="keyword">var</span> registry = <span class="keyword">require</span>(<span class="string">'./lib/registry'</span>);</span><br><span class="line"><span class="keyword">var</span> _getTask = <span class="keyword">require</span>(<span class="string">'./lib/get-task'</span>);</span><br><span class="line"><span class="keyword">var</span> _setTask = <span class="keyword">require</span>(<span class="string">'./lib/set-task'</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">inherits(Undertaker, EventEmitter);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç„¶åç»§ç»­çœ‹ä¸€ä¸‹å…¶ä»–æ¨¡å—æ–¹æ³•çš„å…·ä½“ä½œç”¨</span></span><br><span class="line">Undertaker.prototype.tree = tree;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.task = task;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.series = series;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.lastRun = lastRun;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.parallel = parallel;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype.registry = registry;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype._getTask = _getTask;</span><br><span class="line"></span><br><span class="line">Undertaker.prototype._setTask = _setTask;</span><br></pre></td></tr></table></figure>
<p>ä¾æ—§é‡‡ç”¨æ ¸å¿ƒå·¥å…·å‡½æ•°çš„inheritsæ–¹æ³•è¿›è¡Œæ„é€ å‡½æ•°çš„ç»§æ‰¿</p>
<p>inherits(Undertaker, EventEmitter); æ­¤å¤„ä½¿å¾—<strong>Undertake</strong>ræ„é€ å‡½æ•°ç»§æ‰¿è‡ª<strong>Node</strong>æ ¸å¿ƒæ¨¡å—<strong>EventEmitter</strong> çš„åŸå‹é“¾ä¸Šæ–¹æ³•ï¼Œä»¥åŠå°†EventEmitterçš„æ„é€ å‡½æ•°ç»‘å®šåœ¨Undertakeræ„é€ å‡½æ•°çš„<strong>super_</strong>ä¸Šã€‚</p>
<p>å¹¶ä¸”å°†æˆ‘ä»¬åœ¨å¼€å§‹éƒ¨åˆ†æ‰€requireè¿›æ¥çš„æ–¹æ³•å‡½æ•°æ·»åŠ è‡³åŸå§‹é“¾prototypeä¸Šï¼Œä»¥ä¾¿è°ƒç”¨</p>
<font color="ffff00"><em>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…¶ä¸­è¿˜æœ‰ä¸€ä¸ªä¸»æ–¹æ³•ï¼Œå½“ä¸­åˆå®ç°äº†ä»€ä¹ˆå‘¢ =&gt; ?</em></font>


<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Undertaker</span><span class="params">(customRegistry)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  EventEmitter.call(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹DefaultRegistry(undertaker-registry)éƒ½å¹²äº†ä»€ä¹ˆ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">this</span>._registry = <span class="keyword">new</span> DefaultRegistry();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…è®¸ç”¨æˆ·è‡ªå®šä¹‰çš„å¯„å­˜å™¨ä»»åŠ¡</span></span><br><span class="line">  <span class="keyword">if</span> (customRegistry) &#123;</span><br><span class="line">    <span class="keyword">this</span>.registry(customRegistry);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// process.env =&gt; åŒ…å«å¯¹ç”¨æˆ·ç¯å¢ƒä¿¡æ¯çš„ å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">this</span>._settle = (process.env.UNDERTAKER_SETTLE === <span class="string">'true'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>EventEmitter.call(this); å°†EventEmitteræ‰§è¡Œå‡½æ•°çš„thisç»‘å®š</p>
<p>this._registry = new DefaultRegistry(); newäº†ä¸€ä¸ªDefaultRegistryçš„å®ä¾‹èµ‹äºˆthis._registryå±æ€§</p>
<p>// åä¸¤å¥æˆ‘ä»¬ç¨åå¤„ç†</p>
<p><em>DefaultRegistry</em>æ¥æºäº<em>undertaker-registry</em></p>
<p>å¥½çš„ï¼Œé‚£è®©æˆ‘ä»¬ç°åœ¨æ¥çœ‹ä¸€ä¸‹ï¼Œ<strong>undertaker-registry</strong> éƒ½å°†å¹²äº›ä»€ä¹ˆäº‹ã€‚</p>
<h2 id="äºŒã€undertaker-registry-index-js"><a href="#äºŒã€undertaker-registry-index-js" class="headerlink" title="äºŒã€undertaker-registry - index.js"></a>äºŒã€undertaker-registry - index.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æä¾›äº†å½¢å¦‚getã€setçš„æ¥å£,å……å½“å¯„å­˜å™¨çš„ä½œç”¨å­˜æ”¾ç€é‚£äº›ä»»åŠ¡é˜Ÿåˆ—</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DefaultRegistry</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> DefaultRegistry === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DefaultRegistry();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>._tasks = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯èƒ½æ˜¯åˆå§‹åŒ–çš„ä½œç”¨</span></span><br><span class="line">DefaultRegistry.prototype.init = <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">taker</span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»ä¸Šè¾¹çš„_taskså¯¹è±¡ä¸­å»key=nameçš„é‚£ä¸ª</span></span><br><span class="line">DefaultRegistry.prototype.get = <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>._tasks[name];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// setçš„æ—¶å€™,é’ˆå¯¹ä¼ å…¥çš„nameä½œä¸ºkey,å­˜æ”¾ç›¸åº”çš„å¤„ç†æ–¹æ³•fn</span></span><br><span class="line">DefaultRegistry.prototype.set = <span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>._tasks[name] = fn;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">DefaultRegistry.prototype.tasks = <span class="function"><span class="keyword">function</span> <span class="title">tasks</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="comment">// æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨-&gt;æ‰©å±•-&gt;reduce()çš„ç”¨æ³•</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>._tasks).reduce(<span class="function"><span class="keyword">function</span>(<span class="params">tasks, name</span>) </span>&#123;</span><br><span class="line">    tasks[name] = self.get(name);</span><br><span class="line">    <span class="keyword">return</span> tasks;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line">  <span class="comment">// &#123;&#125;å°†ä½œä¸ºtasksçš„åˆå§‹å€¼-&gt;ä¹Ÿå°±æ˜¯=&gt; ç›¸å½“äºä»¤ä¸€å¼€å§‹çš„  tasks=&#123;&#125;,  æœ€ç»ˆè¿”å›</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = DefaultRegistry;</span><br></pre></td></tr></table></figure>
<p>undertaker-registryæ–¹æ³•ï¼Œå¢åŠ åœ¨å…¶æ„é€ å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡_tasks = {}</p>
<p>å¹¶ä¸”åœ¨å…¶åŸå‹é“¾ä¸Šæä¾›äº†å››ä¸ªæ–¹æ³•</p>
<ul>
<li>init</li>
<li>get</li>
<li>set</li>
<li>tasks</li>
</ul>
<p>ä¹Ÿå°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå†…éƒ¨å±æ€§_registryä½œä¸ºå¯„å­˜å™¨<strong>æ³¨å†Œ/å¯„å­˜å™¨æ¨¡å¼çš„å®ç°ï¼Œæä¾›ç»Ÿä¸€æ¥å£æ¥å­˜å‚¨å’Œè¯»å– tasks</strong></p>
<h3 id="å›åˆ°undertaker-index-js"><a href="#å›åˆ°undertaker-index-js" class="headerlink" title="å›åˆ°undertaker-index.js"></a>å›åˆ°undertaker-index.js</h3><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…è®¸ç”¨æˆ·è‡ªå®šä¹‰çš„å¯„å­˜å™¨ä»»åŠ¡</span></span><br><span class="line">  <span class="keyword">if</span> <span class="comment">(customRegistry)</span> &#123;</span><br><span class="line">    this.registry<span class="comment">(customRegistry)</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥çš„è¿™ä¸€å¥ï¼š</p>
<p>æ˜¯æ ¹æ®å‰éƒ¨å¼•å…¥çš„æ¥å®ç°çš„ï¼Œé‚£ä¹ˆå®ƒå…·ä½“å®ç°äº†ä»€ä¹ˆåŠŸèƒ½å‘¢ï¼Ÿ<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">var registry</span> = require(<span class="string">'./lib/registry'</span>);</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ =&gt; </p>
<h2 id="ä¸‰ã€-lib-registry"><a href="#ä¸‰ã€-lib-registry" class="headerlink" title="ä¸‰ã€ ./lib/registry"></a>ä¸‰ã€ ./lib/registry</h2><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setTasks</span></span>(inst, task, name) &#123;</span><br><span class="line">  inst.<span class="keyword">set</span>(name, task);</span><br><span class="line">  <span class="keyword">return</span> inst;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">registry</span></span>(<span class="keyword">new</span><span class="type">Registry</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">new</span><span class="type">Registry</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._registry;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//éªŒè¯æ˜¯å¦æœ‰æ•ˆï¼Œä¸»è¦åˆ¤æ–­æ˜¯å¦å¸¦æœ‰ .get/.set/.tasks/.init æ¥å£ï¼Œè‹¥ä¸ç¬¦åˆåˆ™æŠ›å‡ºé”™è¯¯</span></span><br><span class="line">  validateRegistry(<span class="keyword">new</span><span class="type">Registry</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> tasks = <span class="built_in">this</span>._registry.tasks();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å°†ç°æœ‰ tasks æ‹·è´åˆ°æ–°çš„å¯„å­˜å™¨ä¸Š</span></span><br><span class="line">  <span class="built_in">this</span>._registry = reduce(tasks, setTasks, <span class="keyword">new</span><span class="type">Registry</span>);</span><br><span class="line">  <span class="comment">//è°ƒç”¨åˆå§‹åŒ–æ¥å£ï¼ˆæ— è®ºæ˜¯å¦éœ€è¦ï¼Œå¯„å­˜å™¨åŠ¡å¿…å¸¦æœ‰ä¸€ä¸ªinitæ¥å£ï¼‰</span></span><br><span class="line">  <span class="built_in">this</span>._registry.init(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = registry;</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼Œå°†æ¥é€æ­¥åˆ†æå…¶ä½™å„ä»»åŠ¡æ–¹æ³•æ¨¡å—çš„ä½œç”¨</p>
<p>å…¶ä¸­åŒ…æ‹¬</p>
<p>Undertaker.prototype.tree = tree; </p>
<p>Undertaker.prototype.task = task; </p>
<p>Undertaker.prototype.series = series;</p>
<p>Undertaker.prototype.lastRun = lastRun;</p>
<p>Undertaker.prototype.parallel = parallel;</p>
<p>Undertaker.prototype.registry = registry;</p>
<p>Undertaker.prototype._getTask = _getTask;</p>
<p>Undertaker.prototype._setTask = _setTask;</p>
<p>å°†æŒ‰ä»¥ä¸‹é¡ºåºè¿›è¡Œ =&gt; </p>
<p><strong>/lib/set-task</strong></p>
<p><strong>/lib/get-task</strong></p>
<p><strong>/lib/last-run</strong></p>
<p><strong>/lib/task</strong></p>
<p><strong>/lib/tree</strong></p>
<p><strong>/lib/series</strong></p>
<p><strong>/lib/parallel</strong></p>
<h2 id="å››ã€-lib-set-task"><a href="#å››ã€-lib-set-task" class="headerlink" title="å››ã€./lib/set-task"></a>å››ã€./lib/set-task</h2><p>set-task</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> metadata = <span class="built_in">require</span>(<span class="string">'./helpers/metadata'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">var WM = require('es6-weak-map');</span></span><br><span class="line"><span class="comment">var metadata = new WM();</span></span><br><span class="line"><span class="comment">=&gt;ES6ä¸­çš„WeakMapæ–°ç±»å‹,åœ¨å…¶ä¸­å¼•ç”¨çš„å¯¹è±¡ä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶,ä¾‹å¦‚ä¹¦ä¸­è®²å¯ç”¨äºå­˜æ”¾ä¸€äº›DOMç›¸å…³å¯¹è±¡</span></span><br><span class="line"><span class="comment">=&gt;æ­¤å¤„ä¸ºä»€ä¹ˆç”¨WeakMapä¸ç”¨Map,å¯èƒ½æ˜¯æ–¹ä¾¿ä»»åŠ¡æ‰§è¡Œç»“æŸ,æœ‰æ•ˆæ¸…ç†å†…å­˜</span></span><br><span class="line"><span class="comment">æä¾›getã€setç­‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// setæ–¹æ³•é‡‡ç”¨äº†map(WeakMap)çš„æ•°æ®ç±»å‹è¿›è¡Œå­˜æ”¾</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æš´éœ²äº†ä¸€ä¸ªsetæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¶ä¸­å¯¹taskç¬¬ä¸€ä¸ªå‚æ•°çš„nameè¿›è¡Œç±»å‹åˆ¤æ–­=&gt;é”™è¯¯åˆ™æŠ¥</span></span><br><span class="line">  assert(name, <span class="string">'Task name must be specified'</span>);</span><br><span class="line">  assert(<span class="keyword">typeof</span> name === <span class="string">'string'</span>, <span class="string">'Task name must be a string'</span>);</span><br><span class="line">  assert(<span class="keyword">typeof</span> fn === <span class="string">'function'</span>, <span class="string">'Task function must be specified'</span>);</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ç»‘å®šthis, åœ¨thisä¸­ä½¿ç”¨å‚æ•° fn å¯¹è±¡çš„æ–¹æ³•ä»¥åŠå‚æ•°</span></span><br><span class="line">  <span class="comment">// å› ä¸ºWeakMapä¸­è¦æ±‚çš„keyå¯¹è±¡ä¸èƒ½è¢«å¼•ç”¨è¿‡</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">taskWrapper</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªæ–°åŒ…è£…thisåçš„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">unwrap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›åŸæœ¬çš„fnå‡½æ•°æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">return</span> fn;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†nameã€fnåŒ…è£…</span></span><br><span class="line">  taskWrapper.unwrap = unwrap;</span><br><span class="line">  taskWrapper.displayName = name;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ‰“å°ä¸€ä¸‹è¾“å‡ºæ˜¯ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`taskWrapperï¼š <span class="subst">$&#123;taskWrapper&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> meta = metadata.get(fn) || &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰“å°ä¸€ä¸‹è¾“å‡ºæ˜¯ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`meta: <span class="subst">$&#123;meta&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> nodes = [];</span><br><span class="line">  <span class="keyword">if</span> (meta.branch) &#123;</span><br><span class="line">    nodes.push(meta.tree);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> task = <span class="keyword">this</span>._registry.set(name, taskWrapper) || taskWrapper;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰“å°ä¸€ä¸‹è¾“å‡ºæ˜¯ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`task: <span class="subst">$&#123;task&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å­˜å…¥WeakMapå¯¹è±¡</span></span><br><span class="line">  metadata.set(task, &#123;</span><br><span class="line">    name: name,</span><br><span class="line">    orig: fn,</span><br><span class="line">    tree: &#123;</span><br><span class="line">      label: name,</span><br><span class="line">      type: <span class="string">'task'</span>,</span><br><span class="line">      nodes: nodes,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰“å°ä¸€ä¸‹è¾“å‡ºæ˜¯ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`metadata: <span class="subst">$&#123;metadata.get(task)&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">set</span>;</span><br></pre></td></tr></table></figure>
<h2 id="äº”ã€-lib-get-task"><a href="#äº”ã€-lib-get-task" class="headerlink" title="äº”ã€./lib/get-task"></a>äº”ã€./lib/get-task</h2><p>get-taskæ–¹æ³•æ¨¡å—ä»£ç å¾ˆç®€å•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå°±æ˜¯å¯¹undertaker-registryä¸­çš„getæ–¹æ³•æå–</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä»_registryå¯„å­˜å™¨ä¸­get</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>._registry.get(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">get</span>;</span><br></pre></td></tr></table></figure>
<h2 id="å…­ã€-lib-last-run"><a href="#å…­ã€-lib-last-run" class="headerlink" title="å…­ã€./lib/last-run"></a>å…­ã€./lib/last-run</h2><p>ç”¨æ¥è®°å½•å’Œè·å–é’ˆå¯¹æŸä¸ªæ–¹æ³•çš„æ‰§è¡Œå‰/åæ—¶é—´</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// npmä¸­å…¶ä»‹ç»çš„åŠŸèƒ½ä¸º,è®°å½•å‡½æ•°çš„æ—¶é—´ç‚¹ =&gt; å¯¹metadataå¯¹è±¡çš„å±æ€§ä¸€é¡¿æ“ä½œ</span></span><br><span class="line"><span class="keyword">var</span> retrieveLastRun = <span class="built_in">require</span>(<span class="string">'last-run'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> metadata = <span class="built_in">require</span>(<span class="string">'./helpers/metadata'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lastRun</span>(<span class="params">task, timeResolution</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (timeResolution == <span class="literal">null</span>) &#123;</span><br><span class="line">    timeResolution = process.env.UNDERTAKER_TIME_RESOLUTION;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> fn = task;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> task === <span class="string">'string'</span>) &#123;</span><br><span class="line">    fn = <span class="keyword">this</span>._getTask(task);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> meta = metadata.get(fn);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (meta) &#123;</span><br><span class="line">    fn = meta.orig || fn;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> retrieveLastRun(fn, timeResolution);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = lastRun;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸ƒã€-lib-tree"><a href="#ä¸ƒã€-lib-tree" class="headerlink" title="ä¸ƒã€./lib/tree"></a>ä¸ƒã€./lib/tree</h2><p>é€šè¿‡éå†metadataï¼Œè·å–å½“å‰æ³¨å†Œè¿‡çš„æ‰€æœ‰ä»»åŠ¡çš„metadata</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'use strict'</span>;</span><br><span class="line"></span><br><span class="line">var defaults = <span class="built_in">require</span>(<span class="string">'object.defaults'</span>);</span><br><span class="line">var map = <span class="built_in">require</span>(<span class="string">'collection-map'</span>);</span><br><span class="line"></span><br><span class="line">var metadata = <span class="built_in">require</span>(<span class="string">'./helpers/metadata'</span>);</span><br><span class="line"></span><br><span class="line">// å¯ç”¨äºè·å–å½“å‰æ³¨å†Œè¿‡çš„æ‰€æœ‰ä»»åŠ¡çš„metadata-WeakMap</span><br><span class="line">// ä¹Ÿå°±æ˜¯è¯´,å¯ä»¥è·å–åˆ°å½“å‰æˆ‘ä»¬å®šä¹‰äº†é‚£äº›ä»»åŠ¡,å¯¹åº”æ–¹æ³•,ä»»åŠ¡é—´ä¾èµ–ç­‰å…³ç³»</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tree</span><span class="params">(opts)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">  // æ­¤æ–¹æ³•ä¼šè¦†ç›–åˆ¤æ–­æ˜¯å¦å­˜åœ¨opts,å¹¶è¦†ç›–å…¶ä¸­çš„&#123;deep: <span class="literal">false</span>&#125;</span><br><span class="line">  opts = defaults(opts || &#123;&#125;, &#123;</span><br><span class="line">    deep: <span class="literal">false</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  // è·å–å¯„å­˜å™¨ä¸­çš„tasks</span><br><span class="line">  var tasks = this._registry.tasks();</span><br><span class="line">  </span><br><span class="line">  // éå†taskså¹¶ä¸”è¿”å›WeakMap(metadata)çš„â€œä»»åŠ¡æ•°ç»„â€ </span><br><span class="line">  var nodes = map(tasks, <span class="function"><span class="keyword">function</span><span class="params">(task)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    var meta = metadata.get(task);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (opts.deep) &#123;</span><br><span class="line">      <span class="keyword">return</span> meta.tree;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> meta.tree.label;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    label: <span class="string">'Tasks'</span>,</span><br><span class="line">    nodes: nodes,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = tree;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">var undertaker = <span class="built_in">require</span>(<span class="string">'undertaker'</span>);</span><br><span class="line">ut = new undertaker();</span><br><span class="line"></span><br><span class="line">ut.task(<span class="string">'taskA'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span></span>&#123;console.<span class="built_in">log</span>(<span class="string">'A'</span>); cb()&#125;);</span><br><span class="line">ut.task(<span class="string">'taskB'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span></span>&#123;console.<span class="built_in">log</span>(<span class="string">'B'</span>); cb()&#125;);</span><br><span class="line">ut.task(<span class="string">'taskC'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span></span>&#123;console.<span class="built_in">log</span>(<span class="string">'C'</span>); cb()&#125;);</span><br><span class="line">ut.task(<span class="string">'taskD'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span></span>&#123;console.<span class="built_in">log</span>(<span class="string">'D'</span>); cb()&#125;);</span><br><span class="line">ut.task(<span class="string">'taskE'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span></span>&#123;console.<span class="built_in">log</span>(<span class="string">'E'</span>); cb()&#125;);</span><br><span class="line"></span><br><span class="line">ut.task(<span class="string">'taskC'</span>, ut.series(<span class="string">'taskA'</span>, <span class="string">'taskB'</span>));</span><br><span class="line">ut.task(<span class="string">'taskE'</span>, ut.parallel(<span class="string">'taskC'</span>, <span class="string">'taskD'</span>));</span><br><span class="line"></span><br><span class="line">var tree = ut.tree();</span><br><span class="line">console.<span class="built_in">log</span>(tree);</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<h2 id="å…«ã€-lib-task"><a href="#å…«ã€-lib-task" class="headerlink" title="å…«ã€./lib/task"></a>å…«ã€./lib/task</h2><p>ä½¿ç”¨ä¸¾ä¾‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">gulp.task(<span class="string">'css_comm'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src([<span class="string">'1.css'</span>,<span class="string">'2.css'</span>])</span><br><span class="line">      .pipe(<span class="built_in">concat</span>(<span class="string">'common.css'</span>))</span><br><span class="line">      .pipe(gulp.dest(<span class="string">'./build/css'</span>))</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">task</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ­¤å¤„ ifåˆ¤æ–­ å†™æ³•ä¸ºå¤„ç†â€œæ–°â€æ‰“åŒ…å†™æ³•</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  function uglify()&#123;</span></span><br><span class="line"><span class="comment">    return gulp.src(['src/*.js'])</span></span><br><span class="line"><span class="comment">        .pipe(uglify())</span></span><br><span class="line"><span class="comment">        .pipe(gulp.dest('dist'));</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  gulp.task(uglify);</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">'function'</span>) &#123;</span><br><span class="line">    fn = name;</span><br><span class="line">    name = fn.displayName || fn.name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å½“ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸ºç©ºä¸å­˜åœ¨æ—¶ï¼Œå³æ˜¯å¯¹ç›¸åº”ä»»åŠ¡çš„è·å–----é…åˆä¸Šä¸€æ®µ  if ä¸€èµ·çœ‹</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    gulp.task('css_comm', function() &#123;</span></span><br><span class="line"><span class="comment">    &#125;);</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">if</span> (!fn) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._getTask(name);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è°ƒæ•´å¥½å…³ç³»,å†æ¬¡å­˜å…¥task</span></span><br><span class="line">  <span class="keyword">this</span>._setTask(name, fn);</span><br><span class="line">  <span class="comment">// console.log(`name: $&#123;name&#125;, fn: $&#123;fn&#125;`)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/*æ­¤ä¸¤å¤„çš„_getTaskå’Œ_setTask=&gt;å¯ä»¥çœ‹ä¸€ä¸‹,ç±»ä¼¼äºä¸€å¼€å§‹DefaultRegistryä¸­å¯¹tasksä¸­</span></span><br><span class="line"><span class="comment">    ä»»åŠ¡çš„æ“ä½œ(get\set)</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = task;</span><br></pre></td></tr></table></figure>
<h2 id="ä¹ã€-lib-parallel"><a href="#ä¹ã€-lib-parallel" class="headerlink" title="ä¹ã€./lib/parallel"></a>ä¹ã€./lib/parallel</h2><p>this.parallelçš„ä½¿ç”¨ =&gt;</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var undertaker = <span class="built_in">require</span>(<span class="string">'undertaker'</span>);</span><br><span class="line">ut = new undertaker();</span><br><span class="line"></span><br><span class="line">  ut.task(<span class="string">'taskA'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskB'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskC'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskD'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;);</span><br><span class="line"></span><br><span class="line">// taskD éœ€è¦åœ¨ <span class="string">'taskA'</span>, <span class="string">'taskB'</span>, <span class="string">'taskC'</span> æ‰§è¡Œå®Œæ¯•åæ‰å¼€å§‹æ‰§è¡Œï¼Œ</span><br><span class="line">// å…¶ä¸­ <span class="string">'taskA'</span>, <span class="string">'taskB'</span>, <span class="string">'taskC'</span> çš„æ‰§è¡Œæ˜¯å¼‚æ­¥çš„</span><br><span class="line">ut.task(<span class="string">'taskD'</span>, ut.parallel(<span class="string">'taskA'</span>, <span class="string">'taskB'</span>, <span class="string">'taskC'</span>));</span><br></pre></td></tr></table></figure>
<p><strong>é‚£è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹parallelä¸­åˆ†åˆ«å®ç°äº†äº›ä»€ä¹ˆå§ï¼</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bach = <span class="built_in">require</span>(<span class="string">'bach'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> metadata = <span class="built_in">require</span>(<span class="string">'./helpers/metadata'</span>);</span><br><span class="line"><span class="keyword">var</span> buildTree = <span class="built_in">require</span>(<span class="string">'./helpers/buildTree'</span>);</span><br><span class="line"><span class="keyword">var</span> normalizeArgs = <span class="built_in">require</span>(<span class="string">'./helpers/normalizeArgs'</span>);</span><br><span class="line"><span class="keyword">var</span> createExtensions = <span class="built_in">require</span>(<span class="string">'./helpers/createExtensions'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parallel</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> create = <span class="keyword">this</span>._settle ? bach.settleParallel : bach.parallel;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¹æ®â€œä»»åŠ¡â€æ•°ç»„ä»å¯„å­˜å™¨ä¸­è·å–å±•å¼€çš„ä»»åŠ¡æ•°ç»„</span></span><br><span class="line">  <span class="keyword">var</span> args = normalizeArgs(<span class="keyword">this</span>._registry, <span class="built_in">arguments</span>);</span><br><span class="line">  <span class="comment">// ä¸ºå¯¹è±¡æ‰©å±•æ–°â€œâ€å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">var</span> extensions = createExtensions(<span class="keyword">this</span>);</span><br><span class="line">  <span class="comment">// å°†å‚æ•°ä¸æ‰©å±•çš„å¯¹è±¡(after,before,create,error)åšå…³è”</span></span><br><span class="line">  <span class="comment">// æ‰€ä»¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å®ƒå…·ä½“å®ç°äº†äº›ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// bach.settleParallel+</span></span><br><span class="line">  </span><br><span class="line">  (args, extensions) : bach.parallel(args, extensions)</span><br><span class="line">  <span class="keyword">var</span> fn = create(args, extensions);</span><br><span class="line"></span><br><span class="line">  fn.displayName = <span class="string">'&lt;parallel&gt;'</span>;</span><br><span class="line"></span><br><span class="line">  metadata.set(fn, &#123;</span><br><span class="line">    name: fn.displayName,</span><br><span class="line">    branch: <span class="literal">true</span>,</span><br><span class="line">    tree: &#123;</span><br><span class="line">      label: fn.displayName,</span><br><span class="line">      type: <span class="string">'function'</span>,</span><br><span class="line">      branch: <span class="literal">true</span>,</span><br><span class="line">      nodes: buildTree(args),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> fn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = parallel;</span><br></pre></td></tr></table></figure>
<p>è®©æˆ‘ä»¬ä»ä¸Šåˆ°ä¸‹çš„åˆ†æä¸€ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®â€œä»»åŠ¡â€æ•°ç»„ä»å¯„å­˜å™¨ä¸­è·å–å±•å¼€çš„ä»»åŠ¡æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> args = normalizeArgs(<span class="keyword">this</span>._registry, <span class="built_in">arguments</span>);</span><br></pre></td></tr></table></figure>
<p><strong>normalizeArgs</strong> æ–¹æ³•æ˜¯æ¥æºäºæ¨¡å— <strong>./helpers/normalizeArgs</strong></p>
<p>é‚£è®©æˆ‘ä»¬è½¬å‘æ¥çœ‹ä¸€ä¸‹æ­¤æ¨¡å—</p>
<h3 id="ä¹-1-ã€normalizeArgs"><a href="#ä¹-1-ã€normalizeArgs" class="headerlink" title="ä¹(1)ã€normalizeArgs"></a>ä¹(1)ã€normalizeArgs</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// nODEçš„æ–­è¨€æµ‹è¯•</span></span><br><span class="line"><span class="keyword">var</span> assert = <span class="built_in">require</span>(<span class="string">'assert'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»ä¼¼äºArray.map()çš„æ”¹è¿›ç‰ˆæœ¬=&gt;æœ€ç»ˆè¿”å›çš„ä¹Ÿæ˜¯æ•°ç»„</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">:npmä¸­çš„è®²è§£</span></span><br><span class="line"><span class="comment">map(['a', 'b', 'c'], function(ele, i) &#123;</span></span><br><span class="line"><span class="comment">  return i + ele;</span></span><br><span class="line"><span class="comment">&#125;);</span></span><br><span class="line"><span class="comment">//=&gt; ['0a', '1b', '2c']</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> map = <span class="built_in">require</span>(<span class="string">'arr-map'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æ•°ç»„å±•å¼€ä¸ºå¹³é¢æ•°ç»„,è§£é™¤åµŒå¥—</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">flatten(['a', ['b', ['c']], 'd', ['e']]);</span></span><br><span class="line"><span class="comment">//=&gt; ['a', 'b', 'c', 'd', 'e']*/</span></span><br><span class="line"><span class="keyword">var</span> flatten = <span class="built_in">require</span>(<span class="string">'arr-flatten'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶åˆ°å¯„å­˜å™¨ä»¥åŠç›¸åº”çš„â€œä»»åŠ¡æ•°ç»„â€</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">normalizeArgs</span>(<span class="params">registry, args</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¼ é€’å…¥ä¸€ä¸ªä¸€ä¸ªçš„â€œä»»åŠ¡â€æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getFunction</span>(<span class="params">task</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// taskç±»å‹åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> task === <span class="string">'function'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> task;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»æˆ‘ä»¬å¯„å­˜å™¨ä¸­æ‰¾åˆ°æœ‰æ²¡æœ‰è¿™ä¸ªkeyçš„function,å› ä¸ºå­˜åœ¨æ—§çš„å†™æ³•----ä¸çŸ¥æ˜¯å¦æœ‰ç†è§£é”™</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    gulp.task('uglify', function()&#123;</span></span><br><span class="line"><span class="comment">        return gulp.src(['src/*.js'])</span></span><br><span class="line"><span class="comment">            .pipe(uglify())</span></span><br><span class="line"><span class="comment">            .pipe(gulp.dest('dist'));</span></span><br><span class="line"><span class="comment">    &#125;);</span></span><br><span class="line"><span class="comment">    gulp.task('default', ['uglify']);</span></span><br><span class="line"><span class="comment">    =&gt;ä¸Šé¢çš„ä¸€å¼€å§‹ç»™registryä¼ å…¥çš„æ˜¯ä¸€ä¸ªuglifyçš„key</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">var</span> fn = registry.get(task);</span><br><span class="line">    <span class="comment">// é”™è¯¯å¤„ç†</span></span><br><span class="line">    assert(fn, <span class="string">'Task never defined: '</span> + task);</span><br><span class="line">    <span class="comment">// å›</span></span><br><span class="line">    <span class="keyword">return</span> fn;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// â€œä»»åŠ¡æ•°ç»„â€å±•å¼€</span></span><br><span class="line">  <span class="keyword">var</span> flattenArgs = flatten(args);</span><br><span class="line">  <span class="comment">// æ ¹æ®é•¿åº¦,åˆ¤æ–­æ˜¯å¦å†™ç©ºäº†</span></span><br><span class="line">  assert(flattenArgs.length, <span class="string">'One or more tasks should be combined using series or parallel'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¹â€œä»»åŠ¡æ•°ç»„â€çš„ä»»åŠ¡è¿›è¡Œæ–¹æ³•çš„éå†</span></span><br><span class="line">  <span class="keyword">return</span> map(flattenArgs, getFunction);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = normalizeArgs;</span><br></pre></td></tr></table></figure>
<p>//é€šè¿‡å‚æ•°è·å–å­˜åœ¨å¯„å­˜å™¨ï¼ˆregistryï¼‰ä¸­çš„ taskFunctionsï¼ˆæ•°ç»„å½¢å¼ï¼‰<br>var args = normalizeArgs(this._registry, arguments);</p>
<p><strong>æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­é˜…è¯»ä¸‹ä¸€å¥ï¼š</strong><br>var extensions = createExtensions(this);</p>
<p>è€Œ<strong>createExtensions</strong>æ˜¯æ¥æºäºæ¨¡å—<strong>helpers/createExtensions</strong></p>
<p>é‚£ä¹ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹å…¶ä¸­å®ç°äº†ä»€ä¹ˆ = ?</p>
<h3 id="ä¹-2-ã€createExtensions"><a href="#ä¹-2-ã€createExtensions" class="headerlink" title="ä¹(2)ã€createExtensions"></a>ä¹(2)ã€createExtensions</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æŸå‡½æ•°,å¹¶è®°å½•æ•è·å½“å‰æ—¶é—´æˆ³æˆ–è€…ä¼ å…¥æ—¶é—´æˆ³</span></span><br><span class="line"><span class="keyword">var</span> captureLastRun = <span class="built_in">require</span>(<span class="string">'last-run'</span>).capture;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ä¸€ä¸ªfunctionå¹¶åˆ é™¤æœ€åä¸€æ¬¡è¿è¡Œæ—¶æ—¶é—´æˆ³</span></span><br><span class="line"><span class="keyword">var</span> releaseLastRun = <span class="built_in">require</span>(<span class="string">'last-run'</span>).release;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> metadata = <span class="built_in">require</span>(<span class="string">'./metadata'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> uid = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Storage</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> meta = metadata.get(fn);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.fn = meta.orig || fn;</span><br><span class="line">  <span class="keyword">this</span>.uid = uid++;</span><br><span class="line">  <span class="keyword">this</span>.name = meta.name;</span><br><span class="line">  <span class="keyword">this</span>.branch = meta.branch || <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">this</span>.captureTime = <span class="built_in">Date</span>.now();</span><br><span class="line">  <span class="keyword">this</span>.startHr = [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Storage.prototype.capture = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  captureLastRun(<span class="keyword">this</span>.fn, <span class="keyword">this</span>.captureTime);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Storage.prototype.release = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  releaseLastRun(<span class="keyword">this</span>.fn);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createExtensions</span>(<span class="params">ee</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    create: <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// è°ƒç”¨createæ—¶å€™,è®°å½•ä¸€ä¸‹ç›¸å…³ä¿¡æ¯,å¹¶è¿”å›</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Storage(fn);</span><br><span class="line">    &#125;,</span><br><span class="line">    before: <span class="function"><span class="keyword">function</span>(<span class="params">storage</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// Nodeè·å–ç›¸å¯¹äºè¿‡å»æŸä¸€åˆ»çš„æ—¶é—´</span></span><br><span class="line">      storage.startHr = process.hrtime();</span><br><span class="line">      <span class="comment">// Nodeè§¦å‘startäº‹ä»¶,åé¢ä¸ºå‚æ•°</span></span><br><span class="line">      ee.emit(<span class="string">'start'</span>, &#123;</span><br><span class="line">        uid: storage.uid,</span><br><span class="line">        name: storage.name,</span><br><span class="line">        branch: storage.branch,</span><br><span class="line">        time: <span class="built_in">Date</span>.now(),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    after: <span class="function"><span class="keyword">function</span>(<span class="params">result, storage</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// è°ƒç”¨æ—¶åˆ¤æ–­æ˜¯å¦æœ‰é”™,æœ‰åˆ™çˆ†</span></span><br><span class="line">      <span class="keyword">if</span> (result &amp;&amp; result.state === <span class="string">'error'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.error(result.value, storage);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// è®°å½•å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line">      storage.capture();</span><br><span class="line">      <span class="comment">// Nodeè§¦å‘stopäº‹ä»¶</span></span><br><span class="line">      ee.emit(<span class="string">'stop'</span>, &#123;</span><br><span class="line">        uid: storage.uid,</span><br><span class="line">        name: storage.name,</span><br><span class="line">        branch: storage.branch,</span><br><span class="line">        duration: process.hrtime(storage.startHr),</span><br><span class="line">        time: <span class="built_in">Date</span>.now(),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span>(<span class="params">error, storage</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(error)) &#123;</span><br><span class="line">        error = error[<span class="number">0</span>];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// åˆ é™¤å‡ºé”™çš„æ­¤æ¬¡æ‰§è¡Œæ—¶é—´æˆ³</span></span><br><span class="line">      storage.release();</span><br><span class="line">      ee.emit(<span class="string">'error'</span>, &#123;</span><br><span class="line">        uid: storage.uid,</span><br><span class="line">        name: storage.name,</span><br><span class="line">        branch: storage.branch,</span><br><span class="line">        error: error,</span><br><span class="line">        duration: process.hrtime(storage.startHr),</span><br><span class="line">        time: <span class="built_in">Date</span>.now(),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = createExtensions;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ–¹æ³•æ‰©å±•ï¼Œä¸ºå˜é‡æ–°å¢æ‹¥æœ‰<strong>create</strong>ã€<strong>before</strong>ã€<strong>after</strong>ã€<strong>error</strong>ç­‰æ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡</p>
<p>æœ€ç»ˆæœŸæœ›å°†æ‰©å±•å‡ºæ¥çš„å¯¹è±¡ä¸æˆ‘ä»¬çš„â€œä»»åŠ¡â€taskå…³è”</p>
<p><strong>æ¥ç€æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸€å¥:</strong></p>
<p>var fn = create(args, extensions);</p>
<p>create =&gt; var create = this._settle ? bach.settleParallel : bach.parallel;</p>
<p><strong>bach</strong>æ¨¡å—æ¥æºäº<strong>bach</strong></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹bachæ¨¡å—å®ç°äº†äº›ä»€ä¹ˆ =&gt; ?</p>
<h3 id="ä¹-3-ã€bach"><a href="#ä¹-3-ã€bach" class="headerlink" title="ä¹(3)ã€bach"></a>ä¹(3)ã€bach</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  series: <span class="built_in">require</span>(<span class="string">'./lib/series'</span>),</span><br><span class="line">  parallel: <span class="built_in">require</span>(<span class="string">'./lib/parallel'</span>),</span><br><span class="line">  settleSeries: <span class="built_in">require</span>(<span class="string">'./lib/settleSeries'</span>),</span><br><span class="line">  settleParallel: <span class="built_in">require</span>(<span class="string">'./lib/settleParallel'</span>),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è€Œæˆ‘ä»¬æ‰€éœ€è¦ç”¨çš„çš„parallelæ˜¯æ¥æºäº<strong>lib/parallel</strong></p>
<p>è€Œ<strong>lib/parallel</strong>å…·ä½“ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹æ•°ç»„å–å€¼æ“ä½œ,å–ç¬¬ä¸€åŠæœ€åä¸€ä¸ª</span></span><br><span class="line"><span class="keyword">var</span> initial = <span class="built_in">require</span>(<span class="string">'array-initial'</span>);</span><br><span class="line"><span class="keyword">var</span> last = <span class="built_in">require</span>(<span class="string">'array-last'</span>);</span><br><span class="line"><span class="comment">// ç”¨äºå¼‚æ­¥åŒ–å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> asyncDone = <span class="built_in">require</span>(<span class="string">'async-done'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nowAndLater = <span class="built_in">require</span>(<span class="string">'now-and-later'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> helpers = <span class="built_in">require</span>(<span class="string">'./helpers'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iterator</span>(<span class="params">fn, key, cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é‚£asyncDoneåˆæ˜¯åšä»€ä¹ˆçš„å‘¢ =&gt; ?</span></span><br><span class="line">  <span class="comment">// ä¼ å…¥ä¸€ä¸ªæ–¹æ³•ä¸å›è°ƒ</span></span><br><span class="line">  <span class="keyword">return</span> asyncDone(fn, cb);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildParallel</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ ¡éªŒä¼ å…¥å‚æ•°(argumentsçš„åˆæ³•æ€§)</span></span><br><span class="line">  <span class="keyword">var</span> args = helpers.verifyArguments(<span class="built_in">arguments</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å–åˆ°æœ€åä¸€ä¸ªå‚æ•°,å³ä¼ å…¥æ—¶çš„extensions,ç„¶åæ‰§è¡Œæ­¤æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// å¦‚æœæœ€åä¸€ä¸ªå‚æ•°!==functionåˆ™return å›</span></span><br><span class="line">  <span class="keyword">var</span> extensions = helpers.getExtensions(last(args));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (extensions) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ‰©å±•å¯¹è±¡å­˜åœ¨,å–ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">    args = initial(args);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æˆ‘ä»¬å…·ä½“æ¥çœ‹ä¸€ä¸‹nowAndLater.mapåšäº†ä»€ä¹ˆ =&gt; </span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">parallel</span>(<span class="params">done</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    ä¼ å…¥äº†å››ä¸ªå€¼(args, function iterator(fn, key, cb) &#123;return asyncDone(fn, cb);&#125;, æ‰©å±•çš„å¯¹è±¡, done)</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    nowAndLater.map(args, iterator, extensions, done);</span><br><span class="line">    <span class="comment">//éå†tasksæ•°ç»„ï¼Œå°†å…¶ç”Ÿå‘½å‘¨æœŸå’Œextensionså±æ€§å…³è”èµ·æ¥,ä¸”å°†æ¯ä¸ªtaskå¼‚æ­¥åŒ–ï¼Œä¸”å¹¶å‘æ‰§è¡Œ</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> parallel;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = buildParallel;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸€æ®µä»£ç ä¸­æ‰€ç”¨çš„çš„é‡è¦æ–¹æ³•å‡½æ•°æœ‰è¿™äº›ï¼š</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iterator</span><span class="params">(fn, key, cb)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> asyncDone(fn, cb);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*...çœç•¥*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parallel</span><span class="params">(done)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  nowAndLater.map(args, iterator, extensions, done);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆå¯ä»¥è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<strong>async-Done</strong>åˆ†åˆ«åšäº†ä»€ä¹ˆ =&gt; ï¼Ÿ</p>
<h3 id="ä¹-4-async-Done"><a href="#ä¹-4-async-Done" class="headerlink" title="ä¹(4)async-Done"></a>ä¹(4)async-Done</h3><p>å®ƒå¯ä»¥æŠŠä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰å¼‚æ­¥åŒ–</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//demo1</span></span><br><span class="line"><span class="keyword">var</span> asyncDone = <span class="built_in">require</span>(<span class="string">'async-done'</span>);</span><br><span class="line"></span><br><span class="line">asyncDone(<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æµ‹è¯•AsyncDone---1--å¼€å§‹'</span>);</span><br><span class="line">    done(<span class="literal">null</span>, <span class="string">'æµ‹è¯•AsyncDone---1--ç»“æŸ'</span>)</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//  æˆåŠŸæ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œ``error`å°†ä¸ºnullã€‚</span></span><br><span class="line">  <span class="comment">//  `result`å°†æ˜¯ç¬¬ä¸€ä¸ªå‡½æ•°çš„ç»“æœã€‚</span></span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">asyncDone(<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æµ‹è¯•AsyncDone---2--å¼€å§‹'</span>);</span><br><span class="line">    setTimeout( done.bind(<span class="keyword">this</span>, <span class="literal">null</span>, <span class="string">'æµ‹è¯•AsyncDone---2--ç»“æŸ'</span>), <span class="number">1000</span> )</span><br><span class="line"></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">asyncDone(<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æµ‹è¯•AsyncDone---3--å¼€å§‹'</span>);</span><br><span class="line">    done(<span class="literal">null</span>, <span class="string">'æµ‹è¯•AsyncDone---3--ç»“æŸ'</span>)</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>æ‰§è¡Œçš„ç»“æœ :</strong></p>
<ul>
<li>æµ‹è¯•AsyncDoneâ€”1â€“å¼€å§‹</li>
<li>æµ‹è¯•AsyncDoneâ€”1â€“ç»“æŸ</li>
<li>æµ‹è¯•AsyncDoneâ€”2â€“å¼€å§‹</li>
<li>æµ‹è¯•AsyncDoneâ€”3â€“å¼€å§‹</li>
<li>æµ‹è¯•AsyncDoneâ€”3â€“ç»“æŸ</li>
<li>æµ‹è¯•AsyncDoneâ€”2â€“ç»“æŸ</li>
</ul>
<p>å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ–¹æ³•ä¸­çš„doneå°†ä¼šæé†’ç¬¬äºŒä¸ªå‚æ•°(callback)å»æ‰§è¡Œç›¸å…³å›è°ƒ</p>
<p><strong>æ¥ä¸‹æ¥æˆ‘ä»¬æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹parallelçš„é‡è¦éƒ¨åˆ† :</strong></p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parallel</span><span class="params">(done)</span> </span>&#123;</span><br><span class="line">nowAndLater.map(args, iterator, extensions, done);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è€ŒnowAndLaterçš„æ¨¡å—æ¥å£æ¥æºäº<strong>now-and-later</strong></p>
<p>é‚£æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹<strong>now-and-later</strong>å®ç°äº†äº›ä»€ä¹ˆå‘¢?</p>
<h3 id="ä¹-5-ã€now-and-later"><a href="#ä¹-5-ã€now-and-later" class="headerlink" title="ä¹(5)ã€now-and-later"></a>ä¹(5)ã€now-and-later</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> once = <span class="built_in">require</span>(<span class="string">'once'</span>);</span><br><span class="line"><span class="keyword">var</span> helpers = <span class="built_in">require</span>(<span class="string">'./helpers'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map</span>(<span class="params">values, iterator, extensions, done</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> extensions === <span class="string">'function'</span>) &#123;</span><br><span class="line">        done = extensions;</span><br><span class="line">        extensions = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> done !== <span class="string">'function'</span>) &#123;</span><br><span class="line">        done = helpers.noop;  <span class="comment">//æ²¡æœ‰ä¼ å…¥doneåˆ™èµ‹äºˆä¸€ä¸ªç©ºå‡½æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®© done å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    done = once(done);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> keys = <span class="built_in">Object</span>.keys(values);</span><br><span class="line">    <span class="keyword">var</span> length = keys.length;</span><br><span class="line">    <span class="keyword">var</span> count = length;</span><br><span class="line">    <span class="keyword">var</span> idx = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„ã€å’Œvaluesç­‰é•¿çš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">var</span> results = helpers.initializeResults(values);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * helpers.defaultExtensions(extensions) è¿”å›å¦‚ä¸‹å¯¹è±¡ï¼š</span></span><br><span class="line"><span class="comment">     *  &#123;</span></span><br><span class="line"><span class="comment">            create: extensions.create || defaultExts.create,</span></span><br><span class="line"><span class="comment">            before: extensions.before || defaultExts.before,</span></span><br><span class="line"><span class="comment">            after: extensions.after || defaultExts.after,</span></span><br><span class="line"><span class="comment">            error: extensions.error || defaultExts.error,</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">var</span> exts = helpers.defaultExtensions(extensions);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (idx = <span class="number">0</span>; idx &lt; length; idx++) &#123;</span><br><span class="line">        <span class="keyword">var</span> key = keys[idx];</span><br><span class="line">        next(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value = values[key];</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ª Storage å®ä¾‹</span></span><br><span class="line">        <span class="keyword">var</span> storage = exts.create(value, key) || &#123;&#125;;</span><br><span class="line">        <span class="comment">//è§¦å‘'start'äº‹ä»¶</span></span><br><span class="line">        exts.before(storage);</span><br><span class="line">        <span class="comment">//åˆ©ç”¨ async-done å°† taskFunction è½¬ä¸ºå¼‚æ­¥æ–¹æ³•å¹¶æ‰§è¡Œ</span></span><br><span class="line">        iterator(value, once(handler));</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="comment">//è§¦å‘'error'äº‹ä»¶</span></span><br><span class="line">                exts.error(err, storage);</span><br><span class="line">                <span class="keyword">return</span> done(err, results);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è§¦å‘'stop'äº‹ä»¶</span></span><br><span class="line">            exts.after(result, storage);</span><br><span class="line">            results[key] = result;</span><br><span class="line">            <span class="keyword">if</span> (--count === <span class="number">0</span>) &#123;</span><br><span class="line">                done(err, results);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = map;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™æ®µä»£ç çš„ map æ–¹æ³•ä¸­ï¼Œé€šè¿‡ for å¾ªç¯éå†äº†æ¯ä¸ªä¼ å…¥ parallel æ¥å£çš„ taskFunctionï¼Œç„¶åä½¿ç”¨ iteratorï¼ˆasync-doneï¼‰å°† taskFunction å¼‚æ­¥åŒ–å¹¶æ‰§è¡Œï¼ˆæ‰§è¡Œå®Œæ¯•ä¼šè§¦å‘ hadlerï¼‰ï¼Œå¹¶å°† extensions çš„å„æ–¹æ³•å’Œ task çš„ç”Ÿå‘½å‘¨æœŸå…³è”èµ·æ¥ï¼ˆæ¯”å¦‚åœ¨ä»»åŠ¡å¼€å§‹æ—¶æ‰§è¡Œâ€œstartâ€äº‹ä»¶ã€ä»»åŠ¡å‡ºé”™æ—¶æ‰§è¡Œâ€œerrorâ€äº‹ä»¶ï¼‰ã€‚ â€”â€”[å¼•ç”¨è‡ªvaoyåšå®¢è¯´æ˜]</p>
<h2 id="åã€-lib-series"><a href="#åã€-lib-series" class="headerlink" title="åã€./lib/series"></a>åã€./lib/series</h2><p>seriesæ¥å£çš„ä½¿ç”¨:</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ut.task(<span class="string">'taskA'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;<span class="comment">/*ç•¥*/</span>&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskB'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;<span class="comment">/*ç•¥*/</span>&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskC'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;<span class="comment">/*ç•¥*/</span>&#125;);</span><br><span class="line">  ut.task(<span class="string">'taskD'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;<span class="comment">/*ç•¥*/</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// taskD éœ€è¦åœ¨ 'taskA', 'taskB', 'taskC' æ‰§è¡Œå®Œæ¯•åæ‰å¼€å§‹æ‰§è¡Œï¼Œ</span></span><br><span class="line"><span class="comment">// å…¶ä¸­ 'taskA', 'taskB', 'taskC' çš„æ‰§è¡Œå¿…é¡»æ˜¯æŒ‰é¡ºåºä¸€ä¸ªæ¥ä¸€ä¸ªçš„</span></span><br><span class="line">  ut.task(<span class="string">'taskD'</span>, ut.series(<span class="string">'taskA'</span>, <span class="string">'taskB'</span>, <span class="string">'taskC'</span>));</span><br></pre></td></tr></table></figure>
<p>å…¶å®ç°å’Œparallelæ˜¯åŸºæœ¬ä¸€è‡´çš„ï¼Œä½†åœ¨seriesä¸­ä½¿ç”¨çš„æ˜¯nowAndlaterçš„mapSeriesæ¥å£</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">next</span><span class="built_in">(key</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">next</span><span class="built_in">(key</span>) &#123;</span><br><span class="line">        var <span class="keyword">value</span> = values<span class="built_in">[key</span>];</span><br><span class="line"></span><br><span class="line">        var storage = exts.create(<span class="keyword">value</span>,<span class="built_in"> key</span>) || &#123;&#125;;</span><br><span class="line"></span><br><span class="line">        exts.before(storage);</span><br><span class="line">        iterator(<span class="keyword">value</span>, once(handler));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> handler(err, result) &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                exts<span class="built_in">.error</span>(err, storage);</span><br><span class="line">                <span class="keyword">return</span> done(err, results); //æœ‰ä»»åŠ¡å‡ºé”™ï¼Œæ•…æ‰€æœ‰ä»»åŠ¡åº”åœæ­¢è°ƒç”¨</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            exts.after(result, storage);</span><br><span class="line">            results<span class="built_in">[key</span>] = result;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (++idx &gt;= length) &#123;</span><br><span class="line">                done(err, results); //å…¨éƒ¨ä»»åŠ¡å·²ç»ç»“æŸäº†</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">next</span>(keys[idx]);  //<span class="keyword">next</span>ä¸åœ¨æ˜¯æ”¾åœ¨å¤–é¢çš„å¾ªç¯é‡Œï¼Œè€Œæ˜¯åœ¨ä»»åŠ¡çš„å›è°ƒé‡Œ</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤„åœ¨seriesæ¥å£ä¸­é€šè¿‡æ”¹åŠ¨ next çš„ä½ç½®ï¼Œå¯ä»¥å¾ˆå¥½åœ°è¦æ±‚ä¼ å…¥çš„ä»»åŠ¡å¿…é¡»ä¸€ä¸ªæ¥ä¸€ä¸ªå»æ‰§è¡Œï¼ˆåä¸€ä¸ªä»»åŠ¡åœ¨å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•çš„å›è°ƒé‡Œæ‰ä¼šå¼€å§‹æ‰§è¡Œï¼‰ã€‚</p>

      
    
    </div>
    
      <div class="post-tags syuanpi fadeInRightShort back-3">
      
        <a href="/tags/Gulp/">Gulp</a>
      
        <a href="/tags/æºç /">æºç </a>
      
      </div>
    
    
      

      
  <hr class="copy-line">
  <div class="post-copyright">
    <div class="copy-author">
      <span>ä½œè€… :</span>
      <span>Jayantxu</span>
    </div>
    <div class="copy-url">
      <span>åœ°å€ :</span>
      <a href="http://jayantxu.cn/2019/04/06/2019/Gulpæºç åˆ†æå­¦ä¹ -äºŒ/">http://jayantxu.cn/2019/04/06/2019/Gulpæºç åˆ†æå­¦ä¹ -äºŒ/</a>
    </div>
    <div class="copy-origin">
      <span>æ¥æº :</span>
      <a href="http://jayantxu.cn">http://jayantxu.cn</a>
    </div>
    <div class="copy-license">
      
      è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒã€‚
    </div>
  </div>

    
  </article>
  
    
  <nav class="article-page">
    
      <a href="/2019/04/09/2019/Gulpæºç åˆ†æå­¦ä¹ -ä¸‰/" id="art-left" class="art-left">
        <span class="next-title">
          <i class="iconfont icon-left"></i>Gulpæºç åˆ†æå­¦ä¹ (ä¸‰
        </span>
      </a>
    
    
      <a href="/2019/04/05/2019/Gulpæºç åˆ†æå­¦ä¹ -ä¸€/" id="art-right" class="art-right">
        <span class="prev-title">
          Gulpæºç åˆ†æå­¦ä¹ (ä¸€<i class="iconfont icon-right"></i>
        </span>
      </a>
    
  </nav>


    
  <i id="com-switch" class="iconfont icon-down jumping-in long infinite" style="font-size:24px;display:block;text-align:center;transform:rotate(180deg);"></i>
  <div class="post-comments" id="post-comments" style="display: block;margin: auto 16px;">
    

    
    

    

  </div>



  
  
    
  
  <aside class="post-toc">
    <div class="title"><span>æ–‡ç« å¯¼èˆª</span></div>
    <div class="toc-inner">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#undertakeræ¨¡å—æ–‡ä»¶åˆ†æ"><span class="toc-text">undertakeræ¨¡å—æ–‡ä»¶åˆ†æ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸€ã€undertaker-index-js"><span class="toc-text">ä¸€ã€undertaker-index.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#äºŒã€undertaker-registry-index-js"><span class="toc-text">äºŒã€undertaker-registry - index.js</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å›åˆ°undertaker-index-js"><span class="toc-text">å›åˆ°undertaker-index.js</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸‰ã€-lib-registry"><span class="toc-text">ä¸‰ã€ ./lib/registry</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å››ã€-lib-set-task"><span class="toc-text">å››ã€./lib/set-task</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#äº”ã€-lib-get-task"><span class="toc-text">äº”ã€./lib/get-task</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å…­ã€-lib-last-run"><span class="toc-text">å…­ã€./lib/last-run</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸ƒã€-lib-tree"><span class="toc-text">ä¸ƒã€./lib/tree</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å…«ã€-lib-task"><span class="toc-text">å…«ã€./lib/task</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¹ã€-lib-parallel"><span class="toc-text">ä¹ã€./lib/parallel</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¹-1-ã€normalizeArgs"><span class="toc-text">ä¹(1)ã€normalizeArgs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¹-2-ã€createExtensions"><span class="toc-text">ä¹(2)ã€createExtensions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¹-3-ã€bach"><span class="toc-text">ä¹(3)ã€bach</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¹-4-async-Done"><span class="toc-text">ä¹(4)async-Done</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¹-5-ã€now-and-later"><span class="toc-text">ä¹(5)ã€now-and-later</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åã€-lib-series"><span class="toc-text">åã€./lib/series</span></a></li></ol>
    </div>
  </aside>



  


        </div>
      </main>
      <footer class="footer syuanpi fadeIn" id="footer">
  <hr>
  <div class="footer-wrapper">
    <div class="left">
      <div class="contact-icon">
  
  
</div>

    </div>
    <div class="right">
      <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2019 ~ 2021</span>
        <span style="color: red;">â¤</span>
        <span>Jayantxu</span>
    </div>
    <div class="theme">
        <span>
            404 NOT NOT NOT FOUND
        </span>
    </div>
    
</div>

    </div>
  </div>
</footer>
    </div>
    <div class="tagcloud" id="tagcloud">
  <div class="tagcloud-taglist">
  
    <div class="tagcloud-tag">
      <button>JavaScript</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Axios</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Vue</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>CSS</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>HTML</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>å¸ƒå±€</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Git</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>è½¬è½½</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Gulp</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>æºç </button>
    </div>
  
    <div class="tagcloud-tag">
      <button>2019</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>JavaScipt</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Node</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Express</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Element</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>ä¼˜åŒ–</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>canvas</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>æ—¥å¸¸ç¢ç¢</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>MySQL</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Bug</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>è¸©å‘</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>HTTP</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Adv</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Stylus</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>ç®—æ³•</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Web</button>
    </div>
  
    <div class="tagcloud-tag">
      <button>Interview</button>
    </div>
  
  </div>
  
    <div class="tagcloud-postlist active">
      <h2>JavaScript</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/01/31/2019/Axiosä½¿ç”¨/">
            <time class="tagcloud-posttime">2019 / 01 / 31</time>
            <span>Axiosä½¿ç”¨</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/02/21/2019/Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–/">
            <time class="tagcloud-posttime">2019 / 02 / 21</time>
            <span>Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/01/23/2019/JSapplyæ¨¡æ‹Ÿ/">
            <time class="tagcloud-posttime">2019 / 01 / 23</time>
            <span>JSapplyæ¨¡æ‹Ÿ</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/01/24/2019/JSbindæ¨¡æ‹Ÿ/">
            <time class="tagcloud-posttime">2019 / 01 / 24</time>
            <span>JavaScript bindçš„æ¨¡æ‹Ÿå®ç°</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/01/23/2019/JScallæ¨¡æ‹Ÿ/">
            <time class="tagcloud-posttime">2019 / 01 / 23</time>
            <span>JavaScript callçš„æ¨¡æ‹Ÿå®ç°</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/01/23/2019/JavaScriptåˆ›å»ºå¯¹è±¡/">
            <time class="tagcloud-posttime">2019 / 01 / 23</time>
            <span>JavaScriptåˆ›å»ºå¯¹è±¡</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/01/23/2019/JavaScriptç»§æ‰¿/">
            <time class="tagcloud-posttime">2019 / 01 / 23</time>
            <span>JavaScriptç»§æ‰¿</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/02/18/2019/JavaScriptæ·±æµ…æ‹·è´/">
            <time class="tagcloud-posttime">2019 / 02 / 18</time>
            <span>JavaScriptæ·±æµ…æ‹·è´</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/02/02/2019/Vueçˆ¶å­é€šä¿¡/">
            <time class="tagcloud-posttime">2019 / 02 / 02</time>
            <span>Vueçˆ¶å­ç»„ä»¶é—´çš„é€šä¿¡</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/03/01/2019/marginé‡å ä»¥åŠè§£å†³åŠæ³•/">
            <time class="tagcloud-posttime">2019 / 03 / 01</time>
            <span>marginé‡å ä»¥åŠè§£å†³åŠæ³•</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/10/17/2019/thisæŒ‡å‘/">
            <time class="tagcloud-posttime">2019 / 10 / 17</time>
            <span>thisæŒ‡å‘</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/03/03/2019/é˜»æ­¢å†’æ³¡ã€é»˜è®¤äº‹ä»¶/">
            <time class="tagcloud-posttime">2019 / 03 / 03</time>
            <span>é˜»æ­¢å†’æ³¡ã€é»˜è®¤äº‹ä»¶</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/06/12/2020/EventLoop/">
            <time class="tagcloud-posttime">2020 / 06 / 12</time>
            <span>EventLoop</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/09/28/2020/JSæ¨¡å—åŒ–æ¼”è¿›/">
            <time class="tagcloud-posttime">2020 / 09 / 28</time>
            <span>JSæ¨¡å—åŒ–æ¼”è¿›</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/08/11/2020/XSS-CSRF/">
            <time class="tagcloud-posttime">2020 / 08 / 11</time>
            <span>XSS-CSRF</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/02/15/2020/adv/">
            <time class="tagcloud-posttime">2020 / 02 / 15</time>
            <span>adv</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/05/11/2020/corsè·¨åŸŸ/">
            <time class="tagcloud-posttime">2020 / 05 / 11</time>
            <span>è·¨åŸŸè®¿é—®</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/06/30/2020/async-awaitåŸç†/">
            <time class="tagcloud-posttime">2020 / 06 / 30</time>
            <span>async/awaitåŸç†</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/09/23/2020/åƒåœ¾å›æ”¶æœºåˆ¶/">
            <time class="tagcloud-posttime">2020 / 09 / 23</time>
            <span>åƒåœ¾å›æ”¶æœºåˆ¶</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/04/07/2020/è´¹èˆå°”-è€¶èŒ¨æ··æ´—/">
            <time class="tagcloud-posttime">2020 / 04 / 07</time>
            <span>è´¹èˆå°”.è€¶èŒ¨æ··æ´—</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/03/30/2020/è½®æ’­/">
            <time class="tagcloud-posttime">2020 / 03 / 30</time>
            <span>è½®æ’­</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/09/29/2020/JSè®¾è®¡æ¨¡å¼/">
            <time class="tagcloud-posttime">2020 / 09 / 29</time>
            <span>JSè®¾è®¡æ¨¡å¼</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/02/03/2020/é‡ç»˜å›æµ/">
            <time class="tagcloud-posttime">2020 / 02 / 03</time>
            <span>é‡ç»˜å›æµ</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/JS/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>JS</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/08/2021/JSä¸stylusä¸CSSVarçš„ç›¸äº’ä½œç”¨/">
            <time class="tagcloud-posttime">2021 / 01 / 08</time>
            <span>JSä¸stylusä¸CSSVarçš„ç›¸äº’ä½œç”¨</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/04/01/2021/JSæ‰‹å†™Promise/">
            <time class="tagcloud-posttime">2021 / 04 / 01</time>
            <span>JSæ‰‹å†™Promise</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/04/12/2021/æµè§ˆå™¨çš„å¤šçº¿ç¨‹/">
            <time class="tagcloud-posttime">2021 / 04 / 12</time>
            <span>æµè§ˆå™¨çš„å¤šçº¿ç¨‹</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Axios</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/01/31/2019/Axiosä½¿ç”¨/">
            <time class="tagcloud-posttime">2019 / 01 / 31</time>
            <span>Axiosä½¿ç”¨</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Vue</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/01/31/2019/Axiosä½¿ç”¨/">
            <time class="tagcloud-posttime">2019 / 01 / 31</time>
            <span>Axiosä½¿ç”¨</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/02/02/2019/Vueçˆ¶å­é€šä¿¡/">
            <time class="tagcloud-posttime">2019 / 02 / 02</time>
            <span>Vueçˆ¶å­ç»„ä»¶é—´çš„é€šä¿¡</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/09/26/2019/ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ /">
            <time class="tagcloud-posttime">2019 / 09 / 26</time>
            <span>ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ </span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/01/17/2020/Vue-Diff/">
            <time class="tagcloud-posttime">2020 / 01 / 17</time>
            <span>Vue-Diff</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/02/15/2020/adv/">
            <time class="tagcloud-posttime">2020 / 02 / 15</time>
            <span>adv</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>CSS</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/03/03/2019/CSSæ¸…é™¤æµ®åŠ¨/">
            <time class="tagcloud-posttime">2019 / 03 / 03</time>
            <span>CSSæ¸…é™¤æµ®åŠ¨çš„å‡ ç§æ–¹å¼</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/03/01/2019/CSSçœç•¥å·å®ç°/">
            <time class="tagcloud-posttime">2019 / 03 / 01</time>
            <span>CSSçœç•¥å·å®ç°</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/05/13/2019/Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»/">
            <time class="tagcloud-posttime">2019 / 05 / 13</time>
            <span>Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/03/26/2019/Gridå¸ƒå±€/">
            <time class="tagcloud-posttime">2019 / 03 / 26</time>
            <span>Gridå¸ƒå±€</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/03/01/2019/marginé‡å ä»¥åŠè§£å†³åŠæ³•/">
            <time class="tagcloud-posttime">2019 / 03 / 01</time>
            <span>marginé‡å ä»¥åŠè§£å†³åŠæ³•</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/02/02/2019/transformå¯¹fixed/">
            <time class="tagcloud-posttime">2019 / 02 / 02</time>
            <span>transformçˆ¶å…ƒç´ å¯¹fixedå­å…ƒç´ çš„å½±å“</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/12/26/2020/stylus-media/">
            <time class="tagcloud-posttime">2020 / 12 / 26</time>
            <span>stylus_media</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/03/30/2020/è½®æ’­/">
            <time class="tagcloud-posttime">2020 / 03 / 30</time>
            <span>è½®æ’­</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/CSS/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>CSS&HTML</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/02/03/2020/é‡ç»˜å›æµ/">
            <time class="tagcloud-posttime">2020 / 02 / 03</time>
            <span>é‡ç»˜å›æµ</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/08/2021/JSä¸stylusä¸CSSVarçš„ç›¸äº’ä½œç”¨/">
            <time class="tagcloud-posttime">2021 / 01 / 08</time>
            <span>JSä¸stylusä¸CSSVarçš„ç›¸äº’ä½œç”¨</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/03/01/2021/column-countæè¿°å…ƒç´ çš„åˆ—æ•°/">
            <time class="tagcloud-posttime">2021 / 03 / 01</time>
            <span>column-countæè¿°å…ƒç´ çš„åˆ—æ•°</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>HTML</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/03/01/2019/CSSçœç•¥å·å®ç°/">
            <time class="tagcloud-posttime">2019 / 03 / 01</time>
            <span>CSSçœç•¥å·å®ç°</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/02/10/2019/Node-expressæ–‡ä»¶ä¸Šä¼ ä¸‹è½½/">
            <time class="tagcloud-posttime">2019 / 02 / 10</time>
            <span>Node+Express+Elementå®ç°æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/03/01/2019/marginé‡å ä»¥åŠè§£å†³åŠæ³•/">
            <time class="tagcloud-posttime">2019 / 03 / 01</time>
            <span>marginé‡å ä»¥åŠè§£å†³åŠæ³•</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/03/03/2019/é˜»æ­¢å†’æ³¡ã€é»˜è®¤äº‹ä»¶/">
            <time class="tagcloud-posttime">2019 / 03 / 03</time>
            <span>é˜»æ­¢å†’æ³¡ã€é»˜è®¤äº‹ä»¶</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/02/03/2020/é‡ç»˜å›æµ/">
            <time class="tagcloud-posttime">2020 / 02 / 03</time>
            <span>é‡ç»˜å›æµ</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>å¸ƒå±€</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/05/13/2019/Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»/">
            <time class="tagcloud-posttime">2019 / 05 / 13</time>
            <span>Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/03/26/2019/Gridå¸ƒå±€/">
            <time class="tagcloud-posttime">2019 / 03 / 26</time>
            <span>Gridå¸ƒå±€</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Git</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/01/23/2019/Gitç›¸å…³å‘½ä»¤/">
            <time class="tagcloud-posttime">2019 / 01 / 23</time>
            <span>Gitç›¸å…³å‘½ä»¤</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>è½¬è½½</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/03/26/2019/Gridå¸ƒå±€/">
            <time class="tagcloud-posttime">2019 / 03 / 26</time>
            <span>Gridå¸ƒå±€</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/01/17/2020/Vue-Diff/">
            <time class="tagcloud-posttime">2020 / 01 / 17</time>
            <span>Vue-Diff</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/04/01/2021/JSæ‰‹å†™Promise/">
            <time class="tagcloud-posttime">2021 / 04 / 01</time>
            <span>JSæ‰‹å†™Promise</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Gulp</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/02/21/2019/Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–/">
            <time class="tagcloud-posttime">2019 / 02 / 21</time>
            <span>Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/04/09/2019/Gulpæºç åˆ†æå­¦ä¹ -ä¸‰/">
            <time class="tagcloud-posttime">2019 / 04 / 09</time>
            <span>Gulpæºç åˆ†æå­¦ä¹ (ä¸‰</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/04/05/2019/Gulpæºç åˆ†æå­¦ä¹ -ä¸€/">
            <time class="tagcloud-posttime">2019 / 04 / 05</time>
            <span>Gulpæºç åˆ†æå­¦ä¹ (ä¸€</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/04/06/2019/Gulpæºç åˆ†æå­¦ä¹ -äºŒ/">
            <time class="tagcloud-posttime">2019 / 04 / 06</time>
            <span>Gulpæºç åˆ†æå­¦ä¹ (äºŒ</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>æºç </h2>
      
        <div class="tagcloud-post">
          <a href="/2019/04/09/2019/Gulpæºç åˆ†æå­¦ä¹ -ä¸‰/">
            <time class="tagcloud-posttime">2019 / 04 / 09</time>
            <span>Gulpæºç åˆ†æå­¦ä¹ (ä¸‰</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/04/05/2019/Gulpæºç åˆ†æå­¦ä¹ -ä¸€/">
            <time class="tagcloud-posttime">2019 / 04 / 05</time>
            <span>Gulpæºç åˆ†æå­¦ä¹ (ä¸€</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/04/06/2019/Gulpæºç åˆ†æå­¦ä¹ -äºŒ/">
            <time class="tagcloud-posttime">2019 / 04 / 06</time>
            <span>Gulpæºç åˆ†æå­¦ä¹ (äºŒ</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>2019</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/04/05/2019/Gulpæºç åˆ†æå­¦ä¹ -ä¸€/">
            <time class="tagcloud-posttime">2019 / 04 / 05</time>
            <span>Gulpæºç åˆ†æå­¦ä¹ (ä¸€</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>JavaScipt</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/12/15/2019/JSåŸå‹é“¾/">
            <time class="tagcloud-posttime">2019 / 12 / 15</time>
            <span>JSåŸå‹é“¾</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Node</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/02/10/2019/Node-expressæ–‡ä»¶ä¸Šä¼ ä¸‹è½½/">
            <time class="tagcloud-posttime">2019 / 02 / 10</time>
            <span>Node+Express+Elementå®ç°æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/03/30/2019/Nodeè¯»å–å›¾ç‰‡å¹¶è½¬Base64/">
            <time class="tagcloud-posttime">2019 / 03 / 30</time>
            <span>Nodeè¯»å–å›¾ç‰‡å¹¶è½¬Base64</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/">
            <time class="tagcloud-posttime">2019 / 02 / 02</time>
            <span>Node+MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Express</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/02/10/2019/Node-expressæ–‡ä»¶ä¸Šä¼ ä¸‹è½½/">
            <time class="tagcloud-posttime">2019 / 02 / 10</time>
            <span>Node+Express+Elementå®ç°æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/">
            <time class="tagcloud-posttime">2019 / 02 / 02</time>
            <span>Node+MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Element</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/02/10/2019/Node-expressæ–‡ä»¶ä¸Šä¼ ä¸‹è½½/">
            <time class="tagcloud-posttime">2019 / 02 / 10</time>
            <span>Node+Express+Elementå®ç°æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/09/26/2019/ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ /">
            <time class="tagcloud-posttime">2019 / 09 / 26</time>
            <span>ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ </span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>ä¼˜åŒ–</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/10/08/2019/canvasè¿›è¡Œå›¾åƒåƒç´ ç‚¹ç€è‰²/">
            <time class="tagcloud-posttime">2019 / 10 / 08</time>
            <span>canvasè¿›è¡Œå›¾åƒåƒç´ ç‚¹ç€è‰²</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>canvas</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/10/08/2019/canvasè¿›è¡Œå›¾åƒåƒç´ ç‚¹ç€è‰²/">
            <time class="tagcloud-posttime">2019 / 10 / 08</time>
            <span>canvasè¿›è¡Œå›¾åƒåƒç´ ç‚¹ç€è‰²</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>æ—¥å¸¸ç¢ç¢</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/01/22/2019/hello-world/">
            <time class="tagcloud-posttime">2019 / 01 / 22</time>
            <span>Hello</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/06/27/2019/æ¯•ä¸šäº†/">
            <time class="tagcloud-posttime">2019 / 06 / 27</time>
            <span>æ¯•ä¸šäº†</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/02/08/2019/æ–°å¹´å¿«ä¹/">
            <time class="tagcloud-posttime">2019 / 02 / 08</time>
            <span>æ–°å¹´å¿«ä¹</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/12/01/2020/My/">
            <time class="tagcloud-posttime">2020 / 12 / 01</time>
            <span>My</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/04/05/2021/githubçš„3Dæ‰“å°/">
            <time class="tagcloud-posttime">2021 / 04 / 05</time>
            <span>æœ‰è¶£-githubçš„3Dæ‰“å°</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>MySQL</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/">
            <time class="tagcloud-posttime">2019 / 02 / 02</time>
            <span>Node+MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Bug</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/">
            <time class="tagcloud-posttime">2019 / 02 / 02</time>
            <span>Node+MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2019/02/02/2019/transformå¯¹fixed/">
            <time class="tagcloud-posttime">2019 / 02 / 02</time>
            <span>transformçˆ¶å…ƒç´ å¯¹fixedå­å…ƒç´ çš„å½±å“</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>è¸©å‘</h2>
      
        <div class="tagcloud-post">
          <a href="/2019/11/01/2019/è¸©å‘eChartså‚æ•°/">
            <time class="tagcloud-posttime">2019 / 11 / 01</time>
            <span>è¸©å‘eChartså‚æ•°</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>HTTP</h2>
      
        <div class="tagcloud-post">
          <a href="/2020/07/09/2020/HTTPSè¿æ¥è¿‡ç¨‹/">
            <time class="tagcloud-posttime">2020 / 07 / 09</time>
            <span>HTTPSè¿æ¥è¿‡ç¨‹</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/10/28/2020/HTTPå¸¸è§çŠ¶æ€ç /">
            <time class="tagcloud-posttime">2020 / 10 / 28</time>
            <span>HTTPå¸¸è§çŠ¶æ€ç </span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/08/11/2020/XSS-CSRF/">
            <time class="tagcloud-posttime">2020 / 08 / 11</time>
            <span>XSS-CSRF</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/05/11/2020/corsè·¨åŸŸ/">
            <time class="tagcloud-posttime">2020 / 05 / 11</time>
            <span>è·¨åŸŸè®¿é—®</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2020/07/09/2020/ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹/">
            <time class="tagcloud-posttime">2020 / 07 / 09</time>
            <span>ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/HTTP/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>HTTP</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/02/26/2021/HTTPç¼“å­˜/">
            <time class="tagcloud-posttime">2021 / 02 / 26</time>
            <span>HTTPç¼“å­˜</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/04/12/2021/æµè§ˆå™¨çš„å¤šçº¿ç¨‹/">
            <time class="tagcloud-posttime">2021 / 04 / 12</time>
            <span>æµè§ˆå™¨çš„å¤šçº¿ç¨‹</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Adv</h2>
      
        <div class="tagcloud-post">
          <a href="/2020/02/15/2020/adv/">
            <time class="tagcloud-posttime">2020 / 02 / 15</time>
            <span>adv</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Stylus</h2>
      
        <div class="tagcloud-post">
          <a href="/2020/12/26/2020/stylus-media/">
            <time class="tagcloud-posttime">2020 / 12 / 26</time>
            <span>stylus_media</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/08/2021/JSä¸stylusä¸CSSVarçš„ç›¸äº’ä½œç”¨/">
            <time class="tagcloud-posttime">2021 / 01 / 08</time>
            <span>JSä¸stylusä¸CSSVarçš„ç›¸äº’ä½œç”¨</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>ç®—æ³•</h2>
      
        <div class="tagcloud-post">
          <a href="/2020/04/07/2020/è´¹èˆå°”-è€¶èŒ¨æ··æ´—/">
            <time class="tagcloud-posttime">2020 / 04 / 07</time>
            <span>è´¹èˆå°”.è€¶èŒ¨æ··æ´—</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/æ¯æ—¥ä¸€é¢˜/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>æ¯æ—¥ä¸€é¢˜</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/04/12/2021/æœ€é•¿å›æ–‡å­ä¸²/">
            <time class="tagcloud-posttime">2021 / 04 / 12</time>
            <span>æœ€é•¿å›æ–‡å­ä¸²</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Web</h2>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/CSS/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>CSS&HTML</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/HTTP/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>HTTP</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/æ¯æ—¥ä¸€é¢˜/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>æ¯æ—¥ä¸€é¢˜</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/JS/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>JS</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/interview/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>interview</span>
          </a>
        </div>
      
    </div>
  
    <div class="tagcloud-postlist ">
      <h2>Interview</h2>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/CSS/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>CSS&HTML</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/HTTP/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>HTTP</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/JS/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>JS</span>
          </a>
        </div>
      
        <div class="tagcloud-post">
          <a href="/2021/01/01/web/interview/">
            <time class="tagcloud-posttime">2021 / 01 / 01</time>
            <span>interview</span>
          </a>
        </div>
      
    </div>
  
</div>

  </div>
  <div class="backtop syuanpi melt toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>

  <div class="search" id="search">
    <div class="input">
      <input type="text" id="search-input" placeholder="åˆ«æœäº†, 404 !" autofocus>
    </div>
    <div id="search-result"></div>
  </div>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>












  <script src="/script/scheme/banderole.js"></script>


<script src="/script/bootstarp.js"></script>


<script>
if (nlviconfig.theme.toc) {
  setTimeout(function() {
    if (nlviconfig.theme.scheme === 'balance') {
      $("#header").addClass("show_toc");
    } else if (nlviconfig.theme.scheme === 'banderole') {
      $(".container-inner").addClass("has_toc");
      $(".post-toc .title").addClass("show");
      $(".toc-inner").addClass("show");
    }
  }, 1000);
}
</script>



</body>
</html>
