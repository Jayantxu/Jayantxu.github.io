<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <title>JSæ‰‹å†™Promise | Jayant Blog</title>
  <meta name="keywords" content=" JavaScript , è½¬è½½ ">
  <meta name="description" content="JSæ‰‹å†™Promise | Jayant Blog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="è®¸ä¿Šå½¦96å¹´å°é’å¹´ï¼Œç›®å‰å¤§å››ï¼Œå°±è¯»äºå¹¿ä¸œè¯ç§‘å¤§å­¦ï¼Œç°åœ¨æ·±åœ³åœ¨èŒï¼Œä»äº‹å‰ç«¯å¼€å‘ï¼Œæœ‰å›¢é˜Ÿå¼€å‘åˆä½œç»éªŒï¼Œç§¯æå‘ä¸Šï¼Œå¯¹äºå‰ç«¯é¢†åŸŸç ”ç©¶æœ‰ç€åè¶³çš„å…´è¶£ã€‚åœ¨æˆé•¿ç€ï¼Œä¹ŸåŠªåŠ›ç€â€¦ é‚®ç®±ï¼šjayant_xu@qq.comã€€æœŸå¾…ä½ çš„è”ç³» æ•™è‚²ç»å†2015-9ã€€è‡³ã€€2019-6ã€€ã€€ã€€ã€€å¹¿ä¸œè¯ç§‘å¤§å­¦ã€€ã€€ã€€ã€€ä¿¡æ¯ç®¡ç†ä¸ä¿¡æ¯ç³»ç»Ÿ ä¸»ä¿®è¯¾ç¨‹ï¼šJavaç¨‹åºè®¾è®¡ã€è®¡ç®—æœºç½‘ç»œã€æ•°æ®ç»“æ„ã€UMLç³»ç»Ÿå»ºæ¨¡ã€Webç¨‹åºè®¾è®¡ã€Linuxã€æ•°æ®">
<meta property="og:type" content="website">
<meta property="og:title" content="å…³äºæˆ‘">
<meta property="og:url" content="http://jayantxu.cn/about/index.html">
<meta property="og:site_name" content="Jayant Blog">
<meta property="og:description" content="è®¸ä¿Šå½¦96å¹´å°é’å¹´ï¼Œç›®å‰å¤§å››ï¼Œå°±è¯»äºå¹¿ä¸œè¯ç§‘å¤§å­¦ï¼Œç°åœ¨æ·±åœ³åœ¨èŒï¼Œä»äº‹å‰ç«¯å¼€å‘ï¼Œæœ‰å›¢é˜Ÿå¼€å‘åˆä½œç»éªŒï¼Œç§¯æå‘ä¸Šï¼Œå¯¹äºå‰ç«¯é¢†åŸŸç ”ç©¶æœ‰ç€åè¶³çš„å…´è¶£ã€‚åœ¨æˆé•¿ç€ï¼Œä¹ŸåŠªåŠ›ç€â€¦ é‚®ç®±ï¼šjayant_xu@qq.comã€€æœŸå¾…ä½ çš„è”ç³» æ•™è‚²ç»å†2015-9ã€€è‡³ã€€2019-6ã€€ã€€ã€€ã€€å¹¿ä¸œè¯ç§‘å¤§å­¦ã€€ã€€ã€€ã€€ä¿¡æ¯ç®¡ç†ä¸ä¿¡æ¯ç³»ç»Ÿ ä¸»ä¿®è¯¾ç¨‹ï¼šJavaç¨‹åºè®¾è®¡ã€è®¡ç®—æœºç½‘ç»œã€æ•°æ®ç»“æ„ã€UMLç³»ç»Ÿå»ºæ¨¡ã€Webç¨‹åºè®¾è®¡ã€Linuxã€æ•°æ®">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2021-04-10T08:59:12.671Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å…³äºæˆ‘">
<meta name="twitter:description" content="è®¸ä¿Šå½¦96å¹´å°é’å¹´ï¼Œç›®å‰å¤§å››ï¼Œå°±è¯»äºå¹¿ä¸œè¯ç§‘å¤§å­¦ï¼Œç°åœ¨æ·±åœ³åœ¨èŒï¼Œä»äº‹å‰ç«¯å¼€å‘ï¼Œæœ‰å›¢é˜Ÿå¼€å‘åˆä½œç»éªŒï¼Œç§¯æå‘ä¸Šï¼Œå¯¹äºå‰ç«¯é¢†åŸŸç ”ç©¶æœ‰ç€åè¶³çš„å…´è¶£ã€‚åœ¨æˆé•¿ç€ï¼Œä¹ŸåŠªåŠ›ç€â€¦ é‚®ç®±ï¼šjayant_xu@qq.comã€€æœŸå¾…ä½ çš„è”ç³» æ•™è‚²ç»å†2015-9ã€€è‡³ã€€2019-6ã€€ã€€ã€€ã€€å¹¿ä¸œè¯ç§‘å¤§å­¦ã€€ã€€ã€€ã€€ä¿¡æ¯ç®¡ç†ä¸ä¿¡æ¯ç³»ç»Ÿ ä¸»ä¿®è¯¾ç¨‹ï¼šJavaç¨‹åºè®¾è®¡ã€è®¡ç®—æœºç½‘ç»œã€æ•°æ®ç»“æ„ã€UMLç³»ç»Ÿå»ºæ¨¡ã€Webç¨‹åºè®¾è®¡ã€Linuxã€æ•°æ®">


<link rel="icon" href="/img/MyPic.png">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/gruvbox-dark.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0"></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js"></script>

<script src="/js/iconfont.js?v=1.1.0"></script>

</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value>
  <input class="theme_blog_path" value>
  <input id="theme_shortcut" value="true">
  <input id="theme_highlight_on" value="true">
  <input id="theme_code_copy" value="true">
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/MyPic.png">
</a>
<div class="author">
    <span>Jayantxu</span>
</div>

<div class="icon">
    
        
            <a title="github" href="https://github.com/Jayantxu" target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"/>
                    </svg>
                
            </a>
        
    
        
            <a title="email" href="mailto:Jayant_xu@qq.com" target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"/>
                    </svg>
                
            </a>
        
    
        
            <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=591060601&site=qq&menu=yes" target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"/>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <!-- <div class="all active" data-rel="å…¨éƒ¨æ–‡ç« ">å…¨éƒ¨æ–‡ç« 
            
                <small>(66)</small>
            
        </div> -->
    </li>
    
        
            
                <li>
                    <div data-rel="å‰ç«¯">
                        
                        å‰ç«¯
                        <small>(50)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="åç«¯">
                        
                        åç«¯
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="å·¥å…·">
                        
                        å·¥å…·
                        <small>(8)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="è¯»ä¹¦Vç”Ÿæ´»">
                        
                        è¯»ä¹¦Vç”Ÿæ´»
                        <small>(5)</small>
                        
                    </div>
                    
                </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
    </div>
    <div>
        
            <a class="about  site_url" href="/about">å…³äº</a>
        
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="66">
<input type="hidden" id="yelog_site_word_count" value="65.9k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        å‹æƒ…é“¾æ¥
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">å…¨éƒ¨æ–‡ç« </div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" autocomplete="off">
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search">
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Adv</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Axios</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Bug</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>canvas</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>CSS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Element</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Express</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Git</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Gulp</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>HTML</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>HTTP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Interview</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JavaScipt</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JavaScript</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>MySQL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Node</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Stylus</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Vue</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Web</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ä¹¦ç±æ‘˜å½•</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å¸ƒå±€</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ•°æ®ç»“æ„</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ—¥å¸¸ç¢ç¢</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æºç </a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç®—æ³•</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è¸©å‘</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è½¬è½½</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a id="top" class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/01/22/2019/hello-world/" data-tag="æ—¥å¸¸ç¢ç¢" data-author>
            <span class="post-title" title="Hello">Hello</span>
            <span class="post-date" title="2019-01-22 21:45:11">2019/01/22</span>
        </a>
        
        <a id="top" class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/05/07/2021/SKUå•†å“å±æ€§ç»„åˆå®è·µ/" data-tag="JavaScript" data-author>
            <span class="post-title" title="SKUå•†å“å±æ€§ç»„åˆå®è·µ">SKUå•†å“å±æ€§ç»„åˆå®è·µ</span>
            <span class="post-date" title="2021-05-07 16:22:31">2021/05/07</span>
        </a>
        
        <a id="top" class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/03/30/2020/è½®æ’­/" data-tag="JavaScript,CSS" data-author>
            <span class="post-title" title="æ¨¡æ‹Ÿç”Ÿæˆè™šæ‹Ÿ3Dè½®æ’­ç»“æ„">æ¨¡æ‹Ÿç”Ÿæˆè™šæ‹Ÿ3Dè½®æ’­ç»“æ„</span>
            <span class="post-date" title="2020-03-30 17:30:29">2020/03/30</span>
        </a>
        
        <a id="top" class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/02/15/2020/adv/" data-tag="JavaScript,Vue,Adv" data-author>
            <span class="post-title" title="adv">adv</span>
            <span class="post-date" title="2020-02-15 00:00:00">2020/02/15</span>
        </a>
        
        <a id="top" class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/01/07/2020/è´¹èˆå°”-è€¶èŒ¨æ··æ´—/" data-tag="JavaScript,ç®—æ³•" data-author>
            <span class="post-title" title="å€Ÿé‰´è´¹èˆå°”.è€¶èŒ¨æ··æ´—ä¼˜åŒ–å…¬å¸å¹´ä¼šæŠ½å¥–">å€Ÿé‰´è´¹èˆå°”.è€¶èŒ¨æ··æ´—ä¼˜åŒ–å…¬å¸å¹´ä¼šæŠ½å¥–</span>
            <span class="post-date" title="2020-01-07 00:00:00">2020/01/07</span>
        </a>
        
        <a id="top" class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/10/08/2019/canvasè¿›è¡Œå›¾åƒåƒç´ ç‚¹ç€è‰²/" data-tag="canvas" data-author>
            <span class="post-title" title="åŸºäºCanvasè¿›è¡Œåƒç´ åˆ†æï¼Œç»“åˆæ•°æ®è¿›è¡Œå®æ—¶ç€è‰²">åŸºäºCanvasè¿›è¡Œåƒç´ åˆ†æï¼Œç»“åˆæ•°æ®è¿›è¡Œå®æ—¶ç€è‰²</span>
            <span class="post-date" title="2019-10-08 18:35:35">2019/10/08</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/05/26/2021/æ‰¹é‡æ•°æ®ç»˜åˆ¶å¿ƒå¾—/" data-tag="JavaScript,Web" data-author>
            <span class="post-title" title="å¤§é‡/æ‰¹é‡æ•°æ®ä¼˜åŒ–æ€»ç»“">å¤§é‡/æ‰¹é‡æ•°æ®ä¼˜åŒ–æ€»ç»“</span>
            <span class="post-date" title="2021-05-26 20:23:03">2021/05/26</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/04/18/2021/æ•°ç»„æ•°æ®ç»“æ„-trieæ ‘/" data-tag="æ•°æ®ç»“æ„" data-author>
            <span class="post-title" title="æ•°ç»„æ•°æ®ç»“æ„-trieæ ‘">æ•°ç»„æ•°æ®ç»“æ„-trieæ ‘</span>
            <span class="post-date" title="2021-04-18 11:02:50">2021/04/18</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/04/14/2021/å®ç°å¯¹è±¡ç»™for-oféå†/" data-tag="JavaScript" data-author>
            <span class="post-title" title="å®ç°å¯¹è±¡ç»™for...oféå†">å®ç°å¯¹è±¡ç»™for...oféå†</span>
            <span class="post-date" title="2021-04-14 23:19:20">2021/04/14</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/04/12/2021/æµè§ˆå™¨çš„å¤šçº¿ç¨‹/" data-tag="JavaScript,HTTP" data-author>
            <span class="post-title" title="æµè§ˆå™¨çš„å¤šçº¿ç¨‹">æµè§ˆå™¨çš„å¤šçº¿ç¨‹</span>
            <span class="post-date" title="2021-04-12 19:10:48">2021/04/12</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/04/07/2021/HTTP1-HTTP1-1-HTTP2-HTTPS-HTTP3çš„åŒºåˆ«ç‰¹ç‚¹/" data-tag="HTTP,Web" data-author>
            <span class="post-title" title="HTTP1-HTTP1.1-HTTP2-HTTPS-HTTP3çš„åŒºåˆ«ç‰¹å®š">HTTP1-HTTP1.1-HTTP2-HTTPS-HTTP3çš„åŒºåˆ«ç‰¹å®š</span>
            <span class="post-date" title="2021-04-07 14:45:27">2021/04/07</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  è¯»ä¹¦Vç”Ÿæ´» " href="/2021/04/05/2021/githubçš„3Dæ‰“å°/" data-tag="æ—¥å¸¸ç¢ç¢" data-author>
            <span class="post-title" title="æœ‰è¶£-githubçš„3Dæ‰“å°">æœ‰è¶£-githubçš„3Dæ‰“å°</span>
            <span class="post-date" title="2021-04-05 00:00:00">2021/04/05</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/04/02/2021/åå¤§æ’åº/" data-tag="JavaScript" data-author>
            <span class="post-title" title="åå¤§æ’åº">åå¤§æ’åº</span>
            <span class="post-date" title="2021-04-02 11:10:07">2021/04/02</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/04/01/2021/JSæ‰‹å†™Promise/" data-tag="JavaScript,è½¬è½½" data-author>
            <span class="post-title" title="JSæ‰‹å†™Promise">JSæ‰‹å†™Promise</span>
            <span class="post-date" title="2021-04-01 20:08:55">2021/04/01</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/02/26/2021/HTTPç¼“å­˜/" data-tag="HTTP" data-author>
            <span class="post-title" title="HTTPç¼“å­˜">HTTPç¼“å­˜</span>
            <span class="post-date" title="2021-02-26 00:00:00">2021/02/26</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/02/21/2021/TCPä¸UDPçš„åŒºåˆ«/" data-tag="HTTP,Web" data-author>
            <span class="post-title" title="TCPä¸UDPçš„åŒºåˆ«">TCPä¸UDPçš„åŒºåˆ«</span>
            <span class="post-date" title="2021-02-21 22:23:03">2021/02/21</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/01/08/2021/JSä¸stylusä¸CSSVarçš„ç›¸äº’ä½œç”¨/" data-tag="JavaScript,CSS,Stylus" data-author>
            <span class="post-title" title="JSä¸stylusä¸CSSVarçš„ç›¸äº’ä½œç”¨">JSä¸stylusä¸CSSVarçš„ç›¸äº’ä½œç”¨</span>
            <span class="post-date" title="2021-01-08 00:00:00">2021/01/08</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/01/01/web/CSS/" data-tag="CSS,Web,Interview" data-author>
            <span class="post-title" title="CSS&amp;HTML">CSS&amp;HTML</span>
            <span class="post-date" title="2021-01-01 00:00:00">2021/01/01</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/01/01/web/HTTP/" data-tag="HTTP,Web,Interview" data-author>
            <span class="post-title" title="HTTP">HTTP</span>
            <span class="post-date" title="2021-01-01 00:00:00">2021/01/01</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/01/01/web/JS/" data-tag="JavaScript,Web,Interview" data-author>
            <span class="post-title" title="JS">JS</span>
            <span class="post-date" title="2021-01-01 00:00:00">2021/01/01</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2021/01/01/web/interview/" data-tag="Web,Interview" data-author>
            <span class="post-title" title="interview">interview</span>
            <span class="post-date" title="2021-01-01 00:00:00">2021/01/01</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/12/26/2020/stylus-media/" data-tag="CSS,Stylus" data-author>
            <span class="post-title" title="stylus_media">stylus_media</span>
            <span class="post-date" title="2020-12-26 11:30:02">2020/12/26</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  è¯»ä¹¦Vç”Ÿæ´» " href="/2020/12/01/2020/My/" data-tag="æ—¥å¸¸ç¢ç¢" data-author>
            <span class="post-title" title="My">My</span>
            <span class="post-date" title="2020-12-01 20:09:10">2020/12/01</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/11/05/2020/ç½‘ç»œä¸ƒå±‚ç»“æ„/" data-tag="HTTP" data-author>
            <span class="post-title" title="ç½‘ç»œä¸ƒå±‚ç»“æ„">ç½‘ç»œä¸ƒå±‚ç»“æ„</span>
            <span class="post-date" title="2020-11-05 11:20:37">2020/11/05</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/10/28/2020/HTTPå¸¸è§çŠ¶æ€ç /" data-tag="HTTP" data-author>
            <span class="post-title" title="HTTPå¸¸è§çŠ¶æ€ç ">HTTPå¸¸è§çŠ¶æ€ç </span>
            <span class="post-date" title="2020-10-28 09:29:34">2020/10/28</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/09/29/2020/JSè®¾è®¡æ¨¡å¼/" data-tag="JavaScript" data-author>
            <span class="post-title" title="JSè®¾è®¡æ¨¡å¼">JSè®¾è®¡æ¨¡å¼</span>
            <span class="post-date" title="2020-09-29 21:56:10">2020/09/29</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/09/28/2020/JSæ¨¡å—åŒ–æ¼”è¿›/" data-tag="JavaScript" data-author>
            <span class="post-title" title="JSæ¨¡å—åŒ–æ¼”è¿›">JSæ¨¡å—åŒ–æ¼”è¿›</span>
            <span class="post-date" title="2020-09-28 09:21:32">2020/09/28</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/09/23/2020/åƒåœ¾å›æ”¶æœºåˆ¶/" data-tag="JavaScript" data-author>
            <span class="post-title" title="åƒåœ¾å›æ”¶æœºåˆ¶">åƒåœ¾å›æ”¶æœºåˆ¶</span>
            <span class="post-date" title="2020-09-23 22:39:54">2020/09/23</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/08/11/2020/XSS-CSRF/" data-tag="JavaScript,HTTP" data-author>
            <span class="post-title" title="XSS-CSRF">XSS-CSRF</span>
            <span class="post-date" title="2020-08-11 21:57:03">2020/08/11</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/07/09/2020/ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹/" data-tag="HTTP" data-author>
            <span class="post-title" title="ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹">ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹</span>
            <span class="post-date" title="2020-07-09 21:09:28">2020/07/09</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/07/09/2020/HTTPSè¿æ¥è¿‡ç¨‹/" data-tag="HTTP" data-author>
            <span class="post-title" title="HTTPSè¿æ¥è¿‡ç¨‹">HTTPSè¿æ¥è¿‡ç¨‹</span>
            <span class="post-date" title="2020-07-09 00:00:00">2020/07/09</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/06/30/2020/async-awaitåŸç†/" data-tag="JavaScript" data-author>
            <span class="post-title" title="async/awaitåŸç†">async/awaitåŸç†</span>
            <span class="post-date" title="2020-06-30 20:03:07">2020/06/30</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å·¥å…· " href="/2020/06/21/2020/Vueæ•°æ®åŒå‘ç»‘å®šåŸç†/" data-tag="Vue" data-author>
            <span class="post-title" title="Vueå“åº”å¼åŸç†">Vueå“åº”å¼åŸç†</span>
            <span class="post-date" title="2020-06-21 20:02:10">2020/06/21</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/06/12/2020/EventLoop/" data-tag="JavaScript" data-author>
            <span class="post-title" title="EventLoop">EventLoop</span>
            <span class="post-date" title="2020-06-12 12:20:39">2020/06/12</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/05/11/2020/corsè·¨åŸŸ/" data-tag="JavaScript,HTTP" data-author>
            <span class="post-title" title="è·¨åŸŸè®¿é—®">è·¨åŸŸè®¿é—®</span>
            <span class="post-date" title="2020-05-11 20:38:10">2020/05/11</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2020/02/03/2020/é‡ç»˜å›æµ/" data-tag="JavaScript,CSS,HTML" data-author>
            <span class="post-title" title="é‡ç»˜å›æµ">é‡ç»˜å›æµ</span>
            <span class="post-date" title="2020-02-03 00:00:00">2020/02/03</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å·¥å…· " href="/2020/01/23/2020/Vueçš„nextTickå‰–æ/" data-tag="Vue" data-author>
            <span class="post-title" title="Vueçš„nextTickå‰–æ">Vueçš„nextTickå‰–æ</span>
            <span class="post-date" title="2020-01-23 16:42:30">2020/01/23</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å·¥å…· " href="/2020/01/17/2020/Vue-Diff/" data-tag="Vue,è½¬è½½" data-author>
            <span class="post-title" title="Vueè™šæ‹ŸèŠ‚ç‚¹VNodeDiffç®—æ³•">Vueè™šæ‹ŸèŠ‚ç‚¹VNodeDiffç®—æ³•</span>
            <span class="post-date" title="2020-01-17 20:17:56">2020/01/17</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/12/15/2019/JSåŸå‹é“¾/" data-tag="JavaScipt" data-author>
            <span class="post-title" title="JSåŸå‹é“¾">JSåŸå‹é“¾</span>
            <span class="post-date" title="2019-12-15 22:48:23">2019/12/15</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/11/01/2019/è¸©å‘eChartså‚æ•°/" data-tag="è¸©å‘" data-author>
            <span class="post-title" title="è¸©å‘eChartså‚æ•°">è¸©å‘eChartså‚æ•°</span>
            <span class="post-date" title="2019-11-01 18:51:02">2019/11/01</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/10/17/2019/thisæŒ‡å‘/" data-tag="JavaScript" data-author>
            <span class="post-title" title="thisæŒ‡å‘">thisæŒ‡å‘</span>
            <span class="post-date" title="2019-10-17 22:33:39">2019/10/17</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/09/26/2019/ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ /" data-tag="Vue,Element" data-author>
            <span class="post-title" title="ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ ">ä¸€ä¸ªå¤±ç„¦æŒ‡ä»¤çš„å­¦ä¹ </span>
            <span class="post-date" title="2019-09-26 17:41:35">2019/09/26</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  è¯»ä¹¦Vç”Ÿæ´» " href="/2019/06/27/2019/æ¯•ä¸šäº†/" data-tag="æ—¥å¸¸ç¢ç¢" data-author>
            <span class="post-title" title="æ¯•ä¸šäº†">æ¯•ä¸šäº†</span>
            <span class="post-date" title="2019-06-27 19:48:20">2019/06/27</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/05/13/2019/Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»/" data-tag="CSS,å¸ƒå±€" data-author>
            <span class="post-title" title="Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»">Flexå¸ƒå±€çš„åŸºæœ¬å±æ€§ä»‹ç»</span>
            <span class="post-date" title="2019-05-13 13:22:26">2019/05/13</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å·¥å…· " href="/2019/04/09/2019/Gulpæºç åˆ†æå­¦ä¹ -ä¸‰/" data-tag="Gulp,æºç " data-author>
            <span class="post-title" title="Gulpæºç åˆ†æå­¦ä¹ (ä¸‰">Gulpæºç åˆ†æå­¦ä¹ (ä¸‰</span>
            <span class="post-date" title="2019-04-09 08:51:45">2019/04/09</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å·¥å…· " href="/2019/04/06/2019/Gulpæºç åˆ†æå­¦ä¹ -äºŒ/" data-tag="Gulp,æºç " data-author>
            <span class="post-title" title="Gulpæºç åˆ†æå­¦ä¹ (äºŒ">Gulpæºç åˆ†æå­¦ä¹ (äºŒ</span>
            <span class="post-date" title="2019-04-06 13:47:27">2019/04/06</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å·¥å…· " href="/2019/04/05/2019/Gulpæºç åˆ†æå­¦ä¹ -ä¸€/" data-tag="Gulp,æºç " data-author>
            <span class="post-title" title="Gulpæºç åˆ†æå­¦ä¹ (ä¸€">Gulpæºç åˆ†æå­¦ä¹ (ä¸€</span>
            <span class="post-date" title="2019-04-05 16:41:26">2019/04/05</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  åç«¯ " href="/2019/03/30/2019/Nodeè¯»å–å›¾ç‰‡å¹¶è½¬Base64/" data-tag="Node" data-author>
            <span class="post-title" title="Nodeè¯»å–å›¾ç‰‡å¹¶è½¬Base64">Nodeè¯»å–å›¾ç‰‡å¹¶è½¬Base64</span>
            <span class="post-date" title="2019-03-30 00:12:42">2019/03/30</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/03/26/2019/Gridå¸ƒå±€/" data-tag="CSS,å¸ƒå±€,è½¬è½½" data-author>
            <span class="post-title" title="Gridå¸ƒå±€">Gridå¸ƒå±€</span>
            <span class="post-date" title="2019-03-26 10:50:48">2019/03/26</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/03/03/2019/é˜»æ­¢å†’æ³¡ã€é»˜è®¤äº‹ä»¶/" data-tag="JavaScript,HTML" data-author>
            <span class="post-title" title="é˜»æ­¢å†’æ³¡ã€é»˜è®¤äº‹ä»¶">é˜»æ­¢å†’æ³¡ã€é»˜è®¤äº‹ä»¶</span>
            <span class="post-date" title="2019-03-03 20:30:42">2019/03/03</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/03/03/2019/CSSæ¸…é™¤æµ®åŠ¨/" data-tag="CSS" data-author>
            <span class="post-title" title="CSSæ¸…é™¤æµ®åŠ¨çš„å‡ ç§æ–¹å¼">CSSæ¸…é™¤æµ®åŠ¨çš„å‡ ç§æ–¹å¼</span>
            <span class="post-date" title="2019-03-03 19:29:44">2019/03/03</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/03/01/2019/marginé‡å ä»¥åŠè§£å†³åŠæ³•/" data-tag="JavaScript,CSS,HTML" data-author>
            <span class="post-title" title="marginé‡å ä»¥åŠè§£å†³åŠæ³•">marginé‡å ä»¥åŠè§£å†³åŠæ³•</span>
            <span class="post-date" title="2019-03-01 23:15:21">2019/03/01</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/03/01/2019/CSSçœç•¥å·å®ç°/" data-tag="CSS,HTML" data-author>
            <span class="post-title" title="CSSçœç•¥å·å®ç°">CSSçœç•¥å·å®ç°</span>
            <span class="post-date" title="2019-03-01 16:09:35">2019/03/01</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å·¥å…· " href="/2019/02/21/2019/Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–/" data-tag="JavaScript,Gulp" data-author>
            <span class="post-title" title="Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–">Gulpå¢é‡ç¼–è¯‘ä¼˜åŒ–</span>
            <span class="post-date" title="2019-02-21 20:14:45">2019/02/21</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/02/18/2019/JavaScriptæ·±æµ…æ‹·è´/" data-tag="JavaScript" data-author>
            <span class="post-title" title="JavaScriptæ·±æµ…æ‹·è´">JavaScriptæ·±æµ…æ‹·è´</span>
            <span class="post-date" title="2019-02-18 20:06:36">2019/02/18</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  åç«¯ " href="/2019/02/10/2019/Node-expressæ–‡ä»¶ä¸Šä¼ ä¸‹è½½/" data-tag="HTML,Node,Express,Element" data-author>
            <span class="post-title" title="Node+Express+Elementå®ç°æ–‡ä»¶ä¸Šä¼ ä¸‹è½½">Node+Express+Elementå®ç°æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</span>
            <span class="post-date" title="2019-02-10 20:59:42">2019/02/10</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  è¯»ä¹¦Vç”Ÿæ´» " href="/2019/02/08/2019/æ–°å¹´å¿«ä¹/" data-tag="æ—¥å¸¸ç¢ç¢" data-author>
            <span class="post-title" title="æ–°å¹´å¿«ä¹">æ–°å¹´å¿«ä¹</span>
            <span class="post-date" title="2019-02-08 22:41:02">2019/02/08</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  åç«¯ " href="/2019/02/02/2019/Node-MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug/" data-tag="Node,Express,MySQL,Bug" data-author>
            <span class="post-title" title="Node+MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug">Node+MySQLé‡Šæ”¾æ•°æ®åº“è¿æ¥çš„Bug</span>
            <span class="post-date" title="2019-02-02 19:42:07">2019/02/02</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/02/02/2019/transformå¯¹fixed/" data-tag="CSS,Bug" data-author>
            <span class="post-title" title="transformçˆ¶å…ƒç´ å¯¹fixedå­å…ƒç´ çš„å½±å“">transformçˆ¶å…ƒç´ å¯¹fixedå­å…ƒç´ çš„å½±å“</span>
            <span class="post-date" title="2019-02-02 10:16:34">2019/02/02</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/02/02/2019/Vueçˆ¶å­é€šä¿¡/" data-tag="JavaScript,Vue" data-author>
            <span class="post-title" title="Vueçˆ¶å­ç»„ä»¶é—´çš„é€šä¿¡">Vueçˆ¶å­ç»„ä»¶é—´çš„é€šä¿¡</span>
            <span class="post-date" title="2019-02-02 09:45:31">2019/02/02</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/01/31/2019/Axiosä½¿ç”¨/" data-tag="JavaScript,Axios,Vue" data-author>
            <span class="post-title" title="Axiosä½¿ç”¨">Axiosä½¿ç”¨</span>
            <span class="post-date" title="2019-01-31 15:14:03">2019/01/31</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/01/24/2019/æ‰‹å†™new-call-apply-bind/" data-tag="JavaScript" data-author>
            <span class="post-title" title="æ‰‹å†™newã€callã€applyã€bind">æ‰‹å†™newã€callã€applyã€bind</span>
            <span class="post-date" title="2019-01-24 19:21:39">2019/01/24</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/01/23/2019/JavaScriptç»§æ‰¿/" data-tag="JavaScript" data-author>
            <span class="post-title" title="JavaScriptç»§æ‰¿">JavaScriptç»§æ‰¿</span>
            <span class="post-date" title="2019-01-23 15:29:41">2019/01/23</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å‰ç«¯ " href="/2019/01/23/2019/JavaScriptåˆ›å»ºå¯¹è±¡/" data-tag="JavaScript" data-author>
            <span class="post-title" title="JavaScriptåˆ›å»ºå¯¹è±¡">JavaScriptåˆ›å»ºå¯¹è±¡</span>
            <span class="post-date" title="2019-01-23 14:10:25">2019/01/23</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  å·¥å…· " href="/2019/01/23/2019/Gitç›¸å…³å‘½ä»¤/" data-tag="Git" data-author>
            <span class="post-title" title="Gitç›¸å…³å‘½ä»¤">Gitç›¸å…³å‘½ä»¤</span>
            <span class="post-date" title="2019-01-23 09:45:11">2019/01/23</span>
        </a>
        
        <a class="å…¨éƒ¨æ–‡ç«  è¯»ä¹¦Vç”Ÿæ´» " href="/2019/01/23/2019/é˜…è¯»æ‘˜å½•/" data-tag="ä¹¦ç±æ‘˜å½•" data-author>
            <span class="post-title" title="é˜…è¯»æ‘˜å½•">é˜…è¯»æ‘˜å½•</span>
            <span class="post-date" title="2019-01-23 08:56:01">2019/01/23</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-2021/JSæ‰‹å†™Promise" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">JSæ‰‹å†™Promise</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a data-rel="å‰ç«¯">å‰ç«¯</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color1">JavaScript</a>
            
            <a class="color3">è½¬è½½</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            å‘å¸ƒæ—¶é—´ : <time class="date" title="æœ€åæ›´æ–°: 2021-04-23 14:11:27">2021-04-01 20:08</time>
        
    </div>
    <div class="article-meta">
        
        <span>å­—æ•°:2.2k</span>
        
        
        <span id="busuanzi_container_page_pv">
            é˜…è¯» :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼€å§‹"><span class="toc-text">å¼€å§‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#å®šä¹‰Promise"><span class="toc-text">å®šä¹‰Promise</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è§£å†³åŸºæœ¬çŠ¶æ€"><span class="toc-text">è§£å†³åŸºæœ¬çŠ¶æ€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#then"><span class="toc-text">then</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æš´éœ²Promise"><span class="toc-text">æš´éœ²Promise</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#åŠ å…¥å¼‚æ­¥"><span class="toc-text">åŠ å…¥å¼‚æ­¥</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¼“å­˜æˆåŠŸå¤±è´¥å›è°ƒ"><span class="toc-text">ç¼“å­˜æˆåŠŸå¤±è´¥å›è°ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#thenä¸­å¢åŠ PENDINGçš„å¤„ç†"><span class="toc-text">thenä¸­å¢åŠ PENDINGçš„å¤„ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#resolve-rejectè°ƒç”¨å›è°ƒ"><span class="toc-text">resolve\rejectè°ƒç”¨å›è°ƒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#thenå›è°ƒ"><span class="toc-text">thenå›è°ƒ</span></a></li>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-6 i,
    .toc-level-6 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>è½¬è½½è‡³æ˜é‡‘æ–‡ç« ï¼Œæ¨èæŸ¥çœ‹åŸæ–‡</em></p>
<ol>
<li>ğŸ‘‰ï¼š<a href="https://juejin.cn/post/6844903625769091079" target="_blank" rel="noopener">BATå‰ç«¯ç»å…¸é¢è¯•é—®é¢˜ï¼šå²ä¸Šæœ€æœ€æœ€è¯¦ç»†çš„æ‰‹å†™Promiseæ•™ç¨‹</a></li>
<li>ğŸ‘‰ï¼š<a href="https://juejin.cn/post/6945319439772434469" target="_blank" rel="noopener">ä»ä¸€é“è®©æˆ‘å¤±çœ çš„ Promise é¢è¯•é¢˜å¼€å§‹ï¼Œæ·±å…¥åˆ†æ Promise å®ç°ç»†èŠ‚</a></li>
</ol>
<h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><h4 id="å®šä¹‰Promise"><a href="#å®šä¹‰Promise" class="headerlink" title="å®šä¹‰Promise"></a>å®šä¹‰Promise</h4><p>ä¸€èˆ¬ä½¿ç”¨</p>
<pre><code>new Promise((resolve, reject) =&gt; {
    xxx
})
</code></pre><p><em>so</em></p>
<pre><code>class Promise {
    constructor(executor) {
        executor(this.resolve, this.reject)
    }
    resolve = () =&gt; {};
    reject = () =&gt; {};
}
</code></pre><a id="more"></a>
<h4 id="è§£å†³åŸºæœ¬çŠ¶æ€"><a href="#è§£å†³åŸºæœ¬çŠ¶æ€" class="headerlink" title="è§£å†³åŸºæœ¬çŠ¶æ€"></a>è§£å†³åŸºæœ¬çŠ¶æ€</h4><ol>
<li>pendingï¼Œ fulfilledï¼Œ rejected</li>
<li>pending -&gt; fulfilled / rejected</li>
<li>å…¶ä»–ä¸å¯äº’è½¬</li>
<li>new Promise((resolve, reject) =&gt; {resolve(value)})ï¼ŒresolveæˆåŠŸæ—¶ï¼Œæ¥å—å‚æ•°valueï¼ŒçŠ¶æ€æ”¹ä¸ºfulfilledï¼Œä¸”ä¸å¯å˜ã€‚</li>
<li>new Promise((resolve, reject) =&gt; {reject(reason)})ï¼Œrejectå¤±è´¥æ—¶ï¼Œæ¥æ”¶reasonï¼ŒçŠ¶æ€ä¸ºrejectedï¼Œä¸”ä¸å¯å†å˜ã€‚</li>
<li>è‹¥executoræŠ¥é”™ï¼Œåˆ™ç›´æ¥rejectedã€‚</li>
</ol>
<p><em>so</em></p>
<pre><code>const PENDING = &#39;pending&#39;;
const FULFILLED = &#39;fulfilled&#39;;
const REJECTED = &#39;rejected&#39;;
class Promise {
    constructor(executor) {
        executor(this.resolve, this.reject);
    }

    state = PENDING

    value = undefined; // å­˜å‚¨æˆåŠŸå€¼
    reason = null; // å­˜å‚¨å¤±è´¥å€¼

    resolve = (value) =&gt; {
        // åªæœ‰çŠ¶æ€æ˜¯ç­‰å¾…ï¼Œæ‰æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹
        if (this.status === PENDING) {
        // çŠ¶æ€ä¿®æ”¹ä¸ºæˆåŠŸ
        this.status = FULFILLED;
        // ä¿å­˜æˆåŠŸä¹‹åçš„å€¼
        this.value = value;
        }
    }
     reject = (reason) =&gt; {
        // åªæœ‰çŠ¶æ€æ˜¯ç­‰å¾…ï¼Œæ‰æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹
        if (this.status === PENDING) {
        // çŠ¶æ€æˆåŠŸä¸ºå¤±è´¥
        this.status = REJECTED;
        // ä¿å­˜å¤±è´¥åçš„åŸå› 
        this.reason = reason;
        }
    }
}
</code></pre><h4 id="then"><a href="#then" class="headerlink" title="then"></a>then</h4><ol>
<li>Promiseæœ‰ä¸€ä¸ªthenï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªå‚æ•°ï¼ŒonFulfilledï¼ŒonRejectedï¼›</li>
<li>å½“stateä¸ºfulfilledï¼Œåˆ™æ‰§è¡ŒonFulfilledï¼Œå¹¶ä¼ å…¥this.valueï¼›</li>
<li>å½“stateä¸ºrejectedï¼Œåˆ™æ‰§è¡ŒonRejectedï¼Œå¹¶ä¼ å…¥this.reasonã€‚</li>
</ol>
<pre><code>class Promise{ 
    constructor(executor) {
        ...
    }
    then(onFulfilled, onRejected) {
        if(this.state === &#39;fulfilled&#39;) {
            onFulfilled(this.value); // ä¼ å…¥ï¼Œå¹¶æ‰§è¡ŒonFulfilled
        }
        if(this.state === &#39;rejected&#39;) {
            onRejected(this.reason); // ä¼ å…¥ï¼Œå¹¶æ‰§è¡ŒonRejected
        }

    }
}
</code></pre><h4 id="æš´éœ²Promise"><a href="#æš´éœ²Promise" class="headerlink" title="æš´éœ²Promise"></a>æš´éœ²Promise</h4><pre><code>module.export = Promise;
</code></pre><h2 id="åŠ å…¥å¼‚æ­¥"><a href="#åŠ å…¥å¼‚æ­¥" class="headerlink" title="åŠ å…¥å¼‚æ­¥"></a>åŠ å…¥å¼‚æ­¥</h2><h4 id="ç¼“å­˜æˆåŠŸå¤±è´¥å›è°ƒ"><a href="#ç¼“å­˜æˆåŠŸå¤±è´¥å›è°ƒ" class="headerlink" title="ç¼“å­˜æˆåŠŸå¤±è´¥å›è°ƒ"></a>ç¼“å­˜æˆåŠŸå¤±è´¥å›è°ƒ</h4><p>onFulfilledCallback = null;<br>onRejectedCallback = null;</p>
<h4 id="thenä¸­å¢åŠ PENDINGçš„å¤„ç†"><a href="#thenä¸­å¢åŠ PENDINGçš„å¤„ç†" class="headerlink" title="thenä¸­å¢åŠ PENDINGçš„å¤„ç†"></a>thenä¸­å¢åŠ PENDINGçš„å¤„ç†</h4><pre><code>then(onFulfilled, onRejected) {
    if(this.state === FULFILLED) {
        onFulfilled(this.value); // ä¼ å…¥ï¼Œå¹¶æ‰§è¡ŒonFulfilled
    }
    if(this.state === REJECTED) {
        onRejected(this.reason); // ä¼ å…¥ï¼Œå¹¶æ‰§è¡ŒonRejected
    }
    if(this.state === PENDING) {
        // å…ˆç¼“å­˜ï¼Œç­‰ç­‰åç»­çŠ¶æ€å˜åŒ–åæ‰§è¡Œ
        this.onFulfilledCallback = onFulfilled;
        this.onRejectedCallback  = onRejected;
    }

}
</code></pre><h4 id="resolve-rejectè°ƒç”¨å›è°ƒ"><a href="#resolve-rejectè°ƒç”¨å›è°ƒ" class="headerlink" title="resolve\rejectè°ƒç”¨å›è°ƒ"></a>resolve\rejectè°ƒç”¨å›è°ƒ</h4><pre><code>resolve = value =&gt; {
    if(this.state === PENDING) {
        this.state = FULFILLED;
        this.value = value;
        this.onFulfilledCallback &amp;&amp; this.onFulfilledCallback(this.value)
    }
}


reject = reason =&gt; {
    if(this.state === PENDING) {
        this.reason =reason;
        this.state = REJECTED;
        this.onRejectedCallback &amp;&amp; this.onFulfilledCallback(this.reason)
    }
}

</code></pre><h2 id="thenå›è°ƒ"><a href="#thenå›è°ƒ" class="headerlink" title="thenå›è°ƒ"></a>thenå›è°ƒ</h2><p>å¤šä¸ªthenå›è°ƒçš„è¯ï¼Œéœ€è¦ä¿å­˜ä¸åŒçš„å€¼ï¼Œå› ä¸ºäº’ä¸ç›¸åŒã€‚</p>
<ol>
<li><p>Promiseä¸­å›è°ƒå¤„ç†ä¸ºæ•°ç»„ã€‚</p>
<pre><code>onFulfilledCallbacks = [];
onnRejectedCallbacks = [];
</code></pre></li>
<li><p>å›è°ƒå‡½æ•°å­˜å…¥æ•°ç»„<br><code>`</code><br>then(onFulfilled, onRejected) {</p>
<p> if(this.status === FULFILLED){</p>
<pre><code> onFulfilled(this.value);
</code></pre><p> } else if (this.status === REJECTED) {</p>
<pre><code> onRejected(this.reason);
</code></pre><p> } else if (this.status === PENDING) {</p>
<pre><code> this.onFulfilledCallbacks.push(onFulfilled);
 this.onRejectedCallbacks.push(onRejected);
</code></pre><p> }<br>}</p>
</li>
</ol>
<pre><code>
</code></pre><p>resolve = (value) =&gt; {<br>     if (this.status === PENDING) {<br>         this.status = FULFILLED;<br>         this.value = value;<br>         // resolveé‡Œé¢å°†æ‰€æœ‰æˆåŠŸçš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ<br>         while (this.onFulfilledCallbacks.length) {<br>             // Array.shift() å–å‡ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åï¼ˆï¼‰è°ƒç”¨ï¼Œshiftä¸æ˜¯çº¯å‡½æ•°ï¼Œå–å‡ºåï¼Œæ•°ç»„å°†å¤±å»è¯¥å…ƒç´ ï¼Œç›´åˆ°æ•°ç»„ä¸ºç©º<br>             this.onFulfilledCallbacks.shift()(value)<br>        }<br>    }<br>}</p>
<pre><code>
</code></pre><p>reject = reason =&gt; {<br>    if(this.status === PENDING) {<br>        this.status = REJECTED;<br>        this.reason = reason;<br>        while(this.onRejectedCallbacks.length) {<br>            this.onRejectedCallbacks.shift()(reason);<br>        }<br>    }<br>}</p>
<pre><code>*soï¼Œæˆªè‡³ç›®å‰æˆ‘ä»¬çš„Promiseæ˜¯è¿™æ ·çš„*

</code></pre><p>const PENDING = â€˜pendingâ€™;<br>const FULFILLED = â€˜fulfilledâ€™;<br>const REJECTED = â€˜rejectedâ€™;<br>onFulfilledCallbacks = [];<br>onnRejectedCallbacks = [];<br>class Promise {<br>    constructor(executor) {<br>        executor(this.resolve, this.reject);<br>    }</p>
<pre><code>state = PENDING

value = undefined; // å­˜å‚¨æˆåŠŸå€¼
reason = null; // å­˜å‚¨å¤±è´¥å€¼

resolve = (value) =&gt; {     
     if (this.status === PENDING) {         
         this.status = FULFILLED;          
         this.value = value;        
         // resolveé‡Œé¢å°†æ‰€æœ‰æˆåŠŸçš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ     
         while (this.onFulfilledCallbacks.length) {       
             // Array.shift() å–å‡ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åï¼ˆï¼‰è°ƒç”¨ï¼Œshiftä¸æ˜¯çº¯å‡½æ•°ï¼Œå–å‡ºåï¼Œæ•°ç»„å°†å¤±å»è¯¥å…ƒç´ ï¼Œç›´åˆ°æ•°ç»„ä¸ºç©º       
             this.onFulfilledCallbacks.shift()(value)    
        }   
    } 
}
reject = reason =&gt; {
    if(this.status === PENDING) {
        this.status = REJECTED;
        this.reason = reason;
        while(this.onRejectedCallbacks.length) {
            this.onRejectedCallbacks.shift()(reason);
        }
    }
}
then(onFulfilled, onRejected) {

    if(this.status === FULFILLED){
        onFulfilled(this.value);
    } else if (this.status === REJECTED) {
        onRejected(this.reason);
    } else if (this.status === PENDING) {
        this.onFulfilledCallbacks.push(onFulfilled);
        this.onRejectedCallbacks.push(onRejected);
    }
}
</code></pre><p>}<br>module.export = Promise;</p>
<pre><code>
#### thençš„é“¾å¼è°ƒç”¨

å¦‚ä½•å®ç°thençš„é“¾å¼è°ƒç”¨å‘¢ï¼Ÿ
åœ¨thené‡Œé¢è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡å—

</code></pre><p>class Promise() {<br>    // â€¦<br>    then(onFulfilled, onRejected) {<br>        const promise2 = new Promise((resolve, reject) =&gt; {<br>            if(this.status === PENDING ) {<br>                this.onFulfilledCallbacks.push(onFulfilled);<br>                this.onRejectedCallbacks.push(onRejected);<br>            } else if (this.status === REJECTED) {<br>                onRejected(this.reason);<br>            } else if (this.status === FULFILLED) {<br>                const x = onFulfilled(this.value);<br>                resolvePromise(x, resolve, reject);<br>            }<br>        });<br>        return promise2;<br>    }<br>}</p>
<p>function resolvePromise(x, resolve, reject) {<br>    // åˆ¤æ–­æ˜¯ä¸æ˜¯Promiseçš„å®ä¾‹<br>    if(x instanceof Promise) {<br>        // æ˜¯çš„è¯ï¼Œæ‰§è¡Œthen<br>        x.then(resolve, reject)<br>    } else {<br>        // å¦åˆ™resolve<br>        resolve(x);<br>    }<br>}</p>
<pre><code>
å¦‚æœxæ˜¯è‡ªå·±çš„è¯ï¼Œåˆ™åº”è¯¥æœ‰é”™è¯¯å¤„ç†

</code></pre><p>class Promise {<br>  â€¦â€¦<br>  then(onFulfilled, onRejected) {<br>    const promise2 = new MyPromise((resolve, reject) =&gt; {<br>      if (this.status === FULFILLED) {<br>        // åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ–<br>        queueMicrotask(() =&gt; {<br>            const x = onFulfilled(this.value);<br>            resolvePromise(promise2, x, resolve, reject);<br>        })<br>      } else if (this.status === REJECTED) {<br>      â€¦â€¦<br>    }) </p>
<pre><code>return promise2;
</code></pre><p>  }<br>}</p>
<p>function resolvePromise(promise2, x, resolve, reject) {<br>    if(promise2 === x) {<br>        return reject(â€˜â€¦â€™)<br>    }<br>    //â€¦<br>}</p>
<pre><code>
## é”™è¯¯æ•è·

tryï¼Œcatchå°±å¯ä»¥äº†


#### æ•è·æ‰§è¡Œå™¨é”™è¯¯
</code></pre><p>constructor(executor) {<br>    try{<br>        executor(this.resolve, this.reject);<br>    } catch(e) {<br>        this.reject(e)<br>    }<br>}</p>
<pre><code>
#### thenæ‰§è¡Œé”™è¯¯

</code></pre><p>then(onFulfilled, onRejected) {<br>    const proimise2 = new Promise((resolve, reject) =&gt; {<br>        if(this.status === PENDING) {<br>            this.onFulfilledCallbacks.push(onFulfilled)<br>            this.onRejectedCallbacks.push(onRejected)<br>        } else if (this.status === REJECTED) {<br>            onRejected(this.reason);<br>        } else if (this.status === FULFILLED) {<br>            queueMicrotask(() =&gt; {<br>                // å¢åŠ  try å¤„ç†<br>                try {<br>                    const x = onFulfilled(this.value);<br>                    resolvePromise(promise2, x, resolve, reject);<br>                } catch(e) {<br>                    reject(e);<br>                }<br>            })<br>        }<br>    });<br>    return promise2;<br>}</p>
<pre><code>

æ•´ç†ä¸€ä¸‹ï¼š

</code></pre><p>then(onFulfilled, onRejected) {<br>  // ä¸ºäº†é“¾å¼è°ƒç”¨è¿™é‡Œç›´æ¥åˆ›å»ºä¸€ä¸ª MyPromiseï¼Œå¹¶åœ¨åé¢ return å‡ºå»<br>  const promise2 = new Promise((resolve, reject) =&gt; {<br>    // åˆ¤æ–­çŠ¶æ€<br>    if (this.status === FULFILLED) {<br>      // åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ–<br>      queueMicrotask(() =&gt; {<br>        try {<br>          // è·å–æˆåŠŸå›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœ<br>          const x = onFulfilled(this.value);<br>          // ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†<br>          resolvePromise(promise2, x, resolve, reject);<br>        } catch (error) {<br>          reject(error)<br>        }<br>      })<br>    } else if (this.status === REJECTED) {<br>      // ==== æ–°å¢ ====<br>      // åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ–<br>      queueMicrotask(() =&gt; {<br>        try {<br>          // è°ƒç”¨å¤±è´¥å›è°ƒï¼Œå¹¶ä¸”æŠŠåŸå› è¿”å›<br>          const x = onRejected(this.reason);<br>          // ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†<br>          resolvePromise(promise2, x, resolve, reject);<br>        } catch (error) {<br>          reject(error)<br>        }<br>      })<br>    } else if (this.status === PENDING) {<br>      // ç­‰å¾…<br>      // å› ä¸ºä¸çŸ¥é“åé¢çŠ¶æ€çš„å˜åŒ–æƒ…å†µï¼Œæ‰€ä»¥å°†æˆåŠŸå›è°ƒå’Œå¤±è´¥å›è°ƒå­˜å‚¨èµ·æ¥<br>      // ç­‰åˆ°æ‰§è¡ŒæˆåŠŸå¤±è´¥å‡½æ•°çš„æ—¶å€™å†ä¼ é€’<br>      this.onFulfilledCallbacks.push(() =&gt; {<br>        // ==== æ–°å¢ ====<br>        queueMicrotask(() =&gt; {<br>          try {<br>            // è·å–æˆåŠŸå›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœ<br>            const x = onFulfilled(this.value);<br>            // ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†<br>            resolvePromise(promise2, x, resolve, reject);<br>          } catch (error) {<br>            reject(error)<br>          }<br>        })<br>      });<br>      this.onRejectedCallbacks.push(() =&gt; {<br>        // ==== æ–°å¢ ====<br>        queueMicrotask(() =&gt; {<br>          try {<br>            // è°ƒç”¨å¤±è´¥å›è°ƒï¼Œå¹¶ä¸”æŠŠåŸå› è¿”å›<br>            const x = onRejected(this.reason);<br>            // ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†<br>            resolvePromise(promise2, x, resolve, reject);<br>          } catch (error) {<br>            reject(error)<br>          }<br>        })<br>      });<br>    }<br>  }) </p>
<p>  return promise2;<br>}</p>
<pre><code>

## å…¶ä½™ä¼˜åŒ–

#### å®ç°resolveï¼Œrejectçš„é™æ€è°ƒç”¨

Promiseæ”¯æŒå¦‚ä¸‹æ‰§è¡Œï¼š
</code></pre><p>Promise.resolve().then(value =&gt; {<br>    xxx<br>});</p>
<pre><code>
å› æ­¤è¿˜éœ€è¦ä¿®æ”¹ä¸€ä¸‹ï¼Œå¢åŠ é™æ€æ–¹æ³•

</code></pre><p>static resolve(param) {<br>    if(param instanceof Promise) {<br>        return param;<br>    }<br>    return new Promise(resolve =&gt; {<br>        resolve(param)<br>    })<br>}<br>static reject (reason) {<br>    return new MyPromise((resolve, reject) =&gt; {<br>      reject(reason);<br>    });<br>}</p>
<pre><code>

## æœ€ç»ˆ

</code></pre><p>// Promise.js</p>
<p>// å…ˆå®šä¹‰ä¸‰ä¸ªå¸¸é‡è¡¨ç¤ºçŠ¶æ€<br>const PENDING = â€˜pendingâ€™;<br>const FULFILLED = â€˜fulfilledâ€™;<br>const REJECTED = â€˜rejectedâ€™;</p>
<p>// æ–°å»º Promise ç±»<br>class Promise {<br>  constructor(executor){<br>    // executor æ˜¯ä¸€ä¸ªæ‰§è¡Œå™¨ï¼Œè¿›å…¥ä¼šç«‹å³æ‰§è¡Œ<br>    // å¹¶ä¼ å…¥resolveå’Œrejectæ–¹æ³•<br>    try {<br>      executor(this.resolve, this.reject)<br>    } catch (error) {<br>      this.reject(error)<br>    }<br>  }</p>
<p>  // å‚¨å­˜çŠ¶æ€çš„å˜é‡ï¼Œåˆå§‹å€¼æ˜¯ pending<br>  status = PENDING;<br>  // æˆåŠŸä¹‹åçš„å€¼<br>  value = null;<br>  // å¤±è´¥ä¹‹åçš„åŸå› <br>  reason = null;</p>
<p>  // å­˜å‚¨æˆåŠŸå›è°ƒå‡½æ•°<br>  onFulfilledCallbacks = [];<br>  // å­˜å‚¨å¤±è´¥å›è°ƒå‡½æ•°<br>  onRejectedCallbacks = [];</p>
<p>  // æ›´æ”¹æˆåŠŸåçš„çŠ¶æ€<br>  resolve = (value) =&gt; {<br>    // åªæœ‰çŠ¶æ€æ˜¯ç­‰å¾…ï¼Œæ‰æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹<br>    if (this.status === PENDING) {<br>      // çŠ¶æ€ä¿®æ”¹ä¸ºæˆåŠŸ<br>      this.status = FULFILLED;<br>      // ä¿å­˜æˆåŠŸä¹‹åçš„å€¼<br>      this.value = value;<br>      // resolveé‡Œé¢å°†æ‰€æœ‰æˆåŠŸçš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ<br>      while (this.onFulfilledCallbacks.length) {<br>        // Array.shift() å–å‡ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åï¼ˆï¼‰è°ƒç”¨ï¼Œshiftä¸æ˜¯çº¯å‡½æ•°ï¼Œå–å‡ºåï¼Œæ•°ç»„å°†å¤±å»è¯¥å…ƒç´ ï¼Œç›´åˆ°æ•°ç»„ä¸ºç©º<br>        this.onFulfilledCallbacks.shift()(value)<br>      }<br>    }<br>  }</p>
<p>  // æ›´æ”¹å¤±è´¥åçš„çŠ¶æ€<br>  reject = (reason) =&gt; {<br>    // åªæœ‰çŠ¶æ€æ˜¯ç­‰å¾…ï¼Œæ‰æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹<br>    if (this.status === PENDING) {<br>      // çŠ¶æ€æˆåŠŸä¸ºå¤±è´¥<br>      this.status = REJECTED;<br>      // ä¿å­˜å¤±è´¥åçš„åŸå› <br>      this.reason = reason;<br>      // resolveé‡Œé¢å°†æ‰€æœ‰å¤±è´¥çš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ<br>      while (this.onRejectedCallbacks.length) {<br>        this.onRejectedCallbacks.shift()(reason)<br>      }<br>    }<br>  }</p>
<p>  then(onFulfilled, onRejected) {<br>    const realOnFulfilled = typeof onFulfilled === â€˜functionâ€™ ? onFulfilled : value =&gt; value;<br>    const realOnRejected = typeof onRejected === â€˜functionâ€™ ? onRejected : reason =&gt; {throw reason};</p>
<pre><code>// ä¸ºäº†é“¾å¼è°ƒç”¨è¿™é‡Œç›´æ¥åˆ›å»ºä¸€ä¸ª MyPromiseï¼Œå¹¶åœ¨åé¢ return å‡ºå»
const promise2 = new Promise((resolve, reject) =&gt; {
  const fulfilledMicrotask = () =&gt;  {
    // åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ–
    queueMicrotask(() =&gt; {
      try {
        // è·å–æˆåŠŸå›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœ
        const x = realOnFulfilled(this.value);
        // ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†
        resolvePromise(promise2, x, resolve, reject);
      } catch (error) {
        reject(error)
      } 
    })  
  }

  const rejectedMicrotask = () =&gt; { 
    // åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ç­‰å¾… promise2 å®Œæˆåˆå§‹åŒ–
    queueMicrotask(() =&gt; {
      try {
        // è°ƒç”¨å¤±è´¥å›è°ƒï¼Œå¹¶ä¸”æŠŠåŸå› è¿”å›
        const x = realOnRejected(this.reason);
        // ä¼ å…¥ resolvePromise é›†ä¸­å¤„ç†
        resolvePromise(promise2, x, resolve, reject);
      } catch (error) {
        reject(error)
      } 
    }) 
  }
  // åˆ¤æ–­çŠ¶æ€
  if (this.status === FULFILLED) {
    fulfilledMicrotask() 
  } else if (this.status === REJECTED) { 
    rejectedMicrotask()
  } else if (this.status === PENDING) {
    // ç­‰å¾…
    // å› ä¸ºä¸çŸ¥é“åé¢çŠ¶æ€çš„å˜åŒ–æƒ…å†µï¼Œæ‰€ä»¥å°†æˆåŠŸå›è°ƒå’Œå¤±è´¥å›è°ƒå­˜å‚¨èµ·æ¥
    // ç­‰åˆ°æ‰§è¡ŒæˆåŠŸå¤±è´¥å‡½æ•°çš„æ—¶å€™å†ä¼ é€’
    this.onFulfilledCallbacks.push(fulfilledMicrotask);
    this.onRejectedCallbacks.push(rejectedMicrotask);
  }
}) 

return promise2;
</code></pre><p>  }</p>
<p>  // resolve é™æ€æ–¹æ³•<br>  static resolve (parameter) {<br>    // å¦‚æœä¼ å…¥ Promise å°±ç›´æ¥è¿”å›<br>    if (parameter instanceof Promise) {<br>      return parameter;<br>    }</p>
<pre><code>// è½¬æˆå¸¸è§„æ–¹å¼
return new Promise(resolve =&gt;  {
  resolve(parameter);
});
</code></pre><p>  }</p>
<p>  // reject é™æ€æ–¹æ³•<br>  static reject (reason) {<br>    return new Promise((resolve, reject) =&gt; {<br>      reject(reason);<br>    });<br>  }<br>}</p>
<p>function resolvePromise(promise2, x, resolve, reject) {<br>  // å¦‚æœç›¸ç­‰äº†ï¼Œè¯´æ˜returnçš„æ˜¯è‡ªå·±ï¼ŒæŠ›å‡ºç±»å‹é”™è¯¯å¹¶è¿”å›<br>  if (promise2 === x) {<br>    return reject(new TypeError(â€˜Chaining cycle detected for promise #<promise>â€˜))<br>  }<br>  // åˆ¤æ–­xæ˜¯ä¸æ˜¯ Promise å®ä¾‹å¯¹è±¡<br>  if(x instanceof Promise) {<br>    // æ‰§è¡Œ xï¼Œè°ƒç”¨ then æ–¹æ³•ï¼Œç›®çš„æ˜¯å°†å…¶çŠ¶æ€å˜ä¸º fulfilled æˆ–è€… rejected<br>    // x.then(value =&gt; resolve(value), reason =&gt; reject(reason))<br>    // ç®€åŒ–ä¹‹å<br>    x.then(resolve, reject)<br>  } else{<br>    // æ™®é€šå€¼<br>    resolve(x)<br>  }<br>}</promise></p>
<p>module.exports = Promise;</p>
<p><code>`</code></p>

      
       
    </div>
</article>







    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2019-2021 Jayant
</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class id="rocket"></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0"></script>

<script src="/js/script.js?v=1.1.0"></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    

    
</style>







</html>
